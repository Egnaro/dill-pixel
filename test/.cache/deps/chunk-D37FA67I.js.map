{
  "version": 3,
  "sources": ["../../node_modules/@xmldom/xmldom/lib/conventions.js", "../../node_modules/@xmldom/xmldom/lib/dom.js", "../../node_modules/@xmldom/xmldom/lib/entities.js", "../../node_modules/@xmldom/xmldom/lib/sax.js", "../../node_modules/@xmldom/xmldom/lib/dom-parser.js", "../../node_modules/@xmldom/xmldom/lib/index.js", "../../node_modules/pixi.js/src/environment-browser/browserExt.ts", "../../node_modules/pixi.js/src/environment-webworker/webworkerExt.ts", "../../node_modules/pixi.js/lib/filters/blend-modes/blend-template.frag.mjs", "../../node_modules/pixi.js/lib/filters/blend-modes/blend-template.vert.mjs", "../../node_modules/pixi.js/lib/filters/blend-modes/blend-template.wgsl.mjs", "../../node_modules/pixi.js/src/filters/blend-modes/BlendModeFilter.ts", "../../node_modules/pixi.js/src/filters/blend-modes/hls/GLhls.ts", "../../node_modules/pixi.js/src/filters/blend-modes/hls/GPUhls.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/ColorBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/ColorBurnBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/ColorDodgeBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/DarkenBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/DifferenceBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/DivideBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/ExclusionBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/HardLightBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/HardMixBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/LightenBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/LinearBurnBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/LinearDodgeBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/LinearLightBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/LuminosityBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/NegationBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/OverlayBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/PinLightBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/SaturationBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/SoftLightBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/SubtractBlend.ts", "../../node_modules/pixi.js/src/advanced-blend-modes/VividLightBlend.ts", "../../node_modules/pixi.js/src/utils/browser/isWebGLSupported.ts", "../../node_modules/pixi.js/src/utils/browser/isWebGPUSupported.ts", "../../node_modules/pixi.js/src/rendering/renderers/autoDetectRenderer.ts", "../../node_modules/pixi.js/src/app/Application.ts", "../../node_modules/pixi.js/src/scene/text-bitmap/BitmapFont.ts", "../../node_modules/pixi.js/src/scene/text-bitmap/asset/bitmapFontTextParser.ts", "../../node_modules/pixi.js/src/scene/text-bitmap/asset/bitmapFontXMLParser.ts", "../../node_modules/pixi.js/src/scene/text-bitmap/asset/bitmapFontXMLStringParser.ts", "../../node_modules/pixi.js/src/scene/text-bitmap/asset/loadBitmapFont.ts", "../../node_modules/pixi.js/src/assets/BackgroundLoader.ts", "../../node_modules/pixi.js/src/assets/cache/parsers/cacheTextureArray.ts", "../../node_modules/pixi.js/src/assets/detections/utils/testImageFormat.ts", "../../node_modules/pixi.js/src/assets/detections/parsers/detectAvif.ts", "../../node_modules/pixi.js/src/assets/detections/parsers/detectDefaults.ts", "../../node_modules/pixi.js/src/assets/detections/utils/testVideoFormat.ts", "../../node_modules/pixi.js/src/assets/detections/parsers/detectMp4.ts", "../../node_modules/pixi.js/src/assets/detections/parsers/detectOgv.ts", "../../node_modules/pixi.js/src/assets/detections/parsers/detectWebm.ts", "../../node_modules/pixi.js/src/assets/detections/parsers/detectWebp.ts", "../../node_modules/pixi.js/src/assets/loader/Loader.ts", "../../node_modules/pixi.js/src/assets/utils/checkDataUrl.ts", "../../node_modules/pixi.js/src/assets/utils/checkExtension.ts", "../../node_modules/pixi.js/src/assets/loader/parsers/loadJson.ts", "../../node_modules/pixi.js/src/assets/loader/parsers/loadTxt.ts", "../../node_modules/pixi.js/src/assets/loader/parsers/loadWebFont.ts", "../../node_modules/pixi.js/src/utils/network/getResolutionOfUrl.ts", "../../node_modules/pixi.js/src/assets/loader/parsers/textures/utils/createTexture.ts", "../../node_modules/pixi.js/src/assets/loader/parsers/textures/loadSVG.ts", "../../node_modules/pixi.js/lib/_virtual/checkImageBitmap.worker.mjs", "../../node_modules/pixi.js/lib/_virtual/loadImageBitmap.worker.mjs", "../../node_modules/pixi.js/src/assets/loader/workers/WorkerManager.ts", "../../node_modules/pixi.js/src/assets/loader/parsers/textures/loadTextures.ts", "../../node_modules/pixi.js/src/assets/loader/parsers/textures/loadVideoTextures.ts", "../../node_modules/pixi.js/src/assets/resolver/parsers/resolveTextureUrl.ts", "../../node_modules/pixi.js/src/assets/resolver/parsers/resolveJsonUrl.ts", "../../node_modules/pixi.js/src/assets/Assets.ts", "../../node_modules/pixi.js/src/compressed-textures/basis/detectBasis.ts", "../../node_modules/pixi.js/src/rendering/renderers/shared/texture/sources/CompressedSource.ts", "../../node_modules/pixi.js/src/rendering/renderers/gl/texture/utils/getSupportedGlCompressedTextureFormats.ts", "../../node_modules/pixi.js/src/rendering/renderers/gpu/texture/utils/getSupportedGPUCompressedTextureFormats.ts", "../../node_modules/pixi.js/src/rendering/renderers/shared/texture/utils/getSupportedCompressedTextureFormats.ts", "../../node_modules/pixi.js/src/rendering/renderers/shared/texture/utils/getSupportedTextureFormats.ts", "../../node_modules/pixi.js/lib/_virtual/basis.worker.mjs", "../../node_modules/pixi.js/src/compressed-textures/basis/utils/setBasisTranscoderPath.ts", "../../node_modules/pixi.js/src/compressed-textures/basis/worker/loadBasisOnWorker.ts", "../../node_modules/pixi.js/src/compressed-textures/basis/loadBasis.ts", "../../node_modules/pixi.js/src/compressed-textures/dds/const.ts", "../../node_modules/pixi.js/src/compressed-textures/dds/parseDDS.ts", "../../node_modules/pixi.js/src/compressed-textures/dds/loadDDS.ts", "../../node_modules/pixi.js/src/compressed-textures/ktx2/const.ts", "../../node_modules/pixi.js/src/compressed-textures/ktx/parseKTX.ts", "../../node_modules/pixi.js/src/compressed-textures/ktx/loadKTX.ts", "../../node_modules/pixi.js/lib/_virtual/ktx.worker.mjs", "../../node_modules/pixi.js/src/compressed-textures/ktx2/utils/setKTXTranscoderPath.ts", "../../node_modules/pixi.js/src/compressed-textures/ktx2/worker/loadKTX2onWorker.ts", "../../node_modules/pixi.js/src/compressed-textures/ktx2/loadKTX2.ts", "../../node_modules/pixi.js/src/compressed-textures/shared/resolveCompressedTextureUrl.ts", "../../node_modules/pixi.js/src/compressed-textures/shared/detectCompressed.ts", "../../node_modules/pixi.js/src/culling/Culler.ts", "../../node_modules/pixi.js/src/culling/CullerPlugin.ts", "../../node_modules/pixi.js/lib/filters/defaults/defaultFilter.vert.mjs", "../../node_modules/pixi.js/lib/filters/defaults/alpha/alpha.frag.mjs", "../../node_modules/pixi.js/lib/filters/defaults/alpha/alpha.wgsl.mjs", "../../node_modules/pixi.js/src/filters/defaults/alpha/AlphaFilter.ts", "../../node_modules/pixi.js/src/filters/defaults/blur/const.ts", "../../node_modules/pixi.js/src/filters/defaults/blur/gl/generateBlurFragSource.ts", "../../node_modules/pixi.js/src/filters/defaults/blur/gl/generateBlurVertSource.ts", "../../node_modules/pixi.js/src/filters/defaults/blur/gl/generateBlurGlProgram.ts", "../../node_modules/pixi.js/lib/filters/defaults/blur/gpu/blur-template.wgsl.mjs", "../../node_modules/pixi.js/src/filters/defaults/blur/gpu/generateBlurProgram.ts", "../../node_modules/pixi.js/src/filters/defaults/blur/BlurFilterPass.ts", "../../node_modules/pixi.js/src/filters/defaults/blur/BlurFilter.ts", "../../node_modules/pixi.js/lib/filters/defaults/noise/noise.frag.mjs", "../../node_modules/pixi.js/lib/filters/defaults/noise/noise.wgsl.mjs", "../../node_modules/pixi.js/src/filters/defaults/noise/NoiseFilter.ts", "../../node_modules/pixi.js/src/maths/point/pointInTriangle.ts", "../../node_modules/pixi.js/src/prepare/PrepareBase.ts", "../../node_modules/pixi.js/src/scene/mesh/shared/Mesh.ts", "../../node_modules/pixi.js/src/scene/sprite-animated/AnimatedSprite.ts", "../../node_modules/pixi.js/src/utils/misc/Transform.ts", "../../node_modules/pixi.js/src/scene/sprite-tiling/TilingSprite.ts", "../../node_modules/pixi.js/src/scene/text/AbstractText.ts", "../../node_modules/pixi.js/src/scene/text/Text.ts", "../../node_modules/pixi.js/src/prepare/PrepareQueue.ts", "../../node_modules/pixi.js/src/scene/text-bitmap/BitmapText.ts", "../../node_modules/pixi.js/src/scene/text-html/HTMLText.ts", "../../node_modules/pixi.js/src/prepare/PrepareUpload.ts", "../../node_modules/pixi.js/src/prepare/PrepareSystem.ts", "../../node_modules/pixi.js/src/rendering/renderers/shared/geometry/const.ts", "../../node_modules/pixi.js/src/rendering/renderers/shared/renderTarget/viewportFromFrame.ts", "../../node_modules/pixi.js/src/rendering/renderers/shared/texture/const.ts", "../../node_modules/pixi.js/src/scene/mesh-perspective/utils/applyProjectiveTransformationToPlane.ts", "../../node_modules/pixi.js/src/scene/mesh-perspective/utils/compute2DProjections.ts", "../../node_modules/pixi.js/src/scene/mesh-perspective/PerspectivePlaneGeometry.ts", "../../node_modules/pixi.js/src/scene/mesh-perspective/PerspectiveMesh.ts", "../../node_modules/pixi.js/src/scene/mesh-simple/RopeGeometry.ts", "../../node_modules/pixi.js/src/scene/mesh-simple/MeshRope.ts", "../../node_modules/pixi.js/src/scene/particle-container/shared/Particle.ts", "../../node_modules/pixi.js/src/scene/particle-container/shared/particleData.ts", "../../node_modules/pixi.js/src/scene/particle-container/shared/ParticleContainer.ts", "../../node_modules/pixi.js/src/scene/sprite-nine-slice/NineSliceSprite.ts", "../../node_modules/pixi.js/src/index.ts", "../../node_modules/gsap/gsap-core.js", "../../node_modules/gsap/CSSPlugin.js", "../../node_modules/gsap/index.js", "../../node_modules/dill-pixel/src/utils/env.ts", "../../node_modules/dill-pixel/src/utils/string.ts", "../../node_modules/dill-pixel/src/utils/console/Logger.ts", "../../node_modules/dill-pixel/src/utils/promise/functions.ts", "../../node_modules/dill-pixel/src/utils/promise/Queue.ts", "../../node_modules/dill-pixel/src/utils/framework.ts", "../../node_modules/dill-pixel/src/utils/misc.ts", "../../node_modules/dill-pixel/src/utils/map.ts", "../../node_modules/dill-pixel/src/utils/math.ts", "../../node_modules/dill-pixel/src/utils/object.ts", "../../node_modules/dill-pixel/src/utils/point.ts", "../../node_modules/dill-pixel/src/utils/rect.ts", "../../node_modules/dill-pixel/src/utils/bind.ts", "../../node_modules/dill-pixel/src/utils/random.ts", "../../node_modules/dill-pixel/src/utils/array.ts", "../../node_modules/dill-pixel/src/utils/padding.ts", "../../node_modules/dill-pixel/src/utils/platform.ts", "../../node_modules/dill-pixel/src/utils/number.ts", "../../node_modules/dill-pixel/src/utils/text.ts", "../../node_modules/dill-pixel/src/utils/color.ts", "../../node_modules/dill-pixel/src/utils/pixi.ts", "../../node_modules/dill-pixel/src/utils/canvas.ts", "../../node_modules/dill-pixel/src/utils/set.ts", "../../node_modules/dill-pixel/src/core/config.ts", "../../node_modules/dill-pixel/src/version.ts", "../../node_modules/dill-pixel/src/hello.ts", "../../node_modules/dill-pixel/src/core/create.ts", "../../node_modules/dill-pixel/src/core/registries.ts", "../../node_modules/dill-pixel/src/store/Store.ts", "../../node_modules/.pnpm/typed-signals@2.5.0/node_modules/typed-signals/dist/Collector.js", "../../node_modules/.pnpm/typed-signals@2.5.0/node_modules/typed-signals/dist/CollectorArray.js", "../../node_modules/.pnpm/typed-signals@2.5.0/node_modules/typed-signals/dist/CollectorLast.js", "../../node_modules/.pnpm/typed-signals@2.5.0/node_modules/typed-signals/dist/CollectorUntil0.js", "../../node_modules/.pnpm/typed-signals@2.5.0/node_modules/typed-signals/dist/CollectorWhile0.js", "../../node_modules/.pnpm/typed-signals@2.5.0/node_modules/typed-signals/dist/SignalConnection.js", "../../node_modules/.pnpm/typed-signals@2.5.0/node_modules/typed-signals/dist/SignalLink.js", "../../node_modules/.pnpm/typed-signals@2.5.0/node_modules/typed-signals/dist/Signal.js", "../../node_modules/.pnpm/typed-signals@2.5.0/node_modules/typed-signals/dist/SignalConnections.js", "../../node_modules/.pnpm/typed-signals@2.5.0/node_modules/typed-signals/dist/index.js", "../../node_modules/dill-pixel/src/signals/Signal.ts", "../../node_modules/dill-pixel/src/plugins/Plugin.ts", "../../node_modules/dill-pixel/src/plugins/actions/ActionsPlugin.ts", "../../node_modules/dill-pixel/src/plugins/actions/constants.ts", "../../node_modules/dill-pixel/src/plugins/actions/methods.ts", "../../node_modules/dill-pixel/src/plugins/AssetsPlugin.ts", "../../node_modules/dill-pixel/src/plugins/audio/AudioChannel.ts", "../../node_modules/dill-pixel/src/plugins/audio/AudioInstance.ts", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/instance.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/webaudio/WebAudioUtils.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/htmlaudio/HTMLAudioContext.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/htmlaudio/HTMLAudioInstance.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/htmlaudio/HTMLAudioMedia.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/SoundSprite.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/utils/supported.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/webaudio/WebAudioInstance.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/Filterable.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/webaudio/WebAudioNodes.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/webaudio/WebAudioMedia.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/Sound.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/webaudio/WebAudioContext.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/SoundLibrary.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/soundAsset.mjs", "../../node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.6.6/node_modules/@pixi/sound/lib/index.mjs", "../../node_modules/dill-pixel/src/plugins/audio/AudioManagerPlugin.ts", "../../node_modules/dill-pixel/src/plugins/focus/FocusOutliner.ts", "../../node_modules/dill-pixel/src/plugins/focus/FocusManagerPlugin.ts", "../../node_modules/dill-pixel/src/plugins/i18nPlugin.ts", "../../node_modules/dill-pixel/src/plugins/input/constants.ts", "../../node_modules/dill-pixel/src/mixins/signals.ts", "../../node_modules/dill-pixel/src/mixins/animated.ts", "../../node_modules/dill-pixel/src/mixins/focus.ts", "../../node_modules/dill-pixel/src/mixins/interaction.ts", "../../node_modules/dill-pixel/src/mixins/factory/methods.ts", "../../node_modules/dill-pixel/src/display/Container.ts", "../../node_modules/dill-pixel/src/display/ParticleContainer.ts", "../../node_modules/dill-pixel/src/display/Scene.ts", "../../node_modules/dill-pixel/src/display/SceneTransition.ts", "../../node_modules/dill-pixel/src/display/Svg.ts", "../../node_modules/dill-pixel/src/display/AnimatedSprite.ts", "../../node_modules/dill-pixel/src/display/Camera.ts", "../../node_modules/dill-pixel/src/display/SpineAnimation.ts", "../../node_modules/dill-pixel/src/ui/Button.ts", "../../node_modules/dill-pixel/src/ui/FlexContainer.ts", "../../node_modules/dill-pixel/src/ui/UICanvas.ts", "../../node_modules/dill-pixel/src/ui/Popup.ts", "../../node_modules/dill-pixel/src/ui/Input.ts", "../../node_modules/dill-pixel/src/ui/Joystick.ts", "../../node_modules/dill-pixel/src/mixins/factory/props.ts", "../../node_modules/dill-pixel/src/mixins/factory/utils.ts", "../../node_modules/dill-pixel/src/mixins/factory/const.ts", "../../node_modules/dill-pixel/src/mixins/factory/Factory.ts", "../../node_modules/dill-pixel/src/plugins/KeyboardPlugin.ts", "../../node_modules/dill-pixel/src/plugins/input/AbstractControls.ts", "../../node_modules/dill-pixel/src/plugins/input/keyboard/KeyboardContols.ts", "../../node_modules/dill-pixel/src/plugins/input/touch/constants.ts", "../../node_modules/dill-pixel/src/plugins/input/touch/TouchControls.ts", "../../node_modules/dill-pixel/src/plugins/input/Controls.ts", "../../node_modules/dill-pixel/src/plugins/input/InputPlugin.ts", "../../node_modules/dill-pixel/src/plugins/input/methods.ts", "../../node_modules/dill-pixel/src/plugins/PopupManagerPlugin.ts", "../../node_modules/dill-pixel/src/plugins/ResizerPlugin.ts", "../../node_modules/dill-pixel/src/plugins/SceneManagerPlugin.ts", "../../node_modules/dill-pixel/src/plugins/WebEventsPlugin.ts", "../../node_modules/dill-pixel/src/store/adapters/StorageAdapter.ts", "../../node_modules/dill-pixel/src/store/adapters/DataAdapter.ts", "../../node_modules/dill-pixel/src/plugins/defaults.ts", "../../node_modules/dill-pixel/src/Application.ts"],
  "sourcesContent": ["'use strict'\n\n/**\n * Ponyfill for `Array.prototype.find` which is only available in ES6 runtimes.\n *\n * Works with anything that has a `length` property and index access properties, including NodeList.\n *\n * @template {unknown} T\n * @param {Array<T> | ({length:number, [number]: T})} list\n * @param {function (item: T, index: number, list:Array<T> | ({length:number, [number]: T})):boolean} predicate\n * @param {Partial<Pick<ArrayConstructor['prototype'], 'find'>>?} ac `Array.prototype` by default,\n * \t\t\t\tallows injecting a custom implementation in tests\n * @returns {T | undefined}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n * @see https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.find\n */\nfunction find(list, predicate, ac) {\n\tif (ac === undefined) {\n\t\tac = Array.prototype;\n\t}\n\tif (list && typeof ac.find === 'function') {\n\t\treturn ac.find.call(list, predicate);\n\t}\n\tfor (var i = 0; i < list.length; i++) {\n\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\tvar item = list[i];\n\t\t\tif (predicate.call(undefined, item, i, list)) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object\n}\n\n/**\n * Since we can not rely on `Object.assign` we provide a simplified version\n * that is sufficient for our needs.\n *\n * @param {Object} target\n * @param {Object | null | undefined} source\n *\n * @returns {Object} target\n * @throws TypeError if target is not an object\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @see https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.assign\n */\nfunction assign(target, source) {\n\tif (target === null || typeof target !== 'object') {\n\t\tthrow new TypeError('target is not an object')\n\t}\n\tfor (var key in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\ttarget[key] = source[key]\n\t\t}\n\t}\n\treturn target\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see DOMParser.SupportedType.isHTML\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * Helper method to check a mime type if it indicates an HTML document\n\t *\n\t * @param {string} [value]\n\t * @returns {boolean}\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n\tisHTML: function (value) {\n\t\treturn value === MIME_TYPE.HTML\n\t},\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/html`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n})\n\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * Checks if `uri` equals `NAMESPACE.HTML`.\n\t *\n\t * @param {string} [uri]\n\t *\n\t * @see NAMESPACE.HTML\n\t */\n\tisHTML: function (uri) {\n\t\treturn uri === NAMESPACE.HTML\n\t},\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n})\n\nexports.assign = assign;\nexports.find = find;\nexports.freeze = freeze;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;\n", "var conventions = require(\"./conventions\");\n\nvar find = conventions.find;\nvar NAMESPACE = conventions.NAMESPACE;\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\nfunction notEmptyString (input) {\n\treturn input !== ''\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : []\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\nfunction orderedSetReducer (current, element) {\n\tif (!current.hasOwnProperty(element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}))\n}\n\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\nfunction arrayIncludes (list) {\n\treturn function(element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t}\n}\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tif (Object.prototype.hasOwnProperty.call(src, p)) {\n\t\t\tdest[p] = src[p];\n\t\t}\n\t}\n}\n\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknown Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\n\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0,\n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long\n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index.\n\t */\n\titem: function(index) {\n\t\treturn index >= 0 && index < this.length ? this[index] : null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t},\n\t/**\n\t * @private\n\t * @param {function (Node):boolean} predicate\n\t * @returns {Node[]}\n\t */\n\tfilter: function (predicate) {\n\t\treturn Array.prototype.filter.call(this, predicate);\n\t},\n\t/**\n\t * @private\n\t * @param {Node} item\n\t * @returns {number}\n\t */\n\tindexOf: function (item) {\n\t\treturn Array.prototype.indexOf.call(this, item);\n\t},\n};\n\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif (list._inc !== inc) {\n\t\tvar ls = list._refresh(list._node);\n\t\t__set__(list,'length',ls.length);\n\t\tif (!list.$$length || ls.length < list.$$length) {\n\t\t\tfor (var i = ls.length; i in list; i++) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\t\t\tdelete list[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i] || null;\n}\n\n_extends(LiveNodeList,NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities\n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow new DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\n\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\nfunction DOMImplementation() {\n}\n\nDOMImplementation.prototype = {\n\t/**\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n\t * The different implementations fairly diverged in what kind of features were reported.\n\t * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated It is deprecated and modern browsers return true in all cases.\n\t *\n\t * @param {string} feature\n\t * @param {string} [version]\n\t * @returns {boolean} always true\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t */\n\thasFeature: function(feature, version) {\n\t\t\treturn true;\n\t},\n\t/**\n\t * Creates an XML Document object of the specified type with its document element.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n\t * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string|null} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {DocumentType=null} doctype\n\t * @returns {Document}\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocument: function(namespaceURI,  qualifiedName, doctype){\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n\t *\n\t * __This behavior is slightly different from the in the specs__:\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string} qualifiedName\n\t * @param {string} [publicId]\n\t * @param {string} [systemId]\n\t * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n\t * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocumentType: function(qualifiedName, publicId, systemId){\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises\n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises\n\t\t_insertBefore(this, newChild,oldChild, assertPreReplacementValidityInDocument);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n\t/**\n\t * Look up the prefix associated to the given namespace URI, starting from this node.\n\t * **The default namespace declarations are ignored by this method.**\n\t * See Namespace Prefix Lookup for details on the algorithm used by this method.\n\t *\n\t * _Note: The implementation seems to be incomplete when compared to the algorithm described in the specs._\n\t *\n\t * @param {string | null} namespaceURI\n\t * @returns {string | null}\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n\t * @see https://github.com/xmldom/xmldom/issues/322\n\t */\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(map, n) && map[n] === namespaceURI) {\n\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(Object.prototype.hasOwnProperty.call(map, prefix)){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n\tthis.ownerDocument = this;\n}\n\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\n\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\n\n/**\n * Updates `el.childNodes`, updating the indexed items and it's `length`.\n * Passing `newChild` means it will be appended.\n * Otherwise it's assumed that an item has been removed,\n * and `el.firstNode` and it's `.nextSibling` are used\n * to walk the current list of child nodes.\n *\n * @param {Document} doc\n * @param {Node} el\n * @param {Node} [newChild]\n * @private\n */\nfunction _onUpdateChild (doc, el, newChild) {\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif (newChild) {\n\t\t\tcs[cs.length++] = newChild;\n\t\t} else {\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile (child) {\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t\tdelete cs[cs.length];\n\t\t}\n\t}\n}\n\n/**\n * Removes the connections between `parentNode` and `child`\n * and any existing `child.previousSibling` or `child.nextSibling`.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n *\n * @param {Node} parentNode\n * @param {Node} child\n * @returns {Node} the child that was removed.\n * @private\n */\nfunction _removeChild (parentNode, child) {\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif (previous) {\n\t\tprevious.nextSibling = next;\n\t} else {\n\t\tparentNode.firstChild = next;\n\t}\n\tif (next) {\n\t\tnext.previousSibling = previous;\n\t} else {\n\t\tparentNode.lastChild = previous;\n\t}\n\tchild.parentNode = null;\n\tchild.previousSibling = null;\n\tchild.nextSibling = null;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode);\n\treturn child;\n}\n\n/**\n * Returns `true` if `node` can be a parent for insertion.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasValidParentNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE)\n\t);\n}\n\n/**\n * Returns `true` if `node` can be inserted according to it's `nodeType`.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasInsertableNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(isElementNode(node) ||\n\t\t\tisTextNode(node) ||\n\t\t\tisDocTypeNode(node) ||\n\t\t\tnode.nodeType === Node.DOCUMENT_FRAGMENT_NODE ||\n\t\t\tnode.nodeType === Node.COMMENT_NODE ||\n\t\t\tnode.nodeType === Node.PROCESSING_INSTRUCTION_NODE)\n\t);\n}\n\n/**\n * Returns true if `node` is a DOCTYPE node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isDocTypeNode(node) {\n\treturn node && node.nodeType === Node.DOCUMENT_TYPE_NODE;\n}\n\n/**\n * Returns true if the node is an element\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n\treturn node && node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Returns true if `node` is a text node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n\treturn node && node.nodeType === Node.TEXT_NODE;\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Document} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementInsertionPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\tif (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Node} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementReplacementPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\n\tfunction hasElementChildThatIsNotChild(node) {\n\t\treturn isElementNode(node) && node !== child;\n\t}\n\n\tif (find(parentChildNodes, hasElementChildThatIsNotChild)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * @private\n * Steps 1-5 of the checks before inserting and before replacing a child are the same.\n *\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidity1to5(parent, node, child) {\n\t// 1. If `parent` is not a Document, DocumentFragment, or Element node, then throw a \"HierarchyRequestError\" DOMException.\n\tif (!hasValidParentNodeType(parent)) {\n\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Unexpected parent node type ' + parent.nodeType);\n\t}\n\t// 2. If `node` is a host-including inclusive ancestor of `parent`, then throw a \"HierarchyRequestError\" DOMException.\n\t// not implemented!\n\t// 3. If `child` is non-null and its parent is not `parent`, then throw a \"NotFoundError\" DOMException.\n\tif (child && child.parentNode !== parent) {\n\t\tthrow new DOMException(NOT_FOUND_ERR, 'child not in parent');\n\t}\n\tif (\n\t\t// 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a \"HierarchyRequestError\" DOMException.\n\t\t!hasInsertableNodeType(node) ||\n\t\t// 5. If either `node` is a Text node and `parent` is a document,\n\t\t// the sax parser currently adds top level text nodes, this will be fixed in 0.9.0\n\t\t// || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)\n\t\t// or `node` is a doctype and `parent` is not a document, then throw a \"HierarchyRequestError\" DOMException.\n\t\t(isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE)\n\t) {\n\t\tthrow new DOMException(\n\t\t\tHIERARCHY_REQUEST_ERR,\n\t\t\t'Unexpected node type ' + node.nodeType + ' for parent node type ' + parent.nodeType\n\t\t);\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If node has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child,\n\t\t// `child` is a doctype, or `child` is non-null and a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child, `child` is a doctype,\n\t\t// or `child` is non-null and a doctype is following `child`.\n\t\tif (!isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\t// `parent` has a doctype child,\n\t\tif (find(parentChildNodes, isDocTypeNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// `child` is non-null and an element is preceding `child`,\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t\t// or `child` is null and `parent` has an element child.\n\t\tif (!child && parentElementChild) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can not be appended since element is present');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreReplacementValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If `node` has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (!isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\tfunction hasDoctypeChildThatIsNotChild(node) {\n\t\t\treturn isDocTypeNode(node) && node !== child;\n\t\t}\n\n\t\t// `parent` has a doctype child that is not `child`,\n\t\tif (find(parentChildNodes, hasDoctypeChildThatIsNotChild)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// or an element is preceding `child`.\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction _insertBefore(parent, node, child, _inDocumentAssertion) {\n\t// To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\tassertPreInsertionValidity1to5(parent, node, child);\n\n\t// If parent is a document, and any of the statements below, switched on the interface node implements,\n\t// are true, then throw a \"HierarchyRequestError\" DOMException.\n\tif (parent.nodeType === Node.DOCUMENT_NODE) {\n\t\t(_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);\n\t}\n\n\tvar cp = node.parentNode;\n\tif(cp){\n\t\tcp.removeChild(node);//remove and update\n\t}\n\tif(node.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = node.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn node;\n\t\t}\n\t\tvar newLast = node.lastChild;\n\t}else{\n\t\tnewFirst = newLast = node;\n\t}\n\tvar pre = child ? child.previousSibling : parent.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = child;\n\n\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparent.firstChild = newFirst;\n\t}\n\tif(child == null){\n\t\tparent.lastChild = newLast;\n\t}else{\n\t\tchild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parent;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parent.ownerDocument||parent, parent);\n\t//console.log(parent.lastChild.nextSibling == null)\n\tif (node.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnode.firstChild = node.lastChild = null;\n\t}\n\treturn node;\n}\n\n/**\n * Appends `newChild` to `parentNode`.\n * If `newChild` is already connected to a `parentNode` it is first removed from it.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n * @param {Node} parentNode\n * @param {Node} newChild\n * @returns {Node}\n * @private\n */\nfunction _appendSingleChild (parentNode, newChild) {\n\tif (newChild.parentNode) {\n\t\tnewChild.parentNode.removeChild(newChild);\n\t}\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = parentNode.lastChild;\n\tnewChild.nextSibling = null;\n\tif (newChild.previousSibling) {\n\t\tnewChild.previousSibling.nextSibling = newChild;\n\t} else {\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n\treturn newChild;\n}\n\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\t/**\n\t * The DocumentType node of the document.\n\t *\n\t * @readonly\n\t * @type DocumentType\n\t */\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\n\tinsertBefore :  function(newChild, refChild){//raises\n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\t_insertBefore(this, newChild, refChild);\n\t\tnewChild.ownerDocument = this;\n\t\tif (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\treplaceChild: function (newChild, oldChild) {\n\t\t//raises\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\tnewChild.ownerDocument = this;\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t\tif (isElementNode(newChild)) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * The `getElementsByClassName` method of `Document` interface returns an array-like object\n\t * of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n\t *\n\t *\n\t * Warning: This is a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function(classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames)\n\t\treturn new LiveNodeList(this, function(base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base.documentElement, function(node) {\n\t\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class')\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames)\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.nodeName = node.target = target;\n\t\tnode.nodeValue = node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9 && this.documentElement || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === NAMESPACE.XML || uri === NAMESPACE.XMLNS) {\n\t\treturn false;\n\t}\n\n\tvar i = visibleNamespaces.length\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * > The replacement text of any entity referred to directly or indirectly\n * > in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml11/#CleanAttrVals\n * @see https://www.w3.org/TR/xml11/#NT-AttValue\n *\n * Literal whitespace other than space that appear in attribute values\n * are serialized as their entity references, so they will be preserved.\n * (In contrast to whitespace literals in the input which are normalized to spaces)\n * @see https://www.w3.org/TR/xml11/#AVNormalize\n * @see https://w3c.github.io/DOM-Parsing/#serializing-an-element-s-attributes\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<>&\"\\t\\n\\r]/g, _xmlEncoder), '\"')\n}\n\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\n\t\tisHTML = NAMESPACE.isHTML(node.namespaceURI) || isHTML\n\n\t\tvar prefixedNodeName = nodeName\n\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\tvar defaultNS\n\t\t\t// lookup current default ns from `xmlns` attribute\n\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\tdefaultNS = attrs.item(ai).value\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!defaultNS) {\n\t\t\t\t// lookup current default ns in visibleNamespaces\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tdefaultNS = namespace.namespace\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbuf.push('<', prefixedNodeName);\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\n\t\t// add namespace for current node\n\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',prefixedNodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\tcase TEXT_NODE:\n\t\t/**\n\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n\t\t * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n\t\t * `&amp;` and `&lt;` respectively.\n\t\t * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n\t\t * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n\t\t * when that string is not marking the end of a CDATA section.\n\t\t *\n\t\t * In the content of elements, character data is any string of characters\n\t\t * which does not contain the start-delimiter of any markup\n\t\t * and does not include the CDATA-section-close delimiter, `]]>`.\n\t\t *\n\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t * @see https://w3c.github.io/DOM-Parsing/#xml-serializing-a-text-node\n\t\t */\n\t\treturn buf.push(node.data\n\t\t\t.replace(/[<&>]/g,_xmlEncoder)\n\t\t);\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC ', pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push(' ', sysid);\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM ', sysid, '>');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE：\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor (var n in node) {\n\t\tif (Object.prototype.hasOwnProperty.call(node, n)) {\n\t\t\tvar v = node[n];\n\t\t\tif (typeof v != \"object\") {\n\t\t\t\tif (v != node2[n]) {\n\t\t\t\t\tnode2[n] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DocumentType = DocumentType;\n\texports.DOMException = DOMException;\n\texports.DOMImplementation = DOMImplementation;\n\texports.Element = Element;\n\texports.Node = Node;\n\texports.NodeList = NodeList;\n\texports.XMLSerializer = XMLSerializer;\n//}\n", "'use strict';\n\nvar freeze = require('./conventions').freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n */\nexports.XML_ENTITIES = freeze({\n\tamp: '&',\n\tapos: \"'\",\n\tgt: '>',\n\tlt: '<',\n\tquot: '\"',\n});\n\n/**\n * A map of all entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see XML_ENTITIES\n * @see DOMParser.parseFromString\n * @see DOMImplementation.prototype.createHTMLDocument\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n * @see https://html.spec.whatwg.org/entities.json JSON\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n\tAacute: '\\u00C1',\n\taacute: '\\u00E1',\n\tAbreve: '\\u0102',\n\tabreve: '\\u0103',\n\tac: '\\u223E',\n\tacd: '\\u223F',\n\tacE: '\\u223E\\u0333',\n\tAcirc: '\\u00C2',\n\tacirc: '\\u00E2',\n\tacute: '\\u00B4',\n\tAcy: '\\u0410',\n\tacy: '\\u0430',\n\tAElig: '\\u00C6',\n\taelig: '\\u00E6',\n\taf: '\\u2061',\n\tAfr: '\\uD835\\uDD04',\n\tafr: '\\uD835\\uDD1E',\n\tAgrave: '\\u00C0',\n\tagrave: '\\u00E0',\n\talefsym: '\\u2135',\n\taleph: '\\u2135',\n\tAlpha: '\\u0391',\n\talpha: '\\u03B1',\n\tAmacr: '\\u0100',\n\tamacr: '\\u0101',\n\tamalg: '\\u2A3F',\n\tAMP: '\\u0026',\n\tamp: '\\u0026',\n\tAnd: '\\u2A53',\n\tand: '\\u2227',\n\tandand: '\\u2A55',\n\tandd: '\\u2A5C',\n\tandslope: '\\u2A58',\n\tandv: '\\u2A5A',\n\tang: '\\u2220',\n\tange: '\\u29A4',\n\tangle: '\\u2220',\n\tangmsd: '\\u2221',\n\tangmsdaa: '\\u29A8',\n\tangmsdab: '\\u29A9',\n\tangmsdac: '\\u29AA',\n\tangmsdad: '\\u29AB',\n\tangmsdae: '\\u29AC',\n\tangmsdaf: '\\u29AD',\n\tangmsdag: '\\u29AE',\n\tangmsdah: '\\u29AF',\n\tangrt: '\\u221F',\n\tangrtvb: '\\u22BE',\n\tangrtvbd: '\\u299D',\n\tangsph: '\\u2222',\n\tangst: '\\u00C5',\n\tangzarr: '\\u237C',\n\tAogon: '\\u0104',\n\taogon: '\\u0105',\n\tAopf: '\\uD835\\uDD38',\n\taopf: '\\uD835\\uDD52',\n\tap: '\\u2248',\n\tapacir: '\\u2A6F',\n\tapE: '\\u2A70',\n\tape: '\\u224A',\n\tapid: '\\u224B',\n\tapos: '\\u0027',\n\tApplyFunction: '\\u2061',\n\tapprox: '\\u2248',\n\tapproxeq: '\\u224A',\n\tAring: '\\u00C5',\n\taring: '\\u00E5',\n\tAscr: '\\uD835\\uDC9C',\n\tascr: '\\uD835\\uDCB6',\n\tAssign: '\\u2254',\n\tast: '\\u002A',\n\tasymp: '\\u2248',\n\tasympeq: '\\u224D',\n\tAtilde: '\\u00C3',\n\tatilde: '\\u00E3',\n\tAuml: '\\u00C4',\n\tauml: '\\u00E4',\n\tawconint: '\\u2233',\n\tawint: '\\u2A11',\n\tbackcong: '\\u224C',\n\tbackepsilon: '\\u03F6',\n\tbackprime: '\\u2035',\n\tbacksim: '\\u223D',\n\tbacksimeq: '\\u22CD',\n\tBackslash: '\\u2216',\n\tBarv: '\\u2AE7',\n\tbarvee: '\\u22BD',\n\tBarwed: '\\u2306',\n\tbarwed: '\\u2305',\n\tbarwedge: '\\u2305',\n\tbbrk: '\\u23B5',\n\tbbrktbrk: '\\u23B6',\n\tbcong: '\\u224C',\n\tBcy: '\\u0411',\n\tbcy: '\\u0431',\n\tbdquo: '\\u201E',\n\tbecaus: '\\u2235',\n\tBecause: '\\u2235',\n\tbecause: '\\u2235',\n\tbemptyv: '\\u29B0',\n\tbepsi: '\\u03F6',\n\tbernou: '\\u212C',\n\tBernoullis: '\\u212C',\n\tBeta: '\\u0392',\n\tbeta: '\\u03B2',\n\tbeth: '\\u2136',\n\tbetween: '\\u226C',\n\tBfr: '\\uD835\\uDD05',\n\tbfr: '\\uD835\\uDD1F',\n\tbigcap: '\\u22C2',\n\tbigcirc: '\\u25EF',\n\tbigcup: '\\u22C3',\n\tbigodot: '\\u2A00',\n\tbigoplus: '\\u2A01',\n\tbigotimes: '\\u2A02',\n\tbigsqcup: '\\u2A06',\n\tbigstar: '\\u2605',\n\tbigtriangledown: '\\u25BD',\n\tbigtriangleup: '\\u25B3',\n\tbiguplus: '\\u2A04',\n\tbigvee: '\\u22C1',\n\tbigwedge: '\\u22C0',\n\tbkarow: '\\u290D',\n\tblacklozenge: '\\u29EB',\n\tblacksquare: '\\u25AA',\n\tblacktriangle: '\\u25B4',\n\tblacktriangledown: '\\u25BE',\n\tblacktriangleleft: '\\u25C2',\n\tblacktriangleright: '\\u25B8',\n\tblank: '\\u2423',\n\tblk12: '\\u2592',\n\tblk14: '\\u2591',\n\tblk34: '\\u2593',\n\tblock: '\\u2588',\n\tbne: '\\u003D\\u20E5',\n\tbnequiv: '\\u2261\\u20E5',\n\tbNot: '\\u2AED',\n\tbnot: '\\u2310',\n\tBopf: '\\uD835\\uDD39',\n\tbopf: '\\uD835\\uDD53',\n\tbot: '\\u22A5',\n\tbottom: '\\u22A5',\n\tbowtie: '\\u22C8',\n\tboxbox: '\\u29C9',\n\tboxDL: '\\u2557',\n\tboxDl: '\\u2556',\n\tboxdL: '\\u2555',\n\tboxdl: '\\u2510',\n\tboxDR: '\\u2554',\n\tboxDr: '\\u2553',\n\tboxdR: '\\u2552',\n\tboxdr: '\\u250C',\n\tboxH: '\\u2550',\n\tboxh: '\\u2500',\n\tboxHD: '\\u2566',\n\tboxHd: '\\u2564',\n\tboxhD: '\\u2565',\n\tboxhd: '\\u252C',\n\tboxHU: '\\u2569',\n\tboxHu: '\\u2567',\n\tboxhU: '\\u2568',\n\tboxhu: '\\u2534',\n\tboxminus: '\\u229F',\n\tboxplus: '\\u229E',\n\tboxtimes: '\\u22A0',\n\tboxUL: '\\u255D',\n\tboxUl: '\\u255C',\n\tboxuL: '\\u255B',\n\tboxul: '\\u2518',\n\tboxUR: '\\u255A',\n\tboxUr: '\\u2559',\n\tboxuR: '\\u2558',\n\tboxur: '\\u2514',\n\tboxV: '\\u2551',\n\tboxv: '\\u2502',\n\tboxVH: '\\u256C',\n\tboxVh: '\\u256B',\n\tboxvH: '\\u256A',\n\tboxvh: '\\u253C',\n\tboxVL: '\\u2563',\n\tboxVl: '\\u2562',\n\tboxvL: '\\u2561',\n\tboxvl: '\\u2524',\n\tboxVR: '\\u2560',\n\tboxVr: '\\u255F',\n\tboxvR: '\\u255E',\n\tboxvr: '\\u251C',\n\tbprime: '\\u2035',\n\tBreve: '\\u02D8',\n\tbreve: '\\u02D8',\n\tbrvbar: '\\u00A6',\n\tBscr: '\\u212C',\n\tbscr: '\\uD835\\uDCB7',\n\tbsemi: '\\u204F',\n\tbsim: '\\u223D',\n\tbsime: '\\u22CD',\n\tbsol: '\\u005C',\n\tbsolb: '\\u29C5',\n\tbsolhsub: '\\u27C8',\n\tbull: '\\u2022',\n\tbullet: '\\u2022',\n\tbump: '\\u224E',\n\tbumpE: '\\u2AAE',\n\tbumpe: '\\u224F',\n\tBumpeq: '\\u224E',\n\tbumpeq: '\\u224F',\n\tCacute: '\\u0106',\n\tcacute: '\\u0107',\n\tCap: '\\u22D2',\n\tcap: '\\u2229',\n\tcapand: '\\u2A44',\n\tcapbrcup: '\\u2A49',\n\tcapcap: '\\u2A4B',\n\tcapcup: '\\u2A47',\n\tcapdot: '\\u2A40',\n\tCapitalDifferentialD: '\\u2145',\n\tcaps: '\\u2229\\uFE00',\n\tcaret: '\\u2041',\n\tcaron: '\\u02C7',\n\tCayleys: '\\u212D',\n\tccaps: '\\u2A4D',\n\tCcaron: '\\u010C',\n\tccaron: '\\u010D',\n\tCcedil: '\\u00C7',\n\tccedil: '\\u00E7',\n\tCcirc: '\\u0108',\n\tccirc: '\\u0109',\n\tCconint: '\\u2230',\n\tccups: '\\u2A4C',\n\tccupssm: '\\u2A50',\n\tCdot: '\\u010A',\n\tcdot: '\\u010B',\n\tcedil: '\\u00B8',\n\tCedilla: '\\u00B8',\n\tcemptyv: '\\u29B2',\n\tcent: '\\u00A2',\n\tCenterDot: '\\u00B7',\n\tcenterdot: '\\u00B7',\n\tCfr: '\\u212D',\n\tcfr: '\\uD835\\uDD20',\n\tCHcy: '\\u0427',\n\tchcy: '\\u0447',\n\tcheck: '\\u2713',\n\tcheckmark: '\\u2713',\n\tChi: '\\u03A7',\n\tchi: '\\u03C7',\n\tcir: '\\u25CB',\n\tcirc: '\\u02C6',\n\tcirceq: '\\u2257',\n\tcirclearrowleft: '\\u21BA',\n\tcirclearrowright: '\\u21BB',\n\tcircledast: '\\u229B',\n\tcircledcirc: '\\u229A',\n\tcircleddash: '\\u229D',\n\tCircleDot: '\\u2299',\n\tcircledR: '\\u00AE',\n\tcircledS: '\\u24C8',\n\tCircleMinus: '\\u2296',\n\tCirclePlus: '\\u2295',\n\tCircleTimes: '\\u2297',\n\tcirE: '\\u29C3',\n\tcire: '\\u2257',\n\tcirfnint: '\\u2A10',\n\tcirmid: '\\u2AEF',\n\tcirscir: '\\u29C2',\n\tClockwiseContourIntegral: '\\u2232',\n\tCloseCurlyDoubleQuote: '\\u201D',\n\tCloseCurlyQuote: '\\u2019',\n\tclubs: '\\u2663',\n\tclubsuit: '\\u2663',\n\tColon: '\\u2237',\n\tcolon: '\\u003A',\n\tColone: '\\u2A74',\n\tcolone: '\\u2254',\n\tcoloneq: '\\u2254',\n\tcomma: '\\u002C',\n\tcommat: '\\u0040',\n\tcomp: '\\u2201',\n\tcompfn: '\\u2218',\n\tcomplement: '\\u2201',\n\tcomplexes: '\\u2102',\n\tcong: '\\u2245',\n\tcongdot: '\\u2A6D',\n\tCongruent: '\\u2261',\n\tConint: '\\u222F',\n\tconint: '\\u222E',\n\tContourIntegral: '\\u222E',\n\tCopf: '\\u2102',\n\tcopf: '\\uD835\\uDD54',\n\tcoprod: '\\u2210',\n\tCoproduct: '\\u2210',\n\tCOPY: '\\u00A9',\n\tcopy: '\\u00A9',\n\tcopysr: '\\u2117',\n\tCounterClockwiseContourIntegral: '\\u2233',\n\tcrarr: '\\u21B5',\n\tCross: '\\u2A2F',\n\tcross: '\\u2717',\n\tCscr: '\\uD835\\uDC9E',\n\tcscr: '\\uD835\\uDCB8',\n\tcsub: '\\u2ACF',\n\tcsube: '\\u2AD1',\n\tcsup: '\\u2AD0',\n\tcsupe: '\\u2AD2',\n\tctdot: '\\u22EF',\n\tcudarrl: '\\u2938',\n\tcudarrr: '\\u2935',\n\tcuepr: '\\u22DE',\n\tcuesc: '\\u22DF',\n\tcularr: '\\u21B6',\n\tcularrp: '\\u293D',\n\tCup: '\\u22D3',\n\tcup: '\\u222A',\n\tcupbrcap: '\\u2A48',\n\tCupCap: '\\u224D',\n\tcupcap: '\\u2A46',\n\tcupcup: '\\u2A4A',\n\tcupdot: '\\u228D',\n\tcupor: '\\u2A45',\n\tcups: '\\u222A\\uFE00',\n\tcurarr: '\\u21B7',\n\tcurarrm: '\\u293C',\n\tcurlyeqprec: '\\u22DE',\n\tcurlyeqsucc: '\\u22DF',\n\tcurlyvee: '\\u22CE',\n\tcurlywedge: '\\u22CF',\n\tcurren: '\\u00A4',\n\tcurvearrowleft: '\\u21B6',\n\tcurvearrowright: '\\u21B7',\n\tcuvee: '\\u22CE',\n\tcuwed: '\\u22CF',\n\tcwconint: '\\u2232',\n\tcwint: '\\u2231',\n\tcylcty: '\\u232D',\n\tDagger: '\\u2021',\n\tdagger: '\\u2020',\n\tdaleth: '\\u2138',\n\tDarr: '\\u21A1',\n\tdArr: '\\u21D3',\n\tdarr: '\\u2193',\n\tdash: '\\u2010',\n\tDashv: '\\u2AE4',\n\tdashv: '\\u22A3',\n\tdbkarow: '\\u290F',\n\tdblac: '\\u02DD',\n\tDcaron: '\\u010E',\n\tdcaron: '\\u010F',\n\tDcy: '\\u0414',\n\tdcy: '\\u0434',\n\tDD: '\\u2145',\n\tdd: '\\u2146',\n\tddagger: '\\u2021',\n\tddarr: '\\u21CA',\n\tDDotrahd: '\\u2911',\n\tddotseq: '\\u2A77',\n\tdeg: '\\u00B0',\n\tDel: '\\u2207',\n\tDelta: '\\u0394',\n\tdelta: '\\u03B4',\n\tdemptyv: '\\u29B1',\n\tdfisht: '\\u297F',\n\tDfr: '\\uD835\\uDD07',\n\tdfr: '\\uD835\\uDD21',\n\tdHar: '\\u2965',\n\tdharl: '\\u21C3',\n\tdharr: '\\u21C2',\n\tDiacriticalAcute: '\\u00B4',\n\tDiacriticalDot: '\\u02D9',\n\tDiacriticalDoubleAcute: '\\u02DD',\n\tDiacriticalGrave: '\\u0060',\n\tDiacriticalTilde: '\\u02DC',\n\tdiam: '\\u22C4',\n\tDiamond: '\\u22C4',\n\tdiamond: '\\u22C4',\n\tdiamondsuit: '\\u2666',\n\tdiams: '\\u2666',\n\tdie: '\\u00A8',\n\tDifferentialD: '\\u2146',\n\tdigamma: '\\u03DD',\n\tdisin: '\\u22F2',\n\tdiv: '\\u00F7',\n\tdivide: '\\u00F7',\n\tdivideontimes: '\\u22C7',\n\tdivonx: '\\u22C7',\n\tDJcy: '\\u0402',\n\tdjcy: '\\u0452',\n\tdlcorn: '\\u231E',\n\tdlcrop: '\\u230D',\n\tdollar: '\\u0024',\n\tDopf: '\\uD835\\uDD3B',\n\tdopf: '\\uD835\\uDD55',\n\tDot: '\\u00A8',\n\tdot: '\\u02D9',\n\tDotDot: '\\u20DC',\n\tdoteq: '\\u2250',\n\tdoteqdot: '\\u2251',\n\tDotEqual: '\\u2250',\n\tdotminus: '\\u2238',\n\tdotplus: '\\u2214',\n\tdotsquare: '\\u22A1',\n\tdoublebarwedge: '\\u2306',\n\tDoubleContourIntegral: '\\u222F',\n\tDoubleDot: '\\u00A8',\n\tDoubleDownArrow: '\\u21D3',\n\tDoubleLeftArrow: '\\u21D0',\n\tDoubleLeftRightArrow: '\\u21D4',\n\tDoubleLeftTee: '\\u2AE4',\n\tDoubleLongLeftArrow: '\\u27F8',\n\tDoubleLongLeftRightArrow: '\\u27FA',\n\tDoubleLongRightArrow: '\\u27F9',\n\tDoubleRightArrow: '\\u21D2',\n\tDoubleRightTee: '\\u22A8',\n\tDoubleUpArrow: '\\u21D1',\n\tDoubleUpDownArrow: '\\u21D5',\n\tDoubleVerticalBar: '\\u2225',\n\tDownArrow: '\\u2193',\n\tDownarrow: '\\u21D3',\n\tdownarrow: '\\u2193',\n\tDownArrowBar: '\\u2913',\n\tDownArrowUpArrow: '\\u21F5',\n\tDownBreve: '\\u0311',\n\tdowndownarrows: '\\u21CA',\n\tdownharpoonleft: '\\u21C3',\n\tdownharpoonright: '\\u21C2',\n\tDownLeftRightVector: '\\u2950',\n\tDownLeftTeeVector: '\\u295E',\n\tDownLeftVector: '\\u21BD',\n\tDownLeftVectorBar: '\\u2956',\n\tDownRightTeeVector: '\\u295F',\n\tDownRightVector: '\\u21C1',\n\tDownRightVectorBar: '\\u2957',\n\tDownTee: '\\u22A4',\n\tDownTeeArrow: '\\u21A7',\n\tdrbkarow: '\\u2910',\n\tdrcorn: '\\u231F',\n\tdrcrop: '\\u230C',\n\tDscr: '\\uD835\\uDC9F',\n\tdscr: '\\uD835\\uDCB9',\n\tDScy: '\\u0405',\n\tdscy: '\\u0455',\n\tdsol: '\\u29F6',\n\tDstrok: '\\u0110',\n\tdstrok: '\\u0111',\n\tdtdot: '\\u22F1',\n\tdtri: '\\u25BF',\n\tdtrif: '\\u25BE',\n\tduarr: '\\u21F5',\n\tduhar: '\\u296F',\n\tdwangle: '\\u29A6',\n\tDZcy: '\\u040F',\n\tdzcy: '\\u045F',\n\tdzigrarr: '\\u27FF',\n\tEacute: '\\u00C9',\n\teacute: '\\u00E9',\n\teaster: '\\u2A6E',\n\tEcaron: '\\u011A',\n\tecaron: '\\u011B',\n\tecir: '\\u2256',\n\tEcirc: '\\u00CA',\n\tecirc: '\\u00EA',\n\tecolon: '\\u2255',\n\tEcy: '\\u042D',\n\tecy: '\\u044D',\n\teDDot: '\\u2A77',\n\tEdot: '\\u0116',\n\teDot: '\\u2251',\n\tedot: '\\u0117',\n\tee: '\\u2147',\n\tefDot: '\\u2252',\n\tEfr: '\\uD835\\uDD08',\n\tefr: '\\uD835\\uDD22',\n\teg: '\\u2A9A',\n\tEgrave: '\\u00C8',\n\tegrave: '\\u00E8',\n\tegs: '\\u2A96',\n\tegsdot: '\\u2A98',\n\tel: '\\u2A99',\n\tElement: '\\u2208',\n\telinters: '\\u23E7',\n\tell: '\\u2113',\n\tels: '\\u2A95',\n\telsdot: '\\u2A97',\n\tEmacr: '\\u0112',\n\temacr: '\\u0113',\n\tempty: '\\u2205',\n\temptyset: '\\u2205',\n\tEmptySmallSquare: '\\u25FB',\n\temptyv: '\\u2205',\n\tEmptyVerySmallSquare: '\\u25AB',\n\temsp: '\\u2003',\n\temsp13: '\\u2004',\n\temsp14: '\\u2005',\n\tENG: '\\u014A',\n\teng: '\\u014B',\n\tensp: '\\u2002',\n\tEogon: '\\u0118',\n\teogon: '\\u0119',\n\tEopf: '\\uD835\\uDD3C',\n\teopf: '\\uD835\\uDD56',\n\tepar: '\\u22D5',\n\teparsl: '\\u29E3',\n\teplus: '\\u2A71',\n\tepsi: '\\u03B5',\n\tEpsilon: '\\u0395',\n\tepsilon: '\\u03B5',\n\tepsiv: '\\u03F5',\n\teqcirc: '\\u2256',\n\teqcolon: '\\u2255',\n\teqsim: '\\u2242',\n\teqslantgtr: '\\u2A96',\n\teqslantless: '\\u2A95',\n\tEqual: '\\u2A75',\n\tequals: '\\u003D',\n\tEqualTilde: '\\u2242',\n\tequest: '\\u225F',\n\tEquilibrium: '\\u21CC',\n\tequiv: '\\u2261',\n\tequivDD: '\\u2A78',\n\teqvparsl: '\\u29E5',\n\terarr: '\\u2971',\n\terDot: '\\u2253',\n\tEscr: '\\u2130',\n\tescr: '\\u212F',\n\tesdot: '\\u2250',\n\tEsim: '\\u2A73',\n\tesim: '\\u2242',\n\tEta: '\\u0397',\n\teta: '\\u03B7',\n\tETH: '\\u00D0',\n\teth: '\\u00F0',\n\tEuml: '\\u00CB',\n\teuml: '\\u00EB',\n\teuro: '\\u20AC',\n\texcl: '\\u0021',\n\texist: '\\u2203',\n\tExists: '\\u2203',\n\texpectation: '\\u2130',\n\tExponentialE: '\\u2147',\n\texponentiale: '\\u2147',\n\tfallingdotseq: '\\u2252',\n\tFcy: '\\u0424',\n\tfcy: '\\u0444',\n\tfemale: '\\u2640',\n\tffilig: '\\uFB03',\n\tfflig: '\\uFB00',\n\tffllig: '\\uFB04',\n\tFfr: '\\uD835\\uDD09',\n\tffr: '\\uD835\\uDD23',\n\tfilig: '\\uFB01',\n\tFilledSmallSquare: '\\u25FC',\n\tFilledVerySmallSquare: '\\u25AA',\n\tfjlig: '\\u0066\\u006A',\n\tflat: '\\u266D',\n\tfllig: '\\uFB02',\n\tfltns: '\\u25B1',\n\tfnof: '\\u0192',\n\tFopf: '\\uD835\\uDD3D',\n\tfopf: '\\uD835\\uDD57',\n\tForAll: '\\u2200',\n\tforall: '\\u2200',\n\tfork: '\\u22D4',\n\tforkv: '\\u2AD9',\n\tFouriertrf: '\\u2131',\n\tfpartint: '\\u2A0D',\n\tfrac12: '\\u00BD',\n\tfrac13: '\\u2153',\n\tfrac14: '\\u00BC',\n\tfrac15: '\\u2155',\n\tfrac16: '\\u2159',\n\tfrac18: '\\u215B',\n\tfrac23: '\\u2154',\n\tfrac25: '\\u2156',\n\tfrac34: '\\u00BE',\n\tfrac35: '\\u2157',\n\tfrac38: '\\u215C',\n\tfrac45: '\\u2158',\n\tfrac56: '\\u215A',\n\tfrac58: '\\u215D',\n\tfrac78: '\\u215E',\n\tfrasl: '\\u2044',\n\tfrown: '\\u2322',\n\tFscr: '\\u2131',\n\tfscr: '\\uD835\\uDCBB',\n\tgacute: '\\u01F5',\n\tGamma: '\\u0393',\n\tgamma: '\\u03B3',\n\tGammad: '\\u03DC',\n\tgammad: '\\u03DD',\n\tgap: '\\u2A86',\n\tGbreve: '\\u011E',\n\tgbreve: '\\u011F',\n\tGcedil: '\\u0122',\n\tGcirc: '\\u011C',\n\tgcirc: '\\u011D',\n\tGcy: '\\u0413',\n\tgcy: '\\u0433',\n\tGdot: '\\u0120',\n\tgdot: '\\u0121',\n\tgE: '\\u2267',\n\tge: '\\u2265',\n\tgEl: '\\u2A8C',\n\tgel: '\\u22DB',\n\tgeq: '\\u2265',\n\tgeqq: '\\u2267',\n\tgeqslant: '\\u2A7E',\n\tges: '\\u2A7E',\n\tgescc: '\\u2AA9',\n\tgesdot: '\\u2A80',\n\tgesdoto: '\\u2A82',\n\tgesdotol: '\\u2A84',\n\tgesl: '\\u22DB\\uFE00',\n\tgesles: '\\u2A94',\n\tGfr: '\\uD835\\uDD0A',\n\tgfr: '\\uD835\\uDD24',\n\tGg: '\\u22D9',\n\tgg: '\\u226B',\n\tggg: '\\u22D9',\n\tgimel: '\\u2137',\n\tGJcy: '\\u0403',\n\tgjcy: '\\u0453',\n\tgl: '\\u2277',\n\tgla: '\\u2AA5',\n\tglE: '\\u2A92',\n\tglj: '\\u2AA4',\n\tgnap: '\\u2A8A',\n\tgnapprox: '\\u2A8A',\n\tgnE: '\\u2269',\n\tgne: '\\u2A88',\n\tgneq: '\\u2A88',\n\tgneqq: '\\u2269',\n\tgnsim: '\\u22E7',\n\tGopf: '\\uD835\\uDD3E',\n\tgopf: '\\uD835\\uDD58',\n\tgrave: '\\u0060',\n\tGreaterEqual: '\\u2265',\n\tGreaterEqualLess: '\\u22DB',\n\tGreaterFullEqual: '\\u2267',\n\tGreaterGreater: '\\u2AA2',\n\tGreaterLess: '\\u2277',\n\tGreaterSlantEqual: '\\u2A7E',\n\tGreaterTilde: '\\u2273',\n\tGscr: '\\uD835\\uDCA2',\n\tgscr: '\\u210A',\n\tgsim: '\\u2273',\n\tgsime: '\\u2A8E',\n\tgsiml: '\\u2A90',\n\tGt: '\\u226B',\n\tGT: '\\u003E',\n\tgt: '\\u003E',\n\tgtcc: '\\u2AA7',\n\tgtcir: '\\u2A7A',\n\tgtdot: '\\u22D7',\n\tgtlPar: '\\u2995',\n\tgtquest: '\\u2A7C',\n\tgtrapprox: '\\u2A86',\n\tgtrarr: '\\u2978',\n\tgtrdot: '\\u22D7',\n\tgtreqless: '\\u22DB',\n\tgtreqqless: '\\u2A8C',\n\tgtrless: '\\u2277',\n\tgtrsim: '\\u2273',\n\tgvertneqq: '\\u2269\\uFE00',\n\tgvnE: '\\u2269\\uFE00',\n\tHacek: '\\u02C7',\n\thairsp: '\\u200A',\n\thalf: '\\u00BD',\n\thamilt: '\\u210B',\n\tHARDcy: '\\u042A',\n\thardcy: '\\u044A',\n\thArr: '\\u21D4',\n\tharr: '\\u2194',\n\tharrcir: '\\u2948',\n\tharrw: '\\u21AD',\n\tHat: '\\u005E',\n\thbar: '\\u210F',\n\tHcirc: '\\u0124',\n\thcirc: '\\u0125',\n\thearts: '\\u2665',\n\theartsuit: '\\u2665',\n\thellip: '\\u2026',\n\thercon: '\\u22B9',\n\tHfr: '\\u210C',\n\thfr: '\\uD835\\uDD25',\n\tHilbertSpace: '\\u210B',\n\thksearow: '\\u2925',\n\thkswarow: '\\u2926',\n\thoarr: '\\u21FF',\n\thomtht: '\\u223B',\n\thookleftarrow: '\\u21A9',\n\thookrightarrow: '\\u21AA',\n\tHopf: '\\u210D',\n\thopf: '\\uD835\\uDD59',\n\thorbar: '\\u2015',\n\tHorizontalLine: '\\u2500',\n\tHscr: '\\u210B',\n\thscr: '\\uD835\\uDCBD',\n\thslash: '\\u210F',\n\tHstrok: '\\u0126',\n\thstrok: '\\u0127',\n\tHumpDownHump: '\\u224E',\n\tHumpEqual: '\\u224F',\n\thybull: '\\u2043',\n\thyphen: '\\u2010',\n\tIacute: '\\u00CD',\n\tiacute: '\\u00ED',\n\tic: '\\u2063',\n\tIcirc: '\\u00CE',\n\ticirc: '\\u00EE',\n\tIcy: '\\u0418',\n\ticy: '\\u0438',\n\tIdot: '\\u0130',\n\tIEcy: '\\u0415',\n\tiecy: '\\u0435',\n\tiexcl: '\\u00A1',\n\tiff: '\\u21D4',\n\tIfr: '\\u2111',\n\tifr: '\\uD835\\uDD26',\n\tIgrave: '\\u00CC',\n\tigrave: '\\u00EC',\n\tii: '\\u2148',\n\tiiiint: '\\u2A0C',\n\tiiint: '\\u222D',\n\tiinfin: '\\u29DC',\n\tiiota: '\\u2129',\n\tIJlig: '\\u0132',\n\tijlig: '\\u0133',\n\tIm: '\\u2111',\n\tImacr: '\\u012A',\n\timacr: '\\u012B',\n\timage: '\\u2111',\n\tImaginaryI: '\\u2148',\n\timagline: '\\u2110',\n\timagpart: '\\u2111',\n\timath: '\\u0131',\n\timof: '\\u22B7',\n\timped: '\\u01B5',\n\tImplies: '\\u21D2',\n\tin: '\\u2208',\n\tincare: '\\u2105',\n\tinfin: '\\u221E',\n\tinfintie: '\\u29DD',\n\tinodot: '\\u0131',\n\tInt: '\\u222C',\n\tint: '\\u222B',\n\tintcal: '\\u22BA',\n\tintegers: '\\u2124',\n\tIntegral: '\\u222B',\n\tintercal: '\\u22BA',\n\tIntersection: '\\u22C2',\n\tintlarhk: '\\u2A17',\n\tintprod: '\\u2A3C',\n\tInvisibleComma: '\\u2063',\n\tInvisibleTimes: '\\u2062',\n\tIOcy: '\\u0401',\n\tiocy: '\\u0451',\n\tIogon: '\\u012E',\n\tiogon: '\\u012F',\n\tIopf: '\\uD835\\uDD40',\n\tiopf: '\\uD835\\uDD5A',\n\tIota: '\\u0399',\n\tiota: '\\u03B9',\n\tiprod: '\\u2A3C',\n\tiquest: '\\u00BF',\n\tIscr: '\\u2110',\n\tiscr: '\\uD835\\uDCBE',\n\tisin: '\\u2208',\n\tisindot: '\\u22F5',\n\tisinE: '\\u22F9',\n\tisins: '\\u22F4',\n\tisinsv: '\\u22F3',\n\tisinv: '\\u2208',\n\tit: '\\u2062',\n\tItilde: '\\u0128',\n\titilde: '\\u0129',\n\tIukcy: '\\u0406',\n\tiukcy: '\\u0456',\n\tIuml: '\\u00CF',\n\tiuml: '\\u00EF',\n\tJcirc: '\\u0134',\n\tjcirc: '\\u0135',\n\tJcy: '\\u0419',\n\tjcy: '\\u0439',\n\tJfr: '\\uD835\\uDD0D',\n\tjfr: '\\uD835\\uDD27',\n\tjmath: '\\u0237',\n\tJopf: '\\uD835\\uDD41',\n\tjopf: '\\uD835\\uDD5B',\n\tJscr: '\\uD835\\uDCA5',\n\tjscr: '\\uD835\\uDCBF',\n\tJsercy: '\\u0408',\n\tjsercy: '\\u0458',\n\tJukcy: '\\u0404',\n\tjukcy: '\\u0454',\n\tKappa: '\\u039A',\n\tkappa: '\\u03BA',\n\tkappav: '\\u03F0',\n\tKcedil: '\\u0136',\n\tkcedil: '\\u0137',\n\tKcy: '\\u041A',\n\tkcy: '\\u043A',\n\tKfr: '\\uD835\\uDD0E',\n\tkfr: '\\uD835\\uDD28',\n\tkgreen: '\\u0138',\n\tKHcy: '\\u0425',\n\tkhcy: '\\u0445',\n\tKJcy: '\\u040C',\n\tkjcy: '\\u045C',\n\tKopf: '\\uD835\\uDD42',\n\tkopf: '\\uD835\\uDD5C',\n\tKscr: '\\uD835\\uDCA6',\n\tkscr: '\\uD835\\uDCC0',\n\tlAarr: '\\u21DA',\n\tLacute: '\\u0139',\n\tlacute: '\\u013A',\n\tlaemptyv: '\\u29B4',\n\tlagran: '\\u2112',\n\tLambda: '\\u039B',\n\tlambda: '\\u03BB',\n\tLang: '\\u27EA',\n\tlang: '\\u27E8',\n\tlangd: '\\u2991',\n\tlangle: '\\u27E8',\n\tlap: '\\u2A85',\n\tLaplacetrf: '\\u2112',\n\tlaquo: '\\u00AB',\n\tLarr: '\\u219E',\n\tlArr: '\\u21D0',\n\tlarr: '\\u2190',\n\tlarrb: '\\u21E4',\n\tlarrbfs: '\\u291F',\n\tlarrfs: '\\u291D',\n\tlarrhk: '\\u21A9',\n\tlarrlp: '\\u21AB',\n\tlarrpl: '\\u2939',\n\tlarrsim: '\\u2973',\n\tlarrtl: '\\u21A2',\n\tlat: '\\u2AAB',\n\tlAtail: '\\u291B',\n\tlatail: '\\u2919',\n\tlate: '\\u2AAD',\n\tlates: '\\u2AAD\\uFE00',\n\tlBarr: '\\u290E',\n\tlbarr: '\\u290C',\n\tlbbrk: '\\u2772',\n\tlbrace: '\\u007B',\n\tlbrack: '\\u005B',\n\tlbrke: '\\u298B',\n\tlbrksld: '\\u298F',\n\tlbrkslu: '\\u298D',\n\tLcaron: '\\u013D',\n\tlcaron: '\\u013E',\n\tLcedil: '\\u013B',\n\tlcedil: '\\u013C',\n\tlceil: '\\u2308',\n\tlcub: '\\u007B',\n\tLcy: '\\u041B',\n\tlcy: '\\u043B',\n\tldca: '\\u2936',\n\tldquo: '\\u201C',\n\tldquor: '\\u201E',\n\tldrdhar: '\\u2967',\n\tldrushar: '\\u294B',\n\tldsh: '\\u21B2',\n\tlE: '\\u2266',\n\tle: '\\u2264',\n\tLeftAngleBracket: '\\u27E8',\n\tLeftArrow: '\\u2190',\n\tLeftarrow: '\\u21D0',\n\tleftarrow: '\\u2190',\n\tLeftArrowBar: '\\u21E4',\n\tLeftArrowRightArrow: '\\u21C6',\n\tleftarrowtail: '\\u21A2',\n\tLeftCeiling: '\\u2308',\n\tLeftDoubleBracket: '\\u27E6',\n\tLeftDownTeeVector: '\\u2961',\n\tLeftDownVector: '\\u21C3',\n\tLeftDownVectorBar: '\\u2959',\n\tLeftFloor: '\\u230A',\n\tleftharpoondown: '\\u21BD',\n\tleftharpoonup: '\\u21BC',\n\tleftleftarrows: '\\u21C7',\n\tLeftRightArrow: '\\u2194',\n\tLeftrightarrow: '\\u21D4',\n\tleftrightarrow: '\\u2194',\n\tleftrightarrows: '\\u21C6',\n\tleftrightharpoons: '\\u21CB',\n\tleftrightsquigarrow: '\\u21AD',\n\tLeftRightVector: '\\u294E',\n\tLeftTee: '\\u22A3',\n\tLeftTeeArrow: '\\u21A4',\n\tLeftTeeVector: '\\u295A',\n\tleftthreetimes: '\\u22CB',\n\tLeftTriangle: '\\u22B2',\n\tLeftTriangleBar: '\\u29CF',\n\tLeftTriangleEqual: '\\u22B4',\n\tLeftUpDownVector: '\\u2951',\n\tLeftUpTeeVector: '\\u2960',\n\tLeftUpVector: '\\u21BF',\n\tLeftUpVectorBar: '\\u2958',\n\tLeftVector: '\\u21BC',\n\tLeftVectorBar: '\\u2952',\n\tlEg: '\\u2A8B',\n\tleg: '\\u22DA',\n\tleq: '\\u2264',\n\tleqq: '\\u2266',\n\tleqslant: '\\u2A7D',\n\tles: '\\u2A7D',\n\tlescc: '\\u2AA8',\n\tlesdot: '\\u2A7F',\n\tlesdoto: '\\u2A81',\n\tlesdotor: '\\u2A83',\n\tlesg: '\\u22DA\\uFE00',\n\tlesges: '\\u2A93',\n\tlessapprox: '\\u2A85',\n\tlessdot: '\\u22D6',\n\tlesseqgtr: '\\u22DA',\n\tlesseqqgtr: '\\u2A8B',\n\tLessEqualGreater: '\\u22DA',\n\tLessFullEqual: '\\u2266',\n\tLessGreater: '\\u2276',\n\tlessgtr: '\\u2276',\n\tLessLess: '\\u2AA1',\n\tlesssim: '\\u2272',\n\tLessSlantEqual: '\\u2A7D',\n\tLessTilde: '\\u2272',\n\tlfisht: '\\u297C',\n\tlfloor: '\\u230A',\n\tLfr: '\\uD835\\uDD0F',\n\tlfr: '\\uD835\\uDD29',\n\tlg: '\\u2276',\n\tlgE: '\\u2A91',\n\tlHar: '\\u2962',\n\tlhard: '\\u21BD',\n\tlharu: '\\u21BC',\n\tlharul: '\\u296A',\n\tlhblk: '\\u2584',\n\tLJcy: '\\u0409',\n\tljcy: '\\u0459',\n\tLl: '\\u22D8',\n\tll: '\\u226A',\n\tllarr: '\\u21C7',\n\tllcorner: '\\u231E',\n\tLleftarrow: '\\u21DA',\n\tllhard: '\\u296B',\n\tlltri: '\\u25FA',\n\tLmidot: '\\u013F',\n\tlmidot: '\\u0140',\n\tlmoust: '\\u23B0',\n\tlmoustache: '\\u23B0',\n\tlnap: '\\u2A89',\n\tlnapprox: '\\u2A89',\n\tlnE: '\\u2268',\n\tlne: '\\u2A87',\n\tlneq: '\\u2A87',\n\tlneqq: '\\u2268',\n\tlnsim: '\\u22E6',\n\tloang: '\\u27EC',\n\tloarr: '\\u21FD',\n\tlobrk: '\\u27E6',\n\tLongLeftArrow: '\\u27F5',\n\tLongleftarrow: '\\u27F8',\n\tlongleftarrow: '\\u27F5',\n\tLongLeftRightArrow: '\\u27F7',\n\tLongleftrightarrow: '\\u27FA',\n\tlongleftrightarrow: '\\u27F7',\n\tlongmapsto: '\\u27FC',\n\tLongRightArrow: '\\u27F6',\n\tLongrightarrow: '\\u27F9',\n\tlongrightarrow: '\\u27F6',\n\tlooparrowleft: '\\u21AB',\n\tlooparrowright: '\\u21AC',\n\tlopar: '\\u2985',\n\tLopf: '\\uD835\\uDD43',\n\tlopf: '\\uD835\\uDD5D',\n\tloplus: '\\u2A2D',\n\tlotimes: '\\u2A34',\n\tlowast: '\\u2217',\n\tlowbar: '\\u005F',\n\tLowerLeftArrow: '\\u2199',\n\tLowerRightArrow: '\\u2198',\n\tloz: '\\u25CA',\n\tlozenge: '\\u25CA',\n\tlozf: '\\u29EB',\n\tlpar: '\\u0028',\n\tlparlt: '\\u2993',\n\tlrarr: '\\u21C6',\n\tlrcorner: '\\u231F',\n\tlrhar: '\\u21CB',\n\tlrhard: '\\u296D',\n\tlrm: '\\u200E',\n\tlrtri: '\\u22BF',\n\tlsaquo: '\\u2039',\n\tLscr: '\\u2112',\n\tlscr: '\\uD835\\uDCC1',\n\tLsh: '\\u21B0',\n\tlsh: '\\u21B0',\n\tlsim: '\\u2272',\n\tlsime: '\\u2A8D',\n\tlsimg: '\\u2A8F',\n\tlsqb: '\\u005B',\n\tlsquo: '\\u2018',\n\tlsquor: '\\u201A',\n\tLstrok: '\\u0141',\n\tlstrok: '\\u0142',\n\tLt: '\\u226A',\n\tLT: '\\u003C',\n\tlt: '\\u003C',\n\tltcc: '\\u2AA6',\n\tltcir: '\\u2A79',\n\tltdot: '\\u22D6',\n\tlthree: '\\u22CB',\n\tltimes: '\\u22C9',\n\tltlarr: '\\u2976',\n\tltquest: '\\u2A7B',\n\tltri: '\\u25C3',\n\tltrie: '\\u22B4',\n\tltrif: '\\u25C2',\n\tltrPar: '\\u2996',\n\tlurdshar: '\\u294A',\n\tluruhar: '\\u2966',\n\tlvertneqq: '\\u2268\\uFE00',\n\tlvnE: '\\u2268\\uFE00',\n\tmacr: '\\u00AF',\n\tmale: '\\u2642',\n\tmalt: '\\u2720',\n\tmaltese: '\\u2720',\n\tMap: '\\u2905',\n\tmap: '\\u21A6',\n\tmapsto: '\\u21A6',\n\tmapstodown: '\\u21A7',\n\tmapstoleft: '\\u21A4',\n\tmapstoup: '\\u21A5',\n\tmarker: '\\u25AE',\n\tmcomma: '\\u2A29',\n\tMcy: '\\u041C',\n\tmcy: '\\u043C',\n\tmdash: '\\u2014',\n\tmDDot: '\\u223A',\n\tmeasuredangle: '\\u2221',\n\tMediumSpace: '\\u205F',\n\tMellintrf: '\\u2133',\n\tMfr: '\\uD835\\uDD10',\n\tmfr: '\\uD835\\uDD2A',\n\tmho: '\\u2127',\n\tmicro: '\\u00B5',\n\tmid: '\\u2223',\n\tmidast: '\\u002A',\n\tmidcir: '\\u2AF0',\n\tmiddot: '\\u00B7',\n\tminus: '\\u2212',\n\tminusb: '\\u229F',\n\tminusd: '\\u2238',\n\tminusdu: '\\u2A2A',\n\tMinusPlus: '\\u2213',\n\tmlcp: '\\u2ADB',\n\tmldr: '\\u2026',\n\tmnplus: '\\u2213',\n\tmodels: '\\u22A7',\n\tMopf: '\\uD835\\uDD44',\n\tmopf: '\\uD835\\uDD5E',\n\tmp: '\\u2213',\n\tMscr: '\\u2133',\n\tmscr: '\\uD835\\uDCC2',\n\tmstpos: '\\u223E',\n\tMu: '\\u039C',\n\tmu: '\\u03BC',\n\tmultimap: '\\u22B8',\n\tmumap: '\\u22B8',\n\tnabla: '\\u2207',\n\tNacute: '\\u0143',\n\tnacute: '\\u0144',\n\tnang: '\\u2220\\u20D2',\n\tnap: '\\u2249',\n\tnapE: '\\u2A70\\u0338',\n\tnapid: '\\u224B\\u0338',\n\tnapos: '\\u0149',\n\tnapprox: '\\u2249',\n\tnatur: '\\u266E',\n\tnatural: '\\u266E',\n\tnaturals: '\\u2115',\n\tnbsp: '\\u00A0',\n\tnbump: '\\u224E\\u0338',\n\tnbumpe: '\\u224F\\u0338',\n\tncap: '\\u2A43',\n\tNcaron: '\\u0147',\n\tncaron: '\\u0148',\n\tNcedil: '\\u0145',\n\tncedil: '\\u0146',\n\tncong: '\\u2247',\n\tncongdot: '\\u2A6D\\u0338',\n\tncup: '\\u2A42',\n\tNcy: '\\u041D',\n\tncy: '\\u043D',\n\tndash: '\\u2013',\n\tne: '\\u2260',\n\tnearhk: '\\u2924',\n\tneArr: '\\u21D7',\n\tnearr: '\\u2197',\n\tnearrow: '\\u2197',\n\tnedot: '\\u2250\\u0338',\n\tNegativeMediumSpace: '\\u200B',\n\tNegativeThickSpace: '\\u200B',\n\tNegativeThinSpace: '\\u200B',\n\tNegativeVeryThinSpace: '\\u200B',\n\tnequiv: '\\u2262',\n\tnesear: '\\u2928',\n\tnesim: '\\u2242\\u0338',\n\tNestedGreaterGreater: '\\u226B',\n\tNestedLessLess: '\\u226A',\n\tNewLine: '\\u000A',\n\tnexist: '\\u2204',\n\tnexists: '\\u2204',\n\tNfr: '\\uD835\\uDD11',\n\tnfr: '\\uD835\\uDD2B',\n\tngE: '\\u2267\\u0338',\n\tnge: '\\u2271',\n\tngeq: '\\u2271',\n\tngeqq: '\\u2267\\u0338',\n\tngeqslant: '\\u2A7E\\u0338',\n\tnges: '\\u2A7E\\u0338',\n\tnGg: '\\u22D9\\u0338',\n\tngsim: '\\u2275',\n\tnGt: '\\u226B\\u20D2',\n\tngt: '\\u226F',\n\tngtr: '\\u226F',\n\tnGtv: '\\u226B\\u0338',\n\tnhArr: '\\u21CE',\n\tnharr: '\\u21AE',\n\tnhpar: '\\u2AF2',\n\tni: '\\u220B',\n\tnis: '\\u22FC',\n\tnisd: '\\u22FA',\n\tniv: '\\u220B',\n\tNJcy: '\\u040A',\n\tnjcy: '\\u045A',\n\tnlArr: '\\u21CD',\n\tnlarr: '\\u219A',\n\tnldr: '\\u2025',\n\tnlE: '\\u2266\\u0338',\n\tnle: '\\u2270',\n\tnLeftarrow: '\\u21CD',\n\tnleftarrow: '\\u219A',\n\tnLeftrightarrow: '\\u21CE',\n\tnleftrightarrow: '\\u21AE',\n\tnleq: '\\u2270',\n\tnleqq: '\\u2266\\u0338',\n\tnleqslant: '\\u2A7D\\u0338',\n\tnles: '\\u2A7D\\u0338',\n\tnless: '\\u226E',\n\tnLl: '\\u22D8\\u0338',\n\tnlsim: '\\u2274',\n\tnLt: '\\u226A\\u20D2',\n\tnlt: '\\u226E',\n\tnltri: '\\u22EA',\n\tnltrie: '\\u22EC',\n\tnLtv: '\\u226A\\u0338',\n\tnmid: '\\u2224',\n\tNoBreak: '\\u2060',\n\tNonBreakingSpace: '\\u00A0',\n\tNopf: '\\u2115',\n\tnopf: '\\uD835\\uDD5F',\n\tNot: '\\u2AEC',\n\tnot: '\\u00AC',\n\tNotCongruent: '\\u2262',\n\tNotCupCap: '\\u226D',\n\tNotDoubleVerticalBar: '\\u2226',\n\tNotElement: '\\u2209',\n\tNotEqual: '\\u2260',\n\tNotEqualTilde: '\\u2242\\u0338',\n\tNotExists: '\\u2204',\n\tNotGreater: '\\u226F',\n\tNotGreaterEqual: '\\u2271',\n\tNotGreaterFullEqual: '\\u2267\\u0338',\n\tNotGreaterGreater: '\\u226B\\u0338',\n\tNotGreaterLess: '\\u2279',\n\tNotGreaterSlantEqual: '\\u2A7E\\u0338',\n\tNotGreaterTilde: '\\u2275',\n\tNotHumpDownHump: '\\u224E\\u0338',\n\tNotHumpEqual: '\\u224F\\u0338',\n\tnotin: '\\u2209',\n\tnotindot: '\\u22F5\\u0338',\n\tnotinE: '\\u22F9\\u0338',\n\tnotinva: '\\u2209',\n\tnotinvb: '\\u22F7',\n\tnotinvc: '\\u22F6',\n\tNotLeftTriangle: '\\u22EA',\n\tNotLeftTriangleBar: '\\u29CF\\u0338',\n\tNotLeftTriangleEqual: '\\u22EC',\n\tNotLess: '\\u226E',\n\tNotLessEqual: '\\u2270',\n\tNotLessGreater: '\\u2278',\n\tNotLessLess: '\\u226A\\u0338',\n\tNotLessSlantEqual: '\\u2A7D\\u0338',\n\tNotLessTilde: '\\u2274',\n\tNotNestedGreaterGreater: '\\u2AA2\\u0338',\n\tNotNestedLessLess: '\\u2AA1\\u0338',\n\tnotni: '\\u220C',\n\tnotniva: '\\u220C',\n\tnotnivb: '\\u22FE',\n\tnotnivc: '\\u22FD',\n\tNotPrecedes: '\\u2280',\n\tNotPrecedesEqual: '\\u2AAF\\u0338',\n\tNotPrecedesSlantEqual: '\\u22E0',\n\tNotReverseElement: '\\u220C',\n\tNotRightTriangle: '\\u22EB',\n\tNotRightTriangleBar: '\\u29D0\\u0338',\n\tNotRightTriangleEqual: '\\u22ED',\n\tNotSquareSubset: '\\u228F\\u0338',\n\tNotSquareSubsetEqual: '\\u22E2',\n\tNotSquareSuperset: '\\u2290\\u0338',\n\tNotSquareSupersetEqual: '\\u22E3',\n\tNotSubset: '\\u2282\\u20D2',\n\tNotSubsetEqual: '\\u2288',\n\tNotSucceeds: '\\u2281',\n\tNotSucceedsEqual: '\\u2AB0\\u0338',\n\tNotSucceedsSlantEqual: '\\u22E1',\n\tNotSucceedsTilde: '\\u227F\\u0338',\n\tNotSuperset: '\\u2283\\u20D2',\n\tNotSupersetEqual: '\\u2289',\n\tNotTilde: '\\u2241',\n\tNotTildeEqual: '\\u2244',\n\tNotTildeFullEqual: '\\u2247',\n\tNotTildeTilde: '\\u2249',\n\tNotVerticalBar: '\\u2224',\n\tnpar: '\\u2226',\n\tnparallel: '\\u2226',\n\tnparsl: '\\u2AFD\\u20E5',\n\tnpart: '\\u2202\\u0338',\n\tnpolint: '\\u2A14',\n\tnpr: '\\u2280',\n\tnprcue: '\\u22E0',\n\tnpre: '\\u2AAF\\u0338',\n\tnprec: '\\u2280',\n\tnpreceq: '\\u2AAF\\u0338',\n\tnrArr: '\\u21CF',\n\tnrarr: '\\u219B',\n\tnrarrc: '\\u2933\\u0338',\n\tnrarrw: '\\u219D\\u0338',\n\tnRightarrow: '\\u21CF',\n\tnrightarrow: '\\u219B',\n\tnrtri: '\\u22EB',\n\tnrtrie: '\\u22ED',\n\tnsc: '\\u2281',\n\tnsccue: '\\u22E1',\n\tnsce: '\\u2AB0\\u0338',\n\tNscr: '\\uD835\\uDCA9',\n\tnscr: '\\uD835\\uDCC3',\n\tnshortmid: '\\u2224',\n\tnshortparallel: '\\u2226',\n\tnsim: '\\u2241',\n\tnsime: '\\u2244',\n\tnsimeq: '\\u2244',\n\tnsmid: '\\u2224',\n\tnspar: '\\u2226',\n\tnsqsube: '\\u22E2',\n\tnsqsupe: '\\u22E3',\n\tnsub: '\\u2284',\n\tnsubE: '\\u2AC5\\u0338',\n\tnsube: '\\u2288',\n\tnsubset: '\\u2282\\u20D2',\n\tnsubseteq: '\\u2288',\n\tnsubseteqq: '\\u2AC5\\u0338',\n\tnsucc: '\\u2281',\n\tnsucceq: '\\u2AB0\\u0338',\n\tnsup: '\\u2285',\n\tnsupE: '\\u2AC6\\u0338',\n\tnsupe: '\\u2289',\n\tnsupset: '\\u2283\\u20D2',\n\tnsupseteq: '\\u2289',\n\tnsupseteqq: '\\u2AC6\\u0338',\n\tntgl: '\\u2279',\n\tNtilde: '\\u00D1',\n\tntilde: '\\u00F1',\n\tntlg: '\\u2278',\n\tntriangleleft: '\\u22EA',\n\tntrianglelefteq: '\\u22EC',\n\tntriangleright: '\\u22EB',\n\tntrianglerighteq: '\\u22ED',\n\tNu: '\\u039D',\n\tnu: '\\u03BD',\n\tnum: '\\u0023',\n\tnumero: '\\u2116',\n\tnumsp: '\\u2007',\n\tnvap: '\\u224D\\u20D2',\n\tnVDash: '\\u22AF',\n\tnVdash: '\\u22AE',\n\tnvDash: '\\u22AD',\n\tnvdash: '\\u22AC',\n\tnvge: '\\u2265\\u20D2',\n\tnvgt: '\\u003E\\u20D2',\n\tnvHarr: '\\u2904',\n\tnvinfin: '\\u29DE',\n\tnvlArr: '\\u2902',\n\tnvle: '\\u2264\\u20D2',\n\tnvlt: '\\u003C\\u20D2',\n\tnvltrie: '\\u22B4\\u20D2',\n\tnvrArr: '\\u2903',\n\tnvrtrie: '\\u22B5\\u20D2',\n\tnvsim: '\\u223C\\u20D2',\n\tnwarhk: '\\u2923',\n\tnwArr: '\\u21D6',\n\tnwarr: '\\u2196',\n\tnwarrow: '\\u2196',\n\tnwnear: '\\u2927',\n\tOacute: '\\u00D3',\n\toacute: '\\u00F3',\n\toast: '\\u229B',\n\tocir: '\\u229A',\n\tOcirc: '\\u00D4',\n\tocirc: '\\u00F4',\n\tOcy: '\\u041E',\n\tocy: '\\u043E',\n\todash: '\\u229D',\n\tOdblac: '\\u0150',\n\todblac: '\\u0151',\n\todiv: '\\u2A38',\n\todot: '\\u2299',\n\todsold: '\\u29BC',\n\tOElig: '\\u0152',\n\toelig: '\\u0153',\n\tofcir: '\\u29BF',\n\tOfr: '\\uD835\\uDD12',\n\tofr: '\\uD835\\uDD2C',\n\togon: '\\u02DB',\n\tOgrave: '\\u00D2',\n\tograve: '\\u00F2',\n\togt: '\\u29C1',\n\tohbar: '\\u29B5',\n\tohm: '\\u03A9',\n\toint: '\\u222E',\n\tolarr: '\\u21BA',\n\tolcir: '\\u29BE',\n\tolcross: '\\u29BB',\n\toline: '\\u203E',\n\tolt: '\\u29C0',\n\tOmacr: '\\u014C',\n\tomacr: '\\u014D',\n\tOmega: '\\u03A9',\n\tomega: '\\u03C9',\n\tOmicron: '\\u039F',\n\tomicron: '\\u03BF',\n\tomid: '\\u29B6',\n\tominus: '\\u2296',\n\tOopf: '\\uD835\\uDD46',\n\toopf: '\\uD835\\uDD60',\n\topar: '\\u29B7',\n\tOpenCurlyDoubleQuote: '\\u201C',\n\tOpenCurlyQuote: '\\u2018',\n\toperp: '\\u29B9',\n\toplus: '\\u2295',\n\tOr: '\\u2A54',\n\tor: '\\u2228',\n\torarr: '\\u21BB',\n\tord: '\\u2A5D',\n\torder: '\\u2134',\n\torderof: '\\u2134',\n\tordf: '\\u00AA',\n\tordm: '\\u00BA',\n\torigof: '\\u22B6',\n\toror: '\\u2A56',\n\torslope: '\\u2A57',\n\torv: '\\u2A5B',\n\toS: '\\u24C8',\n\tOscr: '\\uD835\\uDCAA',\n\toscr: '\\u2134',\n\tOslash: '\\u00D8',\n\toslash: '\\u00F8',\n\tosol: '\\u2298',\n\tOtilde: '\\u00D5',\n\totilde: '\\u00F5',\n\tOtimes: '\\u2A37',\n\totimes: '\\u2297',\n\totimesas: '\\u2A36',\n\tOuml: '\\u00D6',\n\touml: '\\u00F6',\n\tovbar: '\\u233D',\n\tOverBar: '\\u203E',\n\tOverBrace: '\\u23DE',\n\tOverBracket: '\\u23B4',\n\tOverParenthesis: '\\u23DC',\n\tpar: '\\u2225',\n\tpara: '\\u00B6',\n\tparallel: '\\u2225',\n\tparsim: '\\u2AF3',\n\tparsl: '\\u2AFD',\n\tpart: '\\u2202',\n\tPartialD: '\\u2202',\n\tPcy: '\\u041F',\n\tpcy: '\\u043F',\n\tpercnt: '\\u0025',\n\tperiod: '\\u002E',\n\tpermil: '\\u2030',\n\tperp: '\\u22A5',\n\tpertenk: '\\u2031',\n\tPfr: '\\uD835\\uDD13',\n\tpfr: '\\uD835\\uDD2D',\n\tPhi: '\\u03A6',\n\tphi: '\\u03C6',\n\tphiv: '\\u03D5',\n\tphmmat: '\\u2133',\n\tphone: '\\u260E',\n\tPi: '\\u03A0',\n\tpi: '\\u03C0',\n\tpitchfork: '\\u22D4',\n\tpiv: '\\u03D6',\n\tplanck: '\\u210F',\n\tplanckh: '\\u210E',\n\tplankv: '\\u210F',\n\tplus: '\\u002B',\n\tplusacir: '\\u2A23',\n\tplusb: '\\u229E',\n\tpluscir: '\\u2A22',\n\tplusdo: '\\u2214',\n\tplusdu: '\\u2A25',\n\tpluse: '\\u2A72',\n\tPlusMinus: '\\u00B1',\n\tplusmn: '\\u00B1',\n\tplussim: '\\u2A26',\n\tplustwo: '\\u2A27',\n\tpm: '\\u00B1',\n\tPoincareplane: '\\u210C',\n\tpointint: '\\u2A15',\n\tPopf: '\\u2119',\n\tpopf: '\\uD835\\uDD61',\n\tpound: '\\u00A3',\n\tPr: '\\u2ABB',\n\tpr: '\\u227A',\n\tprap: '\\u2AB7',\n\tprcue: '\\u227C',\n\tprE: '\\u2AB3',\n\tpre: '\\u2AAF',\n\tprec: '\\u227A',\n\tprecapprox: '\\u2AB7',\n\tpreccurlyeq: '\\u227C',\n\tPrecedes: '\\u227A',\n\tPrecedesEqual: '\\u2AAF',\n\tPrecedesSlantEqual: '\\u227C',\n\tPrecedesTilde: '\\u227E',\n\tpreceq: '\\u2AAF',\n\tprecnapprox: '\\u2AB9',\n\tprecneqq: '\\u2AB5',\n\tprecnsim: '\\u22E8',\n\tprecsim: '\\u227E',\n\tPrime: '\\u2033',\n\tprime: '\\u2032',\n\tprimes: '\\u2119',\n\tprnap: '\\u2AB9',\n\tprnE: '\\u2AB5',\n\tprnsim: '\\u22E8',\n\tprod: '\\u220F',\n\tProduct: '\\u220F',\n\tprofalar: '\\u232E',\n\tprofline: '\\u2312',\n\tprofsurf: '\\u2313',\n\tprop: '\\u221D',\n\tProportion: '\\u2237',\n\tProportional: '\\u221D',\n\tpropto: '\\u221D',\n\tprsim: '\\u227E',\n\tprurel: '\\u22B0',\n\tPscr: '\\uD835\\uDCAB',\n\tpscr: '\\uD835\\uDCC5',\n\tPsi: '\\u03A8',\n\tpsi: '\\u03C8',\n\tpuncsp: '\\u2008',\n\tQfr: '\\uD835\\uDD14',\n\tqfr: '\\uD835\\uDD2E',\n\tqint: '\\u2A0C',\n\tQopf: '\\u211A',\n\tqopf: '\\uD835\\uDD62',\n\tqprime: '\\u2057',\n\tQscr: '\\uD835\\uDCAC',\n\tqscr: '\\uD835\\uDCC6',\n\tquaternions: '\\u210D',\n\tquatint: '\\u2A16',\n\tquest: '\\u003F',\n\tquesteq: '\\u225F',\n\tQUOT: '\\u0022',\n\tquot: '\\u0022',\n\trAarr: '\\u21DB',\n\trace: '\\u223D\\u0331',\n\tRacute: '\\u0154',\n\tracute: '\\u0155',\n\tradic: '\\u221A',\n\traemptyv: '\\u29B3',\n\tRang: '\\u27EB',\n\trang: '\\u27E9',\n\trangd: '\\u2992',\n\trange: '\\u29A5',\n\trangle: '\\u27E9',\n\traquo: '\\u00BB',\n\tRarr: '\\u21A0',\n\trArr: '\\u21D2',\n\trarr: '\\u2192',\n\trarrap: '\\u2975',\n\trarrb: '\\u21E5',\n\trarrbfs: '\\u2920',\n\trarrc: '\\u2933',\n\trarrfs: '\\u291E',\n\trarrhk: '\\u21AA',\n\trarrlp: '\\u21AC',\n\trarrpl: '\\u2945',\n\trarrsim: '\\u2974',\n\tRarrtl: '\\u2916',\n\trarrtl: '\\u21A3',\n\trarrw: '\\u219D',\n\trAtail: '\\u291C',\n\tratail: '\\u291A',\n\tratio: '\\u2236',\n\trationals: '\\u211A',\n\tRBarr: '\\u2910',\n\trBarr: '\\u290F',\n\trbarr: '\\u290D',\n\trbbrk: '\\u2773',\n\trbrace: '\\u007D',\n\trbrack: '\\u005D',\n\trbrke: '\\u298C',\n\trbrksld: '\\u298E',\n\trbrkslu: '\\u2990',\n\tRcaron: '\\u0158',\n\trcaron: '\\u0159',\n\tRcedil: '\\u0156',\n\trcedil: '\\u0157',\n\trceil: '\\u2309',\n\trcub: '\\u007D',\n\tRcy: '\\u0420',\n\trcy: '\\u0440',\n\trdca: '\\u2937',\n\trdldhar: '\\u2969',\n\trdquo: '\\u201D',\n\trdquor: '\\u201D',\n\trdsh: '\\u21B3',\n\tRe: '\\u211C',\n\treal: '\\u211C',\n\trealine: '\\u211B',\n\trealpart: '\\u211C',\n\treals: '\\u211D',\n\trect: '\\u25AD',\n\tREG: '\\u00AE',\n\treg: '\\u00AE',\n\tReverseElement: '\\u220B',\n\tReverseEquilibrium: '\\u21CB',\n\tReverseUpEquilibrium: '\\u296F',\n\trfisht: '\\u297D',\n\trfloor: '\\u230B',\n\tRfr: '\\u211C',\n\trfr: '\\uD835\\uDD2F',\n\trHar: '\\u2964',\n\trhard: '\\u21C1',\n\trharu: '\\u21C0',\n\trharul: '\\u296C',\n\tRho: '\\u03A1',\n\trho: '\\u03C1',\n\trhov: '\\u03F1',\n\tRightAngleBracket: '\\u27E9',\n\tRightArrow: '\\u2192',\n\tRightarrow: '\\u21D2',\n\trightarrow: '\\u2192',\n\tRightArrowBar: '\\u21E5',\n\tRightArrowLeftArrow: '\\u21C4',\n\trightarrowtail: '\\u21A3',\n\tRightCeiling: '\\u2309',\n\tRightDoubleBracket: '\\u27E7',\n\tRightDownTeeVector: '\\u295D',\n\tRightDownVector: '\\u21C2',\n\tRightDownVectorBar: '\\u2955',\n\tRightFloor: '\\u230B',\n\trightharpoondown: '\\u21C1',\n\trightharpoonup: '\\u21C0',\n\trightleftarrows: '\\u21C4',\n\trightleftharpoons: '\\u21CC',\n\trightrightarrows: '\\u21C9',\n\trightsquigarrow: '\\u219D',\n\tRightTee: '\\u22A2',\n\tRightTeeArrow: '\\u21A6',\n\tRightTeeVector: '\\u295B',\n\trightthreetimes: '\\u22CC',\n\tRightTriangle: '\\u22B3',\n\tRightTriangleBar: '\\u29D0',\n\tRightTriangleEqual: '\\u22B5',\n\tRightUpDownVector: '\\u294F',\n\tRightUpTeeVector: '\\u295C',\n\tRightUpVector: '\\u21BE',\n\tRightUpVectorBar: '\\u2954',\n\tRightVector: '\\u21C0',\n\tRightVectorBar: '\\u2953',\n\tring: '\\u02DA',\n\trisingdotseq: '\\u2253',\n\trlarr: '\\u21C4',\n\trlhar: '\\u21CC',\n\trlm: '\\u200F',\n\trmoust: '\\u23B1',\n\trmoustache: '\\u23B1',\n\trnmid: '\\u2AEE',\n\troang: '\\u27ED',\n\troarr: '\\u21FE',\n\trobrk: '\\u27E7',\n\tropar: '\\u2986',\n\tRopf: '\\u211D',\n\tropf: '\\uD835\\uDD63',\n\troplus: '\\u2A2E',\n\trotimes: '\\u2A35',\n\tRoundImplies: '\\u2970',\n\trpar: '\\u0029',\n\trpargt: '\\u2994',\n\trppolint: '\\u2A12',\n\trrarr: '\\u21C9',\n\tRrightarrow: '\\u21DB',\n\trsaquo: '\\u203A',\n\tRscr: '\\u211B',\n\trscr: '\\uD835\\uDCC7',\n\tRsh: '\\u21B1',\n\trsh: '\\u21B1',\n\trsqb: '\\u005D',\n\trsquo: '\\u2019',\n\trsquor: '\\u2019',\n\trthree: '\\u22CC',\n\trtimes: '\\u22CA',\n\trtri: '\\u25B9',\n\trtrie: '\\u22B5',\n\trtrif: '\\u25B8',\n\trtriltri: '\\u29CE',\n\tRuleDelayed: '\\u29F4',\n\truluhar: '\\u2968',\n\trx: '\\u211E',\n\tSacute: '\\u015A',\n\tsacute: '\\u015B',\n\tsbquo: '\\u201A',\n\tSc: '\\u2ABC',\n\tsc: '\\u227B',\n\tscap: '\\u2AB8',\n\tScaron: '\\u0160',\n\tscaron: '\\u0161',\n\tsccue: '\\u227D',\n\tscE: '\\u2AB4',\n\tsce: '\\u2AB0',\n\tScedil: '\\u015E',\n\tscedil: '\\u015F',\n\tScirc: '\\u015C',\n\tscirc: '\\u015D',\n\tscnap: '\\u2ABA',\n\tscnE: '\\u2AB6',\n\tscnsim: '\\u22E9',\n\tscpolint: '\\u2A13',\n\tscsim: '\\u227F',\n\tScy: '\\u0421',\n\tscy: '\\u0441',\n\tsdot: '\\u22C5',\n\tsdotb: '\\u22A1',\n\tsdote: '\\u2A66',\n\tsearhk: '\\u2925',\n\tseArr: '\\u21D8',\n\tsearr: '\\u2198',\n\tsearrow: '\\u2198',\n\tsect: '\\u00A7',\n\tsemi: '\\u003B',\n\tseswar: '\\u2929',\n\tsetminus: '\\u2216',\n\tsetmn: '\\u2216',\n\tsext: '\\u2736',\n\tSfr: '\\uD835\\uDD16',\n\tsfr: '\\uD835\\uDD30',\n\tsfrown: '\\u2322',\n\tsharp: '\\u266F',\n\tSHCHcy: '\\u0429',\n\tshchcy: '\\u0449',\n\tSHcy: '\\u0428',\n\tshcy: '\\u0448',\n\tShortDownArrow: '\\u2193',\n\tShortLeftArrow: '\\u2190',\n\tshortmid: '\\u2223',\n\tshortparallel: '\\u2225',\n\tShortRightArrow: '\\u2192',\n\tShortUpArrow: '\\u2191',\n\tshy: '\\u00AD',\n\tSigma: '\\u03A3',\n\tsigma: '\\u03C3',\n\tsigmaf: '\\u03C2',\n\tsigmav: '\\u03C2',\n\tsim: '\\u223C',\n\tsimdot: '\\u2A6A',\n\tsime: '\\u2243',\n\tsimeq: '\\u2243',\n\tsimg: '\\u2A9E',\n\tsimgE: '\\u2AA0',\n\tsiml: '\\u2A9D',\n\tsimlE: '\\u2A9F',\n\tsimne: '\\u2246',\n\tsimplus: '\\u2A24',\n\tsimrarr: '\\u2972',\n\tslarr: '\\u2190',\n\tSmallCircle: '\\u2218',\n\tsmallsetminus: '\\u2216',\n\tsmashp: '\\u2A33',\n\tsmeparsl: '\\u29E4',\n\tsmid: '\\u2223',\n\tsmile: '\\u2323',\n\tsmt: '\\u2AAA',\n\tsmte: '\\u2AAC',\n\tsmtes: '\\u2AAC\\uFE00',\n\tSOFTcy: '\\u042C',\n\tsoftcy: '\\u044C',\n\tsol: '\\u002F',\n\tsolb: '\\u29C4',\n\tsolbar: '\\u233F',\n\tSopf: '\\uD835\\uDD4A',\n\tsopf: '\\uD835\\uDD64',\n\tspades: '\\u2660',\n\tspadesuit: '\\u2660',\n\tspar: '\\u2225',\n\tsqcap: '\\u2293',\n\tsqcaps: '\\u2293\\uFE00',\n\tsqcup: '\\u2294',\n\tsqcups: '\\u2294\\uFE00',\n\tSqrt: '\\u221A',\n\tsqsub: '\\u228F',\n\tsqsube: '\\u2291',\n\tsqsubset: '\\u228F',\n\tsqsubseteq: '\\u2291',\n\tsqsup: '\\u2290',\n\tsqsupe: '\\u2292',\n\tsqsupset: '\\u2290',\n\tsqsupseteq: '\\u2292',\n\tsqu: '\\u25A1',\n\tSquare: '\\u25A1',\n\tsquare: '\\u25A1',\n\tSquareIntersection: '\\u2293',\n\tSquareSubset: '\\u228F',\n\tSquareSubsetEqual: '\\u2291',\n\tSquareSuperset: '\\u2290',\n\tSquareSupersetEqual: '\\u2292',\n\tSquareUnion: '\\u2294',\n\tsquarf: '\\u25AA',\n\tsquf: '\\u25AA',\n\tsrarr: '\\u2192',\n\tSscr: '\\uD835\\uDCAE',\n\tsscr: '\\uD835\\uDCC8',\n\tssetmn: '\\u2216',\n\tssmile: '\\u2323',\n\tsstarf: '\\u22C6',\n\tStar: '\\u22C6',\n\tstar: '\\u2606',\n\tstarf: '\\u2605',\n\tstraightepsilon: '\\u03F5',\n\tstraightphi: '\\u03D5',\n\tstrns: '\\u00AF',\n\tSub: '\\u22D0',\n\tsub: '\\u2282',\n\tsubdot: '\\u2ABD',\n\tsubE: '\\u2AC5',\n\tsube: '\\u2286',\n\tsubedot: '\\u2AC3',\n\tsubmult: '\\u2AC1',\n\tsubnE: '\\u2ACB',\n\tsubne: '\\u228A',\n\tsubplus: '\\u2ABF',\n\tsubrarr: '\\u2979',\n\tSubset: '\\u22D0',\n\tsubset: '\\u2282',\n\tsubseteq: '\\u2286',\n\tsubseteqq: '\\u2AC5',\n\tSubsetEqual: '\\u2286',\n\tsubsetneq: '\\u228A',\n\tsubsetneqq: '\\u2ACB',\n\tsubsim: '\\u2AC7',\n\tsubsub: '\\u2AD5',\n\tsubsup: '\\u2AD3',\n\tsucc: '\\u227B',\n\tsuccapprox: '\\u2AB8',\n\tsucccurlyeq: '\\u227D',\n\tSucceeds: '\\u227B',\n\tSucceedsEqual: '\\u2AB0',\n\tSucceedsSlantEqual: '\\u227D',\n\tSucceedsTilde: '\\u227F',\n\tsucceq: '\\u2AB0',\n\tsuccnapprox: '\\u2ABA',\n\tsuccneqq: '\\u2AB6',\n\tsuccnsim: '\\u22E9',\n\tsuccsim: '\\u227F',\n\tSuchThat: '\\u220B',\n\tSum: '\\u2211',\n\tsum: '\\u2211',\n\tsung: '\\u266A',\n\tSup: '\\u22D1',\n\tsup: '\\u2283',\n\tsup1: '\\u00B9',\n\tsup2: '\\u00B2',\n\tsup3: '\\u00B3',\n\tsupdot: '\\u2ABE',\n\tsupdsub: '\\u2AD8',\n\tsupE: '\\u2AC6',\n\tsupe: '\\u2287',\n\tsupedot: '\\u2AC4',\n\tSuperset: '\\u2283',\n\tSupersetEqual: '\\u2287',\n\tsuphsol: '\\u27C9',\n\tsuphsub: '\\u2AD7',\n\tsuplarr: '\\u297B',\n\tsupmult: '\\u2AC2',\n\tsupnE: '\\u2ACC',\n\tsupne: '\\u228B',\n\tsupplus: '\\u2AC0',\n\tSupset: '\\u22D1',\n\tsupset: '\\u2283',\n\tsupseteq: '\\u2287',\n\tsupseteqq: '\\u2AC6',\n\tsupsetneq: '\\u228B',\n\tsupsetneqq: '\\u2ACC',\n\tsupsim: '\\u2AC8',\n\tsupsub: '\\u2AD4',\n\tsupsup: '\\u2AD6',\n\tswarhk: '\\u2926',\n\tswArr: '\\u21D9',\n\tswarr: '\\u2199',\n\tswarrow: '\\u2199',\n\tswnwar: '\\u292A',\n\tszlig: '\\u00DF',\n\tTab: '\\u0009',\n\ttarget: '\\u2316',\n\tTau: '\\u03A4',\n\ttau: '\\u03C4',\n\ttbrk: '\\u23B4',\n\tTcaron: '\\u0164',\n\ttcaron: '\\u0165',\n\tTcedil: '\\u0162',\n\ttcedil: '\\u0163',\n\tTcy: '\\u0422',\n\ttcy: '\\u0442',\n\ttdot: '\\u20DB',\n\ttelrec: '\\u2315',\n\tTfr: '\\uD835\\uDD17',\n\ttfr: '\\uD835\\uDD31',\n\tthere4: '\\u2234',\n\tTherefore: '\\u2234',\n\ttherefore: '\\u2234',\n\tTheta: '\\u0398',\n\ttheta: '\\u03B8',\n\tthetasym: '\\u03D1',\n\tthetav: '\\u03D1',\n\tthickapprox: '\\u2248',\n\tthicksim: '\\u223C',\n\tThickSpace: '\\u205F\\u200A',\n\tthinsp: '\\u2009',\n\tThinSpace: '\\u2009',\n\tthkap: '\\u2248',\n\tthksim: '\\u223C',\n\tTHORN: '\\u00DE',\n\tthorn: '\\u00FE',\n\tTilde: '\\u223C',\n\ttilde: '\\u02DC',\n\tTildeEqual: '\\u2243',\n\tTildeFullEqual: '\\u2245',\n\tTildeTilde: '\\u2248',\n\ttimes: '\\u00D7',\n\ttimesb: '\\u22A0',\n\ttimesbar: '\\u2A31',\n\ttimesd: '\\u2A30',\n\ttint: '\\u222D',\n\ttoea: '\\u2928',\n\ttop: '\\u22A4',\n\ttopbot: '\\u2336',\n\ttopcir: '\\u2AF1',\n\tTopf: '\\uD835\\uDD4B',\n\ttopf: '\\uD835\\uDD65',\n\ttopfork: '\\u2ADA',\n\ttosa: '\\u2929',\n\ttprime: '\\u2034',\n\tTRADE: '\\u2122',\n\ttrade: '\\u2122',\n\ttriangle: '\\u25B5',\n\ttriangledown: '\\u25BF',\n\ttriangleleft: '\\u25C3',\n\ttrianglelefteq: '\\u22B4',\n\ttriangleq: '\\u225C',\n\ttriangleright: '\\u25B9',\n\ttrianglerighteq: '\\u22B5',\n\ttridot: '\\u25EC',\n\ttrie: '\\u225C',\n\ttriminus: '\\u2A3A',\n\tTripleDot: '\\u20DB',\n\ttriplus: '\\u2A39',\n\ttrisb: '\\u29CD',\n\ttritime: '\\u2A3B',\n\ttrpezium: '\\u23E2',\n\tTscr: '\\uD835\\uDCAF',\n\ttscr: '\\uD835\\uDCC9',\n\tTScy: '\\u0426',\n\ttscy: '\\u0446',\n\tTSHcy: '\\u040B',\n\ttshcy: '\\u045B',\n\tTstrok: '\\u0166',\n\ttstrok: '\\u0167',\n\ttwixt: '\\u226C',\n\ttwoheadleftarrow: '\\u219E',\n\ttwoheadrightarrow: '\\u21A0',\n\tUacute: '\\u00DA',\n\tuacute: '\\u00FA',\n\tUarr: '\\u219F',\n\tuArr: '\\u21D1',\n\tuarr: '\\u2191',\n\tUarrocir: '\\u2949',\n\tUbrcy: '\\u040E',\n\tubrcy: '\\u045E',\n\tUbreve: '\\u016C',\n\tubreve: '\\u016D',\n\tUcirc: '\\u00DB',\n\tucirc: '\\u00FB',\n\tUcy: '\\u0423',\n\tucy: '\\u0443',\n\tudarr: '\\u21C5',\n\tUdblac: '\\u0170',\n\tudblac: '\\u0171',\n\tudhar: '\\u296E',\n\tufisht: '\\u297E',\n\tUfr: '\\uD835\\uDD18',\n\tufr: '\\uD835\\uDD32',\n\tUgrave: '\\u00D9',\n\tugrave: '\\u00F9',\n\tuHar: '\\u2963',\n\tuharl: '\\u21BF',\n\tuharr: '\\u21BE',\n\tuhblk: '\\u2580',\n\tulcorn: '\\u231C',\n\tulcorner: '\\u231C',\n\tulcrop: '\\u230F',\n\tultri: '\\u25F8',\n\tUmacr: '\\u016A',\n\tumacr: '\\u016B',\n\tuml: '\\u00A8',\n\tUnderBar: '\\u005F',\n\tUnderBrace: '\\u23DF',\n\tUnderBracket: '\\u23B5',\n\tUnderParenthesis: '\\u23DD',\n\tUnion: '\\u22C3',\n\tUnionPlus: '\\u228E',\n\tUogon: '\\u0172',\n\tuogon: '\\u0173',\n\tUopf: '\\uD835\\uDD4C',\n\tuopf: '\\uD835\\uDD66',\n\tUpArrow: '\\u2191',\n\tUparrow: '\\u21D1',\n\tuparrow: '\\u2191',\n\tUpArrowBar: '\\u2912',\n\tUpArrowDownArrow: '\\u21C5',\n\tUpDownArrow: '\\u2195',\n\tUpdownarrow: '\\u21D5',\n\tupdownarrow: '\\u2195',\n\tUpEquilibrium: '\\u296E',\n\tupharpoonleft: '\\u21BF',\n\tupharpoonright: '\\u21BE',\n\tuplus: '\\u228E',\n\tUpperLeftArrow: '\\u2196',\n\tUpperRightArrow: '\\u2197',\n\tUpsi: '\\u03D2',\n\tupsi: '\\u03C5',\n\tupsih: '\\u03D2',\n\tUpsilon: '\\u03A5',\n\tupsilon: '\\u03C5',\n\tUpTee: '\\u22A5',\n\tUpTeeArrow: '\\u21A5',\n\tupuparrows: '\\u21C8',\n\turcorn: '\\u231D',\n\turcorner: '\\u231D',\n\turcrop: '\\u230E',\n\tUring: '\\u016E',\n\turing: '\\u016F',\n\turtri: '\\u25F9',\n\tUscr: '\\uD835\\uDCB0',\n\tuscr: '\\uD835\\uDCCA',\n\tutdot: '\\u22F0',\n\tUtilde: '\\u0168',\n\tutilde: '\\u0169',\n\tutri: '\\u25B5',\n\tutrif: '\\u25B4',\n\tuuarr: '\\u21C8',\n\tUuml: '\\u00DC',\n\tuuml: '\\u00FC',\n\tuwangle: '\\u29A7',\n\tvangrt: '\\u299C',\n\tvarepsilon: '\\u03F5',\n\tvarkappa: '\\u03F0',\n\tvarnothing: '\\u2205',\n\tvarphi: '\\u03D5',\n\tvarpi: '\\u03D6',\n\tvarpropto: '\\u221D',\n\tvArr: '\\u21D5',\n\tvarr: '\\u2195',\n\tvarrho: '\\u03F1',\n\tvarsigma: '\\u03C2',\n\tvarsubsetneq: '\\u228A\\uFE00',\n\tvarsubsetneqq: '\\u2ACB\\uFE00',\n\tvarsupsetneq: '\\u228B\\uFE00',\n\tvarsupsetneqq: '\\u2ACC\\uFE00',\n\tvartheta: '\\u03D1',\n\tvartriangleleft: '\\u22B2',\n\tvartriangleright: '\\u22B3',\n\tVbar: '\\u2AEB',\n\tvBar: '\\u2AE8',\n\tvBarv: '\\u2AE9',\n\tVcy: '\\u0412',\n\tvcy: '\\u0432',\n\tVDash: '\\u22AB',\n\tVdash: '\\u22A9',\n\tvDash: '\\u22A8',\n\tvdash: '\\u22A2',\n\tVdashl: '\\u2AE6',\n\tVee: '\\u22C1',\n\tvee: '\\u2228',\n\tveebar: '\\u22BB',\n\tveeeq: '\\u225A',\n\tvellip: '\\u22EE',\n\tVerbar: '\\u2016',\n\tverbar: '\\u007C',\n\tVert: '\\u2016',\n\tvert: '\\u007C',\n\tVerticalBar: '\\u2223',\n\tVerticalLine: '\\u007C',\n\tVerticalSeparator: '\\u2758',\n\tVerticalTilde: '\\u2240',\n\tVeryThinSpace: '\\u200A',\n\tVfr: '\\uD835\\uDD19',\n\tvfr: '\\uD835\\uDD33',\n\tvltri: '\\u22B2',\n\tvnsub: '\\u2282\\u20D2',\n\tvnsup: '\\u2283\\u20D2',\n\tVopf: '\\uD835\\uDD4D',\n\tvopf: '\\uD835\\uDD67',\n\tvprop: '\\u221D',\n\tvrtri: '\\u22B3',\n\tVscr: '\\uD835\\uDCB1',\n\tvscr: '\\uD835\\uDCCB',\n\tvsubnE: '\\u2ACB\\uFE00',\n\tvsubne: '\\u228A\\uFE00',\n\tvsupnE: '\\u2ACC\\uFE00',\n\tvsupne: '\\u228B\\uFE00',\n\tVvdash: '\\u22AA',\n\tvzigzag: '\\u299A',\n\tWcirc: '\\u0174',\n\twcirc: '\\u0175',\n\twedbar: '\\u2A5F',\n\tWedge: '\\u22C0',\n\twedge: '\\u2227',\n\twedgeq: '\\u2259',\n\tweierp: '\\u2118',\n\tWfr: '\\uD835\\uDD1A',\n\twfr: '\\uD835\\uDD34',\n\tWopf: '\\uD835\\uDD4E',\n\twopf: '\\uD835\\uDD68',\n\twp: '\\u2118',\n\twr: '\\u2240',\n\twreath: '\\u2240',\n\tWscr: '\\uD835\\uDCB2',\n\twscr: '\\uD835\\uDCCC',\n\txcap: '\\u22C2',\n\txcirc: '\\u25EF',\n\txcup: '\\u22C3',\n\txdtri: '\\u25BD',\n\tXfr: '\\uD835\\uDD1B',\n\txfr: '\\uD835\\uDD35',\n\txhArr: '\\u27FA',\n\txharr: '\\u27F7',\n\tXi: '\\u039E',\n\txi: '\\u03BE',\n\txlArr: '\\u27F8',\n\txlarr: '\\u27F5',\n\txmap: '\\u27FC',\n\txnis: '\\u22FB',\n\txodot: '\\u2A00',\n\tXopf: '\\uD835\\uDD4F',\n\txopf: '\\uD835\\uDD69',\n\txoplus: '\\u2A01',\n\txotime: '\\u2A02',\n\txrArr: '\\u27F9',\n\txrarr: '\\u27F6',\n\tXscr: '\\uD835\\uDCB3',\n\txscr: '\\uD835\\uDCCD',\n\txsqcup: '\\u2A06',\n\txuplus: '\\u2A04',\n\txutri: '\\u25B3',\n\txvee: '\\u22C1',\n\txwedge: '\\u22C0',\n\tYacute: '\\u00DD',\n\tyacute: '\\u00FD',\n\tYAcy: '\\u042F',\n\tyacy: '\\u044F',\n\tYcirc: '\\u0176',\n\tycirc: '\\u0177',\n\tYcy: '\\u042B',\n\tycy: '\\u044B',\n\tyen: '\\u00A5',\n\tYfr: '\\uD835\\uDD1C',\n\tyfr: '\\uD835\\uDD36',\n\tYIcy: '\\u0407',\n\tyicy: '\\u0457',\n\tYopf: '\\uD835\\uDD50',\n\tyopf: '\\uD835\\uDD6A',\n\tYscr: '\\uD835\\uDCB4',\n\tyscr: '\\uD835\\uDCCE',\n\tYUcy: '\\u042E',\n\tyucy: '\\u044E',\n\tYuml: '\\u0178',\n\tyuml: '\\u00FF',\n\tZacute: '\\u0179',\n\tzacute: '\\u017A',\n\tZcaron: '\\u017D',\n\tzcaron: '\\u017E',\n\tZcy: '\\u0417',\n\tzcy: '\\u0437',\n\tZdot: '\\u017B',\n\tzdot: '\\u017C',\n\tzeetrf: '\\u2128',\n\tZeroWidthSpace: '\\u200B',\n\tZeta: '\\u0396',\n\tzeta: '\\u03B6',\n\tZfr: '\\u2128',\n\tzfr: '\\uD835\\uDD37',\n\tZHcy: '\\u0416',\n\tzhcy: '\\u0436',\n\tzigrarr: '\\u21DD',\n\tZopf: '\\u2124',\n\tzopf: '\\uD835\\uDD6B',\n\tZscr: '\\uD835\\uDCB5',\n\tzscr: '\\uD835\\uDCCF',\n\tzwj: '\\u200D',\n\tzwnj: '\\u200C',\n});\n\n/**\n * @deprecated use `HTML_ENTITIES` instead\n * @see HTML_ENTITIES\n */\nexports.entityMap = exports.HTML_ENTITIES;\n", "var NAMESPACE = require(\"./conventions\").NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0;//tag name offerring\nvar S_ATTR = 1;//attr name offerring\nvar S_ATTR_SPACE=2;//attr name end and space offer\nvar S_EQ = 3;//=space?\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7;//closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError(message, locator) {\n\tthis.message = message\n\tthis.locator = locator\n\tif(Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nParseError.prototype = new Error();\nParseError.prototype.name = ParseError.name\n\nfunction XMLReader(){\n\n}\n\nXMLReader.prototype = {\n\tparse:function(source,defaultNSMap,entityMap){\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\n\t\tparse(source,defaultNSMap,entityMap,\n\t\t\t\tdomBuilder,this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t}\n}\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\tfunction entityReplacer(a){\n\t\tvar k = a.slice(1,-1);\n\t\tif (Object.hasOwnProperty.call(entityMap, k)) {\n\t\t\treturn entityMap[k];\n\t\t}else if(k.charAt(0) === '#'){\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\n\t\t}else{\n\t\t\terrorHandler.error('entity not found:'+a);\n\t\t\treturn a;\n\t\t}\n\t}\n\tfunction appendText(end){//has some bugs\n\t\tif(end>start){\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\tlocator&&position(start);\n\t\t\tdomBuilder.characters(xt,0,end-start);\n\t\t\tstart = end\n\t\t}\n\t}\n\tfunction position(p,m){\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t\t//console.log('line++:',locator,startPos,endPos)\n\t\t}\n\t\tlocator.columnNumber = p-lineStart+1;\n\t}\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\n\tvar locator = domBuilder.locator;\n\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\n\tvar closeMap = {};\n\tvar start = 0;\n\twhile(true){\n\t\ttry{\n\t\t\tvar tagStart = source.indexOf('<',start);\n\t\t\tif(tagStart<0){\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\n\t    \t\t\tdoc.appendChild(text);\n\t    \t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(tagStart>start){\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch(source.charAt(tagStart+1)){\n\t\t\tcase '/':\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\n\t\t\t\tvar tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n\t\t\t\tvar config = parseStack.pop();\n\t\t\t\tif(end<0){\n\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\n\t        \t\tend = tagStart+1+tagName.length;\n\t        \t}else if(tagName.match(/\\s</)){\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\n\t        \t\tend = tagStart+1+tagName.length;\n\t\t\t\t}\n\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\tvar endMatch = config.tagName == tagName;\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\n\t\t        if(endIgnoreCaseMach){\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\n\t\t\t\t\tif(localNSMap){\n\t\t\t\t\t\tfor (var prefix in localNSMap) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!endMatch){\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName ); // No known test case\n\t\t\t\t\t}\n\t\t        }else{\n\t\t        \tparseStack.push(config)\n\t\t        }\n\n\t\t\t\tend++;\n\t\t\t\tbreak;\n\t\t\t\t// end elment\n\t\t\tcase '?':// <?...?>\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\n\t\t\t\tbreak;\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\t\t\t\t//elStartEnd\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\n\t\t\t\tvar len = el.length;\n\n\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\n\t\t\t\t\tel.closed = true;\n\t\t\t\t\tif(!entityMap.nbsp){\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(locator && len){\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\n\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\tfor(var i = 0;i<len;i++){\n\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator2\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t}else{\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (NAMESPACE.isHTML(el.uri) && !el.closed) {\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\n\t\t\t\t} else {\n\t\t\t\t\tend++;\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: '+e)\n\t\t\tend = -1;\n\t\t}\n\t\tif(end>start){\n\t\t\tstart = end;\n\t\t}else{\n\t\t\t//TODO: 这里有可能sax回退，有位置错误风险\n\t\t\tappendText(Math.max(tagStart,start)+1);\n\t\t}\n\t}\n}\nfunction copyLocator(f,t){\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\n\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (el.attributeNames.hasOwnProperty(qname)) {\n\t\t\terrorHandler.fatalError('Attribute ' + qname + ' redefined')\n\t\t}\n\t\tel.addValue(\n\t\t\tqname,\n\t\t\t// @see https://www.w3.org/TR/xml/#AVNormalize\n\t\t\t// since the xmldom sax parser does not \"interpret\" DTD the following is not implemented:\n\t\t\t// - recursive replacement of (DTD) entity references\n\t\t\t// - trimming and collapsing multiple spaces into a single one for attributes that are not of type CDATA\n\t\t\tvalue.replace(/[\\t\\n\\r]/g, ' ').replace(/&#?\\w+;/g, entityReplacer),\n\t\t\tstartIndex\n\t\t)\n\t}\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG;//status\n\twhile(true){\n\t\tvar c = source.charAt(p);\n\t\tswitch(c){\n\t\tcase '=':\n\t\t\tif(s === S_ATTR){//attrName\n\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\ts = S_EQ;\n\t\t\t}else if(s === S_ATTR_SPACE){\n\t\t\t\ts = S_EQ;\n\t\t\t}else{\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '\\'':\n\t\tcase '\"':\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t){//equal\n\t\t\t\tif(s === S_ATTR){\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t}\n\t\t\t\tstart = p+1;\n\t\t\t\tp = source.indexOf(c,start)\n\t\t\t\tif(p>0){\n\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\taddAttribute(attrName, value, start-1);\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t}else{\n\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\n\t\t\t\t}\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\n\t\t\t\tstart = p+1;\n\t\t\t\ts = S_ATTR_END\n\t\t\t}else{\n\t\t\t\t//fatalError: no equal before\n\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '/':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\ts =S_TAG_CLOSE;\n\t\t\t\tel.closed = true;\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\tcase S_ATTR:\n\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tel.closed = true;\n\t\t\t\tbreak;\n\t\t\t//case S_EQ:\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\") // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ''://end document\n\t\t\terrorHandler.error('unexpected end of input');\n\t\t\tif(s == S_TAG){\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\t}\n\t\t\treturn p;\n\t\tcase '>':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\tbreak;//normal\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\n\t\t\tcase S_ATTR:\n\t\t\t\tvalue = source.slice(start,p);\n\t\t\t\tif(value.slice(-1) === '/'){\n\t\t\t\t\tel.closed  = true;\n\t\t\t\t\tvalue = value.slice(0,-1)\n\t\t\t\t}\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tif(s === S_ATTR_SPACE){\n\t\t\t\t\tvalue = attrName;\n\t\t\t\t}\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\t}else{\n\t\t\t\t\tif(!NAMESPACE.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)){\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(value, value, start)\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase S_EQ:\n\t\t\t\tthrow new Error('attribute value missed!!');\n\t\t\t}\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\t\t\treturn p;\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\tcase '\\u0080':\n\t\t\tc = ' ';\n\t\tdefault:\n\t\t\tif(c<= ' '){//space\n\t\t\t\tswitch(s){\n\t\t\t\tcase S_TAG:\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR:\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tvar value = source.slice(start, p);\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t//case S_EQ:\n\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t//\tvoid();break;\n\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t//ignore warning\n\t\t\t\t}\n\t\t\t}else{//not space\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\tswitch(s){\n\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tvar tagName =  el.tagName;\n\t\t\t\t\tif (!NAMESPACE.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\tstart = p;\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\n\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_EQ:\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t}\n\t\t\t}\n\t\t}//end outer switch\n\t\t//console.log('p++',p)\n\t\tp++;\n\t}\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement(el,domBuilder,currentNSMap){\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\tvar i = el.length;\n\twhile(i--){\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif(nsp>0){\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\n\t\t\tvar localName = qName.slice(nsp+1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\n\t\t}else{\n\t\t\tlocalName = qName;\n\t\t\tprefix = null\n\t\t\tnsPrefix = qName === 'xmlns' && ''\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName ;\n\t\t//prefix == null for no ns prefix attribute\n\t\tif(nsPrefix !== false){//hack!!\n\t\t\tif(localNSMap == null){\n\t\t\t\tlocalNSMap = {}\n\t\t\t\t//console.log(currentNSMap,0)\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\n\t\t\t\t//console.log(currentNSMap,1)\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value)\n\t\t}\n\t}\n\tvar i = el.length;\n\twhile(i--){\n\t\ta = el[i];\n\t\tvar prefix = a.prefix;\n\t\tif(prefix){//no prefix attribute has no namespace\n\t\t\tif(prefix === 'xml'){\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}if(prefix !== 'xmlns'){\n\t\t\t\ta.uri = currentNSMap[prefix || '']\n\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif(nsp>0){\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\n\t}else{\n\t\tprefix = null;//important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = el.uri = currentNSMap[prefix || ''];\n\tdomBuilder.startElement(ns,localName,tagName,el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif(el.closed){\n\t\tdomBuilder.endElement(ns,localName,tagName);\n\t\tif(localNSMap){\n\t\t\tfor (prefix in localNSMap) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else{\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\n\tif(/^(?:script|textarea)$/i.test(tagName)){\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\n\t\tif(/[&<]/.test(text)){\n\t\t\tif(/^script$/i.test(tagName)){\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\n\t\t\t\t\t//lexHandler.startCDATA();\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\t\t//lexHandler.endCDATA();\n\t\t\t\t\treturn elEndStart;\n\t\t\t\t//}\n\t\t\t}//}else{//text area\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\treturn elEndStart;\n\t\t\t//}\n\n\t\t}\n\t}\n\treturn elStartEnd+1;\n}\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\n\t//if(tagName in closeMap){\n\tvar pos = closeMap[tagName];\n\tif(pos == null){\n\t\t//console.log(tagName)\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\n\t\tif(pos<elStartEnd){//忘记闭合\n\t\t\tpos = source.lastIndexOf('</'+tagName)\n\t\t}\n\t\tcloseMap[tagName] =pos\n\t}\n\treturn pos<elStartEnd;\n\t//}\n}\n\nfunction _copy (source, target) {\n\tfor (var n in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, n)) {\n\t\t\ttarget[n] = source[n];\n\t\t}\n\t}\n}\n\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\n\tvar next= source.charAt(start+2)\n\tswitch(next){\n\tcase '-':\n\t\tif(source.charAt(start + 3) === '-'){\n\t\t\tvar end = source.indexOf('-->',start+4);\n\t\t\t//append comment source.substring(4,end)//<!--\n\t\t\tif(end>start){\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\n\t\t\t\treturn end+3;\n\t\t\t}else{\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}else{\n\t\t\t//error\n\t\t\treturn -1;\n\t\t}\n\tdefault:\n\t\tif(source.substr(start+3,6) == 'CDATA['){\n\t\t\tvar end = source.indexOf(']]>',start+9);\n\t\t\tdomBuilder.startCDATA();\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\n\t\t\tdomBuilder.endCDATA()\n\t\t\treturn end+3;\n\t\t}\n\t\t//<!DOCTYPE\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId)\n\t\tvar matchs = split(source,start);\n\t\tvar len = matchs.length;\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\n\t\t\tvar name = matchs[1][0];\n\t\t\tvar pubid = false;\n\t\t\tvar sysid = false;\n\t\t\tif(len>3){\n\t\t\t\tif(/^public$/i.test(matchs[2][0])){\n\t\t\t\t\tpubid = matchs[3][0];\n\t\t\t\t\tsysid = len>4 && matchs[4][0];\n\t\t\t\t}else if(/^system$/i.test(matchs[2][0])){\n\t\t\t\t\tsysid = matchs[3][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lastMatch = matchs[len-1]\n\t\t\tdomBuilder.startDTD(name, pubid, sysid);\n\t\t\tdomBuilder.endDTD();\n\n\t\t\treturn lastMatch.index+lastMatch[0].length\n\t\t}\n\t}\n\treturn -1;\n}\n\n\n\nfunction parseInstruction(source,start,domBuilder){\n\tvar end = source.indexOf('?>',start);\n\tif(end){\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\t\tif(match){\n\t\t\tvar len = match[0].length;\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\n\t\t\treturn end+2;\n\t\t}else{//error\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction ElementAttributes(){\n\tthis.attributeNames = {}\n}\nElementAttributes.prototype = {\n\tsetTagName:function(tagName){\n\t\tif(!tagNamePattern.test(tagName)){\n\t\t\tthrow new Error('invalid tagName:'+tagName)\n\t\t}\n\t\tthis.tagName = tagName\n\t},\n\taddValue:function(qName, value, offset) {\n\t\tif(!tagNamePattern.test(qName)){\n\t\t\tthrow new Error('invalid attribute:'+qName)\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\n\t},\n\tlength:0,\n\tgetLocalName:function(i){return this[i].localName},\n\tgetLocator:function(i){return this[i].locator},\n\tgetQName:function(i){return this[i].qName},\n\tgetURI:function(i){return this[i].uri},\n\tgetValue:function(i){return this[i].value}\n//\t,getIndex:function(uri, localName)){\n//\t\tif(localName){\n//\n//\t\t}else{\n//\t\t\tvar qName = uri\n//\t\t}\n//\t},\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n//\tgetType:function(uri,localName){}\n//\tgetType:function(i){},\n}\n\n\n\nfunction split(source,start){\n\tvar match;\n\tvar buf = [];\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n\treg.lastIndex = start;\n\treg.exec(source);//skip <\n\twhile(match = reg.exec(source)){\n\t\tbuf.push(match);\n\t\tif(match[1])return buf;\n\t}\n}\n\nexports.XMLReader = XMLReader;\nexports.ParseError = ParseError;\n", "var conventions = require(\"./conventions\");\nvar dom = require('./dom')\nvar entities = require('./entities');\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\n\nvar NAMESPACE = conventions.NAMESPACE;\n\nvar ParseError = sax.ParseError;\nvar XMLReader = sax.XMLReader;\n\n/**\n * Normalizes line ending according to https://www.w3.org/TR/xml11/#sec-line-ends:\n *\n * > XML parsed entities are often stored in computer files which,\n * > for editing convenience, are organized into lines.\n * > These lines are typically separated by some combination\n * > of the characters CARRIAGE RETURN (#xD) and LINE FEED (#xA).\n * >\n * > To simplify the tasks of applications, the XML processor must behave\n * > as if it normalized all line breaks in external parsed entities (including the document entity)\n * > on input, before parsing, by translating all of the following to a single #xA character:\n * >\n * > 1. the two-character sequence #xD #xA\n * > 2. the two-character sequence #xD #x85\n * > 3. the single character #x85\n * > 4. the single character #x2028\n * > 5. any #xD character that is not immediately followed by #xA or #x85.\n *\n * @param {string} input\n * @returns {string}\n */\nfunction normalizeLineEndings(input) {\n\treturn input\n\t\t.replace(/\\r[\\n\\u0085]/g, '\\n')\n\t\t.replace(/[\\r\\u0085\\u2028]/g, '\\n')\n}\n\n/**\n * @typedef Locator\n * @property {number} [columnNumber]\n * @property {number} [lineNumber]\n */\n\n/**\n * @typedef DOMParserOptions\n * @property {DOMHandler} [domBuilder]\n * @property {Function} [errorHandler]\n * @property {(string) => string} [normalizeLineEndings] used to replace line endings before parsing\n * \t\t\t\t\t\tdefaults to `normalizeLineEndings`\n * @property {Locator} [locator]\n * @property {Record<string, string>} [xmlns]\n *\n * @see normalizeLineEndings\n */\n\n/**\n * The DOMParser interface provides the ability to parse XML or HTML source code\n * from a string into a DOM `Document`.\n *\n * _xmldom is different from the spec in that it allows an `options` parameter,\n * to override the default behavior._\n *\n * @param {DOMParserOptions} [options]\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-parsing-and-serialization\n */\nfunction DOMParser(options){\n\tthis.options = options ||{locator:{}};\n}\n\nDOMParser.prototype.parseFromString = function(source,mimeType){\n\tvar options = this.options;\n\tvar sax =  new XMLReader();\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\n\tvar errorHandler = options.errorHandler;\n\tvar locator = options.locator;\n\tvar defaultNSMap = options.xmlns||{};\n\tvar isHTML = /\\/x?html?$/.test(mimeType);//mimeType.toLowerCase().indexOf('html') > -1;\n  \tvar entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n\tif(locator){\n\t\tdomBuilder.setDocumentLocator(locator)\n\t}\n\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\n\tsax.domBuilder = options.domBuilder || domBuilder;\n\tif(isHTML){\n\t\tdefaultNSMap[''] = NAMESPACE.HTML;\n\t}\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\tvar normalize = options.normalizeLineEndings || normalizeLineEndings;\n\tif (source && typeof source === 'string') {\n\t\tsax.parse(\n\t\t\tnormalize(source),\n\t\t\tdefaultNSMap,\n\t\t\tentityMap\n\t\t)\n\t} else {\n\t\tsax.errorHandler.error('invalid doc source')\n\t}\n\treturn domBuilder.doc;\n}\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\n\tif(!errorImpl){\n\t\tif(domBuilder instanceof DOMHandler){\n\t\t\treturn domBuilder;\n\t\t}\n\t\terrorImpl = domBuilder ;\n\t}\n\tvar errorHandler = {}\n\tvar isCallback = errorImpl instanceof Function;\n\tlocator = locator||{}\n\tfunction build(key){\n\t\tvar fn = errorImpl[key];\n\t\tif(!fn && isCallback){\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\n\t\t}\n\t\terrorHandler[key] = fn && function(msg){\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\n\t\t}||function(){};\n\t}\n\tbuild('warning');\n\tbuild('error');\n\tbuild('fatalError');\n\treturn errorHandler;\n}\n\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\nfunction DOMHandler() {\n    this.cdata = false;\n}\nfunction position(locator,node){\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\nDOMHandler.prototype = {\n\tstartDocument : function() {\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\n    \tif (this.locator) {\n        \tthis.doc.documentURI = this.locator.systemId;\n    \t}\n\t},\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\n\t    var len = attrs.length;\n\t    appendElement(this, el);\n\t    this.currentElement = el;\n\n\t\tthis.locator && position(this.locator,el)\n\t    for (var i = 0 ; i < len; i++) {\n\t        var namespaceURI = attrs.getURI(i);\n\t        var value = attrs.getValue(i);\n\t        var qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr)\n\t    }\n\t},\n\tendElement:function(namespaceURI, localName, qName) {\n\t\tvar current = this.currentElement\n\t\tvar tagName = current.tagName;\n\t\tthis.currentElement = current.parentNode;\n\t},\n\tstartPrefixMapping:function(prefix, uri) {\n\t},\n\tendPrefixMapping:function(prefix) {\n\t},\n\tprocessingInstruction:function(target, data) {\n\t    var ins = this.doc.createProcessingInstruction(target, data);\n\t    this.locator && position(this.locator,ins)\n\t    appendElement(this, ins);\n\t},\n\tignorableWhitespace:function(ch, start, length) {\n\t},\n\tcharacters:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t\t//console.log(chars)\n\t\tif(chars){\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif(this.currentElement){\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t}else if(/^\\s*$/.test(chars)){\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator,charNode)\n\t\t}\n\t},\n\tskippedEntity:function(name) {\n\t},\n\tendDocument:function() {\n\t\tthis.doc.normalize();\n\t},\n\tsetDocumentLocator:function (locator) {\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\n\t    \tlocator.lineNumber = 0;\n\t    }\n\t},\n\t//LexicalHandler\n\tcomment:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t    var comm = this.doc.createComment(chars);\n\t    this.locator && position(this.locator,comm)\n\t    appendElement(this, comm);\n\t},\n\n\tstartCDATA:function() {\n\t    //used in characters() methods\n\t    this.cdata = true;\n\t},\n\tendCDATA:function() {\n\t    this.cdata = false;\n\t},\n\n\tstartDTD:function(name, publicId, systemId) {\n\t\tvar impl = this.doc.implementation;\n\t    if (impl && impl.createDocumentType) {\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\n\t        this.locator && position(this.locator,dt)\n\t        appendElement(this, dt);\n\t\t\t\t\tthis.doc.doctype = dt;\n\t    }\n\t},\n\t/**\n\t * @see org.xml.sax.ErrorHandler\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning:function(error) {\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\n\t},\n\terror:function(error) {\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\n\t},\n\tfatalError:function(error) {\n\t\tthrow new ParseError(error, this.locator);\n\t}\n}\nfunction _locator(l){\n\tif(l){\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\n\t}\n}\nfunction _toString(chars,start,length){\n\tif(typeof chars == 'string'){\n\t\treturn chars.substr(start,length)\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif(chars.length >= start+length || start){\n\t\t\treturn new java.lang.String(chars,start,length)+'';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\n\tDOMHandler.prototype[key] = function(){return null}\n})\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement (hander,node) {\n    if (!hander.currentElement) {\n        hander.doc.appendChild(node);\n    } else {\n        hander.currentElement.appendChild(node);\n    }\n}//appendChild and setAttributeNS are preformance key\n\nexports.__DOMHandler = DOMHandler;\nexports.normalizeLineEndings = normalizeLineEndings;\nexports.DOMParser = DOMParser;\n", "var dom = require('./dom')\nexports.DOMImplementation = dom.DOMImplementation\nexports.XMLSerializer = dom.XMLSerializer\nexports.DOMParser = require('./dom-parser').DOMParser\n", "import { ExtensionType } from '../extensions/Extensions';\n\n/**\n * Extension for the browser environment.\n * @memberof environment\n */\nexport const browserExt = {\n    extension: {\n        type: ExtensionType.Environment,\n        name: 'browser',\n        priority: -1,\n    },\n    test: () => true,\n    load: async () =>\n    {\n        await import('./browserAll');\n    },\n};\n", "import { ExtensionType } from '../extensions/Extensions';\n\n/**\n * Extension for the webworker environment.\n * @memberof environment\n */\nexport const webworkerExt = {\n    extension: {\n        type: ExtensionType.Environment,\n        name: 'webworker',\n        priority: 0,\n    },\n    test: () => typeof self !== 'undefined' && self.WorkerGlobalScope !== undefined,\n    load: async () =>\n    {\n        await import('./webworkerAll');\n    },\n};\n", "var blendTemplateFrag = \"\\nin vec2 vTextureCoord;\\nin vec4 vColor;\\n\\nout vec4 finalColor;\\n\\nuniform float uBlend;\\n\\nuniform sampler2D uTexture;\\nuniform sampler2D uBackTexture;\\n\\n{FUNCTIONS}\\n\\nvoid main()\\n{ \\n    vec4 back = texture(uBackTexture, vTextureCoord);\\n    vec4 front = texture(uTexture, vTextureCoord);\\n    float blendedAlpha = front.a + back.a * (1.0 - front.a);\\n    \\n    {MAIN}\\n}\\n\";\n\nexport { blendTemplateFrag as default };\n//# sourceMappingURL=blend-template.frag.mjs.map\n", "var blendTemplateVert = \"in vec2 aPosition;\\nout vec2 vTextureCoord;\\nout vec2 backgroundUv;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\n\\nvec4 filterVertexPosition( void )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n    \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord( void )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition();\\n    vTextureCoord = filterTextureCoord();\\n}\\n\";\n\nexport { blendTemplateVert as default };\n//# sourceMappingURL=blend-template.vert.mjs.map\n", "var blendTemplate = \"\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct BlendUniforms {\\n  uBlend:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n@group(0) @binding(3) var uBackTexture: texture_2d<f32>;\\n\\n@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;\\n\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition)\\n  );\\n}\\n\\n{FUNCTIONS}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>\\n) -> @location(0) vec4<f32> {\\n\\n\\n   var back =  textureSample(uBackTexture, uSampler, uv);\\n   var front = textureSample(uTexture, uSampler, uv);\\n   var blendedAlpha = front.a + back.a * (1.0 - front.a);\\n   \\n   var out = vec4<f32>(0.0,0.0,0.0,0.0);\\n\\n   {MAIN}\\n\\n   return out;\\n}\";\n\nexport { blendTemplate as default };\n//# sourceMappingURL=blend-template.wgsl.mjs.map\n", "import { GlProgram } from '../../rendering/renderers/gl/shader/GlProgram';\nimport { GpuProgram } from '../../rendering/renderers/gpu/shader/GpuProgram';\nimport { UniformGroup } from '../../rendering/renderers/shared/shader/UniformGroup';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { Filter } from '../Filter';\nimport blendTemplateFrag from './blend-template.frag';\nimport blendTemplateVert from './blend-template.vert';\nimport blendTemplate from './blend-template.wgsl';\n\nexport interface BlendModeFilterOptions\n{\n    source?: string;\n    gpu?: {\n        functions?: string;\n        main?: string;\n    }\n    gl?: {\n        functions?: string;\n        main?: string;\n    }\n}\n\nexport class BlendModeFilter extends Filter\n{\n    constructor(options: BlendModeFilterOptions)\n    {\n        const gpuOptions = options.gpu;\n\n        const gpuSource = compileBlendModeShader({ source: blendTemplate, ...gpuOptions });\n\n        const gpuProgram = GpuProgram.from({\n            vertex: {\n                source: gpuSource,\n                entryPoint: 'mainVertex',\n            },\n            fragment: {\n                source: gpuSource,\n                entryPoint: 'mainFragment',\n            },\n        });\n\n        const glOptions = options.gl;\n\n        const glSource = compileBlendModeShader({ source: blendTemplateFrag, ...glOptions });\n\n        const glProgram = GlProgram.from({\n            vertex: blendTemplateVert,\n            fragment: glSource\n        });\n\n        const uniformGroup = new UniformGroup({\n            uBlend: {\n                value: 1,\n                type: 'f32'\n            }\n        });\n\n        super({\n            gpuProgram,\n            glProgram,\n            blendRequired: true,\n            resources: {\n                blendUniforms: uniformGroup,\n                uBackTexture: Texture.EMPTY\n            }\n        });\n    }\n}\n\nfunction compileBlendModeShader(options: {source: string, functions?: string, main?: string}): string\n{\n    const { source, functions, main } = options;\n\n    return source.replace('{FUNCTIONS}', functions).replace('{MAIN}', main);\n}\n", "/** A helper object containing the hsl shader code for both glsl */\nexport const hslgl = `\n\tfloat getLuminosity(vec3 c) {\n\t\treturn 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;\n\t}\n\n\tvec3 setLuminosity(vec3 c, float lum) {\n\t\tfloat modLum = lum - getLuminosity(c);\n\t\tvec3 color = c.rgb + vec3(modLum);\n\n\t\t// clip back into legal range\n\t\tmodLum = getLuminosity(color);\n\t\tvec3 modLumVec = vec3(modLum);\n\n\t\tfloat cMin = min(color.r, min(color.g, color.b));\n\t\tfloat cMax = max(color.r, max(color.g, color.b));\n\n\t\tif(cMin < 0.0) {\n\t\t\tcolor = mix(modLumVec, color, modLum / (modLum - cMin));\n\t\t}\n\n\t\tif(cMax > 1.0) {\n\t\t\tcolor = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tfloat getSaturation(vec3 c) {\n\t\treturn max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));\n\t}\n\n\tvec3 setSaturationMinMidMax(vec3 cSorted, float s) {\n\t\tvec3 colorSorted = cSorted;\n\n\t\tif(colorSorted.z > colorSorted.x) {\n\t\t\tcolorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));\n\t\t\tcolorSorted.z = s;\n\t\t}\n\t\telse {\n\t\t\tcolorSorted.y = 0.0;\n\t\t\tcolorSorted.z = 0.0;\n\t\t}\n\n\t\tcolorSorted.x = 0.0;\n\n\t\treturn colorSorted;\n\t}\n\n\tvec3 setSaturation(vec3 c, float s) {\n\t\tvec3 color = c;\n\n\t\tif(color.r <= color.g && color.r <= color.b) {\n\t\t\tif(color.g <= color.b) {\n\t\t\t\tcolor = setSaturationMinMidMax(color.rgb, s).rgb;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolor = setSaturationMinMidMax(color.rbg, s).rbg;\n\t\t\t}\n\t\t}\n\t\telse if(color.g <= color.r && color.g <= color.b) {\n\t\t\tif(color.r <= color.b) {\n\t\t\t\tcolor = setSaturationMinMidMax(color.grb, s).grb;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolor = setSaturationMinMidMax(color.gbr, s).gbr;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Using bgr for both fixes part of hue\n\t\t\tif(color.r <= color.g) {\n\t\t\t\tcolor = setSaturationMinMidMax(color.brg, s).brg;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolor = setSaturationMinMidMax(color.bgr, s).bgr;\n\t\t\t}\n\t\t}\n\n\t\treturn color;\n\t}\n    `;\n", "/** A helper object containing the hsl shader code for wgsl */\nexport const hslgpu = `\n\tfn getLuminosity(c: vec3<f32>) -> f32\n\t{\n\t\treturn 0.3*c.r + 0.59*c.g + 0.11*c.b;\n\t}\n\n\tfn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>\n\t{\n\t\tvar modLum: f32 = lum - getLuminosity(c);\n\t\tvar color: vec3<f32> = c.rgb + modLum;\n\n\t\t// clip back into legal range\n\t\tmodLum = getLuminosity(color);\n\t\tlet modLumVec = vec3<f32>(modLum);\n\n\t\tlet cMin: f32 = min(color.r, min(color.g, color.b));\n\t\tlet cMax: f32 = max(color.r, max(color.g, color.b));\n\n\t\tif(cMin < 0.0)\n\t\t{\n\t\t\tcolor = mix(modLumVec, color, modLum / (modLum - cMin));\n\t\t}\n\n\t\tif(cMax > 1.0)\n\t\t{\n\t\t\tcolor = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tfn getSaturation(c: vec3<f32>) -> f32\n\t{\n\t\treturn max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));\n\t}\n\n\tfn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>\n\t{\n\t\tvar colorSorted = cSorted;\n\n\t\tif(colorSorted.z > colorSorted.x)\n\t\t{\n\t\t\tcolorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));\n\t\t\tcolorSorted.z = s;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcolorSorted.y = 0;\n\t\t\tcolorSorted.z = 0;\n\t\t}\n\n\t\tcolorSorted.x = 0;\n\n\t\treturn colorSorted;\n\t}\n\n\tfn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>\n\t{\n\t\tvar color = c;\n\n\t\tif (color.r <= color.g && color.r <= color.b)\n\t\t{\n\t\t\tif (color.g <= color.b)\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;\n\t\t\t}\n\t\t}\n\t\telse if (color.g <= color.r && color.g <= color.b)\n\t\t{\n\t\t\tif (color.r <= color.b)\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Using bgr for both fixes part of hue\n\t\t\tif (color.r <= color.g)\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcolor  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;\n\t\t\t}\n\t\t}\n\n\t\treturn color;\n\t}\n\t`;\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\nimport { hslgl } from '../filters/blend-modes/hls/GLhls';\nimport { hslgpu } from '../filters/blend-modes/hls/GPUhls';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Available as `container.blendMode = 'color'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'color'\n * @memberof filters\n */\nexport class ColorBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'color',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                ${hslgl}\n\n                vec3 blendColor(vec3 base, vec3 blend,  float opacity)\n                {\n                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                ${hslgpu}\n\n                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Looks at the color information in each channel and darkens the base color to\n * reflect the blend color by increasing the contrast between the two.\n *\n * Available as `container.blendMode = 'color-burn'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'color-burn'\n * @memberof filters\n */\nexport class ColorBurnBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'color-burn',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float colorBurn(float base, float blend)\n                {\n                    return max((1.0 - ((1.0 - base) / blend)), 0.0);\n                }\n\n                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        colorBurn(base.r, blend.r),\n                        colorBurn(base.g, blend.g),\n                        colorBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                fn colorBurn(base:f32, blend:f32) -> f32\n                {\n                    return max((1.0-((1.0-base)/blend)),0.0);\n                }\n\n                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        colorBurn(base.r, blend.r),\n                        colorBurn(base.g, blend.g),\n                        colorBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "/* eslint-disable max-len */\n\nimport { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Looks at the color information in each channel and brightens the base color to reflect the blend color by decreasing contrast between the two.\n * Available as `container.blendMode = 'color-dodge'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'color-dodge'\n * @memberof filters\n */\nexport class ColorDodgeBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'color-dodge',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float colorDodge(float base, float blend)\n                {\n                    return base / (1.0 - blend);\n                }\n\n                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        colorDodge(base.r, blend.r),\n                        colorDodge(base.g, blend.g),\n                        colorDodge(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn colorDodge(base: f32, blend: f32) -> f32\n                {\n                    return base / (1.0 - blend);\n                }\n\n                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        colorDodge(base.r, blend.r),\n                        colorDodge(base.g, blend.g),\n                        colorDodge(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `,\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Uses each color channel to select the darker of the following two values; base or blend color\n * Available as `container.blendMode = 'darken'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'darken'\n * @memberof filters\n */\nexport class DarkenBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'darken',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                vec3 blendDarken(vec3 base, vec3 blend, float opacity)\n                {\n                    return (min(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (min(blend,base) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Available as `container.blendMode = 'difference'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'difference'\n * @memberof filters\n */\nexport class DifferenceBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'difference',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)\n                {\n                    return (abs(blend - base) * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (abs(blend - base) * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Divides the blend from the base color using each color channel\n * Available as `container.blendMode = 'divide'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'divide'\n * @memberof filters\n */\nexport class DivideBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'divide',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float divide(float base, float blend)\n                {\n                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;\n                }\n\n                vec3 blendDivide(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        divide(base.r, blend.r),\n                        divide(base.g, blend.g),\n                        divide(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn divide(base: f32, blend: f32) -> f32\n                {\n                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);\n                }\n\n                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        divide(base.r, blend.r),\n                        divide(base.g, blend.g),\n                        divide(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Available as `container.blendMode = 'exclusion'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'exclusion'\n * @memberof filters\n */\nexport class ExclusionBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'exclusion',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                vec3 exclusion(vec3 base, vec3 blend)\n                {\n                    return base + blend - 2.0 * base * blend;\n                }\n\n                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)\n                {\n                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>\n                {\n                    return base+blend-2.0*base*blend;\n                }\n\n                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Available as `container.blendMode = 'hard-light'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'hard-light'\n * @memberof filters\n */\nexport class HardLightBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'hard-light',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float hardLight(float base, float blend)\n                {\n                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);\n                }\n\n                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        hardLight(base.r, blend.r),\n                        hardLight(base.g, blend.g),\n                        hardLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                fn hardLight(base: f32, blend: f32) -> f32\n                {\n                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);\n                }\n\n                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        hardLight(base.r, blend.r),\n                        hardLight(base.g, blend.g),\n                        hardLight(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Hard defines each of the color channel values of the blend color to the RGB values of the base color.\n * If the sum of a channel is 255, it receives a value of 255; if less than 255, a value of 0.\n *\n * Available as `container.blendMode = 'hard-mix'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'hard-mix'\n * @memberof filters\n */\nexport class HardMixBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'hard-mix',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float hardMix(float base, float blend)\n                {\n                    return (base + blend >= 1.0) ? 1.0 : 0.0;\n                }\n\n                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)\n                {\n                    vec3 blended = vec3(\n                        hardMix(base.r, blend.r),\n                        hardMix(base.g, blend.g),\n                        hardMix(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                fn hardMix(base: f32, blend: f32) -> f32\n                {\n                    return select(0.0, 1.0, base + blend >= 1.0);\n                }\n\n                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended: vec3<f32> = vec3<f32>(\n                        hardMix(base.r, blend.r),\n                        hardMix(base.g, blend.g),\n                        hardMix(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Available as `container.blendMode = 'lighten'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'lighten'\n * @memberof filters\n */\nexport class LightenBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'lighten',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                vec3 blendLighten(vec3 base, vec3 blend, float opacity)\n                {\n                    return (max(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (max(base, blend) * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Looks at the color information in each channel and darkens the base color to\n * reflect the blend color by increasing the contrast between the two.\n *\n * Available as `container.blendMode = 'linear-burn'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'linear-burn'\n * @memberof filters\n */\nexport class LinearBurnBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'linear-burn',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float linearBurn(float base, float blend)\n                {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        linearBurn(base.r, blend.r),\n                        linearBurn(base.g, blend.g),\n                        linearBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn linearBurn(base: f32, blend: f32) -> f32\n                {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        linearBurn(base.r, blend.r),\n                        linearBurn(base.g, blend.g),\n                        linearBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "/* eslint-disable max-len */\n\nimport { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Looks at the color information in each channel and brightens the base color to reflect the blend color by decreasing contrast between the two.\n * Available as `container.blendMode = 'linear-dodge'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'linear-dodge'\n * @memberof filters\n */\nexport class LinearDodgeBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'linear-dodge',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float linearDodge(float base, float blend) {\n                    return min(1.0, base + blend);\n                }\n\n                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {\n                    vec3 blended = vec3(\n                        linearDodge(base.r, blend.r),\n                        linearDodge(base.g, blend.g),\n                        linearDodge(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn linearDodge(base: f32, blend: f32) -> f32\n                {\n                    return min(1, base + blend);\n                }\n\n                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        linearDodge(base.r, blend.r),\n                        linearDodge(base.g, blend.g),\n                        linearDodge(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Increase or decrease brightness by burning or dodging color values, based on the blend color\n * Available as `container.blendMode = 'linear-light'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'linear-light'\n * @memberof filters\n */\nexport class LinearLightBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'linear-light',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float linearBurn(float base, float blend) {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                float linearDodge(float base, float blend) {\n                    return min(1.0, base + blend);\n                }\n\n                float linearLight(float base, float blend) {\n                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));\n                }\n\n                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {\n                    vec3 blended = vec3(\n                        linearLight(base.r, blend.r),\n                        linearLight(base.g, blend.g),\n                        linearLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn linearBurn(base: f32, blend: f32) -> f32\n                {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                fn linearDodge(base: f32, blend: f32) -> f32\n                {\n                    return min(1.0, base + blend);\n                }\n\n                fn linearLight(base: f32, blend: f32) -> f32\n                {\n                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);\n                }\n\n                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        linearLight(base.r, blend.r),\n                        linearLight(base.g, blend.g),\n                        linearLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\nimport { hslgl } from '../filters/blend-modes/hls/GLhls';\nimport { hslgpu } from '../filters/blend-modes/hls/GPUhls';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Available as `container.blendMode = 'luminosity'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'luminosity'\n * @memberof filters\n */\nexport class LuminosityBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'luminosity',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                ${hslgl}\n\n                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)\n                {\n                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));\n                    return (blendLuminosity * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                ${hslgpu}\n\n                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));\n                    return (blendLuminosity * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Available as `container.blendMode = 'negation'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'negation'\n */\nexport class NegationBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'negation',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                vec3 negation(vec3 base, vec3 blend)\n                {\n                    return 1.0-abs(1.0-base-blend);\n                }\n\n                vec3 blendNegation(vec3 base, vec3 blend, float opacity)\n                {\n                    return (negation(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>\n                {\n                    return 1.0-abs(1.0-base-blend);\n                }\n\n                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Available as `container.blendMode = 'overlay'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'overlay'\n */\nexport class OverlayBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'overlay',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float overlay(float base, float blend)\n                {\n                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));\n                }\n\n                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        overlay(base.r, blend.r),\n                        overlay(base.g, blend.g),\n                        overlay(base.b, blend.b)\n                    );\n   \n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `,\n            },\n            gpu: {\n                functions: `\n                fn overlay(base: f32, blend: f32) -> f32\n                {\n                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);\n                }\n\n                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        overlay(base.r, blend.r),\n                        overlay(base.g, blend.g),\n                        overlay(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `,\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Replaces colors based on the blend color.\n * Available as `container.blendMode = 'pin-light'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'pin-light'\n * @memberof filters\n */\nexport class PinLightBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'pin-light',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float pinLight(float base, float blend)\n                {\n                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));\n                }\n\n                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        pinLight(base.r, blend.r),\n                        pinLight(base.g, blend.g),\n                        pinLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn pinLight(base: f32, blend: f32) -> f32\n                {\n                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);\n                }\n\n                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        pinLight(base.r, blend.r),\n                        pinLight(base.g, blend.g),\n                        pinLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\nimport { hslgl } from '../filters/blend-modes/hls/GLhls';\nimport { hslgpu } from '../filters/blend-modes/hls/GPUhls';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Available as `container.blendMode = 'saturation'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'saturation'\n */\nexport class SaturationBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'saturation',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                ${hslgl}\n\n                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)\n                {\n                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));\n                    return (blendSaturation * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                ${hslgpu}\n\n                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));\n                    return (blendSaturation * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "/* eslint-disable max-len */\n\nimport { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Available as `container.blendMode = 'soft-light'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'soft-light'\n */\nexport class SoftLightBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'soft-light',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float softLight(float base, float blend)\n                {\n                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));\n                }\n\n                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        softLight(base.r, blend.r),\n                        softLight(base.g, blend.g),\n                        softLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn softLight(base: f32, blend: f32) -> f32\n                {\n                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);\n                }\n\n                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended: vec3<f32> = vec3<f32>(\n                        softLight(base.r, blend.r),\n                        softLight(base.g, blend.g),\n                        softLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Subtracts the blend from the base color using each color channel\n * Available as `container.blendMode = 'subtract'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'subtract'\n * @memberof filters\n */\nexport class SubtractBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'subtract',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float subtract(float base, float blend)\n                {\n                    return max(0.0, base - blend);\n                }\n\n                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        subtract(base.r, blend.r),\n                        subtract(base.g, blend.g),\n                        subtract(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn subtract(base: f32, blend: f32) -> f32\n                {\n                    return max(0, base - blend);\n                }\n\n                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        subtract(base.r, blend.r),\n                        subtract(base.g, blend.g),\n                        subtract(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Available as `container.blendMode = 'vivid-light'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'vivid-light'\n */\nexport class VividLightBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'vivid-light',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float colorBurn(float base, float blend)\n                {\n                    return max((1.0-((1.0-base)/blend)),0.0);\n                }\n\n                float colorDodge(float base, float blend)\n                {\n                    return min(1.0, base / (1.0-blend));\n                }\n\n                float vividLight(float base, float blend)\n                {\n                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));\n                }\n\n                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        vividLight(base.r, blend.r),\n                        vividLight(base.g, blend.g),\n                        vividLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                fn colorBurn(base:f32, blend:f32) -> f32\n                {\n                    return max((1.0-((1.0-base)/blend)),0.0);\n                }\n\n                fn colorDodge(base: f32, blend: f32) -> f32\n                {\n                    return min(1.0, base / (1.0-blend));\n                }\n\n                fn vividLight(base: f32, blend: f32) -> f32\n                {\n                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);\n                }\n\n                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended: vec3<f32> = vec3<f32>(\n                        vividLight(base.r, blend.r),\n                        vividLight(base.g, blend.g),\n                        vividLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { DOMAdapter } from '../../environment/adapter';\nimport { AbstractRenderer } from '../../rendering/renderers/shared/system/AbstractRenderer';\n\nlet _isWebGLSupported: boolean | undefined;\n\n/**\n * Helper for checking for WebGL support.\n * @param failIfMajorPerformanceCaveat - whether to fail if there is a major performance caveat, defaults to false\n * @memberof utils\n * @function isWebGLSupported\n * @returns {boolean} Is WebGL supported.\n */\nexport function isWebGLSupported(\n    failIfMajorPerformanceCaveat?: boolean\n): boolean\n{\n    if (_isWebGLSupported !== undefined) return _isWebGLSupported;\n\n    _isWebGLSupported = ((): boolean =>\n    {\n        const contextOptions = {\n            stencil: true,\n            failIfMajorPerformanceCaveat:\n                failIfMajorPerformanceCaveat\n                ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat,\n        };\n\n        try\n        {\n            if (!DOMAdapter.get().getWebGLRenderingContext())\n            {\n                return false;\n            }\n\n            const canvas = DOMAdapter.get().createCanvas();\n            let gl = canvas.getContext('webgl', contextOptions);\n\n            const success = !!gl?.getContextAttributes()?.stencil;\n\n            if (gl)\n            {\n                const loseContext = gl.getExtension('WEBGL_lose_context');\n\n                if (loseContext)\n                {\n                    loseContext.loseContext();\n                }\n            }\n\n            gl = null;\n\n            return success;\n        }\n        catch (_e)\n        {\n            return false;\n        }\n    })();\n\n    return _isWebGLSupported;\n}\n", "import { DOMAdapter } from '../../environment/adapter';\n\nlet _isWebGPUSupported: boolean | undefined;\n\n/**\n * Helper for checking for WebGPU support.\n * @param options - The options for requesting a GPU adapter.\n * @memberof utils\n * @function isWebGPUSupported\n * @returns Is WebGPU supported.\n */\nexport async function isWebGPUSupported(options: GPURequestAdapterOptions = {}): Promise<boolean>\n{\n    if (_isWebGPUSupported !== undefined) return _isWebGPUSupported;\n\n    _isWebGPUSupported = await (async (): Promise<boolean> =>\n    {\n        const gpu = DOMAdapter.get().getNavigator().gpu;\n\n        if (!gpu)\n        {\n            return false;\n        }\n\n        try\n        {\n            const adapter = await gpu.requestAdapter(options) as GPUAdapter;\n\n            // TODO and one of these!\n            await adapter.requestDevice();\n\n            return true;\n        }\n        catch (_e)\n        {\n            return false;\n        }\n    })();\n\n    return _isWebGPUSupported;\n}\n", "import { isWebGLSupported } from '../../utils/browser/isWebGLSupported';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported';\nimport { AbstractRenderer } from './shared/system/AbstractRenderer';\n\nimport type { WebGLOptions } from './gl/WebGLRenderer';\nimport type { WebGPUOptions } from './gpu/WebGPURenderer';\nimport type { Renderer, RendererOptions } from './types';\n\n/**\n * Options for {@link rendering.autoDetectRenderer}.\n * @memberof rendering\n */\nexport interface AutoDetectOptions extends RendererOptions\n{\n    /** The preferred renderer type. WebGPU is recommended as its generally faster than WebGL. */\n    preference?: 'webgl' | 'webgpu'// | 'canvas';\n    /** Optional WebGPUOptions to pass only to WebGPU renderer. */\n    webgpu?: Partial<WebGPUOptions>;\n    /** Optional WebGLOptions to pass only to the WebGL renderer */\n    webgl?: Partial<WebGLOptions>;\n}\n\nconst renderPriority = ['webgl', 'webgpu', 'canvas'];\n\n/**\n * Automatically determines the most appropriate renderer for the current environment.\n *\n * The function will prioritize the WebGL renderer as it is the most tested safe API to use.\n * In the near future as WebGPU becomes more stable and ubiquitous, it will be prioritized over WebGL.\n *\n * The selected renderer's code is then dynamically imported to optimize\n * performance and minimize the initial bundle size.\n *\n * To maximize the benefits of dynamic imports, it's recommended to use a modern bundler\n * that supports code splitting. This will place the renderer code in a separate chunk,\n * which is loaded only when needed.\n * @example\n *\n * // create a renderer\n * const renderer = await autoDetectRenderer({\n *   width: 800,\n *   height: 600,\n *   antialias: true,\n * });\n *\n * // custom for each renderer\n * const renderer = await autoDetectRenderer({\n *   width: 800,\n *   height: 600,\n *   webgpu:{\n *     antialias: true,\n *     backgroundColor: 'red'\n *   },\n *   webgl:{\n *     antialias: true,\n *     backgroundColor: 'green'\n *   }\n *  });\n * @param options - A partial configuration object based on the `AutoDetectOptions` type.\n * @returns A Promise that resolves to an instance of the selected renderer.\n * @memberof rendering\n */\nexport async function autoDetectRenderer(options: Partial<AutoDetectOptions>): Promise<Renderer>\n{\n    let preferredOrder: string[] = [];\n\n    if (options.preference)\n    {\n        preferredOrder.push(options.preference);\n\n        renderPriority.forEach((item) =>\n        {\n            if (item !== options.preference)\n            {\n                preferredOrder.push(item);\n            }\n        });\n    }\n    else\n    {\n        preferredOrder = renderPriority.slice();\n    }\n\n    let RendererClass: new () => Renderer;\n    let finalOptions: Partial<AutoDetectOptions> = {};\n\n    for (let i = 0; i < preferredOrder.length; i++)\n    {\n        const rendererType = preferredOrder[i];\n\n        if (rendererType === 'webgpu' && (await isWebGPUSupported()))\n        {\n            const { WebGPURenderer } = await import('./gpu/WebGPURenderer');\n\n            RendererClass = WebGPURenderer;\n\n            finalOptions = { ...options, ...options.webgpu };\n\n            break;\n        }\n        else if (\n            rendererType === 'webgl'\n            && isWebGLSupported(\n                options.failIfMajorPerformanceCaveat\n                    ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n            )\n        )\n        {\n            const { WebGLRenderer } = await import('./gl/WebGLRenderer');\n\n            RendererClass = WebGLRenderer;\n\n            finalOptions = { ...options, ...options.webgl };\n\n            break;\n        }\n        else if (rendererType === 'canvas')\n        {\n            finalOptions = { ...options };\n\n            throw new Error('CanvasRenderer is not yet implemented');\n        }\n    }\n\n    delete finalOptions.webgpu;\n    delete finalOptions.webgl;\n\n    if (!RendererClass)\n    {\n        throw new Error('No available renderer for the current environment');\n    }\n\n    const renderer = new RendererClass();\n\n    await renderer.init(finalOptions);\n\n    return renderer;\n}\n", "import { extensions, ExtensionType } from '../extensions/Extensions';\nimport { autoDetectRenderer } from '../rendering/renderers/autoDetectRenderer';\nimport { Container } from '../scene/container/Container';\nimport { ApplicationInitHook } from '../utils/global/globalHooks';\nimport { deprecation, v8_0_0 } from '../utils/logging/deprecation';\n\nimport type { Rectangle } from '../maths/shapes/Rectangle';\nimport type { AutoDetectOptions } from '../rendering/renderers/autoDetectRenderer';\nimport type { RendererDestroyOptions } from '../rendering/renderers/shared/system/AbstractRenderer';\nimport type { Renderer } from '../rendering/renderers/types';\nimport type { DestroyOptions } from '../scene/container/destroyTypes';\n\n/**\n * The app module provides a set of classes to use as a starting point when building applications.\n *\n * <aside>This module has a mixin for <code>TickerPlugin</code> and <code>ResizePlugin</code>.\n * These will need to be imported if you are managing your own renderer.</aside>\n *\n * ```js\n * import { Application } from 'pixi.js';\n *\n * const app = new Application();\n *\n * await app.init();\n *\n * // don't forget to add the canvas to the DOM\n * document.body.appendChild(app.canvas);\n * ```\n * @namespace app\n */\n\n/**\n * Any plugin that's usable for Application should contain these methods.\n * @example\n * import { ApplicationPlugin } from 'pixi.js';\n *\n * const plugin: ApplicationPlugin = {\n *    init: (options: Partial<ApplicationOptions>) =>\n *    {\n *       // handle init here, use app options if needed\n *    },\n *    destroy: () =>\n *    {\n *       // handle destruction code here\n *    }\n * }\n * @memberof app\n * @see {@link app.ApplicationOptions}\n * @ignore\n */\nexport interface ApplicationPlugin\n{\n    /**\n     * Called when Application is constructed, scoped to Application instance.\n     * Passes in `options` as the only argument, which are Application `init()` options.\n     * @param {object} options - Application options.\n     */\n    init(options: Partial<ApplicationOptions>): void;\n    /** Called when destroying Application, scoped to Application instance. */\n    destroy(): void;\n}\n\n/**\n * Application options supplied to the {@link app.Application#init} method.\n * @memberof app\n * @example\n * import { Application } from 'pixi.js';\n *\n * const app = new Application();\n *\n * await app.init({\n *    autoStart: false,\n *    resizeTo: window,\n *    sharedTicker: true,\n * });\n */\nexport interface ApplicationOptions extends AutoDetectOptions, PixiMixins.ApplicationOptions { }\n\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\nexport interface Application extends PixiMixins.Application { }\n\n/**\n * Convenience class to create a new PixiJS application.\n *\n * This class automatically creates the renderer, ticker and root container.\n * @example\n * import { Application, Sprite } from 'pixi.js';\n *\n * // Create the application\n * const app = new Application();\n *\n * await app.init({ width: 800, height: 600 });\n *\n * // Add the view to the DOM\n * document.body.appendChild(app.canvas);\n *\n * // ex, add display objects\n * app.stage.addChild(Sprite.from('something.png'));\n * @memberof app\n */\nexport class Application<R extends Renderer = Renderer>\n{\n    /**\n     * Collection of installed plugins.\n     * @alias _plugins\n     */\n    public static _plugins: ApplicationPlugin[] = [];\n\n    /** The root display container that's rendered. */\n    public stage: Container = new Container();\n\n    /**\n     * WebGL renderer if available, otherwise CanvasRenderer.\n     * @member {rendering.Renderer}\n     */\n    public renderer: R;\n\n    /** Create new Application instance */\n    constructor();\n\n    /** @deprecated since 8.0.0 */\n    constructor(options?: Partial<ApplicationOptions>);\n\n    /** @ignore */\n    constructor(...args: [Partial<ApplicationOptions>] | [])\n    {\n        // #if _DEBUG\n        if (args[0] !== undefined)\n        {\n            deprecation(v8_0_0, 'Application constructor options are deprecated, please use Application.init() instead.');\n        }\n        // #endif\n    }\n\n    /**\n     * @param options - The optional application and renderer parameters.\n     */\n    public async init(options?: Partial<ApplicationOptions>)\n    {\n        // The default options\n        options = { ...options };\n\n        this.renderer = await autoDetectRenderer(options as ApplicationOptions) as R;\n\n        // install plugins here\n        Application._plugins.forEach((plugin) =>\n        {\n            plugin.init.call(this, options);\n        });\n    }\n\n    /** Render the current stage. */\n    public render(): void\n    {\n        this.renderer.render({ container: this.stage });\n    }\n\n    /**\n     * Reference to the renderer's canvas element.\n     * @readonly\n     * @member {HTMLCanvasElement}\n     */\n    get canvas(): R['canvas']\n    {\n        return this.renderer.canvas as R['canvas'];\n    }\n\n    /**\n     * Reference to the renderer's canvas element.\n     * @member {HTMLCanvasElement}\n     * @deprecated since 8.0.0\n     */\n    get view(): R['canvas']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Application.view is deprecated, please use Application.canvas instead.');\n        // #endif\n\n        return this.renderer.canvas as R['canvas'];\n    }\n\n    /**\n     * Reference to the renderer's screen rectangle. Its safe to use as `filterArea` or `hitArea` for the whole screen.\n     * @readonly\n     */\n    get screen(): Rectangle\n    {\n        return this.renderer.screen;\n    }\n\n    /**\n     * Destroys the application and all of its resources.\n     * @param {object|boolean}[rendererDestroyOptions=false] - The options for destroying the renderer.\n     * @param {boolean}[rendererDestroyOptions.removeView=false] - Removes the Canvas element from the DOM.\n     * @param {object|boolean} [options=false] - The options for destroying the stage.\n     * @param {boolean} [options.children=false] - If set to true, all the children will have their destroy method\n     * called as well. `options` will be passed on to those calls.\n     * @param {boolean} [options.texture=false] - Only used for children with textures e.g. Sprites.\n     * If options.children is set to true,\n     * it should destroy the texture of the child sprite.\n     * @param {boolean} [options.textureSource=false] - Only used for children with textures e.g. Sprites.\n     *  If options.children is set to true,\n     * it should destroy the texture source of the child sprite.\n     * @param {boolean} [options.context=false] - Only used for children with graphicsContexts e.g. Graphics.\n     * If options.children is set to true,\n     * it should destroy the context of the child graphics.\n     */\n    public destroy(rendererDestroyOptions: RendererDestroyOptions = false, options: DestroyOptions = false): void\n    {\n        // Destroy plugins in the opposite order\n        // which they were constructed\n        const plugins = Application._plugins.slice(0);\n\n        plugins.reverse();\n        plugins.forEach((plugin) =>\n        {\n            plugin.destroy.call(this);\n        });\n\n        this.stage.destroy(options);\n        this.stage = null;\n\n        this.renderer.destroy(rendererDestroyOptions);\n        this.renderer = null;\n    }\n}\n\nextensions.handleByList(ExtensionType.Application, Application._plugins);\nextensions.add(ApplicationInitHook);\n", "import { Rectangle } from '../../maths/shapes/Rectangle';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { AbstractBitmapFont } from './AbstractBitmapFont';\nimport { BitmapFontManager } from './BitmapFontManager';\n\nimport type { FontMetrics } from '../text/canvas/CanvasTextMetrics';\nimport type { BitmapFontData } from './AbstractBitmapFont';\nimport type { BitmapFontInstallOptions } from './BitmapFontManager';\n\n/**\n * Options for creating a BitmapFont.\n * @memberof text\n */\nexport interface BitmapFontOptions\n{\n    data: BitmapFontData\n    textures: Texture[]\n}\n\n/**\n * A BitmapFont object represents a particular font face, size, and style.\n * @memberof text\n */\nexport class BitmapFont extends AbstractBitmapFont<BitmapFont>\n{\n    /** the url of the font */\n    public url?: string;\n\n    constructor(options: BitmapFontOptions, url?: string)\n    {\n        super();\n\n        const { textures, data } = options;\n\n        Object.keys(data.pages).forEach((key: string) =>\n        {\n            const pageData = data.pages[parseInt(key, 10)];\n\n            const texture = textures[pageData.id];\n\n            this.pages.push({ texture });\n        });\n\n        Object.keys(data.chars).forEach((key: string) =>\n        {\n            const charData = data.chars[key];\n            const {\n                frame: textureFrame,\n                source: textureSource,\n            } = textures[charData.page];\n\n            const frameReal = new Rectangle(\n                charData.x + textureFrame.x,\n                charData.y + textureFrame.y,\n                charData.width,\n                charData.height,\n            );\n\n            const texture = new Texture({\n                source: textureSource,\n                frame: frameReal\n            });\n\n            this.chars[key] = {\n                id: key.codePointAt(0),\n                xOffset: charData.xOffset,\n                yOffset: charData.yOffset,\n                xAdvance: charData.xAdvance,\n                kerning: charData.kerning ?? {},\n                texture,\n            };\n        });\n\n        this.baseRenderedFontSize = data.fontSize;\n\n        (this.baseMeasurementFontSize as number) = data.fontSize;\n        (this.fontMetrics as FontMetrics) = {\n            ascent: 0,\n            descent: 0,\n            fontSize: data.fontSize,\n        };\n        (this.baseLineOffset as number) = data.baseLineOffset;\n        (this.lineHeight as number) = data.lineHeight;\n        (this.fontFamily as string) = data.fontFamily;\n        (this.distanceField as { type: string, range: number }) = data.distanceField ?? {\n            type: 'none',\n            range: 0,\n        };\n\n        this.url = url;\n    }\n\n    /** Destroys the BitmapFont object. */\n    public override destroy(): void\n    {\n        super.destroy();\n\n        for (let i = 0; i < this.pages.length; i++)\n        {\n            const { texture } = this.pages[i];\n\n            texture.destroy(true);\n        }\n\n        (this.pages as null) = null;\n    }\n\n    /**\n     * Generates a bitmap-font for the given style and character set\n     * @param options - Setup options for font generation.\n     * @returns Font generated by style options.\n     * @example\n     * import { BitmapFont, BitmapText } from 'pixi.js';\n     *\n     * BitmapFont.install('TitleFont', {\n     *     fontFamily: 'Arial',\n     *     fontSize: 12,\n     *     strokeThickness: 2,\n     *     fill: 'purple',\n     * });\n     *\n     * const title = new BitmapText({ text: 'This is the title', fontFamily: 'TitleFont' });\n     */\n    public static install(options: BitmapFontInstallOptions)\n    {\n        BitmapFontManager.install(options);\n    }\n    /**\n     * Uninstalls a bitmap font from the cache.\n     * @param {string} name - The name of the bitmap font to uninstall.\n     */\n    public static uninstall(name: string)\n    {\n        BitmapFontManager.uninstall(name);\n    }\n}\n", "import type { BitmapFontData, RawCharData } from '../AbstractBitmapFont';\n\n/**\n * Internal data format used to convert to BitmapFontData.\n * @private\n */\nexport interface BitmapFontRawData\n{\n    info: {\n        face: string;\n        size: string;\n    }[];\n    common: { lineHeight: string, base: string }[];\n    page: {\n        id: string;\n        file: string;\n    }[];\n    chars: {\n        count: number;\n    }[];\n    char: {\n        id: string\n        page: string\n        xoffset: string\n        yoffset: string\n        xadvance: string,\n        x: string\n        y: string\n        width: string\n        height: string\n        letter?: string\n        char?: string\n    }[];\n    kernings?: {\n        count: number;\n    }[];\n    kerning?: {\n        first: string;\n        second: string;\n        amount: string;\n    }[];\n    distanceField?: {\n        fieldType: 'sdf' | 'msdf' | 'none';\n        distanceRange: string;\n    }[]\n}\n\nexport const bitmapFontTextParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        return typeof data === 'string' && data.startsWith('info face=');\n    },\n\n    parse(txt: string): BitmapFontData\n    {\n        // Retrieve data item\n        const items = txt.match(/^[a-z]+\\s+.+$/gm);\n        const rawData: BitmapFontRawData = {\n            info: [],\n            common: [],\n            page: [],\n            char: [],\n            chars: [],\n            kerning: [],\n            kernings: [],\n            distanceField: [],\n        };\n\n        for (const i in items)\n        {\n            // Extract item name\n            const name = items[i].match(/^[a-z]+/gm)[0] as keyof BitmapFontRawData;\n\n            // Extract item attribute list as string ex.: \"width=10\"\n            const attributeList = items[i].match(/[a-zA-Z]+=([^\\s\"']+|\"([^\"]*)\")/gm);\n\n            // Convert attribute list into an object\n            const itemData: any = {};\n\n            for (const i in attributeList)\n            {\n                // Split key-value pairs\n                const split = attributeList[i].split('=');\n                const key = split[0];\n\n                // Remove eventual quotes from value\n                const strValue = split[1].replace(/\"/gm, '');\n\n                // Try to convert value into float\n                const floatValue = parseFloat(strValue);\n\n                // Use string value case float value is NaN\n                const value = isNaN(floatValue) ? strValue : floatValue;\n\n                itemData[key] = value;\n            }\n\n            // Push current item to the resulting data\n            rawData[name].push(itemData);\n        }\n\n        const font: BitmapFontData = {\n            chars: {},\n            pages: [],\n            lineHeight: 0,\n            fontSize: 0,\n            fontFamily: '',\n            distanceField: null,\n            baseLineOffset: 0,\n        };\n\n        const [info] = rawData.info;\n        const [common] = rawData.common;\n        const [distanceField] = rawData.distanceField ?? [];\n\n        if (distanceField)\n        {\n            font.distanceField = {\n                range: parseInt(distanceField.distanceRange, 10),\n                type: distanceField.fieldType\n            };\n        }\n\n        font.fontSize = parseInt(info.size, 10);\n        font.fontFamily = info.face;\n        font.lineHeight = parseInt(common.lineHeight, 10);\n\n        const page = rawData.page;\n\n        for (let i = 0; i < page.length; i++)\n        {\n            font.pages.push({\n                id: parseInt(page[i].id, 10) || 0,\n                file: page[i].file,\n            });\n        }\n\n        const map: Record<string, string> = {};\n\n        font.baseLineOffset = font.lineHeight - parseInt(common.base, 10);\n\n        const char = rawData.char;\n\n        for (let i = 0; i < char.length; i++)\n        {\n            const charNode = char[i];\n            const id = parseInt(charNode.id, 10);\n\n            let letter = charNode.letter ?? charNode.char ?? String.fromCharCode(id);\n\n            if (letter === 'space')letter = ' ';\n\n            map[id] = letter;\n\n            font.chars[letter] = {\n                id,\n                // texture deets..\n                page: parseInt(charNode.page, 10) || 0,\n                x: parseInt(charNode.x, 10),\n                y: parseInt(charNode.y, 10),\n                width: parseInt(charNode.width, 10),\n                height: parseInt(charNode.height, 10),\n                xOffset: parseInt(charNode.xoffset, 10),\n                yOffset: parseInt(charNode.yoffset, 10),\n                xAdvance: parseInt(charNode.xadvance, 10),\n                kerning: {},\n            } as RawCharData;\n        }\n\n        const kerning = rawData.kerning || [];\n\n        for (let i = 0; i < kerning.length; i++)\n        {\n            const first = parseInt(kerning[i].first, 10);\n            const second = parseInt(kerning[i].second, 10);\n            const amount = parseInt(kerning[i].amount, 10);\n\n            font.chars[map[second]].kerning[map[first]] = amount;\n        }\n\n        return font;\n    }\n};\n", "import type { BitmapFontData, RawCharData } from '../AbstractBitmapFont';\n\nexport const bitmapFontXMLParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        const xml = data as Document;\n\n        return typeof xml !== 'string'\n            && 'getElementsByTagName' in xml\n            && xml.getElementsByTagName('page').length\n            && xml.getElementsByTagName('info')[0].getAttribute('face') !== null;\n    },\n\n    parse(xml: Document): BitmapFontData\n    {\n        const data: BitmapFontData = {\n            chars: {},\n            pages: [],\n            lineHeight: 0,\n            fontSize: 0,\n            fontFamily: '',\n            distanceField: null,\n            baseLineOffset: 0,\n        };\n\n        const info = xml.getElementsByTagName('info')[0];\n        const common = xml.getElementsByTagName('common')[0];\n        const distanceField = xml.getElementsByTagName('distanceField')[0];\n\n        if (distanceField)\n        {\n            data.distanceField = {\n                type: distanceField.getAttribute('fieldType') as 'sdf' | 'msdf' | 'none',\n                range: parseInt(distanceField.getAttribute('distanceRange'), 10),\n            };\n        }\n\n        // pages and chars:\n        const page = xml.getElementsByTagName('page');\n        const char = xml.getElementsByTagName('char');\n        const kerning = xml.getElementsByTagName('kerning');\n\n        data.fontSize = parseInt(info.getAttribute('size'), 10);\n        data.fontFamily = info.getAttribute('face');\n        data.lineHeight = parseInt(common.getAttribute('lineHeight'), 10);\n\n        for (let i = 0; i < page.length; i++)\n        {\n            data.pages.push({\n                id: parseInt(page[i].getAttribute('id'), 10) || 0,\n                file: page[i].getAttribute('file'),\n            });\n        }\n\n        const map: Record<string, string> = {};\n\n        data.baseLineOffset = data.lineHeight - parseInt(common.getAttribute('base'), 10);\n\n        for (let i = 0; i < char.length; i++)\n        {\n            const charNode = char[i];\n            const id = parseInt(charNode.getAttribute('id'), 10);\n\n            let letter = charNode.getAttribute('letter') ?? charNode.getAttribute('char') ?? String.fromCharCode(id);\n\n            if (letter === 'space')letter = ' ';\n\n            map[id] = letter;\n\n            data.chars[letter] = {\n                id,\n                // texture deets..\n                page: parseInt(charNode.getAttribute('page'), 10) || 0,\n                x: parseInt(charNode.getAttribute('x'), 10),\n                y: parseInt(charNode.getAttribute('y'), 10),\n                width: parseInt(charNode.getAttribute('width'), 10),\n                height: parseInt(charNode.getAttribute('height'), 10),\n\n                // render deets..\n                xOffset: parseInt(charNode.getAttribute('xoffset'), 10),\n                yOffset: parseInt(charNode.getAttribute('yoffset'), 10), // + baseLineOffset,\n                xAdvance: parseInt(charNode.getAttribute('xadvance'), 10),\n                kerning: {},\n            } as RawCharData;\n        }\n\n        for (let i = 0; i < kerning.length; i++)\n        {\n            const first = parseInt(kerning[i].getAttribute('first'), 10);\n            const second = parseInt(kerning[i].getAttribute('second'), 10);\n            const amount = parseInt(kerning[i].getAttribute('amount'), 10);\n\n            data.chars[map[second]].kerning[map[first]] = amount;// * 10000;\n        }\n\n        return data;\n    }\n};\n", "import { DOMAdapter } from '../../../environment/adapter';\nimport { bitmapFontXMLParser } from './bitmapFontXMLParser';\n\nimport type { BitmapFontData } from '../AbstractBitmapFont';\n\nexport const bitmapFontXMLStringParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        if (typeof data === 'string' && data.includes('<font>'))\n        {\n            return bitmapFontXMLParser.test(DOMAdapter.get().parseXML(data));\n        }\n\n        return false;\n    },\n\n    parse(data: string): BitmapFontData\n    {\n        return bitmapFontXMLParser.parse(DOMAdapter.get().parseXML(data));\n    }\n};\n", "import { LoaderParserPriority } from '../../../assets/loader/parsers/LoaderParser';\nimport { copySearchParams } from '../../../assets/utils/copySearchParams';\nimport { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { path } from '../../../utils/path';\nimport { BitmapFont } from '../BitmapFont';\nimport { bitmapFontTextParser } from './bitmapFontTextParser';\nimport { bitmapFontXMLStringParser } from './bitmapFontXMLStringParser';\n\nimport type { CacheParser } from '../../../assets/cache/CacheParser';\nimport type { Loader } from '../../../assets/loader/Loader';\nimport type { LoaderParserAdvanced } from '../../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../../assets/types';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\n\nconst validExtensions = ['.xml', '.fnt'];\n\n/** simple loader plugin for loading in bitmap fonts! */\nexport const bitmapFontCachePlugin = {\n    extension: {\n        type: ExtensionType.CacheParser,\n        name: 'cacheBitmapFont',\n    },\n    test: (asset: BitmapFont) => asset instanceof BitmapFont,\n    getCacheableAssets(keys: string[], asset: BitmapFont)\n    {\n        const out: Record<string, BitmapFont> = {};\n\n        keys.forEach((key) =>\n        {\n            out[key] = asset;\n            out[`${key}-bitmap`] = asset;\n        });\n\n        out[`${asset.fontFamily}-bitmap`] = asset;\n\n        return out;\n    }\n} satisfies CacheParser<BitmapFont>;\n\nexport const loadBitmapFont = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Normal,\n    },\n\n    name: 'loadBitmapFont',\n\n    test(url: string): boolean\n    {\n        return validExtensions.includes(path.extname(url).toLowerCase());\n    },\n\n    async testParse(data: string): Promise<boolean>\n    {\n        return bitmapFontTextParser.test(data) || bitmapFontXMLStringParser.test(data);\n    },\n\n    async parse(asset: string, data: ResolvedAsset, loader: Loader): Promise<BitmapFont>\n    {\n        const bitmapFontData = bitmapFontTextParser.test(asset)\n            ? bitmapFontTextParser.parse(asset)\n            : bitmapFontXMLStringParser.parse(asset);\n\n        const { src } = data;\n        const { pages } = bitmapFontData;\n        const textureUrls = [];\n\n        // if we have a distance field - we can assume this is a signed distance field font\n        // and we should use force linear filtering and no alpha premultiply\n        const textureOptions = (bitmapFontData.distanceField) ? {\n            scaleMode: 'linear',\n            alphaMode: 'premultiply-alpha-on-upload',\n            autoGenerateMipmaps: false,\n            resolution: 1,\n        } : {};\n\n        for (let i = 0; i < pages.length; ++i)\n        {\n            const pageFile = pages[i].file;\n            let imagePath = path.join(path.dirname(src), pageFile);\n\n            imagePath = copySearchParams(imagePath, src);\n\n            textureUrls.push({\n                src: imagePath,\n                data: textureOptions\n            });\n        }\n\n        const loadedTextures = await loader.load<Texture>(textureUrls);\n        const textures = textureUrls.map((url) => loadedTextures[url.src]);\n\n        const bitmapFont = new BitmapFont({\n            data: bitmapFontData,\n            textures\n        }, src);\n\n        return bitmapFont;\n    },\n\n    async load(url: string, _options: ResolvedAsset): Promise<string>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        return await response.text();\n    },\n\n    async unload(bitmapFont: BitmapFont, _resolvedAsset, loader): Promise<void>\n    {\n        await Promise.all(bitmapFont.pages.map((page) => loader.unload(page.texture.source._sourceOrigin)));\n\n        bitmapFont.destroy();\n    }\n} satisfies LoaderParserAdvanced<string, BitmapFont, BitmapFont>;\n", "import type { Loader } from './loader/Loader';\nimport type { ResolvedAsset } from './types';\n\n/**\n * Quietly Loads assets in the background.\n * @memberof assets\n */\nexport class BackgroundLoader\n{\n    /** Whether or not the loader should continue loading. */\n    private _isActive: boolean;\n\n    /** Assets to load. */\n    private readonly _assetList: ResolvedAsset[];\n\n    /** Whether or not the loader is loading. */\n    private _isLoading: boolean;\n\n    /** Number of assets to load at a time. */\n    private readonly _maxConcurrent: number;\n\n    /** Should the loader log to the console. */\n    public verbose: boolean;\n    private readonly _loader: Loader;\n\n    /**\n     * @param loader\n     * @param verbose - should the loader log to the console\n     */\n    constructor(loader: Loader, verbose = false)\n    {\n        this._loader = loader;\n        this._assetList = [];\n        this._isLoading = false;\n        this._maxConcurrent = 1;\n        this.verbose = verbose;\n    }\n\n    /**\n     * Adds an array of assets to load.\n     * @param assetUrls - assets to load\n     */\n    public add(assetUrls: ResolvedAsset[]): void\n    {\n        assetUrls.forEach((a) =>\n        {\n            this._assetList.push(a);\n        });\n\n        if (this.verbose)\n        {\n            // eslint-disable-next-line no-console\n            console.log('[BackgroundLoader] assets: ', this._assetList);\n        }\n\n        if (this._isActive && !this._isLoading)\n        {\n            void this._next();\n        }\n    }\n\n    /**\n     * Loads the next set of assets. Will try to load as many assets as it can at the same time.\n     *\n     * The max assets it will try to load at one time will be 4.\n     */\n    private async _next(): Promise<void>\n    {\n        if (this._assetList.length && this._isActive)\n        {\n            this._isLoading = true;\n\n            const toLoad = [];\n\n            const toLoadAmount = Math.min(this._assetList.length, this._maxConcurrent);\n\n            for (let i = 0; i < toLoadAmount; i++)\n            {\n                toLoad.push(this._assetList.pop());\n            }\n\n            await this._loader.load(toLoad);\n\n            this._isLoading = false;\n\n            void this._next();\n        }\n    }\n\n    /**\n     * Activate/Deactivate the loading. If set to true then it will immediately continue to load the next asset.\n     * @returns whether the class is active\n     */\n    get active(): boolean\n    {\n        return this._isActive;\n    }\n\n    set active(value: boolean)\n    {\n        if (this._isActive === value) return;\n\n        this._isActive = value;\n\n        if (value && !this._isLoading)\n        {\n            void this._next();\n        }\n    }\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\n\nimport type { CacheParser } from '../CacheParser';\n\n/**\n * Returns an object of textures from an array of textures to be cached\n * @memberof assets\n */\nexport const cacheTextureArray: CacheParser<Texture[]> = {\n    extension: {\n        type: ExtensionType.CacheParser,\n        name: 'cacheTextureArray',\n    },\n\n    test: (asset: any[]) => Array.isArray(asset) && asset.every((t) => t instanceof Texture),\n\n    getCacheableAssets: (keys: string[], asset: Texture[]) =>\n    {\n        const out: Record<string, Texture> = {};\n\n        keys.forEach((key: string) =>\n        {\n            asset.forEach((item: Texture, i: number) =>\n            {\n                out[key + (i === 0 ? '' : i + 1)] = item;\n            });\n        });\n\n        return out;\n    }\n};\n", "export async function testImageFormat(imageData: string): Promise<boolean>\n{\n    // Some browsers currently do not support createImageBitmap with Blob, so new Image() is preferred when exist.\n    // See https://caniuse.com/createimagebitmap for more information.\n\n    if ('Image' in globalThis)\n    {\n        return new Promise<boolean>((resolve) =>\n        {\n            const image = new Image();\n\n            image.onload = () =>\n            {\n                resolve(true);\n            };\n            image.onerror = () =>\n            {\n                resolve(false);\n            };\n            image.src = imageData;\n        });\n    }\n\n    if ('createImageBitmap' in globalThis && 'fetch' in globalThis)\n    {\n        try\n        {\n            const blob = await (await fetch(imageData)).blob();\n\n            await createImageBitmap(blob);\n        }\n        catch (_e)\n        {\n            return false;\n        }\n\n        return true;\n    }\n\n    return false;\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { testImageFormat } from '../utils/testImageFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the AVIF image format.\n * @memberof assets\n */\nexport const detectAvif: FormatDetectionParser = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 1,\n    },\n    test: async (): Promise<boolean> => testImageFormat(\n        // eslint-disable-next-line max-len\n        'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A='\n    ),\n    add: async (formats) => [...formats, 'avif'],\n    remove: async (formats) => formats.filter((f) => f !== 'avif'),\n};\n", "import { ExtensionType } from '../../../extensions/Extensions';\n\nimport type { FormatDetectionParser } from '../types';\n\nconst imageFormats = ['png', 'jpg', 'jpeg'];\n\n/**\n * Adds some default image formats to the detection parser\n * @memberof assets\n */\nexport const detectDefaults = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: -1,\n    },\n    test: (): Promise<boolean> => Promise.resolve(true),\n    add: async (formats) => [...formats, ...imageFormats],\n    remove: async (formats) => formats.filter((f) => !imageFormats.includes(f)),\n} as FormatDetectionParser;\n", "const inWorker = 'WorkerGlobalScope' in globalThis\n    && globalThis instanceof (globalThis as any).WorkerGlobalScope;\n\nexport function testVideoFormat(mimeType: string): boolean\n{\n    if (inWorker)\n    {\n        return false;\n    }\n\n    const video = document.createElement('video');\n\n    return video.canPlayType(mimeType) !== '';\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the MP4 video format.\n * @memberof assets\n */\nexport const detectMp4 = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/mp4'),\n    add: async (formats) => [...formats, 'mp4', 'm4v'],\n    remove: async (formats) => formats.filter((f) => f !== 'mp4' && f !== 'm4v'),\n} as FormatDetectionParser;\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the OGV video format.\n * @memberof assets\n */\nexport const detectOgv = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/ogg'),\n    add: async (formats) => [...formats, 'ogv'],\n    remove: async (formats) => formats.filter((f) => f !== 'ogv'),\n} as FormatDetectionParser;\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the WebM video format.\n * @memberof assets\n */\nexport const detectWebm = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/webm'),\n    add: async (formats) => [...formats, 'webm'],\n    remove: async (formats) => formats.filter((f) => f !== 'webm'),\n} as FormatDetectionParser;\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { testImageFormat } from '../utils/testImageFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the WebP image format.\n * @memberof assets\n */\nexport const detectWebp = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testImageFormat(\n        'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA='\n    ),\n    add: async (formats) => [...formats, 'webp'],\n    remove: async (formats) => formats.filter((f) => f !== 'webp'),\n} as FormatDetectionParser;\n", "import { warn } from '../../utils/logging/warn';\nimport { path } from '../../utils/path';\nimport { convertToList } from '../utils/convertToList';\nimport { isSingleItem } from '../utils/isSingleItem';\n\nimport type { ResolvedAsset } from '../types';\nimport type { LoaderParser } from './parsers/LoaderParser';\nimport type { PromiseAndParser } from './types';\n\n/**\n * The Loader is responsible for loading all assets, such as images, spritesheets, audio files, etc.\n * It does not do anything clever with URLs - it just loads stuff!\n * Behind the scenes all things are cached using promises. This means it's impossible to load an asset more than once.\n * Through the use of LoaderParsers, the loader can understand how to load any kind of file!\n *\n * It is not intended that this class is created by developers - its part of the Asset class\n * This is the second major system of PixiJS' main Assets class\n * @memberof assets\n */\nexport class Loader\n{\n    private readonly _parsers: LoaderParser[] = [];\n    private _parserHash: Record<string, LoaderParser>;\n\n    private _parsersValidated = false;\n\n    /**\n     * All loader parsers registered\n     * @type {assets.LoaderParser[]}\n     */\n    public parsers = new Proxy(this._parsers, {\n        set: (target, key, value) =>\n        {\n            this._parsersValidated = false;\n\n            target[key as any as number] = value;\n\n            return true;\n        }\n    });\n\n    /** Cache loading promises that ae currently active */\n    public promiseCache: Record<string, PromiseAndParser> = {};\n\n    /** function used for testing */\n    public reset(): void\n    {\n        this._parsersValidated = false;\n        this.promiseCache = {};\n    }\n\n    /**\n     * Used internally to generate a promise for the asset to be loaded.\n     * @param url - The URL to be loaded\n     * @param data - any custom additional information relevant to the asset being loaded\n     * @returns - a promise that will resolve to an Asset for example a Texture of a JSON object\n     */\n    private _getLoadPromiseAndParser(url: string, data?: ResolvedAsset): PromiseAndParser\n    {\n        const result: PromiseAndParser = {\n            promise: null,\n            parser: null\n        };\n\n        result.promise = (async () =>\n        {\n            let asset = null;\n\n            let parser: LoaderParser = null;\n\n            // first check to see if the user has specified a parser\n            if (data.loadParser)\n            {\n                // they have? lovely, lets use it\n                parser = this._parserHash[data.loadParser];\n\n                if (!parser)\n                {\n                    // #if _DEBUG\n\n                    warn(`[Assets] specified load parser \"${data.loadParser}\" not found while loading ${url}`);\n                    // #endif\n                }\n            }\n\n            // no parser specified, so lets try and find one using the tests\n            if (!parser)\n            {\n                for (let i = 0; i < this.parsers.length; i++)\n                {\n                    const parserX = this.parsers[i];\n\n                    if (parserX.load && parserX.test?.(url, data, this))\n                    {\n                        parser = parserX;\n                        break;\n                    }\n                }\n\n                if (!parser)\n                {\n                    // #if _DEBUG\n                    // eslint-disable-next-line max-len\n                    warn(`[Assets] ${url} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`);\n                    // #endif\n\n                    return null;\n                }\n            }\n\n            asset = await parser.load(url, data, this);\n            result.parser = parser;\n\n            for (let i = 0; i < this.parsers.length; i++)\n            {\n                const parser = this.parsers[i];\n\n                if (parser.parse)\n                {\n                    if (parser.parse && await parser.testParse?.(asset, data, this))\n                    {\n                        // transform the asset..\n                        asset = await parser.parse(asset, data, this) || asset;\n\n                        result.parser = parser;\n                    }\n                }\n            }\n\n            return asset;\n        })();\n\n        return result;\n    }\n\n    /**\n     * Loads one or more assets using the parsers added to the Loader.\n     * @example\n     * // Single asset:\n     * const asset = await Loader.load('cool.png');\n     * console.log(asset);\n     *\n     * // Multiple assets:\n     * const assets = await Loader.load(['cool.png', 'cooler.png']);\n     * console.log(assets);\n     * @param assetsToLoadIn - urls that you want to load, or a single one!\n     * @param onProgress - For multiple asset loading only, an optional function that is called\n     * when progress on asset loading is made. The function is passed a single parameter, `progress`,\n     * which represents the percentage (0.0 - 1.0) of the assets loaded. Do not use this function\n     * to detect when assets are complete and available, instead use the Promise returned by this function.\n     */\n    public async load<T = any>(\n        assetsToLoadIn: string | ResolvedAsset,\n        onProgress?: (progress: number) => void,\n    ): Promise<T>;\n    public async load<T = any>(\n        assetsToLoadIn: string[] | ResolvedAsset[],\n        onProgress?: (progress: number) => void,\n    ): Promise<Record<string, T>>;\n    public async load<T = any>(\n        assetsToLoadIn: string | string[] | ResolvedAsset | ResolvedAsset[],\n        onProgress?: (progress: number) => void,\n    ): Promise<T | Record<string, T>>\n    {\n        if (!this._parsersValidated)\n        {\n            this._validateParsers();\n        }\n\n        let count = 0;\n\n        const assets: Record<string, Promise<any>> = {};\n\n        const singleAsset = isSingleItem(assetsToLoadIn);\n\n        const assetsToLoad = convertToList<ResolvedAsset>(assetsToLoadIn, (item) => ({\n            alias: [item],\n            src: item,\n            data: {}\n        }));\n\n        const total = assetsToLoad.length;\n\n        const promises: Promise<void>[] = assetsToLoad.map(async (asset: ResolvedAsset) =>\n        {\n            const url = path.toAbsolute(asset.src);\n\n            if (!assets[asset.src])\n            {\n                try\n                {\n                    if (!this.promiseCache[url])\n                    {\n                        this.promiseCache[url] = this._getLoadPromiseAndParser(url, asset);\n                    }\n\n                    assets[asset.src] = await this.promiseCache[url].promise;\n\n                    // Only progress if nothing goes wrong\n                    if (onProgress) onProgress(++count / total);\n                }\n                catch (e)\n                {\n                    // Delete eventually registered file and promises from internal cache\n                    // so they can be eligible for another loading attempt\n                    delete this.promiseCache[url];\n                    delete assets[asset.src];\n\n                    // Stop further execution\n                    throw new Error(`[Loader.load] Failed to load ${url}.\\n${e}`);\n                }\n            }\n        });\n\n        await Promise.all(promises);\n\n        return singleAsset ? assets[assetsToLoad[0].src] : assets;\n    }\n\n    /**\n     * Unloads one or more assets. Any unloaded assets will be destroyed, freeing up memory for your app.\n     * The parser that created the asset, will be the one that unloads it.\n     * @example\n     * // Single asset:\n     * const asset = await Loader.load('cool.png');\n     *\n     * await Loader.unload('cool.png');\n     *\n     * console.log(asset.destroyed); // true\n     * @param assetsToUnloadIn - urls that you want to unload, or a single one!\n     */\n    public async unload(\n        assetsToUnloadIn: string | string[] | ResolvedAsset | ResolvedAsset[],\n    ): Promise<void>\n    {\n        const assetsToUnload = convertToList<ResolvedAsset>(assetsToUnloadIn, (item) => ({\n            alias: [item],\n            src: item,\n        }));\n\n        const promises: Promise<void>[] = assetsToUnload.map(async (asset: ResolvedAsset) =>\n        {\n            const url = path.toAbsolute(asset.src);\n\n            const loadPromise = this.promiseCache[url];\n\n            if (loadPromise)\n            {\n                const loadedAsset = await loadPromise.promise;\n\n                delete this.promiseCache[url];\n\n                await loadPromise.parser?.unload?.(loadedAsset, asset, this);\n            }\n        });\n\n        await Promise.all(promises);\n    }\n\n    /** validates our parsers, right now it only checks for name conflicts but we can add more here as required! */\n    private _validateParsers()\n    {\n        this._parsersValidated = true;\n\n        this._parserHash = this._parsers\n            .filter((parser) => parser.name)\n            .reduce((hash, parser) =>\n            {\n                if (!parser.name)\n                {\n                    // #if _DEBUG\n                    warn(`[Assets] loadParser should have a name`);\n                    // #endif\n                }\n                else if (hash[parser.name])\n                {\n                    // #if _DEBUG\n                    warn(`[Assets] loadParser name conflict \"${parser.name}\"`);\n                    // #endif\n                }\n\n                return { ...hash, [parser.name]: parser };\n            }, {} as Record<string, LoaderParser>);\n    }\n}\n", "export function checkDataUrl(url: string, mimes: string | string[]): boolean\n{\n    if (Array.isArray(mimes))\n    {\n        for (const mime of mimes)\n        {\n            if (url.startsWith(`data:${mime}`)) return true;\n        }\n\n        return false;\n    }\n\n    return url.startsWith(`data:${mimes}`);\n}\n", "import { path } from '../../utils/path';\n\nexport function checkExtension(url: string, extension: string | string[]): boolean\n{\n    const tempURL = url.split('?')[0];\n    const ext = path.extname(tempURL).toLowerCase();\n\n    if (Array.isArray(extension))\n    {\n        return extension.includes(ext);\n    }\n\n    return ext === extension;\n}\n\n", "import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { LoaderParser } from './LoaderParser';\n\nconst validJSONExtension = '.json';\nconst validJSONMIME = 'application/json';\n\n/**\n * A simple loader plugin for loading json data\n * @memberof assets\n */\nexport const loadJson = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n    },\n\n    name: 'loadJson',\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validJSONMIME) || checkExtension(url, validJSONExtension);\n    },\n\n    async load<T>(url: string): Promise<T>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        const json = await response.json();\n\n        return json as T;\n    },\n} satisfies LoaderParser<string>;\n", "import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { LoaderParser } from './LoaderParser';\n\nconst validTXTExtension = '.txt';\nconst validTXTMIME = 'text/plain';\n\n/**\n * A simple loader plugin for loading text data\n * @memberof assets\n */\nexport const loadTxt = {\n\n    name: 'loadTxt',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n        name: 'loadTxt',\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validTXTMIME) || checkExtension(url, validTXTExtension);\n    },\n\n    async load(url: string): Promise<string>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        const txt = await response.text();\n\n        return txt;\n    },\n} satisfies LoaderParser<string>;\n", "import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { warn } from '../../../utils/logging/warn';\nimport { path } from '../../../utils/path';\nimport { Cache } from '../../cache/Cache';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { ResolvedAsset } from '../../types';\nimport type { LoaderParser } from './LoaderParser';\n\nconst validWeights = [\n    'normal', 'bold',\n    '100', '200', '300', '400', '500', '600', '700', '800', '900',\n];\nconst validFontExtensions = ['.ttf', '.otf', '.woff', '.woff2'];\nconst validFontMIMEs = [\n    'font/ttf',\n    'font/otf',\n    'font/woff',\n    'font/woff2',\n];\n\n/**\n * Data for loading a font\n * @memberof assets\n */\nexport type LoadFontData = {\n    /** Font family name */\n    family: string;\n    /** A set of optional descriptors passed as an object. It can contain any of the descriptors available for @font-face: */\n    display: string;\n    /**\n     * The featureSettings property of the FontFace interface retrieves or sets infrequently used\n     * font features that are not available from a font's variant properties.\n     */\n    featureSettings: string;\n    /** The stretch property of the FontFace interface retrieves or sets how the font stretches. */\n    stretch: string;\n    /** The style property of the FontFace interface retrieves or sets the font's style. */\n    style: string;\n    /**\n     * The unicodeRange property of the FontFace interface retrieves or sets the range of\n     * unicode code points encompassing the font.\n     */\n    unicodeRange: string;\n    /** The variant property of the FontFace interface programmatically retrieves or sets font variant values. */\n    variant: string;\n    /** The weight property of the FontFace interface retrieves or sets the weight of the font. */\n    weights: string[];\n};\n\n/**\n * RegExp for matching CSS <ident-token>. It doesn't consider escape and non-ASCII characters, but enough for us.\n * @see {@link https://www.w3.org/TR/css-syntax-3/#ident-token-diagram}\n */\nconst CSS_IDENT_TOKEN_REGEX = /^(--|-?[A-Z_])[0-9A-Z_-]*$/i;\n\n/**\n * Return font face name from a file name\n * Ex.: 'fonts/titan-one.woff' turns into 'Titan One'\n * @param url - File url\n * @memberof assets\n */\nexport function getFontFamilyName(url: string): string\n{\n    const ext = path.extname(url);\n    const name = path.basename(url, ext);\n\n    // Replace dashes by white spaces\n    const nameWithSpaces = name.replace(/(-|_)/g, ' ');\n\n    // Upper case first character of each word\n    const nameTokens = nameWithSpaces.toLowerCase()\n        .split(' ')\n        .map((word) => word.charAt(0).toUpperCase() + word.slice(1));\n\n    let valid = nameTokens.length > 0;\n\n    for (const token of nameTokens)\n    {\n        if (!token.match(CSS_IDENT_TOKEN_REGEX))\n        {\n            valid = false;\n            break;\n        }\n    }\n\n    let fontFamilyName = nameTokens.join(' ');\n\n    if (!valid)\n    {\n        fontFamilyName = `\"${fontFamilyName.replace(/[\\\\\"]/g, '\\\\$&')}\"`;\n    }\n\n    return fontFamilyName;\n}\n\n// See RFC 3986 Chapter 2. Characters\nconst validURICharactersRegex = /^[0-9A-Za-z%:/?#\\[\\]@!\\$&'()\\*\\+,;=\\-._~]*$/;\n\n/**\n * Encode URI only when it contains invalid characters.\n * @param uri - URI to encode.\n */\nfunction encodeURIWhenNeeded(uri: string)\n{\n    if (validURICharactersRegex.test(uri))\n    {\n        return uri;\n    }\n\n    return encodeURI(uri);\n}\n\n/**\n * A loader plugin for handling web fonts\n * @example\n * import { Assets } from 'pixi.js';\n *\n * Assets.load({\n *   alias: 'font',\n *   src: 'fonts/titan-one.woff',\n *   data: {\n *     family: 'Titan One',\n *     weights: ['normal', 'bold'],\n *   }\n * })\n * @memberof assets\n */\nexport const loadWebFont = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n    },\n\n    name: 'loadWebFont',\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validFontMIMEs) || checkExtension(url, validFontExtensions);\n    },\n\n    async load(url: string, options?: ResolvedAsset<LoadFontData>): Promise<FontFace | FontFace[]>\n    {\n        const fonts = DOMAdapter.get().getFontFaceSet();\n\n        if (fonts)\n        {\n            const fontFaces: FontFace[] = [];\n            const name = options.data?.family ?? getFontFamilyName(url);\n            const weights = options.data?.weights?.filter((weight) => validWeights.includes(weight)) ?? ['normal'];\n            const data = options.data ?? {};\n\n            for (let i = 0; i < weights.length; i++)\n            {\n                const weight = weights[i];\n\n                const font = new FontFace(name, `url(${encodeURIWhenNeeded(url)})`, {\n                    ...data,\n                    weight,\n                });\n\n                await font.load();\n\n                fonts.add(font);\n\n                fontFaces.push(font);\n            }\n\n            Cache.set(`${name}-and-url`, {\n                url,\n                fontFaces,\n            });\n\n            return fontFaces.length === 1 ? fontFaces[0] : fontFaces;\n        }\n\n        // #if _DEBUG\n        warn('[loadWebFont] FontFace API is not supported. Skipping loading font');\n        // #endif\n\n        return null;\n    },\n\n    unload(font: FontFace | FontFace[]): void\n    {\n        (Array.isArray(font) ? font : [font])\n            .forEach((t) =>\n            {\n                Cache.remove(`${t.family}-and-url`);\n                DOMAdapter.get().getFontFaceSet().delete(t);\n            });\n    }\n} satisfies LoaderParser<FontFace | FontFace[]>;\n", "import { Resolver } from '../../assets/resolver/Resolver';\n\n/**\n * get the resolution / device pixel ratio of an asset by looking for the prefix\n * used by spritesheets and image urls\n * @memberof utils\n * @function getResolutionOfUrl\n * @param {string} url - the image path\n * @param {number} [defaultValue=1] - the defaultValue if no filename prefix is set.\n * @returns {number} resolution / device pixel ratio of an asset\n */\nexport function getResolutionOfUrl(url: string, defaultValue = 1): number\n{\n    const resolution = Resolver.RETINA_PREFIX?.exec(url);\n\n    if (resolution)\n    {\n        return parseFloat(resolution[1]);\n    }\n\n    return defaultValue;\n}\n", "import { Texture } from '../../../../../rendering/renderers/shared/texture/Texture';\nimport { warn } from '../../../../../utils/logging/warn';\nimport { Cache } from '../../../../cache/Cache';\n\nimport type { TextureSource } from '../../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Loader } from '../../../Loader';\n\n/**\n * Creates a texture from a source and adds it to the cache.\n * @param source - source of the texture\n * @param loader - loader\n * @param url - url of the texture\n * @ignore\n */\nexport function createTexture(source: TextureSource, loader: Loader, url: string)\n{\n    source.label = url;\n    source._sourceOrigin = url;\n\n    const texture = new Texture({\n        source,\n        label: url,\n    });\n\n    const unload = () =>\n    {\n        delete loader.promiseCache[url];\n\n        if (Cache.has(url))\n        {\n            Cache.remove(url);\n        }\n    };\n\n    // remove the promise from the loader and the url from the cache when the texture is destroyed\n    texture.source.once('destroy', () =>\n    {\n        if (loader.promiseCache[url])\n        {\n            // #if _DEBUG\n            warn('[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! '\n           + 'Use Assets.unload() instead of destroying the TextureSource.');\n            // #endif\n\n            unload();\n        }\n    });\n\n    texture.once('destroy', () =>\n    {\n        if (!source.destroyed)\n        {\n            // #if _DEBUG\n            warn('[Assets] A Texture managed by Assets was destroyed instead of unloaded! '\n             + 'Use Assets.unload() instead of destroying the Texture.');\n            // #endif\n\n            unload();\n        }\n    });\n\n    return texture;\n}\n", "import { DOMAdapter } from '../../../../environment/adapter';\nimport { ExtensionType } from '../../../../extensions/Extensions';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { GraphicsContext } from '../../../../scene/graphics/shared/GraphicsContext';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { type LoaderParser, LoaderParserPriority } from '../LoaderParser';\nimport { createTexture } from './utils/createTexture';\n\nimport type { TextureSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\n\n/**\n * Configuration for the [loadSVG]{@link assets.loadSVG} plugin.\n * @see assets.loadSVG\n * @memberof assets\n */\nexport interface LoadSVGConfig\n{\n    /**\n     * The crossOrigin value to use for loading the SVG as an image.\n     * @default 'anonymous'\n     */\n    crossOrigin: HTMLImageElement['crossOrigin'];\n    /**\n     * When set to `true`, loading and decoding images will happen with `new Image()`,\n     * @default false\n     */\n    parseAsGraphicsContext: boolean;\n}\n\n/**\n * Regular expression for SVG XML document.\n * @example &lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;&lt;!-- image/svg --&gt;&lt;svg\n * @readonly\n */\nconst validSVGExtension = '.svg';\nconst validSVGMIME = 'image/svg+xml';\n\n/**\n * A simple loader plugin for loading json data\n * @memberof assets\n */\nexport const loadSvg: LoaderParser<Texture | GraphicsContext, TextureSourceOptions & LoadSVGConfig, LoadSVGConfig> = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n        name: 'loadSVG',\n    },\n\n    name: 'loadSVG',\n\n    config: {\n        crossOrigin: 'anonymous',\n        parseAsGraphicsContext: false,\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validSVGMIME) || checkExtension(url, validSVGExtension);\n    },\n\n    async load(\n        url: string,\n        asset: ResolvedAsset<TextureSourceOptions & LoadSVGConfig>,\n        loader: Loader\n    ): Promise<Texture | GraphicsContext>\n    {\n        if (asset.data.parseAsGraphicsContext ?? this.config.parseAsGraphicsContext)\n        {\n            return loadAsGraphics(url);\n        }\n\n        return loadAsTexture(url, asset, loader, this.config.crossOrigin);\n    },\n\n    unload(asset: Texture | GraphicsContext): void\n    {\n        asset.destroy(true);\n    }\n\n};\n\nasync function loadAsTexture(\n    url: string,\n    asset: ResolvedAsset<TextureSourceOptions & LoadSVGConfig>,\n    loader: Loader,\n    crossOrigin: HTMLImageElement['crossOrigin']\n): Promise<Texture>\n{\n    const response = await DOMAdapter.get().fetch(url);\n\n    const blob = await response.blob();\n\n    const blobUrl = URL.createObjectURL(blob);\n\n    const image = new Image();\n\n    image.src = blobUrl;\n    image.crossOrigin = crossOrigin;\n    await image.decode();\n\n    URL.revokeObjectURL(blobUrl);\n\n    // convert to canvas...\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n\n    const resolution = asset.data?.resolution || getResolutionOfUrl(url);\n\n    const width = asset.data?.width ?? image.width;\n    const height = asset.data?.height ?? image.height;\n\n    canvas.width = width * resolution;\n    canvas.height = height * resolution;\n\n    context.drawImage(image, 0, 0, width * resolution, height * resolution);\n\n    const { parseAsGraphicsContext: _p, ...rest } = asset.data;\n    const base = new ImageSource({\n        resource: canvas,\n        alphaMode: 'premultiply-alpha-on-upload',\n        resolution,\n        ...rest,\n    });\n\n    return createTexture(base, loader, url);\n}\n\nasync function loadAsGraphics(url: string): Promise<GraphicsContext>\n{\n    const response = await DOMAdapter.get().fetch(url);\n    const svgSource = await response.text();\n\n    const context = new GraphicsContext();\n\n    context.svg(svgSource);\n\n    return context;\n}\n", "const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    const WHITE_PNG = \\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=\\\";\\n    async function checkImageBitmap() {\\n      try {\\n        if (typeof createImageBitmap !== \\\"function\\\")\\n          return false;\\n        const response = await fetch(WHITE_PNG);\\n        const imageBlob = await response.blob();\\n        const imageBitmap = await createImageBitmap(imageBlob);\\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\\n      } catch (_e) {\\n        return false;\\n      }\\n    }\\n    void checkImageBitmap().then((result) => {\\n      self.postMessage(result);\\n    });\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=checkImageBitmap.worker.mjs.map\n", "const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    async function loadImageBitmap(url, alphaMode) {\\n      const response = await fetch(url);\\n      if (!response.ok) {\\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\\n      }\\n      const imageBlob = await response.blob();\\n      return alphaMode === \\\"premultiplied-alpha\\\" ? createImageBitmap(imageBlob, { premultiplyAlpha: \\\"none\\\" }) : createImageBitmap(imageBlob);\\n    }\\n    self.onmessage = async (event) => {\\n      try {\\n        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);\\n        self.postMessage({\\n          data: imageBitmap,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        }, [imageBitmap]);\\n      } catch (e) {\\n        self.postMessage({\\n          error: e,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        });\\n      }\\n    };\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=loadImageBitmap.worker.mjs.map\n", "import CheckImageBitmapWorker from 'worker:./checkImageBitmap.worker.ts';\nimport LoadImageBitmapWorker from 'worker:./loadImageBitmap.worker.ts';\n\nimport type { TextureSourceOptions } from '../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { ResolvedAsset } from '../../types';\n\nlet UUID = 0;\nlet MAX_WORKERS: number;\n\ntype LoadImageBitmapResult = {\n    data?: ImageBitmap,\n    error?: Error,\n    uuid: number,\n    id: string,\n};\n\nclass WorkerManagerClass\n{\n    public worker: Worker;\n    private _resolveHash: {\n        [key: string]: {\n            resolve: (...param: any[]) => void;\n            reject: (...param: any[]) => void;\n        }\n    };\n    private readonly _workerPool: Worker[];\n    private readonly _queue: {\n        id: string;\n        arguments: any[];\n        resolve: (...param: any[]) => void;\n        reject: (...param: any[]) => void;\n    }[];\n    private _initialized = false;\n    private _createdWorkers = 0;\n    private _isImageBitmapSupported?: Promise<boolean>;\n\n    constructor()\n    {\n        this._workerPool = [];\n        this._queue = [];\n\n        this._resolveHash = {};\n    }\n\n    public isImageBitmapSupported(): Promise<boolean>\n    {\n        if (this._isImageBitmapSupported !== undefined) return this._isImageBitmapSupported;\n\n        this._isImageBitmapSupported = new Promise((resolve) =>\n        {\n            const { worker } = new CheckImageBitmapWorker();\n\n            worker.addEventListener('message', (event: MessageEvent<boolean>) =>\n            {\n                worker.terminate();\n                CheckImageBitmapWorker.revokeObjectURL();\n                resolve(event.data);\n            });\n        });\n\n        return this._isImageBitmapSupported;\n    }\n\n    public loadImageBitmap(src: string, asset?: ResolvedAsset<TextureSourceOptions<any>>): Promise<ImageBitmap>\n    {\n        return this._run('loadImageBitmap', [src, asset?.data?.alphaMode]) as Promise<ImageBitmap>;\n    }\n\n    private async _initWorkers()\n    {\n        if (this._initialized) return;\n\n        this._initialized = true;\n    }\n\n    private _getWorker(): Worker\n    {\n        if (MAX_WORKERS === undefined)\n        {\n            MAX_WORKERS = navigator.hardwareConcurrency || 4;\n        }\n        let worker = this._workerPool.pop();\n\n        if (!worker && this._createdWorkers < MAX_WORKERS)\n        {\n            // only create as many as MAX_WORKERS allows..\n            this._createdWorkers++;\n            worker = new LoadImageBitmapWorker().worker;\n\n            worker.addEventListener('message', (event: MessageEvent) =>\n            {\n                this._complete(event.data);\n\n                this._returnWorker(event.target as Worker);\n                this._next();\n            });\n        }\n\n        return worker;\n    }\n\n    private _returnWorker(worker: Worker)\n    {\n        this._workerPool.push(worker);\n    }\n\n    private _complete(data: LoadImageBitmapResult): void\n    {\n        if (data.error !== undefined)\n        {\n            this._resolveHash[data.uuid].reject(data.error);\n        }\n        else\n        {\n            this._resolveHash[data.uuid].resolve(data.data);\n        }\n\n        this._resolveHash[data.uuid] = null;\n    }\n\n    private async _run(id: string, args: any[]): Promise<any>\n    {\n        await this._initWorkers();\n        // push into the queue...\n\n        const promise = new Promise((resolve, reject) =>\n        {\n            this._queue.push({ id, arguments: args, resolve, reject });\n        });\n\n        this._next();\n\n        return promise;\n    }\n\n    private _next(): void\n    {\n        // nothing to do\n        if (!this._queue.length) return;\n\n        const worker = this._getWorker();\n\n        // no workers available...\n        if (!worker)\n        {\n            return;\n        }\n\n        const toDo = this._queue.pop();\n\n        const id = toDo.id;\n\n        this._resolveHash[UUID] = { resolve: toDo.resolve, reject: toDo.reject };\n\n        worker.postMessage({\n            data: toDo.arguments,\n            uuid: UUID++,\n            id,\n        });\n    }\n}\n\nconst WorkerManager = new WorkerManagerClass();\n\nexport {\n    WorkerManager,\n};\n", "import { DOMAdapter } from '../../../../environment/adapter';\nimport { ExtensionType } from '../../../../extensions/Extensions';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { WorkerManager } from '../../workers/WorkerManager';\nimport { LoaderParserPriority } from '../LoaderParser';\nimport { createTexture } from './utils/createTexture';\n\nimport type { TextureSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\nimport type { LoaderParser } from '../LoaderParser';\n\nconst validImageExtensions = ['.jpeg', '.jpg', '.png', '.webp', '.avif'];\nconst validImageMIMEs = [\n    'image/jpeg',\n    'image/png',\n    'image/webp',\n    'image/avif',\n];\n\n/**\n * Configuration for the [loadTextures]{@link assets.loadTextures} plugin.\n * @see assets.loadTextures\n * @memberof assets\n */\nexport interface LoadTextureConfig\n{\n    /**\n     * When set to `true`, loading and decoding images will happen with Worker thread,\n     * if available on the browser. This is much more performant as network requests\n     * and decoding can be expensive on the CPU. However, not all environments support\n     * Workers, in some cases it can be helpful to disable by setting to `false`.\n     * @default true\n     */\n    preferWorkers: boolean;\n    /**\n     * When set to `true`, loading and decoding images will happen with `createImageBitmap`,\n     * otherwise it will use `new Image()`.\n     * @default true\n     */\n    preferCreateImageBitmap: boolean;\n    /**\n     * The crossOrigin value to use for images when `preferCreateImageBitmap` is `false`.\n     * @default 'anonymous'\n     */\n    crossOrigin: HTMLImageElement['crossOrigin'];\n}\n\n/**\n * Returns a promise that resolves an ImageBitmaps.\n * This function is designed to be used by a worker.\n * Part of WorkerManager!\n * @param url - The image to load an image bitmap for\n * @ignore\n */\nexport async function loadImageBitmap(url: string, asset?: ResolvedAsset<TextureSourceOptions<any>>): Promise<ImageBitmap>\n{\n    const response = await DOMAdapter.get().fetch(url);\n\n    if (!response.ok)\n    {\n        throw new Error(`[loadImageBitmap] Failed to fetch ${url}: `\n            + `${response.status} ${response.statusText}`);\n    }\n\n    const imageBlob = await response.blob();\n\n    return asset?.data?.alphaMode === 'premultiplied-alpha'\n        ? createImageBitmap(imageBlob, { premultiplyAlpha: 'none' })\n        : createImageBitmap(imageBlob);\n}\n\n/**\n * A simple plugin to load our textures!\n * This makes use of imageBitmaps where available.\n * We load the `ImageBitmap` on a different thread using workers if possible.\n * We can then use the `ImageBitmap` as a source for a Pixi texture\n *\n * You can customize the behavior of this loader by setting the `config` property.\n * Which can be found [here]{@link assets.LoadTextureConfig}\n * ```js\n * // Set the config\n * import { loadTextures } from 'pixi.js';\n *\n * loadTextures.config = {\n *    // If true we will use a worker to load the ImageBitmap\n *    preferWorkers: true,\n *    // If false we will use new Image() instead of createImageBitmap,\n *    // we'll also disable the use of workers as it requires createImageBitmap\n *    preferCreateImageBitmap: true,\n *    crossOrigin: 'anonymous',\n * };\n * ```\n * @memberof assets\n */\nexport const loadTextures: LoaderParser<Texture, TextureSourceOptions, LoadTextureConfig> = {\n\n    name: 'loadTextures',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadTextures',\n    },\n\n    config: {\n        preferWorkers: true,\n        preferCreateImageBitmap: true,\n        crossOrigin: 'anonymous',\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validImageMIMEs) || checkExtension(url, validImageExtensions);\n    },\n\n    async load(url: string, asset: ResolvedAsset<TextureSourceOptions>, loader: Loader): Promise<Texture>\n    {\n        let src: any = null;\n\n        if (globalThis.createImageBitmap && this.config.preferCreateImageBitmap)\n        {\n            if (this.config.preferWorkers && await WorkerManager.isImageBitmapSupported())\n            {\n                src = await WorkerManager.loadImageBitmap(url, asset);\n            }\n            else\n            {\n                src = await loadImageBitmap(url, asset);\n            }\n        }\n        else\n        {\n            src = await new Promise((resolve) =>\n            {\n                src = new Image();\n                src.crossOrigin = this.config.crossOrigin;\n\n                src.src = url;\n                if (src.complete)\n                {\n                    resolve(src);\n                }\n                else\n                {\n                    src.onload = (): void =>\n                    {\n                        resolve(src);\n                    };\n                }\n            });\n        }\n\n        const base = new ImageSource({\n            resource: src,\n            alphaMode: 'premultiply-alpha-on-upload',\n            resolution: asset.data?.resolution || getResolutionOfUrl(url),\n            ...asset.data,\n        });\n\n        return createTexture(base, loader, url);\n    },\n\n    unload(texture: Texture): void\n    {\n        texture.destroy(true);\n    }\n};\n", "import { ExtensionType } from '../../../../extensions/Extensions';\nimport { VideoSource } from '../../../../rendering/renderers/shared/texture/sources/VideoSource';\nimport { detectVideoAlphaMode } from '../../../../utils/browser/detectVideoAlphaMode';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { createTexture } from './utils/createTexture';\n\nimport type { VideoSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/VideoSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\nimport type { LoaderParser } from '../LoaderParser';\n\nconst validVideoExtensions = ['.mp4', '.m4v', '.webm', '.ogg', '.ogv', '.h264', '.avi', '.mov'];\nconst validVideoMIMEs = validVideoExtensions.map((ext) => `video/${ext.substring(1)}`);\n\n/**\n * Set cross origin based detecting the url and the crossorigin\n * @param element - Element to apply crossOrigin\n * @param url - URL to check\n * @param crossorigin - Cross origin value to use\n * @memberof assets\n */\nexport function crossOrigin(element: HTMLImageElement | HTMLVideoElement, url: string, crossorigin?: boolean | string): void\n{\n    if (crossorigin === undefined && !url.startsWith('data:'))\n    {\n        element.crossOrigin = determineCrossOrigin(url);\n    }\n    else if (crossorigin !== false)\n    {\n        element.crossOrigin = typeof crossorigin === 'string' ? crossorigin : 'anonymous';\n    }\n}\n\n/**\n * Preload a video element\n * @param element - Video element to preload\n */\nexport function preloadVideo(element: HTMLVideoElement): Promise<void>\n{\n    return new Promise((resolve, reject) =>\n    {\n        element.addEventListener('canplaythrough', loaded);\n        element.addEventListener('error', error);\n\n        element.load();\n\n        function loaded(): void\n        {\n            cleanup();\n            resolve();\n        }\n\n        function error(err: ErrorEvent): void\n        {\n            cleanup();\n            reject(err);\n        }\n\n        function cleanup(): void\n        {\n            element.removeEventListener('canplaythrough', loaded);\n            element.removeEventListener('error', error);\n        }\n    });\n}\n\n/**\n * Sets the `crossOrigin` property for this resource based on if the url\n * for this resource is cross-origin. If crossOrigin was manually set, this\n * function does nothing.\n * Nipped from the resource loader!\n * @ignore\n * @param url - The url to test.\n * @param {object} [loc=window.location] - The location object to test against.\n * @returns The crossOrigin value to use (or empty string for none).\n * @memberof assets\n */\nexport function determineCrossOrigin(url: string, loc: Location = globalThis.location): string\n{\n    // data: and javascript: urls are considered same-origin\n    if (url.startsWith('data:'))\n    {\n        return '';\n    }\n\n    // default is window.location\n    loc ||= globalThis.location;\n\n    const parsedUrl = new URL(url, document.baseURI);\n\n    // if cross origin\n    if (parsedUrl.hostname !== loc.hostname || parsedUrl.port !== loc.port || parsedUrl.protocol !== loc.protocol)\n    {\n        return 'anonymous';\n    }\n\n    return '';\n}\n\n/**\n * A simple plugin to load video textures.\n *\n * You can pass VideoSource options to the loader via the .data property of the asset descriptor\n * when using Asset.load().\n * ```js\n * // Set the data\n * const texture = await Assets.load({\n *     src: './assets/city.mp4',\n *     data: {\n *         preload: true,\n *         autoPlay: true,\n *     },\n * });\n * ```\n * @memberof assets\n */\nexport const loadVideoTextures = {\n\n    name: 'loadVideo',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        name: 'loadVideo',\n    },\n\n    test(url: string): boolean\n    {\n        const isValidDataUrl = checkDataUrl(url, validVideoMIMEs);\n        const isValidExtension = checkExtension(url, validVideoExtensions);\n\n        return isValidDataUrl || isValidExtension;\n    },\n\n    async load(url: string, asset: ResolvedAsset<VideoSourceOptions>, loader: Loader): Promise<Texture>\n    {\n        // --- Merge default and provided options ---\n        const options: VideoSourceOptions = {\n            ...VideoSource.defaultOptions,\n            resolution: asset.data?.resolution || getResolutionOfUrl(url),\n            alphaMode: asset.data?.alphaMode || await detectVideoAlphaMode(),\n            ...asset.data,\n        };\n\n        // --- Create and configure HTMLVideoElement ---\n        const videoElement = document.createElement('video');\n\n        // Set attributes based on options\n        const attributeMap = {\n            preload: options.autoLoad !== false ? 'auto' : undefined,\n            'webkit-playsinline': options.playsinline !== false ? '' : undefined,\n            playsinline: options.playsinline !== false ? '' : undefined,\n            muted: options.muted === true ? '' : undefined,\n            loop: options.loop === true ? '' : undefined,\n            autoplay: options.autoPlay !== false ? '' : undefined\n        };\n\n        Object.keys(attributeMap).forEach((key) =>\n        {\n            const value = attributeMap[key as keyof typeof attributeMap];\n\n            if (value !== undefined) videoElement.setAttribute(key, value);\n        });\n\n        if (options.muted === true)\n        {\n            videoElement.muted = true;\n        }\n\n        crossOrigin(videoElement, url, options.crossorigin); // Assume crossOrigin is globally available\n\n        // --- Set up source and MIME type ---\n        const sourceElement = document.createElement('source');\n\n        // Determine MIME type\n        let mime: string | undefined;\n\n        if (url.startsWith('data:'))\n        {\n            mime = url.slice(5, url.indexOf(';'));\n        }\n        else if (!url.startsWith('blob:'))\n        {\n            const ext = url.split('?')[0].slice(url.lastIndexOf('.') + 1).toLowerCase();\n\n            mime = VideoSource.MIME_TYPES[ext] || `video/${ext}`;\n        }\n\n        sourceElement.src = url;\n\n        if (mime)\n        {\n            sourceElement.type = mime;\n        }\n\n        // this promise will make sure that video is ready to play - as in we have a valid width, height and it can be\n        // uploaded to the GPU. Our textures are kind of dumb now, and don't want to handle resizing right now.\n        return new Promise((resolve) =>\n        {\n            const onCanPlay = async () =>\n            {\n                const base = new VideoSource({ ...options, resource: videoElement });\n\n                videoElement.removeEventListener('canplay', onCanPlay);\n\n                if (asset.data.preload)\n                {\n                    await preloadVideo(videoElement);\n                }\n\n                resolve(createTexture(base, loader, url));\n            };\n\n            videoElement.addEventListener('canplay', onCanPlay);\n            videoElement.appendChild(sourceElement);\n        });\n    },\n\n    unload(texture: Texture): void\n    {\n        texture.destroy(true);\n    }\n} satisfies LoaderParser<Texture, VideoSourceOptions>;\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { loadTextures } from '../../loader/parsers/textures/loadTextures';\nimport { Resolver } from '../Resolver';\n\nimport type { ResolveURLParser } from '../types';\n\n/**\n * A parser that will resolve a texture url\n * @memberof assets\n */\nexport const resolveTextureUrl = {\n    extension: {\n        type: ExtensionType.ResolveParser,\n        name: 'resolveTexture',\n    },\n    test: loadTextures.test,\n    parse: (value: string) =>\n        ({\n            resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n            format: value.split('.').pop(),\n            src: value,\n        }),\n} satisfies ResolveURLParser;\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { Resolver } from '../Resolver';\nimport { resolveTextureUrl } from './resolveTextureUrl';\n\nimport type { ResolveURLParser } from '../types';\n\n/**\n * A parser that will resolve a json urls resolution for spritesheets\n * e.g. `assets/spritesheet@1x.json`\n * @memberof assets\n */\nexport const resolveJsonUrl = {\n    extension: {\n        type: ExtensionType.ResolveParser,\n        priority: -2,\n        name: 'resolveJson',\n    },\n    test: (value: string): boolean =>\n        Resolver.RETINA_PREFIX.test(value) && value.endsWith('.json'),\n    parse: resolveTextureUrl.parse,\n} satisfies ResolveURLParser;\n", "/* eslint-disable max-len */\nimport { extensions, ExtensionType } from '../extensions/Extensions';\nimport { bitmapFontCachePlugin, loadBitmapFont } from '../scene/text-bitmap/asset/loadBitmapFont';\nimport { warn } from '../utils/logging/warn';\nimport { BackgroundLoader } from './BackgroundLoader';\nimport { Cache } from './cache/Cache';\nimport { cacheTextureArray } from './cache/parsers/cacheTextureArray';\nimport { detectAvif } from './detections/parsers/detectAvif';\nimport { detectDefaults } from './detections/parsers/detectDefaults';\nimport { detectMp4 } from './detections/parsers/detectMp4';\nimport { detectOgv } from './detections/parsers/detectOgv';\nimport { detectWebm } from './detections/parsers/detectWebm';\nimport { detectWebp } from './detections/parsers/detectWebp';\nimport { Loader } from './loader/Loader';\nimport { loadJson } from './loader/parsers/loadJson';\nimport { loadTxt } from './loader/parsers/loadTxt';\nimport { loadWebFont } from './loader/parsers/loadWebFont';\nimport { loadSvg } from './loader/parsers/textures/loadSVG';\nimport { type LoadTextureConfig, loadTextures } from './loader/parsers/textures/loadTextures';\nimport { loadVideoTextures } from './loader/parsers/textures/loadVideoTextures';\nimport { resolveJsonUrl } from './resolver/parsers/resolveJsonUrl';\nimport { resolveTextureUrl } from './resolver/parsers/resolveTextureUrl';\nimport { Resolver } from './resolver/Resolver';\nimport { convertToList } from './utils/convertToList';\nimport { isSingleItem } from './utils/isSingleItem';\n\nimport type { AssetExtension } from './AssetExtension';\nimport type { FormatDetectionParser } from './detections/types';\nimport type { LoadSVGConfig } from './loader/parsers/textures/loadSVG';\nimport type { BundleIdentifierOptions } from './resolver/Resolver';\nimport type { ArrayOr, AssetsBundle, AssetsManifest, ResolvedAsset, UnresolvedAsset } from './types';\n\n/**\n * Callback for when progress on asset loading is made.\n * The function is passed a single parameter, `progress`, which represents the percentage (0.0 - 1.0)\n * of the assets loaded.\n * @memberof assets\n * @callback ProgressCallback\n * @param {number} progress - The percentage (0.0 - 1.0) of the assets loaded.\n * @returns {void}\n * @example\n * (progress) => console.log(progress * 100 + '%')\n */\nexport type ProgressCallback = (progress: number) => void;\n\n/**\n * Extensible preferences that can be used, for instance, when configuring loaders.\n * @since 7.2.0\n * @memberof assets\n */\nexport interface AssetsPreferences extends LoadTextureConfig, LoadSVGConfig, PixiMixins.AssetsPreferences {}\n\n/**\n * Initialization options object for the Assets Class.\n * @memberof assets\n */\nexport interface AssetInitOptions\n{\n    // basic...\n    /** a base path for any assets loaded */\n    basePath?: string;\n\n    /** a default URL parameter string to append to all assets loaded */\n    defaultSearchParams?: string | Record<string, any>;\n\n    /**\n     * a manifest to tell the asset loader upfront what all your assets are\n     * this can be the manifest object itself, or a URL to the manifest.\n     */\n    manifest?: string | AssetsManifest;\n    /**\n     * optional preferences for which textures preferences you have when resolving assets\n     * for example you might set the resolution to 0.5 if the user is on a rubbish old phone\n     * or you might set the resolution to 2 if the user is on a retina display\n     */\n    texturePreference?: {\n        /** the resolution order you prefer, can be an array (priority order - first is preferred) or a single resolutions  */\n        resolution?: number | number[];\n        /**\n         * the formats you prefer, by default this will be:\n         * ['avif', 'webp', 'png', 'jpg', 'jpeg', 'webm', 'mp4', 'm4v', 'ogv']\n         */\n        format?: ArrayOr<string>;\n    };\n\n    /**\n     * If true, don't attempt to detect whether browser has preferred formats available.\n     * May result in increased performance as it skips detection step.\n     */\n    skipDetections?: boolean;\n\n    /** advanced - override how bundlesIds are generated */\n    bundleIdentifier?: BundleIdentifierOptions;\n\n    /** Optional loader preferences */\n    preferences?: Partial<AssetsPreferences>;\n}\n\n/**\n * A one stop shop for all Pixi resource management!\n * Super modern and easy to use, with enough flexibility to customize and do what you need!\n * @namespace assets\n *\n * Use the singleton class [Assets]{@link assets.Assets} to easily load and manage all your assets.\n *\n * ```typescript\n * import { Assets, Texture } from 'pixi.js';\n *\n * const bunnyTexture = await Assets.load<Texture>('bunny.png');\n * const sprite = new Sprite(bunnyTexture);\n * ```\n *\n * Check out the sections below for more information on how to deal with assets.\n *\n * <details id=\"assets-loading\">\n *\n * <summary>Asset Loading</summary>\n *\n * Do not be afraid to load things multiple times - under the hood, it will **NEVER** load anything more than once.\n *\n * *For example:*\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * promise1 = Assets.load('bunny.png')\n * promise2 = Assets.load('bunny.png')\n *\n * // promise1 === promise2\n * ```\n *\n * Here both promises will be the same. Once resolved... Forever resolved! It makes for really easy resource management!\n *\n * Out of the box Pixi supports the following files:\n * - Textures (**_avif_**, **_webp_**, **_png_**, **_jpg_**, **_gif_**, **_svg_**) via {@link assets.loadTextures}, {@link assets.loadSvg}\n * - Video Textures (**_mp4_**, **_m4v_**, **_webm_**, **_ogg_**, **_ogv_**, **_h264_**, **_avi_**, **_mov_**) via {@link assets.loadVideoTextures}\n * - Sprite sheets (**_json_**) via {@link assets.spritesheetAsset}\n * - Bitmap fonts (**_xml_**, **_fnt_**, **_txt_**) via {@link assets.loadBitmapFont}\n * - Web fonts (**_ttf_**, **_woff_**, **_woff2_**) via {@link assets.loadWebFont}\n * - JSON files (**_json_**) via {@link assets.loadJson}\n * - Text Files (**_txt_**) via {@link assets.loadTxt}\n * <br/>\n * More types can be added fairly easily by creating additional {@link assets.LoaderParser LoaderParsers}.\n * </details>\n *\n * <details id=\"textures\">\n *\n * <summary>Textures</summary>\n *\n * - Textures are loaded as ImageBitmap on a worker thread where possible. Leading to much less janky load + parse times.\n * - By default, we will prefer to load AVIF and WebP image files if you specify them.\n * But if the browser doesn't support AVIF or WebP we will fall back to png and jpg.\n * - Textures can also be accessed via `Texture.from()` (see {@link core.from|Texture.from})\n * and now use this asset manager under the hood!\n * - Don't worry if you set preferences for textures that don't exist\n * (for example you prefer 2x resolutions images but only 1x is available for that texture,\n * the Assets manager will pick that up as a fallback automatically)\n *\n * #### Sprite sheets\n * - It's hard to know what resolution a sprite sheet is without loading it first, to address this\n * there is a naming convention we have added that will let Pixi understand the image format and resolution\n * of the spritesheet via its file name: `my-spritesheet{resolution}.{imageFormat}.json`\n * <br><br>For example:\n *   - `my-spritesheet@2x.webp.json`* // 2x resolution, WebP sprite sheet*\n *   - `my-spritesheet@0.5x.png.json`* // 0.5x resolution, png sprite sheet*\n * - This is optional! You can just load a sprite sheet as normal.\n * This is only useful if you have a bunch of different res / formatted spritesheets.\n * </details>\n *\n * <details id=\"fonts\">\n *\n * <summary>Fonts</summary>\n *\n * Web fonts will be loaded with all weights.\n * It is possible to load only specific weights by doing the following:\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * // Load specific weights..\n * await Assets.load({\n *     data: {\n *         weights: ['normal'], // Only loads the weight\n *     },\n *     src: `outfit.woff2`,\n * });\n *\n * // Load everything...\n * await Assets.load(`outfit.woff2`);\n * ```\n * </details>\n *\n * <details id=\"background-loading\">\n *\n * <summary>Background Loading</summary>\n *\n * Background loading will load stuff for you passively behind the scenes. To minimize jank,\n * it will only load one asset at a time. As soon as a developer calls `Assets.load(...)` the\n * background loader is paused and requested assets are loaded as a priority.\n * Don't worry if something is in there that's already loaded, it will just get skipped!\n *\n * You still need to call `Assets.load(...)` to get an asset that has been loaded in the background.\n * It's just that this promise will resolve instantly if the asset\n * has already been loaded.\n * </details>\n *\n * <details id=\"manifests-and-bundles\">\n *\n * <summary>Manifest and Bundles</summary>\n *\n * - {@link assets.AssetsManifest Manifest} is a descriptor that contains a list of all assets and their properties.\n * - {@link assets.AssetsBundle Bundles} are a way to group assets together.\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * // Manifest Example\n * const manifest = {\n *     bundles: [\n *         {\n *             name: 'load-screen',\n *             assets: [\n *                 {\n *                     alias: 'background',\n *                     src: 'sunset.png',\n *                 },\n *                 {\n *                     alias: 'bar',\n *                     src: 'load-bar.{png,webp}',\n *                 },\n *             ],\n *         },\n *         {\n *             name: 'game-screen',\n *             assets: [\n *                 {\n *                     alias: 'character',\n *                     src: 'robot.png',\n *                 },\n *                 {\n *                     alias: 'enemy',\n *                     src: 'bad-guy.png',\n *                 },\n *             ],\n *         },\n *     ]\n * };\n *\n * await Assets.init({ manifest });\n *\n * // Load a bundle...\n * loadScreenAssets = await Assets.loadBundle('load-screen');\n * // Load another bundle...\n * gameScreenAssets = await Assets.loadBundle('game-screen');\n * ```\n * </details>\n */\n\n/**\n * The global Assets class, it's a singleton so you don't need to instantiate it.\n *\n * **The `Assets` class has four main responsibilities:**\n * 1. Allows users to map URLs to keys and resolve them according to the user's browser capabilities\n * 2. Loads the resources and transforms them into assets that developers understand.\n * 3. Caches the assets and provides a way to access them.\n * 4. Allow developers to unload assets and clear the cache.\n *\n *\n * **It also has a few advanced features:**\n * 1. Allows developers to provide a {@link assets.Manifest} upfront of all assets and help manage\n * them via {@link assets.AssetsBundles Bundles}.\n * 2. Allows users to background load assets. Shortening (or eliminating) load times and improving UX. With this feature,\n * in-game loading bars can be a thing of the past!\n * @example\n * import { Assets } from 'pixi.js';\n *\n * const bunny = await Assets.load('bunny.png');\n * @memberof assets\n * @class Assets\n */\nexport class AssetsClass\n{\n    /** the resolver to map various urls */\n    public resolver: Resolver;\n    /** The loader, loads stuff! */\n    public loader: Loader;\n    /**\n     * The global cache of all assets within PixiJS\n     * @type {assets.Cache}\n     */\n    public cache: typeof Cache;\n\n    /** takes care of loading assets in the background */\n    private readonly _backgroundLoader: BackgroundLoader;\n\n    private readonly _detections: FormatDetectionParser[] = [];\n\n    private _initialized = false;\n\n    constructor()\n    {\n        this.resolver = new Resolver();\n        this.loader = new Loader();\n        this.cache = Cache;\n\n        this._backgroundLoader = new BackgroundLoader(this.loader);\n        this._backgroundLoader.active = true;\n\n        this.reset();\n    }\n\n    /**\n     * Best practice is to call this function before any loading commences\n     * Initiating is the best time to add any customization to the way things are loaded.\n     *\n     * you do not need to call this for the Assets class to work, only if you want to set any initial properties\n     * @param options - options to initialize the Assets manager with\n     */\n    public async init(options: AssetInitOptions = {}): Promise<void>\n    {\n        if (this._initialized)\n        {\n            // #if _DEBUG\n            warn('[Assets]AssetManager already initialized, did you load before calling this Assets.init()?');\n            // #endif\n\n            return;\n        }\n\n        this._initialized = true;\n\n        if (options.defaultSearchParams)\n        {\n            this.resolver.setDefaultSearchParams(options.defaultSearchParams);\n        }\n\n        if (options.basePath)\n        {\n            this.resolver.basePath = options.basePath;\n        }\n\n        if (options.bundleIdentifier)\n        {\n            this.resolver.setBundleIdentifier(options.bundleIdentifier);\n        }\n\n        if (options.manifest)\n        {\n            let manifest = options.manifest;\n\n            if (typeof manifest === 'string')\n            {\n                manifest = await this.load<AssetsManifest>(manifest);\n            }\n\n            this.resolver.addManifest(manifest);\n        }\n\n        const resolutionPref = options.texturePreference?.resolution ?? 1;\n        const resolution = (typeof resolutionPref === 'number') ? [resolutionPref] : resolutionPref;\n\n        const formats = await this._detectFormats({\n            preferredFormats: options.texturePreference?.format,\n            skipDetections: options.skipDetections,\n            detections: this._detections\n        });\n\n        this.resolver.prefer({\n            params: {\n                format: formats,\n                resolution,\n            },\n        });\n\n        if (options.preferences)\n        {\n            this.setPreferences(options.preferences);\n        }\n    }\n\n    /**\n     * Allows you to specify how to resolve any assets load requests.\n     * There are a few ways to add things here as shown below:\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Simple\n     * Assets.add({alias: 'bunnyBooBoo', src: 'bunny.png'});\n     * const bunny = await Assets.load('bunnyBooBoo');\n     *\n     * // Multiple keys:\n     * Assets.add({alias: ['burger', 'chicken'], src: 'bunny.png'});\n     *\n     * const bunny = await Assets.load('burger');\n     * const bunny2 = await Assets.load('chicken');\n     *\n     * // passing options to to the object\n     * Assets.add({\n     *     alias: 'bunnyBooBooSmooth',\n     *     src: 'bunny.{png,webp}',\n     *     data: { scaleMode: SCALE_MODES.NEAREST }, // Base texture options\n     * });\n     *\n     * // Multiple assets\n     *\n     * // The following all do the same thing:\n     *\n     * Assets.add({alias: 'bunnyBooBoo', src: 'bunny.{png,webp}'});\n     *\n     * Assets.add({\n     *     alias: 'bunnyBooBoo',\n     *     src: [\n     *         'bunny.png',\n     *         'bunny.webp',\n     *    ],\n     * });\n     *\n     * const bunny = await Assets.load('bunnyBooBoo'); // Will try to load WebP if available\n     * @param assets - the unresolved assets to add to the resolver\n     */\n    public add(assets: (ArrayOr<UnresolvedAsset>)): void\n    {\n        this.resolver.add(assets);\n    }\n\n    /**\n     * Loads your assets! You pass in a key or URL and it will return a promise that\n     * resolves to the loaded asset. If multiple assets a requested, it will return a hash of assets.\n     *\n     * Don't worry about loading things multiple times, behind the scenes assets are only ever loaded\n     * once and the same promise reused behind the scenes so you can safely call this function multiple\n     * times with the same key and it will always return the same asset.\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Load a URL:\n     * const myImageTexture = await Assets.load('http://some.url.com/image.png'); // => returns a texture\n     *\n     * Assets.add('thumper', 'bunny.png');\n     * Assets.add('chicko', 'chicken.png');\n     *\n     * // Load multiple assets:\n     * const textures = await Assets.load(['thumper', 'chicko']); // => {thumper: Texture, chicko: Texture}\n     * @param urls - the urls to load\n     * @param onProgress - optional function that is called when progress on asset loading is made.\n     * The function is passed a single parameter, `progress`, which represents the percentage\n     * (0.0 - 1.0) of the assets loaded.\n     * @returns - the assets that were loaded, either a single asset or a hash of assets\n     */\n    public async load<T = any>(\n        urls: string | UnresolvedAsset,\n        onProgress?: ProgressCallback,\n    ): Promise<T>;\n    public async load<T = any>(\n        urls: string[] | UnresolvedAsset[],\n        onProgress?: ProgressCallback,\n    ): Promise<Record<string, T>>;\n    public async load<T = any>(\n        urls: ArrayOr<string> | ArrayOr<UnresolvedAsset>,\n        onProgress?: ProgressCallback\n    ): Promise<T | Record<string, T>>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        const singleAsset = isSingleItem(urls);\n\n        const urlArray: string[] = convertToList<UnresolvedAsset | string>(urls)\n            .map((url) =>\n            {\n                if (typeof url !== 'string')\n                {\n                    const aliases = this.resolver.getAlias(url);\n\n                    if (aliases.some((alias) => !this.resolver.hasKey(alias)))\n                    {\n                        this.add(url);\n                    }\n\n                    return Array.isArray(aliases) ? aliases[0] : aliases;\n                }\n\n                // if it hasn't been added, add it now\n                if (!this.resolver.hasKey(url)) this.add({ alias: url, src: url });\n\n                return url;\n            }) as string[];\n\n        // check cache first...\n        const resolveResults = this.resolver.resolve(urlArray);\n\n        // remap to the keys used..\n        const out: Record<string, T> = await this._mapLoadToResolve<T>(resolveResults, onProgress);\n\n        return singleAsset ? out[urlArray[0] as string] : out;\n    }\n\n    /**\n     * This adds a bundle of assets in one go so that you can load them as a group.\n     * For example you could add a bundle for each screen in you pixi app\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * Assets.addBundle('animals', [\n     *  { alias: 'bunny', src: 'bunny.png' },\n     *  { alias: 'chicken', src: 'chicken.png' },\n     *  { alias: 'thumper', src: 'thumper.png' },\n     * ]);\n     * // or\n     * Assets.addBundle('animals', {\n     *     bunny: 'bunny.png',\n     *     chicken: 'chicken.png',\n     *     thumper: 'thumper.png',\n     * });\n     *\n     * const assets = await Assets.loadBundle('animals');\n     * @param bundleId - the id of the bundle to add\n     * @param assets - a record of the asset or assets that will be chosen from when loading via the specified key\n     */\n    public addBundle(bundleId: string, assets: AssetsBundle['assets']): void\n    {\n        this.resolver.addBundle(bundleId, assets);\n    }\n\n    /**\n     * Bundles are a way to load multiple assets at once.\n     * If a manifest has been provided to the init function then you can load a bundle, or bundles.\n     * you can also add bundles via `addBundle`\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Manifest Example\n     * const manifest = {\n     *     bundles: [\n     *         {\n     *             name: 'load-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'background',\n     *                     src: 'sunset.png',\n     *                 },\n     *                 {\n     *                     alias: 'bar',\n     *                     src: 'load-bar.{png,webp}',\n     *                 },\n     *             ],\n     *         },\n     *         {\n     *             name: 'game-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'character',\n     *                     src: 'robot.png',\n     *                 },\n     *                 {\n     *                     alias: 'enemy',\n     *                     src: 'bad-guy.png',\n     *                 },\n     *             ],\n     *         },\n     *     ]\n     * };\n     *\n     * await Assets.init({ manifest });\n     *\n     * // Load a bundle...\n     * loadScreenAssets = await Assets.loadBundle('load-screen');\n     * // Load another bundle...\n     * gameScreenAssets = await Assets.loadBundle('game-screen');\n     * @param bundleIds - the bundle id or ids to load\n     * @param onProgress - Optional function that is called when progress on asset loading is made.\n     * The function is passed a single parameter, `progress`, which represents the percentage (0.0 - 1.0)\n     * of the assets loaded. Do not use this function to detect when assets are complete and available,\n     * instead use the Promise returned by this function.\n     * @returns all the bundles assets or a hash of assets for each bundle specified\n     */\n    public async loadBundle(bundleIds: ArrayOr<string>, onProgress?: ProgressCallback): Promise<any>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        let singleAsset = false;\n\n        if (typeof bundleIds === 'string')\n        {\n            singleAsset = true;\n            bundleIds = [bundleIds];\n        }\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        const out: Record<string, Record<string, any>> = {};\n\n        const keys = Object.keys(resolveResults);\n        let count = 0;\n        let total = 0;\n        const _onProgress = () =>\n        {\n            onProgress?.(++count / total);\n        };\n        const promises = keys.map((bundleId) =>\n        {\n            const resolveResult = resolveResults[bundleId];\n\n            total += Object.keys(resolveResult).length;\n\n            return this._mapLoadToResolve(resolveResult, _onProgress)\n                .then((resolveResult) =>\n                {\n                    out[bundleId] = resolveResult;\n                });\n        });\n\n        await Promise.all(promises);\n\n        return singleAsset ? out[bundleIds[0]] : out;\n    }\n\n    /**\n     * Initiate a background load of some assets. It will passively begin to load these assets in the background.\n     * So when you actually come to loading them you will get a promise that resolves to the loaded assets immediately\n     *\n     * An example of this might be that you would background load game assets after your initial load.\n     * then when you got to actually load your game screen assets when a player goes to the game - the loading\n     * would already have stared or may even be complete, saving you having to show an interim load bar.\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * Assets.backgroundLoad('bunny.png');\n     *\n     * // later on in your app...\n     * await Assets.loadBundle('bunny.png'); // Will resolve quicker as loading may have completed!\n     * @param urls - the url / urls you want to background load\n     */\n    public async backgroundLoad(urls: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        if (typeof urls === 'string')\n        {\n            urls = [urls];\n        }\n\n        const resolveResults = this.resolver.resolve(urls);\n\n        this._backgroundLoader.add(Object.values(resolveResults));\n    }\n\n    /**\n     * Initiate a background of a bundle, works exactly like backgroundLoad but for bundles.\n     * this can only be used if the loader has been initiated with a manifest\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * await Assets.init({\n     *     manifest: {\n     *         bundles: [\n     *             {\n     *                 name: 'load-screen',\n     *                 assets: [...],\n     *             },\n     *             ...\n     *         ],\n     *     },\n     * });\n     *\n     * Assets.backgroundLoadBundle('load-screen');\n     *\n     * // Later on in your app...\n     * await Assets.loadBundle('load-screen'); // Will resolve quicker as loading may have completed!\n     * @param bundleIds - the bundleId / bundleIds you want to background load\n     */\n    public async backgroundLoadBundle(bundleIds: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        if (typeof bundleIds === 'string')\n        {\n            bundleIds = [bundleIds];\n        }\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        Object.values(resolveResults).forEach((resolveResult) =>\n        {\n            this._backgroundLoader.add(Object.values(resolveResult));\n        });\n    }\n\n    /**\n     * Only intended for development purposes.\n     * This will wipe the resolver and caches.\n     * You will need to reinitialize the Asset\n     */\n    public reset(): void\n    {\n        this.resolver.reset();\n        this.loader.reset();\n        this.cache.reset();\n\n        this._initialized = false;\n    }\n\n    /**\n     * Instantly gets an asset already loaded from the cache. If the asset has not yet been loaded,\n     * it will return undefined. So it's on you! When in doubt just use `Assets.load` instead.\n     * (Remember, the loader will never load things more than once!)\n     * @param keys - The key or keys for the assets that you want to access\n     * @returns - The assets or hash of assets requested\n     */\n    public get<T = any>(keys: string): T;\n    public get<T = any>(keys: string[]): Record<string, T>;\n    public get<T = any>(keys: ArrayOr<string>): T | Record<string, T>\n    {\n        if (typeof keys === 'string')\n        {\n            return Cache.get(keys);\n        }\n\n        const assets: Record<string, T> = {};\n\n        for (let i = 0; i < keys.length; i++)\n        {\n            assets[i] = Cache.get(keys[i]);\n        }\n\n        return assets;\n    }\n\n    /**\n     * helper function to map resolved assets back to loaded assets\n     * @param resolveResults - the resolve results from the resolver\n     * @param onProgress - the progress callback\n     */\n    private async _mapLoadToResolve<T>(\n        resolveResults: ResolvedAsset | Record<string, ResolvedAsset>,\n        onProgress?: ProgressCallback\n    ): Promise<Record<string, T>>\n    {\n        const resolveArray = [...new Set(Object.values(resolveResults))] as ResolvedAsset[];\n\n        // pause background loader...\n        this._backgroundLoader.active = false;\n\n        const loadedAssets = await this.loader.load<T>(resolveArray, onProgress);\n\n        // resume background loader...\n        this._backgroundLoader.active = true;\n\n        // remap to the keys used..\n\n        const out: Record<string, T> = {};\n\n        resolveArray.forEach((resolveResult) =>\n        {\n            const asset = loadedAssets[resolveResult.src];\n\n            const keys = [resolveResult.src];\n\n            if (resolveResult.alias)\n            {\n                keys.push(...resolveResult.alias);\n            }\n\n            keys.forEach((key) =>\n            {\n                out[key] = asset;\n            });\n\n            Cache.set(keys, asset);\n        });\n\n        return out;\n    }\n\n    /**\n     * Unload an asset or assets. As the Assets class is responsible for creating the assets via the `load` function\n     * this will make sure to destroy any assets and release them from memory.\n     * Once unloaded, you will need to load the asset again.\n     *\n     * Use this to help manage assets if you find that you have a large app and you want to free up memory.\n     *\n     * - it's up to you as the developer to make sure that textures are not actively being used when you unload them,\n     * Pixi won't break but you will end up with missing assets. Not a good look for the user!\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Load a URL:\n     * const myImageTexture = await Assets.load('http://some.url.com/image.png'); // => returns a texture\n     *\n     * await Assets.unload('http://some.url.com/image.png')\n     *\n     * // myImageTexture will be destroyed now.\n     *\n     * // Unload multiple assets:\n     * const textures = await Assets.unload(['thumper', 'chicko']);\n     * @param urls - the urls to unload\n     */\n    public async unload(\n        urls: ArrayOr<string> | ResolvedAsset | ResolvedAsset[]\n    ): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        const urlArray = convertToList<string | ResolvedAsset>(urls)\n            .map((url) =>\n                ((typeof url !== 'string') ? url.src : url));\n\n        // check cache first...\n        const resolveResults = this.resolver.resolve(urlArray);\n\n        await this._unloadFromResolved(resolveResults);\n    }\n\n    /**\n     * Bundles are a way to manage multiple assets at once.\n     * this will unload all files in a bundle.\n     *\n     * once a bundle has been unloaded, you need to load it again to have access to the assets.\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * Assets.addBundle({\n     *     'thumper': 'http://some.url.com/thumper.png',\n     * })\n     *\n     * const assets = await Assets.loadBundle('thumper');\n     *\n     * // Now to unload...\n     *\n     * await Assets.unloadBundle('thumper');\n     *\n     * // All assets in the assets object will now have been destroyed and purged from the cache\n     * @param bundleIds - the bundle id or ids to unload\n     */\n    public async unloadBundle(bundleIds: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        bundleIds = convertToList<string>(bundleIds);\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        const promises = Object.keys(resolveResults).map((bundleId) =>\n            this._unloadFromResolved(resolveResults[bundleId]));\n\n        await Promise.all(promises);\n    }\n\n    private async _unloadFromResolved(resolveResult: ResolvedAsset | Record<string, ResolvedAsset>)\n    {\n        const resolveArray = Object.values(resolveResult);\n\n        resolveArray.forEach((resolveResult) =>\n        {\n            Cache.remove(resolveResult.src);\n        });\n\n        await this.loader.unload(resolveArray);\n    }\n\n    /**\n     * Detects the supported formats for the browser, and returns an array of supported formats, respecting\n     * the users preferred formats order.\n     * @param options - the options to use when detecting formats\n     * @param options.preferredFormats - the preferred formats to use\n     * @param options.skipDetections - if we should skip the detections altogether\n     * @param options.detections - the detections to use\n     * @returns - the detected formats\n     */\n    private async _detectFormats(options: {\n        preferredFormats: string | string[],\n        skipDetections: boolean,\n        detections: FormatDetectionParser[]\n    }): Promise<string[]>\n    {\n        let formats: string[] = [];\n\n        // set preferred formats\n        if (options.preferredFormats)\n        {\n            formats = Array.isArray(options.preferredFormats)\n                ? options.preferredFormats : [options.preferredFormats];\n        }\n\n        // we should add any formats that are supported by the browser\n        for (const detection of options.detections)\n        {\n            if (options.skipDetections || await detection.test())\n            {\n                formats = await detection.add(formats);\n            }\n            else if (!options.skipDetections)\n            {\n                formats = await detection.remove(formats);\n            }\n        }\n\n        // remove any duplicates\n        formats = formats.filter((format, index) => formats.indexOf(format) === index);\n\n        return formats;\n    }\n\n    /** All the detection parsers currently added to the Assets class. */\n    public get detections(): FormatDetectionParser[]\n    {\n        return this._detections;\n    }\n\n    /**\n     * General setter for preferences. This is a helper function to set preferences on all parsers.\n     * @param preferences - the preferences to set\n     */\n    public setPreferences(preferences: Partial<AssetsPreferences>): void\n    {\n        // Find matching config keys in loaders with preferences\n        // and set the values\n        this.loader.parsers.forEach((parser) =>\n        {\n            if (!parser.config) return;\n\n            (Object.keys(parser.config) as (keyof AssetsPreferences)[])\n                .filter((key) => key in preferences)\n                .forEach((key) =>\n                {\n                    parser.config[key] = preferences[key];\n                });\n        });\n    }\n}\n\nexport const Assets = new AssetsClass();\n\n// Handle registration of extensions\nextensions\n    .handleByList(ExtensionType.LoadParser, Assets.loader.parsers)\n    .handleByList(ExtensionType.ResolveParser, Assets.resolver.parsers)\n    .handleByList(ExtensionType.CacheParser, Assets.cache.parsers)\n    .handleByList(ExtensionType.DetectionParser, Assets.detections);\nextensions.add(\n    cacheTextureArray,\n\n    detectDefaults,\n    detectAvif,\n    detectWebp,\n    detectMp4,\n    detectOgv,\n    detectWebm,\n\n    loadJson,\n    loadTxt,\n    loadWebFont,\n    loadSvg,\n    loadTextures,\n    loadVideoTextures,\n    loadBitmapFont,\n\n    bitmapFontCachePlugin,\n\n    resolveTextureUrl,\n    resolveJsonUrl\n);\n\nconst assetKeyMap = {\n    loader: ExtensionType.LoadParser,\n    resolver: ExtensionType.ResolveParser,\n    cache: ExtensionType.CacheParser,\n    detection: ExtensionType.DetectionParser,\n};\n\ntype AssetType = keyof typeof assetKeyMap;\n\n// Split the Asset extension into it's various parts\n// these are handled in the Assets.ts file\nextensions.handle(ExtensionType.Asset, (extension) =>\n{\n    const ref = extension.ref as AssetExtension;\n\n    Object.entries(assetKeyMap)\n        .filter(([key]) => !!ref[key as AssetType])\n        .forEach(([key, type]) => extensions.add(Object.assign(\n            ref[key as AssetType],\n            // Allow the function to optionally define it's own\n            // ExtensionMetadata, the use cases here is priority for LoaderParsers\n            { extension: ref[key as AssetType].extension ?? type },\n        )));\n}, (extension) =>\n{\n    const ref = extension.ref as AssetExtension;\n\n    Object.keys(assetKeyMap)\n        .filter((key) => !!ref[key as AssetType])\n        .forEach((key) => extensions.remove(ref[key as AssetType]));\n});\n", "import { ExtensionType } from '../../extensions/Extensions';\nimport { isWebGLSupported } from '../../utils/browser/isWebGLSupported';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported';\n\nimport type { FormatDetectionParser } from '../../assets/detections/types';\n\nexport const detectBasis = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 3,\n    },\n    test: async (): Promise<boolean> =>\n    {\n        if (await isWebGPUSupported()) return true;\n        if (isWebGLSupported()) return true;\n\n        return false;\n    },\n    add: async (formats) => [...formats, 'basis'],\n    remove: async (formats) => formats.filter((f) => f !== 'basis'),\n} as FormatDetectionParser;\n", "import { TextureSource } from './TextureSource';\n\nimport type { TextureSourceOptions } from './TextureSource';\n\nexport class CompressedSource extends TextureSource<Uint8Array[]>\n{\n    public readonly uploadMethodId = 'compressed';\n\n    constructor(options: TextureSourceOptions)\n    {\n        super(options);\n\n        this.resource = options.resource;\n        this.mipLevelCount = this.resource.length;\n    }\n}\n", "import type { TEXTURE_FORMATS } from '../../../shared/texture/const';\n\nlet supportedGLCompressedTextureFormats: TEXTURE_FORMATS[];\n\nexport function getSupportedGlCompressedTextureFormats(): TEXTURE_FORMATS[]\n{\n    if (supportedGLCompressedTextureFormats) return supportedGLCompressedTextureFormats;\n\n    // TODO: can we use already created context (webgl or webgl2)?\n    const canvas = document.createElement('canvas');\n    const gl = canvas.getContext('webgl');\n\n    if (!gl)\n    {\n        return [];\n    }\n\n    supportedGLCompressedTextureFormats = [\n        // BC compressed formats usable if \"texture-compression-bc\" is both\n        // supported by the device/user agent and enabled in requestDevice.\n        // 'bc6h-rgb-ufloat'\n        // 'bc6h-rgb-float'\n        // 'bc7-rgba-unorm',\n        // 'bc7-rgba-unorm-srgb',\n        ...gl.getExtension('EXT_texture_compression_bptc') ? [\n            'bc6h-rgb-ufloat',\n            'bc6h-rgb-float',\n            'bc7-rgba-unorm',\n            'bc7-rgba-unorm-srgb',\n        ] : [],\n        // BC compressed formats usable if \"texture-compression-bc\" is both\n        // supported by the device/user agent and enabled in requestDevice.\n        // 'bc1-rgba-unorm',\n        // 'bc1-rgba-unorm-srgb',\n        // 'bc4-r-unorm'\n        // 'bc4-r-snorm'\n        // 'bc5-rg-unorm'\n        // 'bc5-rg-snorm'\n        ...gl.getExtension('WEBGL_compressed_texture_s3tc') ? [\n            'bc1-rgba-unorm',\n            'bc2-rgba-unorm',\n            'bc3-rgba-unorm',\n        ] : [],\n        ...gl.getExtension('WEBGL_compressed_texture_s3tc_srgb') ? [\n            'bc1-rgba-unorm-srgb',\n            'bc2-rgba-unorm-srgb',\n            'bc3-rgba-unorm-srgb',\n        ] : [],\n\n        ...gl.getExtension('EXT_texture_compression_rgtc') ? [\n            'bc4-r-unorm',\n            'bc4-r-snorm',\n            'bc5-rg-unorm',\n            'bc5-rg-snorm',\n        ] : [],\n\n        // ETC2 compressed formats usable if \"texture-compression-etc2\" is both\n        // supported by the device/user agent and enabled in requestDevice.\n        ...gl.getExtension('WEBGL_compressed_texture_etc') ? [\n            'etc2-rgb8unorm',\n            'etc2-rgb8unorm-srgb',\n            'etc2-rgba8unorm',\n            'etc2-rgba8unorm-srgb',\n            'etc2-rgb8a1unorm',\n            'etc2-rgb8a1unorm-srgb',\n            'eac-r11unorm',\n            'eac-rg11unorm',\n        ] : [],\n        // 'eac-r11snorm',\n        // 'eac-rg11snorm',\n        // ASTC compressed formats usable if \"texture-compression-astc\" is both\n        // supported by the device/user agent and enabled in requestDevice.\n        ...gl.getExtension('WEBGL_compressed_texture_astc') ? [\n            'astc-4x4-unorm',\n            'astc-4x4-unorm-srgb',\n            'astc-5x4-unorm',\n            'astc-5x4-unorm-srgb',\n            'astc-5x5-unorm',\n            'astc-5x5-unorm-srgb',\n            'astc-6x5-unorm',\n            'astc-6x5-unorm-srgb',\n            'astc-6x6-unorm',\n            'astc-6x6-unorm-srgb',\n            'astc-8x5-unorm',\n            'astc-8x5-unorm-srgb',\n            'astc-8x6-unorm',\n            'astc-8x6-unorm-srgb',\n            'astc-8x8-unorm',\n            'astc-8x8-unorm-srgb',\n            'astc-10x5-unorm',\n            'astc-10x5-unorm-srgb',\n            'astc-10x6-unorm',\n            'astc-10x6-unorm-srgb',\n            'astc-10x8-unorm',\n            'astc-10x8-unorm-srgb',\n            'astc-10x10-unorm',\n            'astc-10x10-unorm-srgb',\n            'astc-12x10-unorm',\n            'astc-12x10-unorm-srgb',\n            'astc-12x12-unorm',\n            'astc-12x12-unorm-srgb'\n        ] : [],\n    ] as TEXTURE_FORMATS[];\n\n    return supportedGLCompressedTextureFormats;\n}\n", "import { DOMAdapter } from '../../../../../environment/adapter';\n\nimport type { TEXTURE_FORMATS } from '../../../shared/texture/const';\n\nlet supportedGPUCompressedTextureFormats: TEXTURE_FORMATS[];\n\nexport async function getSupportedGPUCompressedTextureFormats(): Promise<TEXTURE_FORMATS[]>\n{\n    if (supportedGPUCompressedTextureFormats) return supportedGPUCompressedTextureFormats;\n\n    const adapter = await DOMAdapter.get().getNavigator().gpu.requestAdapter();\n\n    supportedGPUCompressedTextureFormats = [\n        ...adapter.features.has('texture-compression-bc') ? [\n            // BC compressed formats usable if \"texture-compression-bc\" is both\n            // supported by the device/user agent and enabled in requestDevice.\n            'bc1-rgba-unorm',\n            'bc1-rgba-unorm-srgb',\n            'bc2-rgba-unorm',\n            'bc2-rgba-unorm-srgb',\n            'bc3-rgba-unorm',\n            'bc3-rgba-unorm-srgb',\n            'bc4-r-unorm',\n            'bc4-r-snorm',\n            'bc5-rg-unorm',\n            'bc5-rg-snorm',\n            'bc6h-rgb-ufloat',\n            'bc6h-rgb-float',\n            'bc7-rgba-unorm',\n            'bc7-rgba-unorm-srgb',\n        ] : [],\n        ...adapter.features.has('texture-compression-etc2') ? [\n            // ETC2 compressed formats usable if \"texture-compression-etc2\" is both\n            // supported by the device/user agent and enabled in requestDevice.\n            'etc2-rgb8unorm',\n            'etc2-rgb8unorm-srgb',\n            'etc2-rgb8a1unorm',\n            'etc2-rgb8a1unorm-srgb',\n            'etc2-rgba8unorm',\n            'etc2-rgba8unorm-srgb',\n            'eac-r11unorm',\n            'eac-r11snorm',\n            'eac-rg11unorm',\n            'eac-rg11snorm',\n        ] : [],\n        ...adapter.features.has('texture-compression-astc') ? [\n            // ASTC compressed formats usable if \"texture-compression-astc\" is both\n            // supported by the device/user agent and enabled in requestDevice.\n            'astc-4x4-unorm',\n            'astc-4x4-unorm-srgb',\n            'astc-5x4-unorm',\n            'astc-5x4-unorm-srgb',\n            'astc-5x5-unorm',\n            'astc-5x5-unorm-srgb',\n            'astc-6x5-unorm',\n            'astc-6x5-unorm-srgb',\n            'astc-6x6-unorm',\n            'astc-6x6-unorm-srgb',\n            'astc-8x5-unorm',\n            'astc-8x5-unorm-srgb',\n            'astc-8x6-unorm',\n            'astc-8x6-unorm-srgb',\n            'astc-8x8-unorm',\n            'astc-8x8-unorm-srgb',\n            'astc-10x5-unorm',\n            'astc-10x5-unorm-srgb',\n            'astc-10x6-unorm',\n            'astc-10x6-unorm-srgb',\n            'astc-10x8-unorm',\n            'astc-10x8-unorm-srgb',\n            'astc-10x10-unorm',\n            'astc-10x10-unorm-srgb',\n            'astc-12x10-unorm',\n            'astc-12x10-unorm-srgb',\n            'astc-12x12-unorm',\n            'astc-12x12-unorm-srgb',\n        ] : [],\n    ] as TEXTURE_FORMATS[];\n\n    return supportedGPUCompressedTextureFormats;\n}\n", "import { isWebGLSupported } from '../../../../../utils/browser/isWebGLSupported';\nimport { isWebGPUSupported } from '../../../../../utils/browser/isWebGPUSupported';\nimport { getSupportedGlCompressedTextureFormats } from '../../../gl/texture/utils/getSupportedGlCompressedTextureFormats';\nimport { getSupportedGPUCompressedTextureFormats } from '../../../gpu/texture/utils/getSupportedGPUCompressedTextureFormats';\n\nimport type { TEXTURE_FORMATS } from '../const';\n\nlet supportedCompressedTextureFormats: TEXTURE_FORMATS[];\n\nexport async function getSupportedCompressedTextureFormats(): Promise<TEXTURE_FORMATS[]>\n{\n    if (supportedCompressedTextureFormats !== undefined) return supportedCompressedTextureFormats;\n\n    supportedCompressedTextureFormats = await (async (): Promise<TEXTURE_FORMATS[]> =>\n    {\n        // find only overlapping ones..\n        const _isWebGPUSupported = await isWebGPUSupported();\n        const _isWebGLSupported = isWebGLSupported();\n\n        if (_isWebGPUSupported && _isWebGLSupported)\n        {\n            const gpuTextureFormats = await getSupportedGPUCompressedTextureFormats();\n            const glTextureFormats = getSupportedGlCompressedTextureFormats();\n\n            return gpuTextureFormats.filter((format) => glTextureFormats.includes(format));\n        }\n        else if (_isWebGPUSupported)\n        {\n            return await getSupportedGPUCompressedTextureFormats();\n        }\n        else if (_isWebGLSupported)\n        {\n            return getSupportedGlCompressedTextureFormats();\n        }\n\n        return [];\n    })();\n\n    return supportedCompressedTextureFormats;\n}\n", "import { getSupportedCompressedTextureFormats } from './getSupportedCompressedTextureFormats';\n\nimport type { TEXTURE_FORMATS } from '../const';\n\nexport const nonCompressedFormats: TEXTURE_FORMATS[] = [\n    // 8-bit formats\n    'r8unorm',\n    'r8snorm',\n    'r8uint',\n    'r8sint',\n\n    // 16-bit formats\n    'r16uint',\n    'r16sint',\n    'r16float',\n    'rg8unorm',\n    'rg8snorm',\n    'rg8uint',\n    'rg8sint',\n\n    // 32-bit formats\n    'r32uint',\n    'r32sint',\n    'r32float',\n    'rg16uint',\n    'rg16sint',\n    'rg16float',\n    'rgba8unorm',\n    'rgba8unorm-srgb',\n    'rgba8snorm',\n    'rgba8uint',\n    'rgba8sint',\n    'bgra8unorm',\n    'bgra8unorm-srgb',\n    // Packed 32-bit formats\n    'rgb9e5ufloat',\n    'rgb10a2unorm',\n    'rg11b10ufloat',\n\n    // 64-bit formats\n    'rg32uint',\n    'rg32sint',\n    'rg32float',\n    'rgba16uint',\n    'rgba16sint',\n    'rgba16float',\n\n    // 128-bit formats\n    'rgba32uint',\n    'rgba32sint',\n    'rgba32float',\n\n    // Depth/stencil formats\n    'stencil8',\n    'depth16unorm',\n    'depth24plus',\n    'depth24plus-stencil8',\n    'depth32float',\n\n    // \"depth32float-stencil8\" feature\n    'depth32float-stencil8',\n];\n\nlet supportedTextureFormats: TEXTURE_FORMATS[];\n\nexport async function getSupportedTextureFormats(): Promise<TEXTURE_FORMATS[]>\n{\n    if (supportedTextureFormats !== undefined) return supportedTextureFormats;\n\n    const compressedTextureFormats = await getSupportedCompressedTextureFormats();\n\n    supportedTextureFormats = [\n        ...nonCompressedFormats,\n        ...compressedTextureFormats,\n    ];\n\n    return supportedTextureFormats;\n}\n\n", "const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    function createLevelBuffers(basisTexture, basisTranscoderFormat) {\\n      const images = basisTexture.getNumImages();\\n      const levels = basisTexture.getNumLevels(0);\\n      const success = basisTexture.startTranscoding();\\n      if (!success) {\\n        throw new Error(\\\"startTranscoding failed\\\");\\n      }\\n      const levelBuffers = [];\\n      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {\\n        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {\\n          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);\\n          const levelBuffer = new Uint8Array(transcodeSize);\\n          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);\\n          if (!success2) {\\n            throw new Error(\\\"transcodeImage failed\\\");\\n          }\\n          levelBuffers.push(levelBuffer);\\n        }\\n      }\\n      return levelBuffers;\\n    }\\n\\n    const gpuFormatToBasisTranscoderFormatMap = {\\n      \\\"bc3-rgba-unorm\\\": 3,\\n      // cTFBC3_RGBA\\n      \\\"bc7-rgba-unorm\\\": 6,\\n      // cTFBC7_RGBA,\\n      \\\"etc2-rgba8unorm\\\": 1,\\n      // cTFETC2_RGBA,\\n      \\\"astc-4x4-unorm\\\": 10,\\n      // cTFASTC_4x4_RGBA,\\n      // Uncompressed\\n      rgba8unorm: 13,\\n      // cTFRGBA32,\\n      rgba4unorm: 16\\n      // cTFRGBA4444,\\n    };\\n    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {\\n      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];\\n      if (format) {\\n        return format;\\n      }\\n      throw new Error(`Unsupported transcoderFormat: ${transcoderFormat}`);\\n    }\\n\\n    const settings = {\\n      jsUrl: \\\"basis/basis_transcoder.js\\\",\\n      wasmUrl: \\\"basis/basis_transcoder.wasm\\\"\\n    };\\n    let basisTranscoderFormat;\\n    let basisTranscodedTextureFormat;\\n    let basisPromise;\\n    async function getBasis() {\\n      if (!basisPromise) {\\n        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;\\n        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;\\n        importScripts(absoluteJsUrl);\\n        basisPromise = new Promise((resolve) => {\\n          BASIS({\\n            locateFile: (_file) => absoluteWasmUrl\\n          }).then((module) => {\\n            module.initializeBasis();\\n            resolve(module.BasisFile);\\n          });\\n        });\\n      }\\n      return basisPromise;\\n    }\\n    async function fetchBasisTexture(url, BasisTexture) {\\n      const basisResponse = await fetch(url);\\n      if (basisResponse.ok) {\\n        const basisArrayBuffer = await basisResponse.arrayBuffer();\\n        return new BasisTexture(new Uint8Array(basisArrayBuffer));\\n      }\\n      throw new Error(`Failed to load Basis texture: ${url}`);\\n    }\\n    const preferredTranscodedFormat = [\\n      \\\"bc7-rgba-unorm\\\",\\n      \\\"astc-4x4-unorm\\\",\\n      \\\"etc2-rgba8unorm\\\",\\n      \\\"bc3-rgba-unorm\\\",\\n      \\\"rgba8unorm\\\"\\n    ];\\n    async function load(url) {\\n      const BasisTexture = await getBasis();\\n      const basisTexture = await fetchBasisTexture(url, BasisTexture);\\n      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);\\n      return {\\n        width: basisTexture.getImageWidth(0, 0),\\n        height: basisTexture.getImageHeight(0, 0),\\n        format: basisTranscodedTextureFormat,\\n        resource: levelBuffers,\\n        alphaMode: \\\"no-premultiply-alpha\\\"\\n      };\\n    }\\n    async function init(jsUrl, wasmUrl, supportedTextures) {\\n      if (jsUrl)\\n        settings.jsUrl = jsUrl;\\n      if (wasmUrl)\\n        settings.wasmUrl = wasmUrl;\\n      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];\\n      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);\\n      await getBasis();\\n    }\\n    const messageHandlers = {\\n      init: async (data) => {\\n        const { jsUrl, wasmUrl, supportedTextures } = data;\\n        await init(jsUrl, wasmUrl, supportedTextures);\\n      },\\n      load: async (data) => {\\n        try {\\n          const textureOptions = await load(data.url);\\n          return {\\n            type: \\\"load\\\",\\n            url: data.url,\\n            success: true,\\n            textureOptions,\\n            transferables: textureOptions.resource?.map((arr) => arr.buffer)\\n          };\\n        } catch (e) {\\n          throw e;\\n        }\\n      }\\n    };\\n    self.onmessage = async (messageEvent) => {\\n      const message = messageEvent.data;\\n      const response = await messageHandlers[message.type](message);\\n      if (response) {\\n        self.postMessage(response, response.transferables);\\n      }\\n    };\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=basis.worker.mjs.map\n", "export const basisTranscoderUrls = {\n    jsUrl: 'https://files.pixijs.download/transcoders/basis/basis_transcoder.js',\n    wasmUrl: 'https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm',\n};\n\nexport function setBasisTranscoderPath(config: Partial<typeof basisTranscoderUrls>)\n{\n    Object.assign(basisTranscoderUrls, config);\n}\n", "import BasisWorker from 'worker:./basis.worker.ts';\nimport { basisTranscoderUrls } from '../utils/setBasisTranscoderPath';\n\nimport type { TEXTURE_FORMATS } from '../../../rendering/renderers/shared/texture/const';\nimport type { TextureSourceOptions } from '../../../rendering/renderers/shared/texture/sources/TextureSource';\n\nlet basisWorker: Worker;\nconst urlHash: Record<string, (value: any) => void> = {};\n\nfunction getBasisWorker(supportedTextures: TEXTURE_FORMATS[]): Worker\n{\n    if (!basisWorker)\n    {\n        basisWorker = new BasisWorker().worker;\n\n        basisWorker.onmessage = (messageEvent) =>\n        {\n            const { success, url, textureOptions } = messageEvent.data;\n\n            if (!success)\n            {\n                console.warn('Failed to load Basis texture', url);\n            }\n\n            urlHash[url](textureOptions);\n        };\n\n        basisWorker.postMessage({\n            type: 'init',\n            jsUrl: basisTranscoderUrls.jsUrl,\n            wasmUrl: basisTranscoderUrls.wasmUrl,\n            supportedTextures\n        });\n    }\n\n    return basisWorker;\n}\n\nexport function loadBasisOnWorker(\n    url: string,\n    supportedTextures: TEXTURE_FORMATS[]\n): Promise<TextureSourceOptions>\n{\n    const ktxWorker = getBasisWorker(supportedTextures);\n\n    return new Promise((resolve) =>\n    {\n        urlHash[url] = resolve;\n\n        ktxWorker.postMessage({ type: 'load', url });\n    });\n}\n", "import { LoaderParserPriority } from '../../assets/loader/parsers/LoaderParser';\nimport { createTexture } from '../../assets/loader/parsers/textures/utils/createTexture';\nimport { checkExtension } from '../../assets/utils/checkExtension';\nimport { ExtensionType } from '../../extensions/Extensions';\nimport { CompressedSource } from '../../rendering/renderers/shared/texture/sources/CompressedSource';\nimport { getSupportedTextureFormats } from '../../rendering/renderers/shared/texture/utils/getSupportedTextureFormats';\nimport { loadBasisOnWorker } from './worker/loadBasisOnWorker';\n\nimport type { Loader } from '../../assets/loader/Loader';\nimport type { LoaderParser } from '../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../assets/types';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\n\n/** Loads KTX textures! */\nexport const loadBasis = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadBasis',\n    },\n\n    name: 'loadBasis',\n\n    test(url: string): boolean\n    {\n        return checkExtension(url, ['.basis']);\n    },\n\n    async load(url: string, _asset: ResolvedAsset, loader: Loader): Promise<Texture | Texture[]>\n    {\n        const supportedTextures = await getSupportedTextureFormats();\n\n        const textureOptions = await loadBasisOnWorker(url, supportedTextures);\n\n        const compressedTextureSource = new CompressedSource(textureOptions);\n\n        return createTexture(compressedTextureSource, loader, url);\n    },\n\n    unload(texture: Texture | Texture[]): void\n    {\n        if (Array.isArray(texture))\n        {\n            texture.forEach((t) => t.destroy(true));\n        }\n        else\n        {\n            texture.destroy(true);\n        }\n    }\n\n} satisfies LoaderParser<Texture | Texture[], TextureSourceOptions>;\n", "import type { TEXTURE_FORMATS } from '../../rendering/renderers/shared/texture/const';\n\n// http://msdn.microsoft.com/en-us/library/bb943991.aspx/\n/**\n * DWORD offsets of the DDS file header fields (relative to file start).\n * @ignore\n */\nconst DDS_HEADER_FIELDS = {\n    MAGIC: 0,\n    SIZE: 1,\n    FLAGS: 2,\n    HEIGHT: 3,\n    WIDTH: 4,\n    MIPMAP_COUNT: 7,\n    PIXEL_FORMAT: 19,\n    PF_FLAGS: 20,\n    FOURCC: 21,\n    RGB_BITCOUNT: 22,\n    R_BIT_MASK: 23,\n    G_BIT_MASK: 24,\n    B_BIT_MASK: 25,\n    A_BIT_MASK: 26,\n};\n\n/**\n * DWORD offsets of the DDS_HEADER_DX10 fields.\n * @ignore\n */\nconst DDS_DX10_FIELDS = {\n    DXGI_FORMAT: 0,\n    RESOURCE_DIMENSION: 1,\n    MISC_FLAG: 2,\n    ARRAY_SIZE: 3,\n    MISC_FLAGS2: 4,\n};\n\n/**\n * @see https://docs.microsoft.com/en-us/windows/win32/api/dxgiformat/ne-dxgiformat-dxgi_format\n * This is way over-blown for us! Lend us a hand, and remove the ones that aren't used (but set the remaining\n * ones to their correct value)\n * @ignore\n */\nexport enum DXGI_FORMAT\n{\n    DXGI_FORMAT_UNKNOWN,\n    DXGI_FORMAT_R32G32B32A32_TYPELESS,\n    DXGI_FORMAT_R32G32B32A32_FLOAT,\n    DXGI_FORMAT_R32G32B32A32_UINT,\n    DXGI_FORMAT_R32G32B32A32_SINT,\n    DXGI_FORMAT_R32G32B32_TYPELESS,\n    DXGI_FORMAT_R32G32B32_FLOAT,\n    DXGI_FORMAT_R32G32B32_UINT,\n    DXGI_FORMAT_R32G32B32_SINT,\n    DXGI_FORMAT_R16G16B16A16_TYPELESS,\n    DXGI_FORMAT_R16G16B16A16_FLOAT,\n    DXGI_FORMAT_R16G16B16A16_UNORM,\n    DXGI_FORMAT_R16G16B16A16_UINT,\n    DXGI_FORMAT_R16G16B16A16_SNORM,\n    DXGI_FORMAT_R16G16B16A16_SINT,\n    DXGI_FORMAT_R32G32_TYPELESS,\n    DXGI_FORMAT_R32G32_FLOAT,\n    DXGI_FORMAT_R32G32_UINT,\n    DXGI_FORMAT_R32G32_SINT,\n    DXGI_FORMAT_R32G8X24_TYPELESS,\n    DXGI_FORMAT_D32_FLOAT_S8X24_UINT,\n    DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS,\n    DXGI_FORMAT_X32_TYPELESS_G8X24_UINT,\n    DXGI_FORMAT_R10G10B10A2_TYPELESS,\n    DXGI_FORMAT_R10G10B10A2_UNORM,\n    DXGI_FORMAT_R10G10B10A2_UINT,\n    DXGI_FORMAT_R11G11B10_FLOAT,\n    DXGI_FORMAT_R8G8B8A8_TYPELESS,\n    DXGI_FORMAT_R8G8B8A8_UNORM,\n    DXGI_FORMAT_R8G8B8A8_UNORM_SRGB,\n    DXGI_FORMAT_R8G8B8A8_UINT,\n    DXGI_FORMAT_R8G8B8A8_SNORM,\n    DXGI_FORMAT_R8G8B8A8_SINT,\n    DXGI_FORMAT_R16G16_TYPELESS,\n    DXGI_FORMAT_R16G16_FLOAT,\n    DXGI_FORMAT_R16G16_UNORM,\n    DXGI_FORMAT_R16G16_UINT,\n    DXGI_FORMAT_R16G16_SNORM,\n    DXGI_FORMAT_R16G16_SINT,\n    DXGI_FORMAT_R32_TYPELESS,\n    DXGI_FORMAT_D32_FLOAT,\n    DXGI_FORMAT_R32_FLOAT,\n    DXGI_FORMAT_R32_UINT,\n    DXGI_FORMAT_R32_SINT,\n    DXGI_FORMAT_R24G8_TYPELESS,\n    DXGI_FORMAT_D24_UNORM_S8_UINT,\n    DXGI_FORMAT_R24_UNORM_X8_TYPELESS,\n    DXGI_FORMAT_X24_TYPELESS_G8_UINT,\n    DXGI_FORMAT_R8G8_TYPELESS,\n    DXGI_FORMAT_R8G8_UNORM,\n    DXGI_FORMAT_R8G8_UINT,\n    DXGI_FORMAT_R8G8_SNORM,\n    DXGI_FORMAT_R8G8_SINT,\n    DXGI_FORMAT_R16_TYPELESS,\n    DXGI_FORMAT_R16_FLOAT,\n    DXGI_FORMAT_D16_UNORM,\n    DXGI_FORMAT_R16_UNORM,\n    DXGI_FORMAT_R16_UINT,\n    DXGI_FORMAT_R16_SNORM,\n    DXGI_FORMAT_R16_SINT,\n    DXGI_FORMAT_R8_TYPELESS,\n    DXGI_FORMAT_R8_UNORM,\n    DXGI_FORMAT_R8_UINT,\n    DXGI_FORMAT_R8_SNORM,\n    DXGI_FORMAT_R8_SINT,\n    DXGI_FORMAT_A8_UNORM,\n    DXGI_FORMAT_R1_UNORM,\n    DXGI_FORMAT_R9G9B9E5_SHAREDEXP,\n    DXGI_FORMAT_R8G8_B8G8_UNORM,\n    DXGI_FORMAT_G8R8_G8B8_UNORM,\n    DXGI_FORMAT_BC1_TYPELESS,\n    DXGI_FORMAT_BC1_UNORM,\n    DXGI_FORMAT_BC1_UNORM_SRGB,\n    DXGI_FORMAT_BC2_TYPELESS,\n    DXGI_FORMAT_BC2_UNORM,\n    DXGI_FORMAT_BC2_UNORM_SRGB,\n    DXGI_FORMAT_BC3_TYPELESS,\n    DXGI_FORMAT_BC3_UNORM,\n    DXGI_FORMAT_BC3_UNORM_SRGB,\n    DXGI_FORMAT_BC4_TYPELESS,\n    DXGI_FORMAT_BC4_UNORM,\n    DXGI_FORMAT_BC4_SNORM,\n    DXGI_FORMAT_BC5_TYPELESS,\n    DXGI_FORMAT_BC5_UNORM,\n    DXGI_FORMAT_BC5_SNORM,\n    DXGI_FORMAT_B5G6R5_UNORM,\n    DXGI_FORMAT_B5G5R5A1_UNORM,\n    DXGI_FORMAT_B8G8R8A8_UNORM,\n    DXGI_FORMAT_B8G8R8X8_UNORM,\n    DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM,\n    DXGI_FORMAT_B8G8R8A8_TYPELESS,\n    DXGI_FORMAT_B8G8R8A8_UNORM_SRGB,\n    DXGI_FORMAT_B8G8R8X8_TYPELESS,\n    DXGI_FORMAT_B8G8R8X8_UNORM_SRGB,\n    DXGI_FORMAT_BC6H_TYPELESS,\n    DXGI_FORMAT_BC6H_UF16,\n    DXGI_FORMAT_BC6H_SF16,\n    DXGI_FORMAT_BC7_TYPELESS,\n    DXGI_FORMAT_BC7_UNORM,\n    DXGI_FORMAT_BC7_UNORM_SRGB,\n    DXGI_FORMAT_AYUV,\n    DXGI_FORMAT_Y410,\n    DXGI_FORMAT_Y416,\n    DXGI_FORMAT_NV12,\n    DXGI_FORMAT_P010,\n    DXGI_FORMAT_P016,\n    DXGI_FORMAT_420_OPAQUE,\n    DXGI_FORMAT_YUY2,\n    DXGI_FORMAT_Y210,\n    DXGI_FORMAT_Y216,\n    DXGI_FORMAT_NV11,\n    DXGI_FORMAT_AI44,\n    DXGI_FORMAT_IA44,\n    DXGI_FORMAT_P8,\n    DXGI_FORMAT_A8P8,\n    DXGI_FORMAT_B4G4R4A4_UNORM,\n    DXGI_FORMAT_P208,\n    DXGI_FORMAT_V208,\n    DXGI_FORMAT_V408,\n    DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE,\n    DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE,\n    DXGI_FORMAT_FORCE_UINT\n}\n\n/**\n * Possible values of the field {@link DDS_DX10_FIELDS.RESOURCE_DIMENSION}\n * @ignore\n */\nexport enum D3D10_RESOURCE_DIMENSION\n{\n    DDS_DIMENSION_TEXTURE1D = 2,\n    DDS_DIMENSION_TEXTURE2D = 3,\n    DDS_DIMENSION_TEXTURE3D = 6\n}\n\nfunction fourCCToInt32(value: string)\n{\n    return value.charCodeAt(0)\n        + (value.charCodeAt(1) << 8)\n        + (value.charCodeAt(2) << 16)\n        + (value.charCodeAt(3) << 24);\n}\n\n// Four character codes for DXTn formats\n// https://learn.microsoft.com/en-us/windows/win32/direct3ddds/dx-graphics-dds-pguide\n// https://learn.microsoft.com/en-us/windows/win32/direct3d9/d3dformat\nexport enum D3DFMT\n{\n    UNKNOWN = 0,\n    R8G8B8 = 20,\n    A8R8G8B8 = 21,\n    X8R8G8B8 = 22,\n    R5G6B5 = 23,\n    X1R5G5B5 = 24,\n    A1R5G5B5 = 25,\n    A4R4G4B4 = 26,\n    R3G3B2 = 27,\n    A8 = 28,\n    A8R3G3B2 = 29,\n    X4R4G4B4 = 30,\n    A2B10G10R10 = 31,\n    A8B8G8R8 = 32,\n    X8B8G8R8 = 33,\n    G16R16 = 34,\n    A2R10G10B10 = 35,\n    A16B16G16R16 = 36,\n    A8P8 = 40,\n    P8 = 41,\n    L8 = 50,\n    A8L8 = 51,\n    A4L4 = 52,\n    V8U8 = 60,\n    L6V5U5 = 61,\n    X8L8V8U8 = 62,\n    Q8W8V8U8 = 63,\n    V16U16 = 64,\n    A2W10V10U10 = 67,\n    Q16W16V16U16 = 110,\n    R16F = 111,\n    G16R16F = 112,\n    A16B16G16R16F = 113,\n    R32F = 114,\n    G32R32F = 115,\n    A32B32G32R32F = 116,\n    UYVY = fourCCToInt32('UYVY'),\n    R8G8_B8G8 = fourCCToInt32('RGBG'),\n    YUY2 = fourCCToInt32('YUY2'),\n    D3DFMT_G8R8_G8B8 = fourCCToInt32('GRGB'),\n    DXT1 = fourCCToInt32('DXT1'),\n    DXT2 = fourCCToInt32('DXT2'),\n    DXT3 = fourCCToInt32('DXT3'),\n    DXT4 = fourCCToInt32('DXT4'),\n    DXT5 = fourCCToInt32('DXT5'),\n    ATI1 = fourCCToInt32('ATI1'),\n    AT1N = fourCCToInt32('AT1N'),\n    ATI2 = fourCCToInt32('ATI2'),\n    AT2N = fourCCToInt32('AT2N'),\n    BC4U = fourCCToInt32('BC4U'),\n    BC4S = fourCCToInt32('BC4S'),\n    BC5U = fourCCToInt32('BC5U'),\n    BC5S = fourCCToInt32('BC5S'),\n\n    DX10 = fourCCToInt32('DX10'),\n}\n\n/**\n * Maps `FOURCC_*` formats to {@link TEXTURE_FORMATS}.\n * https://en.wikipedia.org/wiki/S3_Texture_Compression#S3TC_format_comparison\n * https://github.com/microsoft/DirectXTex/blob/main/DDSTextureLoader/DDSTextureLoader11.cpp\n * @ignore\n */\nexport const FOURCC_TO_TEXTURE_FORMAT: { [id: number]: TEXTURE_FORMATS } = {\n    [D3DFMT.DXT1]: 'bc1-rgba-unorm',\n    [D3DFMT.DXT2]: 'bc2-rgba-unorm',\n    [D3DFMT.DXT3]: 'bc2-rgba-unorm',\n    [D3DFMT.DXT4]: 'bc3-rgba-unorm',\n    [D3DFMT.DXT5]: 'bc3-rgba-unorm',\n\n    [D3DFMT.ATI1]: 'bc4-r-unorm',\n    [D3DFMT.BC4U]: 'bc4-r-unorm',\n    [D3DFMT.BC4S]: 'bc4-r-snorm',\n\n    [D3DFMT.ATI2]: 'bc5-rg-unorm',\n    [D3DFMT.BC5U]: 'bc5-rg-unorm',\n    [D3DFMT.BC5S]: 'bc5-rg-snorm',\n\n    [D3DFMT.A16B16G16R16]: 'rgba16uint',\n    [D3DFMT.Q16W16V16U16]: 'rgba16sint',\n    [D3DFMT.R16F]: 'r16float',\n    [D3DFMT.G16R16F]: 'rg16float',\n    [D3DFMT.A16B16G16R16F]: 'rgba16float',\n    [D3DFMT.R32F]: 'r32float',\n    [D3DFMT.G32R32F]: 'rg32float',\n    [D3DFMT.A32B32G32R32F]: 'rgba32float',\n};\n\n/**\n * Maps {@link DXGI_FORMAT} to {@link TEXTURE_FORMATS}\n * @ignore\n */\nexport const DXGI_TO_TEXTURE_FORMAT: { [id: number]: TEXTURE_FORMATS } = {\n    [DXGI_FORMAT.DXGI_FORMAT_BC1_TYPELESS]: 'bc1-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM]: 'bc1-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM_SRGB]: 'bc1-rgba-unorm-srgb',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC2_TYPELESS]: 'bc2-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM]: 'bc2-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM_SRGB]: 'bc2-rgba-unorm-srgb',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC3_TYPELESS]: 'bc3-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM]: 'bc3-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM_SRGB]: 'bc3-rgba-unorm-srgb',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC4_TYPELESS]: 'bc4-r-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC4_UNORM]: 'bc4-r-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC4_SNORM]: 'bc4-r-snorm',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC5_TYPELESS]: 'bc5-rg-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC5_UNORM]: 'bc5-rg-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC5_SNORM]: 'bc5-rg-snorm',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC6H_TYPELESS]: 'bc6h-rgb-ufloat',\n    [DXGI_FORMAT.DXGI_FORMAT_BC6H_UF16]: 'bc6h-rgb-ufloat',\n    [DXGI_FORMAT.DXGI_FORMAT_BC6H_SF16]: 'bc6h-rgb-float',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC7_TYPELESS]: 'bc7-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC7_UNORM]: 'bc7-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC7_UNORM_SRGB]: 'bc7-rgba-unorm-srgb',\n\n    [DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM]: 'rgba8unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB]: 'rgba8unorm-srgb',\n    [DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM]: 'bgra8unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB]: 'bgra8unorm-srgb',\n    [DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT]: 'r32float',\n\n    [DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM]: 'rg8unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_R16_UNORM]: 'r16uint',\n\n    [DXGI_FORMAT.DXGI_FORMAT_R8_UNORM]: 'r8unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM]: 'rgb10a2unorm',\n\n    [DXGI_FORMAT.DXGI_FORMAT_R16G16B16A16_UNORM]: 'rgba16uint',\n    [DXGI_FORMAT.DXGI_FORMAT_R16G16B16A16_SNORM]: 'rgba16sint',\n    [DXGI_FORMAT.DXGI_FORMAT_R16G16B16A16_FLOAT]: 'rgba16float',\n    [DXGI_FORMAT.DXGI_FORMAT_R16_FLOAT]: 'r16float',\n    [DXGI_FORMAT.DXGI_FORMAT_R16G16_FLOAT]: 'rg16float',\n    [DXGI_FORMAT.DXGI_FORMAT_R32G32_FLOAT]: 'rg32float',\n    [DXGI_FORMAT.DXGI_FORMAT_R32G32B32A32_FLOAT]: 'rgba32float',\n\n};\n\nexport const DDS = {\n    MAGIC_VALUE: 0x20534444,\n    MAGIC_SIZE: 4,\n    HEADER_SIZE: 124,\n    HEADER_DX10_SIZE: 20,\n    PIXEL_FORMAT_FLAGS: {\n        // PIXEL_FORMAT flags\n        // https://github.com/Microsoft/DirectXTex/blob/main/DirectXTex/DDS.h\n        // https://learn.microsoft.com/en-us/windows/win32/direct3ddds/dds-pixelformat\n        ALPHAPIXELS: 0x1,\n        ALPHA: 0x2,\n        FOURCC: 0x4,\n        RGB: 0x40,\n        RGBA: 0x41,\n        YUV: 0x200,\n        LUMINANCE: 0x20000,\n        LUMINANCEA: 0x20001,\n    },\n\n    RESOURCE_MISC_TEXTURECUBE: 0x4,\n\n    HEADER_FIELDS: DDS_HEADER_FIELDS,\n    HEADER_DX10_FIELDS: DDS_DX10_FIELDS,\n    DXGI_FORMAT,\n    D3D10_RESOURCE_DIMENSION,\n    D3DFMT\n};\n\n// formats and block size (in bytes)\nexport const TEXTURE_FORMAT_BLOCK_SIZE: Record<string, number> = {\n    'bc1-rgba-unorm':  8,\n    'bc1-rgba-unorm-srgb':  8,\n    'bc2-rgba-unorm':  16,\n    'bc2-rgba-unorm-srgb':  16,\n    'bc3-rgba-unorm':  16,\n    'bc3-rgba-unorm-srgb':  16,\n    'bc4-r-unorm':  8,\n    'bc4-r-snorm':  8,\n    'bc5-rg-unorm':  16,\n    'bc5-rg-snorm':  16,\n    'bc6h-rgb-ufloat':  16,\n    'bc6h-rgb-float':  16,\n    'bc7-rgba-unorm':  16,\n    'bc7-rgba-unorm-srgb':  16\n};\n", "import { DDS, DXGI_TO_TEXTURE_FORMAT, FOURCC_TO_TEXTURE_FORMAT, TEXTURE_FORMAT_BLOCK_SIZE } from './const';\n\nimport type { TEXTURE_FORMATS } from '../../rendering/renderers/shared/texture/const';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\n\nexport function parseDDS(arrayBuffer: ArrayBuffer, supportedFormats: TEXTURE_FORMATS[]): TextureSourceOptions<Uint8Array[]>\n{\n    const {\n        format,\n        fourCC,\n        width,\n        height,\n        dataOffset,\n        mipmapCount,\n    } = parseDDSHeader(arrayBuffer);\n\n    if (!supportedFormats.includes(format))\n    {\n        throw new Error(`Unsupported texture format: ${fourCC} ${format}, supported: ${supportedFormats}`);\n    }\n\n    if (mipmapCount <= 1)\n    { // No need bothering with the imageSize calculation!\n        return {\n            format,\n            width,\n            height,\n            resource: [new Uint8Array(arrayBuffer, dataOffset)],\n            alphaMode: 'no-premultiply-alpha',\n        } as TextureSourceOptions;\n    }\n\n    const levelBuffers = getMipmapLevelBuffers(format, width, height, dataOffset, mipmapCount, arrayBuffer);\n\n    const textureOptions: TextureSourceOptions = {\n        format,\n        width,\n        height,\n        resource: levelBuffers,\n        alphaMode: 'no-premultiply-alpha'\n    };\n\n    return textureOptions;\n}\n\nfunction getMipmapLevelBuffers(format: TEXTURE_FORMATS, width: number, height: number,\n    dataOffset: any, mipmapCount: number, arrayBuffer: ArrayBuffer)\n{\n    const levelBuffers = [];\n    const blockBytes = TEXTURE_FORMAT_BLOCK_SIZE[format];\n\n    let mipWidth = width;\n    let mipHeight = height;\n    let offset = dataOffset;\n\n    for (let level = 0; level < mipmapCount; ++level)\n    {\n        const byteLength = blockBytes\n            ? Math.max(4, mipWidth) / 4 * Math.max(4, mipHeight) / 4 * blockBytes\n            : mipWidth * mipHeight * 4;\n\n        const levelBuffer = new Uint8Array(arrayBuffer, offset, byteLength);\n\n        levelBuffers.push(levelBuffer);\n\n        offset += byteLength;\n\n        mipWidth = Math.max(mipWidth >> 1, 1);\n        mipHeight = Math.max(mipHeight >> 1, 1);\n    }\n\n    return levelBuffers;\n}\n\nfunction parseDDSHeader(buffer: ArrayBuffer)\n{\n    const header = new Uint32Array(buffer, 0, DDS.HEADER_SIZE / Uint32Array.BYTES_PER_ELEMENT);\n\n    if (header[DDS.HEADER_FIELDS.MAGIC] !== DDS.MAGIC_VALUE)\n    {\n        throw new Error('Invalid magic number in DDS header');\n    }\n\n    // DDS header fields\n    const height = header[DDS.HEADER_FIELDS.HEIGHT];\n    const width = header[DDS.HEADER_FIELDS.WIDTH];\n    const mipmapCount = Math.max(1, header[DDS.HEADER_FIELDS.MIPMAP_COUNT]);\n    const flags = header[DDS.HEADER_FIELDS.PF_FLAGS];\n    const fourCC = header[DDS.HEADER_FIELDS.FOURCC];\n    const format = getTextureFormat(header, flags, fourCC, buffer);\n\n    const dataOffset = DDS.MAGIC_SIZE + DDS.HEADER_SIZE\n        + ((fourCC === DDS.D3DFMT.DX10) ? DDS.HEADER_DX10_SIZE : 0);\n\n    return {\n        format,\n        fourCC,\n        width,\n        height,\n        dataOffset,\n        mipmapCount\n    };\n}\n\nfunction getTextureFormat(header: Uint32Array, flags: number, fourCC: number, buffer: ArrayBuffer)\n{\n    if (flags & DDS.PIXEL_FORMAT_FLAGS.FOURCC)\n    {\n        if (fourCC === DDS.D3DFMT.DX10)\n        {\n            const dx10Header = new Uint32Array(\n                buffer,\n                DDS.MAGIC_SIZE + DDS.HEADER_SIZE, // there is a 20-byte DDS_HEADER_DX10 after DDS_HEADER\n                DDS.HEADER_DX10_SIZE / Uint32Array.BYTES_PER_ELEMENT);\n\n            const miscFlag = dx10Header[DDS.HEADER_DX10_FIELDS.MISC_FLAG];\n\n            if (miscFlag === DDS.RESOURCE_MISC_TEXTURECUBE)\n            {\n                throw new Error('DDSParser does not support cubemap textures');\n            }\n\n            const resourceDimension = dx10Header[DDS.HEADER_DX10_FIELDS.RESOURCE_DIMENSION];\n\n            if (resourceDimension === DDS.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)\n            {\n                throw new Error('DDSParser does not supported 3D texture data');\n            }\n\n            const dxgiFormat = dx10Header[DDS.HEADER_DX10_FIELDS.DXGI_FORMAT];\n\n            if (dxgiFormat in DXGI_TO_TEXTURE_FORMAT)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[dxgiFormat];\n            }\n\n            throw new Error(`DDSParser cannot parse texture data with DXGI format ${dxgiFormat}`);\n        }\n\n        if (fourCC in FOURCC_TO_TEXTURE_FORMAT)\n        {\n            return FOURCC_TO_TEXTURE_FORMAT[fourCC];\n        }\n\n        throw new Error(`DDSParser cannot parse texture data with fourCC format ${fourCC}`);\n    }\n\n    if (flags & DDS.PIXEL_FORMAT_FLAGS.RGB || flags & DDS.PIXEL_FORMAT_FLAGS.RGBA)\n    {\n        return getUncompressedTextureFormat(header);\n    }\n\n    if (flags & DDS.PIXEL_FORMAT_FLAGS.YUV)\n    {\n        throw new Error('DDSParser does not supported YUV uncompressed texture data.');\n    }\n    if (flags & DDS.PIXEL_FORMAT_FLAGS.LUMINANCE || flags & DDS.PIXEL_FORMAT_FLAGS.LUMINANCEA)\n    {\n        throw new Error('DDSParser does not support single-channel (lumninance) texture data!');\n    }\n    if (flags & DDS.PIXEL_FORMAT_FLAGS.ALPHA || flags & DDS.PIXEL_FORMAT_FLAGS.ALPHAPIXELS)\n    {\n        throw new Error('DDSParser does not support single-channel (alpha) texture data!');\n    }\n\n    throw new Error('DDSParser failed to load a texture file due to an unknown reason!');\n}\n\nfunction getUncompressedTextureFormat(header: Uint32Array)\n{\n    const bitCount = header[DDS.HEADER_FIELDS.RGB_BITCOUNT];\n    const rBitMask = header[DDS.HEADER_FIELDS.R_BIT_MASK];\n    const gBitMask = header[DDS.HEADER_FIELDS.G_BIT_MASK];\n    const bBitMask = header[DDS.HEADER_FIELDS.B_BIT_MASK];\n    const aBitMask = header[DDS.HEADER_FIELDS.A_BIT_MASK];\n\n    // https://learn.microsoft.com/en-us/windows/win32/direct3ddds/dx-graphics-dds-pguide\n    // https://github.com/microsoft/DirectXTex/blob/main/DDSTextureLoader/DDSTextureLoader11.cpp#L892\n    switch (bitCount)\n    {\n        case 32:\n            if (rBitMask === 0x000000ff && gBitMask === 0x0000ff00 && bBitMask === 0x00ff0000 && aBitMask === 0xff000000)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];\n            }\n            if (rBitMask === 0x00ff0000 && gBitMask === 0x0000ff00 && bBitMask === 0x000000ff && aBitMask === 0xff000000)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];\n            }\n            if (rBitMask === 0x3ff00000 && gBitMask === 0x000ffc00 && bBitMask === 0x000003ff && aBitMask === 0xc0000000)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];\n            }\n            if (rBitMask === 0x0000ffff && gBitMask === 0xffff0000 && bBitMask === 0 && aBitMask === 0)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];\n            }\n            if (rBitMask === 0xffffffff && gBitMask === 0 && bBitMask === 0 && aBitMask === 0)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];\n            }\n            break;\n        case 24:\n            if (rBitMask === 0xff0000 && gBitMask === 0xff00 && bBitMask === 0xff && aBitMask === 0x8000)\n            {\n                // rgb8unorm not supported?\n                // return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];\n            }\n            break;\n        case 16:\n            if (rBitMask === 0x7c00 && gBitMask === 0x03e0 && bBitMask === 0x001f && aBitMask === 0x8000)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];\n            }\n            if (rBitMask === 0xf800 && gBitMask === 0x07e0 && bBitMask === 0x001f && aBitMask === 0)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];\n            }\n            if (rBitMask === 0x0f00 && gBitMask === 0x00f0 && bBitMask === 0x000f && aBitMask === 0xf000)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];\n            }\n            if (rBitMask === 0x00ff && gBitMask === 0 && bBitMask === 0 && aBitMask === 0xff00)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];\n            }\n            if (rBitMask === 0xffff && gBitMask === 0 && bBitMask === 0 && aBitMask === 0)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];\n            }\n            break;\n\n        case 8:\n            if (rBitMask === 0xff && gBitMask === 0 && bBitMask === 0 && aBitMask === 0)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];\n            }\n            break;\n    }\n\n    throw new Error(`DDSParser does not support uncompressed texture with configuration:\n                bitCount = ${bitCount}, rBitMask = ${rBitMask}, gBitMask = ${gBitMask}, aBitMask = ${aBitMask}`);\n}\n", "import { LoaderParserPriority } from '../../assets/loader/parsers/LoaderParser';\nimport { createTexture } from '../../assets/loader/parsers/textures/utils/createTexture';\nimport { checkExtension } from '../../assets/utils/checkExtension';\nimport { ExtensionType } from '../../extensions/Extensions';\nimport { CompressedSource } from '../../rendering/renderers/shared/texture/sources/CompressedSource';\nimport { getSupportedTextureFormats } from '../../rendering/renderers/shared/texture/utils/getSupportedTextureFormats';\nimport { parseDDS } from './parseDDS';\n\nimport type { Loader } from '../../assets/loader/Loader';\nimport type { LoaderParser } from '../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../assets/types';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\n\n/** Loads KTX textures! */\nexport const loadDDS = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadDDS',\n    },\n\n    name: 'loadDDS',\n\n    test(url: string): boolean\n    {\n        return checkExtension(url, ['.dds']);\n    },\n\n    async load(url: string, _asset: ResolvedAsset, loader: Loader): Promise<Texture | Texture[]>\n    {\n        const supportedTextures = await getSupportedTextureFormats();\n\n        const ddsResponse = await fetch(url);\n\n        const ddsArrayBuffer = await ddsResponse.arrayBuffer();\n\n        const textureOptions = parseDDS(ddsArrayBuffer, supportedTextures);\n\n        const compressedTextureSource = new CompressedSource(textureOptions);\n\n        return createTexture(compressedTextureSource, loader, url);\n    },\n\n    unload(texture: Texture | Texture[]): void\n    {\n        if (Array.isArray(texture))\n        {\n            texture.forEach((t) => t.destroy(true));\n        }\n        else\n        {\n            texture.destroy(true);\n        }\n    }\n\n} satisfies LoaderParser<Texture | Texture[], TextureSourceOptions>;\n\n", "import type { TEXTURE_FORMATS } from '../../rendering/renderers/shared/texture/const';\n\nexport enum GL_INTERNAL_FORMAT\n{\n    RGBA8_SNORM = 0x8F97,\n    RGBA = 0x1908,\n    RGBA8UI = 0x8D7C,\n    SRGB8_ALPHA8 = 0x8C43,\n    RGBA8I = 0x8D8E,\n    RGBA8 = 0x8058,\n\n    COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83F0,\n    COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83F1,\n    COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83F2,\n    COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83F3,\n    COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 35917,\n    COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 35918,\n    COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 35919,\n    COMPRESSED_SRGB_S3TC_DXT1_EXT = 35916,\n\n    COMPRESSED_RED_RGTC1_EXT = 0x8DBB,\n    COMPRESSED_SIGNED_RED_RGTC1_EXT = 0x8DBC,\n    COMPRESSED_RED_GREEN_RGTC2_EXT = 0x8DBD,\n    COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT = 0x8DBE,\n\n    COMPRESSED_R11_EAC = 0x9270,\n    COMPRESSED_SIGNED_R11_EAC = 0x9271,\n    COMPRESSED_RG11_EAC = 0x9272,\n    COMPRESSED_SIGNED_RG11_EAC = 0x9273,\n    COMPRESSED_RGB8_ETC2 = 0x9274,\n    COMPRESSED_RGBA8_ETC2_EAC = 0x9278,\n    COMPRESSED_SRGB8_ETC2 = 0x9275,\n    COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 0x9279,\n    COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9276,\n    COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9277,\n\n    COMPRESSED_RGBA_ASTC_4x4_KHR = 0x93B0,\n    COMPRESSED_RGBA_ASTC_5x4_KHR = 0x93B1,\n    COMPRESSED_RGBA_ASTC_5x5_KHR = 0x93B2,\n    COMPRESSED_RGBA_ASTC_6x5_KHR = 0x93B3,\n    COMPRESSED_RGBA_ASTC_6x6_KHR = 0x93B4,\n    COMPRESSED_RGBA_ASTC_8x5_KHR = 0x93B5,\n    COMPRESSED_RGBA_ASTC_8x6_KHR = 0x93B6,\n    COMPRESSED_RGBA_ASTC_8x8_KHR = 0x93B7,\n    COMPRESSED_RGBA_ASTC_10x5_KHR = 0x93B8,\n    COMPRESSED_RGBA_ASTC_10x6_KHR = 0x93B9,\n    COMPRESSED_RGBA_ASTC_10x8_KHR = 0x93BA,\n    COMPRESSED_RGBA_ASTC_10x10_KHR = 0x93BB,\n    COMPRESSED_RGBA_ASTC_12x10_KHR = 0x93BC,\n    COMPRESSED_RGBA_ASTC_12x12_KHR = 0x93BD,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR = 0x93D0,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR = 0x93D1,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR = 0x93D2,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR = 0x93D3,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR = 0x93D4,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR = 0x93D5,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR = 0x93D6,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR = 0x93D7,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR = 0x93D8,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR = 0x93D9,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR = 0x93DA,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR = 0x93DB,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR = 0x93DC,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR = 0x93DD,\n\n    COMPRESSED_RGBA_BPTC_UNORM_EXT = 0x8E8C,\n    COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT = 0x8E8D,\n    COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT = 0x8E8E,\n    COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT = 0x8E8F\n}\n\nenum GL_FORMATS\n{\n    RGBA = 6408,\n    RGB = 6407,\n    RG = 33319,\n    RED = 6403,\n    RGBA_INTEGER = 36249,\n    RGB_INTEGER = 36248,\n    RG_INTEGER = 33320,\n    RED_INTEGER = 36244,\n    ALPHA = 6406,\n    LUMINANCE = 6409,\n    LUMINANCE_ALPHA = 6410,\n    DEPTH_COMPONENT = 6402,\n    DEPTH_STENCIL = 34041,\n}\n\nenum GL_TYPES\n{\n    UNSIGNED_BYTE = 5121,\n    UNSIGNED_SHORT = 5123,\n    UNSIGNED_SHORT_5_6_5 = 33635,\n    UNSIGNED_SHORT_4_4_4_4 = 32819,\n    UNSIGNED_SHORT_5_5_5_1 = 32820,\n    UNSIGNED_INT = 5125,\n    UNSIGNED_INT_10F_11F_11F_REV = 35899,\n    UNSIGNED_INT_2_10_10_10_REV = 33640,\n    UNSIGNED_INT_24_8 = 34042,\n    UNSIGNED_INT_5_9_9_9_REV = 35902,\n    BYTE = 5120,\n    SHORT = 5122,\n    INT = 5124,\n    FLOAT = 5126,\n    FLOAT_32_UNSIGNED_INT_24_8_REV = 36269,\n    HALF_FLOAT = 36193,\n}\n\nconst INTERNAL_FORMAT_TO_TEXTURE_FORMATS: { [id: number]: TEXTURE_FORMATS } = {\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_S3TC_DXT1_EXT]: 'bc1-rgba-unorm', // TODO: ???\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT1_EXT]: 'bc1-rgba-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT3_EXT]: 'bc2-rgba-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT5_EXT]: 'bc3-rgba-unorm',\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_S3TC_DXT1_EXT]: 'bc1-rgba-unorm-srgb', // TODO: ???\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]: 'bc1-rgba-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]: 'bc2-rgba-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]: 'bc3-rgba-unorm-srgb',\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RED_RGTC1_EXT]: 'bc4-r-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RED_RGTC1_EXT]: 'bc4-r-snorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RED_GREEN_RGTC2_EXT]: 'bc5-rg-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT]: 'bc5-rg-snorm',\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_R11_EAC]: 'eac-r11unorm',\n    // [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_R11_EAC]: 'eac-r11snorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RG11_EAC]: 'eac-rg11snorm',\n    // [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RG11_EAC]: 'eac-rg11unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB8_ETC2]: 'etc2-rgb8unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA8_ETC2_EAC]: 'etc2-rgba8unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ETC2]: 'etc2-rgb8unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]: 'etc2-rgba8unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]: 'etc2-rgb8a1unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]: 'etc2-rgb8a1unorm-srgb',\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_4x4_KHR]: 'astc-4x4-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR]: 'astc-4x4-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_5x4_KHR]: 'astc-5x4-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR]: 'astc-5x4-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_5x5_KHR]: 'astc-5x5-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR]: 'astc-5x5-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_6x5_KHR]: 'astc-6x5-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR]: 'astc-6x5-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_6x6_KHR]: 'astc-6x6-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR]: 'astc-6x6-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x5_KHR]: 'astc-8x5-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR]: 'astc-8x5-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x6_KHR]: 'astc-8x6-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR]: 'astc-8x6-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x8_KHR]: 'astc-8x8-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR]: 'astc-8x8-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x5_KHR]: 'astc-10x5-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR]: 'astc-10x5-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x6_KHR]: 'astc-10x6-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR]: 'astc-10x6-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x8_KHR]: 'astc-10x8-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR]: 'astc-10x8-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x10_KHR]: 'astc-10x10-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR]: 'astc-10x10-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_12x10_KHR]: 'astc-12x10-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR]: 'astc-12x10-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_12x12_KHR]: 'astc-12x12-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR]: 'astc-12x12-unorm-srgb',\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_BPTC_UNORM_EXT]: 'bc7-rgba-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT]: 'bc7-rgba-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT]: 'bc6h-rgb-float',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT]: 'bc6h-rgb-ufloat',\n\n    [GL_INTERNAL_FORMAT.SRGB8_ALPHA8]: 'rgba8unorm-srgb',\n\n    [GL_INTERNAL_FORMAT.RGBA8_SNORM]: 'rgba8snorm',\n    [GL_INTERNAL_FORMAT.RGBA8UI]: 'rgba8uint',\n    [GL_INTERNAL_FORMAT.RGBA8I]: 'rgba8sint',\n    [GL_INTERNAL_FORMAT.RGBA]: 'rgba8unorm',\n    // [GL_INTERNAL_FORMAT.RGBA8]: 'bgra8unorm'\n};\n\n/**\n * The 12-byte KTX file identifier\n * @see https://www.khronos.org/opengles/sdk/tools/KTX/file_format_spec/#2.1\n * @ignore\n */\nconst FILE_IDENTIFIER = [0xAB, 0x4B, 0x54, 0x58, 0x20, 0x31, 0x31, 0xBB, 0x0D, 0x0A, 0x1A, 0x0A];\n\n/**\n * The value stored in the \"endianness\" field.\n * @see https://www.khronos.org/opengles/sdk/tools/KTX/file_format_spec/#2.2\n * @ignore\n */\n\nconst FIELDS = {\n    FILE_IDENTIFIER: 0,\n    ENDIANNESS: 12,\n    GL_TYPE: 16,\n    GL_TYPE_SIZE: 20,\n    GL_FORMAT: 24,\n    GL_INTERNAL_FORMAT: 28,\n    GL_BASE_INTERNAL_FORMAT: 32,\n    PIXEL_WIDTH: 36,\n    PIXEL_HEIGHT: 40,\n    PIXEL_DEPTH: 44,\n    NUMBER_OF_ARRAY_ELEMENTS: 48,\n    NUMBER_OF_FACES: 52,\n    NUMBER_OF_MIPMAP_LEVELS: 56,\n    BYTES_OF_KEY_VALUE_DATA: 60,\n};\n\nconst FILE_HEADER_SIZE = 64;\nconst ENDIANNESS = 0x04030201;\n\nconst TYPES_TO_BYTES_PER_COMPONENT: { [id: number]: number } = {\n    [GL_TYPES.UNSIGNED_BYTE]: 1,\n    [GL_TYPES.UNSIGNED_SHORT]: 2,\n    [GL_TYPES.INT]: 4,\n    [GL_TYPES.UNSIGNED_INT]: 4,\n    [GL_TYPES.FLOAT]: 4,\n    [GL_TYPES.HALF_FLOAT]: 8,\n};\n\nconst FORMATS_TO_COMPONENTS: { [id: number]: number } = {\n    [GL_FORMATS.RGBA]: 4,\n    [GL_FORMATS.RGB]: 3,\n    [GL_FORMATS.RG]: 2,\n    [GL_FORMATS.RED]: 1,\n    [GL_FORMATS.LUMINANCE]: 1,\n    [GL_FORMATS.LUMINANCE_ALPHA]: 2,\n    [GL_FORMATS.ALPHA]: 1,\n};\n\nconst TYPES_TO_BYTES_PER_PIXEL: { [id: number]: number } = {\n    [GL_TYPES.UNSIGNED_SHORT_4_4_4_4]: 2,\n    [GL_TYPES.UNSIGNED_SHORT_5_5_5_1]: 2,\n    [GL_TYPES.UNSIGNED_SHORT_5_6_5]: 2,\n};\n\nconst INTERNAL_FORMAT_TO_BYTES_PER_PIXEL: { [id: number]: number } = {\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_S3TC_DXT1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT3_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT5_EXT]: 1,\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_S3TC_DXT1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]: 1,\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RED_RGTC1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RED_RGTC1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RED_GREEN_RGTC2_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT]: 1,\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_R11_EAC]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_R11_EAC]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RG11_EAC]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RG11_EAC]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB8_ETC2]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA8_ETC2_EAC]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ETC2]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]: 0.5,\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_4x4_KHR]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_5x4_KHR]: 0.8,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR]: 0.8,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_5x5_KHR]: 0.64,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR]: 0.64,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_6x5_KHR]: 0.53375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR]: 0.53375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_6x6_KHR]: 0.445,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR]: 0.445,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x5_KHR]: 0.4,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR]: 0.4,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x6_KHR]: 0.33375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR]: 0.33375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x8_KHR]: 0.25,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR]: 0.25,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x5_KHR]: 0.32,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR]: 0.32,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x6_KHR]: 0.26625,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR]: 0.26625,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x8_KHR]: 0.2,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR]: 0.2,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x10_KHR]: 0.16,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR]: 0.16,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_12x10_KHR]: 0.13375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR]: 0.13375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_12x12_KHR]: 0.11125,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR]: 0.11125,\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_BPTC_UNORM_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT]: 1,\n};\n\nexport const KTX = {\n    FILE_HEADER_SIZE,\n    FILE_IDENTIFIER,\n    FORMATS_TO_COMPONENTS,\n    INTERNAL_FORMAT_TO_BYTES_PER_PIXEL,\n    INTERNAL_FORMAT_TO_TEXTURE_FORMATS,\n    FIELDS,\n    TYPES_TO_BYTES_PER_COMPONENT,\n    TYPES_TO_BYTES_PER_PIXEL,\n    ENDIANNESS\n};\n", "import { KTX } from '../ktx2/const';\n\nimport type { TEXTURE_FORMATS } from '../../rendering/renderers/shared/texture/const';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\n\nexport function parseKTX(arrayBuffer: ArrayBuffer, supportedFormats: TEXTURE_FORMATS[]): TextureSourceOptions<Uint8Array[]>\n{\n    const dataView = new DataView(arrayBuffer);\n\n    if (!validate(dataView))\n    {\n        throw new Error('Invalid KTX identifier in header');\n    }\n\n    const {\n        littleEndian,\n        glType,\n        glFormat,\n        glInternalFormat,\n        pixelWidth,\n        pixelHeight,\n        numberOfMipmapLevels,\n        offset,\n    } = parseKTXHeader(dataView);\n\n    const textureFormat = KTX.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[glInternalFormat];\n\n    if (!textureFormat)\n    {\n        throw new Error(`Unknown texture format ${glInternalFormat}`);\n    }\n    if (!supportedFormats.includes(textureFormat))\n    {\n        throw new Error(`Unsupported texture format: ${textureFormat}, supportedFormats: ${supportedFormats}`);\n    }\n\n    const imagePixelByteSize = getImagePixelByteSize(glType, glFormat, glInternalFormat);\n\n    const imageBuffers = getImageBuffers(dataView, glType, imagePixelByteSize, pixelWidth, pixelHeight, offset,\n        numberOfMipmapLevels, littleEndian);\n\n    return {\n        format: textureFormat,\n        width: pixelWidth,\n        height: pixelHeight,\n        resource: imageBuffers,\n        alphaMode: 'no-premultiply-alpha'\n    };\n}\n\nfunction getImageBuffers(dataView: DataView, glType: number, imagePixelByteSize: number, pixelWidth: number,\n    pixelHeight: number, offset: number, numberOfMipmapLevels: number, littleEndian: boolean)\n{\n    const alignedWidth = (pixelWidth + 3) & ~3;\n    const alignedHeight = (pixelHeight + 3) & ~3;\n    let imagePixels = pixelWidth * pixelHeight;\n\n    if (glType === 0)\n    {\n        // Align to 16 pixels (4x4 blocks)\n        imagePixels = alignedWidth * alignedHeight;\n    }\n\n    let mipByteSize = imagePixels * imagePixelByteSize;\n    let mipWidth = pixelWidth;\n    let mipHeight = pixelHeight;\n    let alignedMipWidth = alignedWidth;\n    let alignedMipHeight = alignedHeight;\n    let imageOffset = offset;\n\n    const imageBuffers = new Array<Uint8Array>(numberOfMipmapLevels);\n\n    for (let mipmapLevel = 0; mipmapLevel < numberOfMipmapLevels; mipmapLevel++)\n    {\n        const imageSize = dataView.getUint32(imageOffset, littleEndian);\n        let elementOffset = imageOffset + 4;\n\n        imageBuffers[mipmapLevel] = new Uint8Array(dataView.buffer, elementOffset, mipByteSize);\n\n        elementOffset += mipByteSize;\n\n        // HINT: Aligns to 4-byte boundary after jumping imageSize (in lieu of mipPadding)\n        imageOffset += imageSize + 4;// (+4 to jump the imageSize field itself)\n        imageOffset = imageOffset % 4 !== 0 ? imageOffset + 4 - (imageOffset % 4) : imageOffset;\n\n        // Calculate mipWidth, mipHeight for _next_ iteration\n        mipWidth = (mipWidth >> 1) || 1;\n        mipHeight = (mipHeight >> 1) || 1;\n        alignedMipWidth = (mipWidth + 4 - 1) & ~(4 - 1);\n        alignedMipHeight = (mipHeight + 4 - 1) & ~(4 - 1);\n\n        // Each mipmap level is 4-times smaller?\n        mipByteSize = alignedMipWidth * alignedMipHeight * imagePixelByteSize;\n    }\n\n    return imageBuffers;\n}\n\nfunction getImagePixelByteSize(glType: number, glFormat: number, glInternalFormat: number)\n{\n    let imagePixelByteSize = KTX.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[glInternalFormat];\n\n    if (glType !== 0)\n    {\n        // Uncompressed texture format\n        if (KTX.TYPES_TO_BYTES_PER_COMPONENT[glType])\n        {\n            imagePixelByteSize = KTX.TYPES_TO_BYTES_PER_COMPONENT[glType] * KTX.FORMATS_TO_COMPONENTS[glFormat];\n        }\n        else\n        {\n            imagePixelByteSize = KTX.TYPES_TO_BYTES_PER_PIXEL[glType];\n        }\n    }\n\n    if (imagePixelByteSize === undefined)\n    {\n        throw new Error('Unable to resolve the pixel format stored in the *.ktx file!');\n    }\n\n    return imagePixelByteSize;\n}\n\nfunction parseKTXHeader(dataView: DataView)\n{\n    const littleEndian = dataView.getUint32(KTX.FIELDS.ENDIANNESS, true) === KTX.ENDIANNESS;\n    const glType = dataView.getUint32(KTX.FIELDS.GL_TYPE, littleEndian);\n    const glFormat = dataView.getUint32(KTX.FIELDS.GL_FORMAT, littleEndian);\n    const glInternalFormat = dataView.getUint32(KTX.FIELDS.GL_INTERNAL_FORMAT, littleEndian);\n    const pixelWidth = dataView.getUint32(KTX.FIELDS.PIXEL_WIDTH, littleEndian);\n    const pixelHeight = dataView.getUint32(KTX.FIELDS.PIXEL_HEIGHT, littleEndian) || 1;// \"pixelHeight = 0\" -> \"1\"\n    const pixelDepth = dataView.getUint32(KTX.FIELDS.PIXEL_DEPTH, littleEndian) || 1;// ^^\n    const numberOfArrayElements = dataView.getUint32(KTX.FIELDS.NUMBER_OF_ARRAY_ELEMENTS, littleEndian) || 1;// ^^\n    const numberOfFaces = dataView.getUint32(KTX.FIELDS.NUMBER_OF_FACES, littleEndian);\n    const numberOfMipmapLevels = dataView.getUint32(KTX.FIELDS.NUMBER_OF_MIPMAP_LEVELS, littleEndian);\n    const bytesOfKeyValueData = dataView.getUint32(KTX.FIELDS.BYTES_OF_KEY_VALUE_DATA, littleEndian);\n\n    if (pixelHeight === 0 || pixelDepth !== 1)\n    {\n        throw new Error('Only 2D textures are supported');\n    }\n    if (numberOfFaces !== 1)\n    {\n        throw new Error('CubeTextures are not supported by KTXLoader yet!');\n    }\n    if (numberOfArrayElements !== 1)\n    {\n        throw new Error('WebGL does not support array textures');\n    }\n\n    return {\n        littleEndian,\n        glType,\n        glFormat,\n        glInternalFormat,\n        pixelWidth,\n        pixelHeight,\n        numberOfMipmapLevels,\n        offset: KTX.FILE_HEADER_SIZE + bytesOfKeyValueData\n    };\n}\n\n/**\n * Checks whether the arrayBuffer contains a valid *.ktx file.\n * @param dataView\n */\nfunction validate(dataView: DataView): boolean\n{\n    // NOTE: Do not optimize this into 3 32-bit integer comparison because the endianness\n    // of the data is not specified.\n    for (let i = 0; i < KTX.FILE_IDENTIFIER.length; i++)\n    {\n        if (dataView.getUint8(i) !== KTX.FILE_IDENTIFIER[i])\n        {\n            return false;\n        }\n    }\n\n    return true;\n}\n", "import { LoaderParserPriority } from '../../assets/loader/parsers/LoaderParser';\nimport { createTexture } from '../../assets/loader/parsers/textures/utils/createTexture';\nimport { checkExtension } from '../../assets/utils/checkExtension';\nimport { ExtensionType } from '../../extensions/Extensions';\nimport { CompressedSource } from '../../rendering/renderers/shared/texture/sources/CompressedSource';\nimport { getSupportedTextureFormats } from '../../rendering/renderers/shared/texture/utils/getSupportedTextureFormats';\nimport { parseKTX } from './parseKTX';\n\nimport type { Loader } from '../../assets/loader/Loader';\nimport type { LoaderParser } from '../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../assets/types';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\n\n/** Loads KTX textures! */\nexport const loadKTX = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadKTX',\n    },\n\n    name: 'loadKTX',\n\n    test(url: string): boolean\n    {\n        return checkExtension(url, '.ktx');\n    },\n\n    async load(url: string, _asset: ResolvedAsset, loader: Loader): Promise<Texture | Texture[]>\n    {\n        const supportedTextures = await getSupportedTextureFormats();\n\n        const ktxResponse = await fetch(url);\n\n        const ktxArrayBuffer = await ktxResponse.arrayBuffer();\n\n        const textureOptions = parseKTX(ktxArrayBuffer, supportedTextures);\n\n        const compressedTextureSource = new CompressedSource(textureOptions);\n\n        return createTexture(compressedTextureSource, loader, url);\n    },\n\n    unload(texture: Texture | Texture[]): void\n    {\n        if (Array.isArray(texture))\n        {\n            texture.forEach((t) => t.destroy(true));\n        }\n        else\n        {\n            texture.destroy(true);\n        }\n    }\n\n} satisfies LoaderParser<Texture | Texture[], TextureSourceOptions>;\n\n", "const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    const converters = {\\n      rgb8unorm: {\\n        convertedFormat: \\\"rgba8unorm\\\",\\n        convertFunction: convertRGBtoRGBA\\n      },\\n      \\\"rgb8unorm-srgb\\\": {\\n        convertedFormat: \\\"rgba8unorm-srgb\\\",\\n        convertFunction: convertRGBtoRGBA\\n      }\\n    };\\n    function convertFormatIfRequired(textureOptions) {\\n      const format = textureOptions.format;\\n      if (converters[format]) {\\n        const convertFunction = converters[format].convertFunction;\\n        const levelBuffers = textureOptions.resource;\\n        for (let i = 0; i < levelBuffers.length; i++) {\\n          levelBuffers[i] = convertFunction(levelBuffers[i]);\\n        }\\n        textureOptions.format = converters[format].convertedFormat;\\n      }\\n    }\\n    function convertRGBtoRGBA(levelBuffer) {\\n      const pixelCount = levelBuffer.byteLength / 3;\\n      const levelBufferWithAlpha = new Uint32Array(pixelCount);\\n      for (let i = 0; i < pixelCount; ++i) {\\n        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;\\n      }\\n      return new Uint8Array(levelBufferWithAlpha.buffer);\\n    }\\n\\n    function createLevelBuffersFromKTX(ktxTexture) {\\n      const levelBuffers = [];\\n      for (let i = 0; i < ktxTexture.numLevels; i++) {\\n        const imageData = ktxTexture.getImageData(i, 0, 0);\\n        const levelBuffer = new Uint8Array(imageData.byteLength);\\n        levelBuffer.set(imageData);\\n        levelBuffers.push(levelBuffer);\\n      }\\n      return levelBuffers;\\n    }\\n\\n    const glFormatToGPUFormatMap = {\\n      6408: \\\"rgba8unorm\\\",\\n      32856: \\\"bgra8unorm\\\",\\n      //\\n      32857: \\\"rgb10a2unorm\\\",\\n      33189: \\\"depth16unorm\\\",\\n      33190: \\\"depth24plus\\\",\\n      33321: \\\"r8unorm\\\",\\n      33323: \\\"rg8unorm\\\",\\n      33325: \\\"r16float\\\",\\n      33326: \\\"r32float\\\",\\n      33327: \\\"rg16float\\\",\\n      33328: \\\"rg32float\\\",\\n      33329: \\\"r8sint\\\",\\n      33330: \\\"r8uint\\\",\\n      33331: \\\"r16sint\\\",\\n      33332: \\\"r16uint\\\",\\n      33333: \\\"r32sint\\\",\\n      33334: \\\"r32uint\\\",\\n      33335: \\\"rg8sint\\\",\\n      33336: \\\"rg8uint\\\",\\n      33337: \\\"rg16sint\\\",\\n      33338: \\\"rg16uint\\\",\\n      33339: \\\"rg32sint\\\",\\n      33340: \\\"rg32uint\\\",\\n      33778: \\\"bc2-rgba-unorm\\\",\\n      33779: \\\"bc3-rgba-unorm\\\",\\n      34836: \\\"rgba32float\\\",\\n      34842: \\\"rgba16float\\\",\\n      35056: \\\"depth24plus-stencil8\\\",\\n      35898: \\\"rg11b10ufloat\\\",\\n      35901: \\\"rgb9e5ufloat\\\",\\n      35907: \\\"rgba8unorm-srgb\\\",\\n      // bgra8unorm-srgb\\n      36012: \\\"depth32float\\\",\\n      36013: \\\"depth32float-stencil8\\\",\\n      36168: \\\"stencil8\\\",\\n      36208: \\\"rgba32uint\\\",\\n      36214: \\\"rgba16uint\\\",\\n      36220: \\\"rgba8uint\\\",\\n      36226: \\\"rgba32sint\\\",\\n      36232: \\\"rgba16sint\\\",\\n      36238: \\\"rgba8sint\\\",\\n      36492: \\\"bc7-rgba-unorm\\\",\\n      36756: \\\"r8snorm\\\",\\n      36757: \\\"rg8snorm\\\",\\n      36759: \\\"rgba8snorm\\\",\\n      37496: \\\"etc2-rgba8unorm\\\",\\n      37808: \\\"astc-4x4-unorm\\\"\\n    };\\n    function glFormatToGPUFormat(glInternalFormat) {\\n      const format = glFormatToGPUFormatMap[glInternalFormat];\\n      if (format) {\\n        return format;\\n      }\\n      throw new Error(`Unsupported glInternalFormat: ${glInternalFormat}`);\\n    }\\n\\n    const vkFormatToGPUFormatMap = {\\n      23: \\\"rgb8unorm\\\",\\n      // VK_FORMAT_R8G8B8_UNORM\\n      37: \\\"rgba8unorm\\\",\\n      // VK_FORMAT_R8G8B8A8_UNORM\\n      43: \\\"rgba8unorm-srgb\\\"\\n      // VK_FORMAT_R8G8B8A8_SRGB\\n      // TODO add more!\\n    };\\n    function vkFormatToGPUFormat(vkFormat) {\\n      const format = vkFormatToGPUFormatMap[vkFormat];\\n      if (format) {\\n        return format;\\n      }\\n      throw new Error(`Unsupported VkFormat: ${vkFormat}`);\\n    }\\n\\n    function getTextureFormatFromKTXTexture(ktxTexture) {\\n      if (ktxTexture.classId === 2) {\\n        return vkFormatToGPUFormat(ktxTexture.vkFormat);\\n      }\\n      return glFormatToGPUFormat(ktxTexture.glInternalformat);\\n    }\\n\\n    const gpuFormatToBasisTranscoderFormatMap = {\\n      \\\"bc3-rgba-unorm\\\": \\\"BC3_RGBA\\\",\\n      \\\"bc7-rgba-unorm\\\": \\\"BC7_M5_RGBA\\\",\\n      \\\"etc2-rgba8unorm\\\": \\\"ETC2_RGBA\\\",\\n      \\\"astc-4x4-unorm\\\": \\\"ASTC_4x4_RGBA\\\",\\n      // Uncompressed\\n      rgba8unorm: \\\"RGBA32\\\",\\n      rg11b10ufloat: \\\"R11F_G11F_B10F\\\"\\n    };\\n    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {\\n      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];\\n      if (format) {\\n        return format;\\n      }\\n      throw new Error(`Unsupported transcoderFormat: ${transcoderFormat}`);\\n    }\\n\\n    const settings = {\\n      jsUrl: \\\"\\\",\\n      wasmUrl: \\\"\\\"\\n    };\\n    let basisTranscoderFormat;\\n    let basisTranscodedTextureFormat;\\n    let ktxPromise;\\n    async function getKTX() {\\n      if (!ktxPromise) {\\n        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;\\n        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;\\n        importScripts(absoluteJsUrl);\\n        ktxPromise = new Promise((resolve) => {\\n          LIBKTX({\\n            locateFile: (_file) => absoluteWasmUrl\\n          }).then((libktx) => {\\n            resolve(libktx);\\n          });\\n        });\\n      }\\n      return ktxPromise;\\n    }\\n    async function fetchKTXTexture(url, ktx) {\\n      const ktx2Response = await fetch(url);\\n      if (ktx2Response.ok) {\\n        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();\\n        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));\\n      }\\n      throw new Error(`Failed to load KTX(2) texture: ${url}`);\\n    }\\n    const preferredTranscodedFormat = [\\n      \\\"bc7-rgba-unorm\\\",\\n      \\\"astc-4x4-unorm\\\",\\n      \\\"etc2-rgba8unorm\\\",\\n      \\\"bc3-rgba-unorm\\\",\\n      \\\"rgba8unorm\\\"\\n    ];\\n    async function load(url) {\\n      const ktx = await getKTX();\\n      const ktxTexture = await fetchKTXTexture(url, ktx);\\n      let format;\\n      if (ktxTexture.needsTranscoding) {\\n        format = basisTranscodedTextureFormat;\\n        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];\\n        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);\\n        if (result !== ktx.ErrorCode.SUCCESS) {\\n          throw new Error(\\\"Unable to transcode basis texture.\\\");\\n        }\\n      } else {\\n        format = getTextureFormatFromKTXTexture(ktxTexture);\\n      }\\n      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);\\n      const textureOptions = {\\n        width: ktxTexture.baseWidth,\\n        height: ktxTexture.baseHeight,\\n        format,\\n        mipLevelCount: ktxTexture.numLevels,\\n        resource: levelBuffers,\\n        alphaMode: \\\"no-premultiply-alpha\\\"\\n      };\\n      convertFormatIfRequired(textureOptions);\\n      return textureOptions;\\n    }\\n    async function init(jsUrl, wasmUrl, supportedTextures) {\\n      if (jsUrl)\\n        settings.jsUrl = jsUrl;\\n      if (wasmUrl)\\n        settings.wasmUrl = wasmUrl;\\n      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];\\n      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);\\n      await getKTX();\\n    }\\n    const messageHandlers = {\\n      init: async (data) => {\\n        const { jsUrl, wasmUrl, supportedTextures } = data;\\n        await init(jsUrl, wasmUrl, supportedTextures);\\n      },\\n      load: async (data) => {\\n        try {\\n          const textureOptions = await load(data.url);\\n          return {\\n            type: \\\"load\\\",\\n            url: data.url,\\n            success: true,\\n            textureOptions,\\n            transferables: textureOptions.resource?.map((arr) => arr.buffer)\\n          };\\n        } catch (e) {\\n          throw e;\\n        }\\n      }\\n    };\\n    self.onmessage = async (messageEvent) => {\\n      const message = messageEvent.data;\\n      const response = await messageHandlers[message.type]?.(message);\\n      if (response) {\\n        self.postMessage(response, response.transferables);\\n      }\\n    };\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=ktx.worker.mjs.map\n", "export const ktxTranscoderUrls = {\n    jsUrl: 'https://files.pixijs.download/transcoders/ktx/libktx.js',\n    wasmUrl: 'https://files.pixijs.download/transcoders/ktx/libktx.wasm'\n};\n\nexport function setKTXTranscoderPath(config: Partial<typeof ktxTranscoderUrls>)\n{\n    Object.assign(ktxTranscoderUrls, config);\n}\n", "import KTXWorker from 'worker:./ktx.worker.ts';\nimport { ktxTranscoderUrls } from '../utils/setKTXTranscoderPath';\n\nimport type { TEXTURE_FORMATS } from '../../../rendering/renderers/shared/texture/const';\nimport type { TextureSourceOptions } from '../../../rendering/renderers/shared/texture/sources/TextureSource';\n\nlet ktxWorker: Worker;\nconst urlHash: Record<string, (value: any) => void> = {};\n\nfunction getKTX2Worker(supportedTextures: TEXTURE_FORMATS[]): Worker\n{\n    if (!ktxWorker)\n    {\n        ktxWorker = new KTXWorker().worker;\n\n        ktxWorker.onmessage = (messageEvent) =>\n        {\n            const { success, url, textureOptions } = messageEvent.data;\n\n            if (!success)\n            {\n                console.warn('Failed to load KTX texture', url);\n            }\n\n            urlHash[url](textureOptions);\n        };\n\n        ktxWorker.postMessage({\n            type: 'init',\n            jsUrl: ktxTranscoderUrls.jsUrl,\n            wasmUrl: ktxTranscoderUrls.wasmUrl,\n            supportedTextures\n        });\n    }\n\n    return ktxWorker;\n}\n\nexport function loadKTX2onWorker(\n    url: string,\n    supportedTextures: TEXTURE_FORMATS[]\n): Promise<TextureSourceOptions>\n{\n    const ktxWorker = getKTX2Worker(supportedTextures);\n\n    return new Promise((resolve) =>\n    {\n        urlHash[url] = resolve;\n\n        ktxWorker.postMessage({ type: 'load', url });\n    });\n}\n", "import { LoaderParserPriority } from '../../assets/loader/parsers/LoaderParser';\nimport { createTexture } from '../../assets/loader/parsers/textures/utils/createTexture';\nimport { checkExtension } from '../../assets/utils/checkExtension';\nimport { ExtensionType } from '../../extensions/Extensions';\nimport { CompressedSource } from '../../rendering/renderers/shared/texture/sources/CompressedSource';\nimport { getSupportedTextureFormats } from '../../rendering/renderers/shared/texture/utils/getSupportedTextureFormats';\nimport { loadKTX2onWorker } from './worker/loadKTX2onWorker';\n\nimport type { Loader } from '../../assets/loader/Loader';\nimport type { LoaderParser } from '../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../assets/types';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\n\n/** Loads KTX2 textures! */\nexport const loadKTX2 = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadKTX2',\n    },\n\n    name: 'loadKTX2',\n\n    test(url: string): boolean\n    {\n        return checkExtension(url, '.ktx2');\n    },\n\n    async load(url: string, _asset: ResolvedAsset, loader: Loader): Promise<Texture | Texture[]>\n    {\n        const supportedTextures = await getSupportedTextureFormats();\n\n        const textureOptions = await loadKTX2onWorker(url, supportedTextures);\n\n        const compressedTextureSource = new CompressedSource(textureOptions);\n\n        return createTexture(compressedTextureSource, loader, url);\n    },\n\n    async unload(texture: Texture | Texture[]): Promise<void>\n    {\n        if (Array.isArray(texture))\n        {\n            texture.forEach((t) => t.destroy(true));\n        }\n        else\n        {\n            texture.destroy(true);\n        }\n    }\n\n} satisfies LoaderParser<Texture | Texture[], TextureSourceOptions>;\n\n", "import { Resolver } from '../../assets/resolver/Resolver';\nimport { checkExtension } from '../../assets/utils/checkExtension';\nimport { ExtensionType } from '../../extensions/Extensions';\n\nimport type { ResolveURLParser } from '../../assets/resolver/types';\n\nexport const validFormats = ['basis', 'bc7', 'bc6h', 'astc', 'etc2', 'bc5', 'bc4', 'bc3', 'bc2', 'bc1', 'eac'];\n\nexport const resolveCompressedTextureUrl = {\n    extension: ExtensionType.ResolveParser,\n    test: (value: string) =>\n        checkExtension(value, ['.ktx', '.ktx2', '.dds']),\n    parse: (value: string) =>\n    {\n        let format;\n\n        const splitValue = value.split('.');\n\n        if (splitValue.length > 2)\n        {\n            const newFormat = splitValue[splitValue.length - 2];\n\n            if (validFormats.includes(newFormat))\n            {\n                format = newFormat;\n            }\n        }\n        else\n        {\n            format = splitValue[splitValue.length - 1];\n        }\n\n        return {\n            resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n            format,\n            src: value,\n        };\n    }\n} satisfies ResolveURLParser;\n", "import { ExtensionType } from '../../extensions/Extensions';\n// eslint-disable-next-line max-len\nimport { getSupportedCompressedTextureFormats } from '../../rendering/renderers/shared/texture/utils/getSupportedCompressedTextureFormats';\nimport { isWebGLSupported } from '../../utils/browser/isWebGLSupported';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported';\nimport { validFormats } from './resolveCompressedTextureUrl';\n\nimport type { FormatDetectionParser } from '../../assets/detections/types';\nimport type { TEXTURE_FORMATS } from '../../rendering/renderers/shared/texture/const';\n\nlet compressedTextureExtensions: string[];\n\nexport const detectCompressed = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 2,\n    },\n    test: async (): Promise<boolean> =>\n    {\n        if (await isWebGPUSupported()) return true;\n        if (isWebGLSupported()) return true;\n\n        return false;\n    },\n    add: async (formats: string[]): Promise<string[]> =>\n    {\n        const supportedCompressedTextureFormats = await getSupportedCompressedTextureFormats();\n\n        compressedTextureExtensions = extractExtensionsForCompressedTextureFormats(supportedCompressedTextureFormats);\n\n        return [...compressedTextureExtensions, ...formats];\n    },\n    remove: async (formats: string[]): Promise<string[]> =>\n    {\n        if (compressedTextureExtensions)\n        {\n            return formats.filter((f) => !(f in compressedTextureExtensions));\n        }\n\n        return formats;\n    },\n} as FormatDetectionParser;\n\nfunction extractExtensionsForCompressedTextureFormats(formats: TEXTURE_FORMATS[]): string[]\n{\n    const extensions: string[] = ['basis'];\n\n    const dupeMap: Record<string, boolean> = {};\n\n    formats.forEach((format) =>\n    {\n        const extension = format.split('-')[0];\n\n        if (extension && !dupeMap[extension])\n        {\n            dupeMap[extension] = true;\n            extensions.push(extension);\n        }\n    });\n\n    // sort extensions by priority\n    extensions.sort((a, b) =>\n    {\n        const aIndex = validFormats.indexOf(a);\n        const bIndex = validFormats.indexOf(b);\n\n        if (aIndex === -1)\n        {\n            return 1;\n        }\n        if (bIndex === -1)\n        {\n            return -1;\n        }\n\n        return aIndex - bIndex;\n    });\n\n    return extensions;\n}\n", "import { Bounds } from '../scene/container/bounds/Bounds';\nimport { getGlobalBounds } from '../scene/container/bounds/getGlobalBounds';\n\nimport type { Container } from '../scene/container/Container';\n\nconst tempBounds = new Bounds();\n\ntype RectangleLike = {x: number, y: number, width: number, height: number};\n\n/**\n * The Culler class is responsible for managing and culling containers.\n *\n *\n * Culled containers will not be rendered, and their children will not be processed. This can be useful for\n * performance optimization when dealing with large scenes.\n * @example\n * import { Culler, Container } from 'pixi.js';\n *\n * const culler = new Culler();\n * const stage = new Container();\n *\n * ... set up stage ...\n *\n * culler.cull(stage, { x: 0, y: 0, width: 800, height: 600 });\n * renderer.render(stage);\n * @memberof scene\n */\nexport class Culler\n{\n    /**\n     * Culls the children of a specific container based on the given view. This will also cull items that are not\n     * being explicitly managed by the culler.\n     * @param container - The container to cull.\n     * @param view - The view rectangle.\n     * @param skipUpdateTransform - Whether to skip updating the transform.\n     */\n    public cull(container: Container, view: RectangleLike, skipUpdateTransform = true)\n    {\n        this._cullRecursive(container, view, skipUpdateTransform);\n    }\n\n    private _cullRecursive(container: Container, view: RectangleLike, skipUpdateTransform = true)\n    {\n        if (container.cullable && container.measurable && container.includeInBuild)\n        {\n            const bounds = container.cullArea ?? getGlobalBounds(container, skipUpdateTransform, tempBounds);\n\n            // check view intersection..\n            container.culled = bounds.x >= view.x + view.width\n                || bounds.y >= view.y + view.height\n                || bounds.x + bounds.width <= view.x\n                || bounds.y + bounds.height <= view.y;\n        }\n        else\n        {\n            container.culled = false;\n        }\n\n        // dont process children if not needed\n        if (\n            !container.cullableChildren\n            || container.culled\n            || !container.renderable\n            || !container.measurable\n            || !container.includeInBuild\n        ) return;\n\n        for (let i = 0; i < container.children.length; i++)\n        {\n            this._cullRecursive(container.children[i], view, skipUpdateTransform);\n        }\n    }\n\n    /** A shared instance of the Culler class. */\n    public static shared = new Culler();\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { Culler } from './Culler';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\nimport type { Renderer } from '../rendering/renderers/types';\nimport type { Container } from '../scene/container/Container';\n\n/**\n * An {@link app.Application} plugin that will automatically cull your stage using the renderers screen size.\n * @example\n * import { extensions, CullerPlugin } from 'pixi.js';\n *\n * extensions.add(CullerPlugin);\n * @memberof app\n * @see {@link scene.Culler}\n */\nexport class CullerPlugin\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        priority: 10,\n        type: ExtensionType.Application,\n        name: 'culler',\n    };\n\n    public static renderer: Renderer;\n    public static stage: Container;\n    public static render: () => void;\n    private static _renderRef: () => void;\n\n    public static init(): void\n    {\n        this._renderRef = this.render.bind(this);\n\n        this.render = (): void =>\n        {\n            Culler.shared.cull(this.stage, this.renderer.screen);\n            this.renderer.render({ container: this.stage });\n        };\n    }\n\n    public static destroy(): void\n    {\n        this.render = this._renderRef;\n    }\n}\n", "var vertex = \"in vec2 aPosition;\\nout vec2 vTextureCoord;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\n\\nvec4 filterVertexPosition( void )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n    \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord( void )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition();\\n    vTextureCoord = filterTextureCoord();\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=defaultFilter.vert.mjs.map\n", "var fragment = \"\\nin vec2 vTextureCoord;\\n\\nout vec4 finalColor;\\n\\nuniform float uAlpha;\\nuniform sampler2D uTexture;\\n\\nvoid main()\\n{\\n    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=alpha.frag.mjs.map\n", "var source = \"struct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct AlphaUniforms {\\n  uAlpha:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition)\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n \\n    var sample = textureSample(uTexture, uSampler, uv);\\n    \\n    return sample * alphaUniforms.uAlpha;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=alpha.wgsl.mjs.map\n", "import { GlProgram } from '../../../rendering/renderers/gl/shader/GlProgram';\nimport { GpuProgram } from '../../../rendering/renderers/gpu/shader/GpuProgram';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup';\nimport { Filter } from '../../Filter';\nimport vertex from '../defaultFilter.vert';\nimport fragment from './alpha.frag';\nimport source from './alpha.wgsl';\n\nimport type { FilterOptions } from '../../Filter';\n\n/**\n * Options for AlphaFilter\n * @memberof filters\n */\nexport interface AlphaFilterOptions extends FilterOptions\n{\n    /**\n     * Amount of alpha from 0 to 1, where 0 is transparent\n     * @default 1\n     */\n    alpha: number;\n}\n\n/**\n * Simplest filter - applies alpha.\n *\n * Use this instead of Container's alpha property to avoid visual layering of individual elements.\n * AlphaFilter applies alpha evenly across the entire display object and any opaque elements it contains.\n * If elements are not opaque, they will blend with each other anyway.\n *\n * Very handy if you want to use common features of all filters:\n *\n * 1. Assign a blendMode to this filter, blend all elements inside display object with background.\n *\n * 2. To use clipping in display coordinates, assign a filterArea to the same container that has this filter.\n * @memberof filters\n */\nexport class AlphaFilter extends Filter\n{\n    /** Default filter options */\n    public static readonly defaultOptions: AlphaFilterOptions = {\n        /** Amount of alpha from 0 to 1, where 0 is transparent */\n        alpha: 1,\n    };\n\n    constructor(options?: AlphaFilterOptions)\n    {\n        options = { ...AlphaFilter.defaultOptions, ...options };\n\n        const gpuProgram = GpuProgram.from({\n            vertex: {\n                source,\n                entryPoint: 'mainVertex',\n            },\n            fragment: {\n                source,\n                entryPoint: 'mainFragment',\n            },\n        });\n\n        const glProgram = GlProgram.from({\n            vertex,\n            fragment,\n            name: 'alpha-filter'\n        });\n\n        const { alpha, ...rest } = options;\n\n        const alphaUniforms = new UniformGroup({\n            uAlpha: { value: alpha, type: 'f32' },\n        });\n\n        super({\n            ...rest,\n            gpuProgram,\n            glProgram,\n            resources: {\n                alphaUniforms\n            },\n        });\n    }\n\n    /**\n     * Coefficient for alpha multiplication\n     * @default 1\n     */\n    get alpha(): number { return this.resources.alphaUniforms.uniforms.uAlpha; }\n    set alpha(value: number) { this.resources.alphaUniforms.uniforms.uAlpha = value; }\n}\n", "export interface IGAUSSIAN_VALUES\n{\n    [x: number]: number[];\n}\n\nexport const GAUSSIAN_VALUES: IGAUSSIAN_VALUES = {\n    5: [0.153388, 0.221461, 0.250301],\n    7: [0.071303, 0.131514, 0.189879, 0.214607],\n    9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],\n    11: [0.0093, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],\n    13: [0.002406, 0.009255, 0.027867, 0.065666, 0.121117, 0.174868, 0.197641],\n    15: [0.000489, 0.002403, 0.009246, 0.02784, 0.065602, 0.120999, 0.174697, 0.197448],\n};\n", "import { GAUSSIAN_VALUES } from '../const';\n\nconst fragTemplate = [\n    'in vec2 vBlurTexCoords[%size%];',\n    'uniform sampler2D uTexture;',\n    'out vec4 finalColor;',\n\n    'void main(void)',\n    '{',\n    '    finalColor = vec4(0.0);',\n    '    %blur%',\n    '}',\n\n].join('\\n');\n\nexport function generateBlurFragSource(kernelSize: number): string\n{\n    const kernel = GAUSSIAN_VALUES[kernelSize];\n    const halfLength = kernel.length;\n\n    let fragSource = fragTemplate;\n\n    let blurLoop = '';\n    const template = 'finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;';\n    let value: number;\n\n    for (let i = 0; i < kernelSize; i++)\n    {\n        let blur = template.replace('%index%', i.toString());\n\n        value = i;\n\n        if (i >= halfLength)\n        {\n            value = kernelSize - i - 1;\n        }\n\n        blur = blur.replace('%value%', kernel[value].toString());\n\n        blurLoop += blur;\n        blurLoop += '\\n';\n    }\n\n    fragSource = fragSource.replace('%blur%', blurLoop);\n    fragSource = fragSource.replace('%size%', kernelSize.toString());\n\n    return fragSource;\n}\n", "const vertTemplate = `\n    in vec2 aPosition;\n\n    uniform float uStrength;\n\n    out vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 uInputSize;\n    uniform vec4 uOutputFrame;\n    uniform vec4 uOutputTexture;\n\n    vec4 filterVertexPosition( void )\n{\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\n    \n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\n    vec2 filterTextureCoord( void )\n    {\n        return aPosition * (uOutputFrame.zw * uInputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        float pixelStrength = uInputSize.%dimension% * uStrength;\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }`;\n\nexport function generateBlurVertSource(kernelSize: number, x: boolean): string\n{\n    const halfLength = Math.ceil(kernelSize / 2);\n\n    let vertSource = vertTemplate;\n\n    let blurLoop = '';\n    let template;\n\n    if (x)\n    {\n        template = 'vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);';\n    }\n    else\n    {\n        template = 'vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);';\n    }\n\n    for (let i = 0; i < kernelSize; i++)\n    {\n        let blur = template.replace('%index%', i.toString());\n\n        blur = blur.replace('%sampleIndex%', `${i - (halfLength - 1)}.0`);\n\n        blurLoop += blur;\n        blurLoop += '\\n';\n    }\n\n    vertSource = vertSource.replace('%blur%', blurLoop);\n    vertSource = vertSource.replace('%size%', kernelSize.toString());\n    vertSource = vertSource.replace('%dimension%', x ? 'z' : 'w');\n\n    return vertSource;\n}\n", "import { GlProgram } from '../../../../rendering/renderers/gl/shader/GlProgram';\nimport { generateBlurFragSource } from './generateBlurFragSource';\nimport { generateBlurVertSource } from './generateBlurVertSource';\n\nexport function generateBlurGlProgram(horizontal: boolean, kernelSize: number)\n{\n    const vertex = generateBlurVertSource(kernelSize, horizontal);\n    const fragment = generateBlurFragSource(kernelSize);\n\n    return GlProgram.from({\n        vertex,\n        fragment,\n        name: `blur-${horizontal ? 'horizontal' : 'vertical'}-pass-filter`\n    });\n}\n", "var source = \"\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct BlurUniforms {\\n  uStrength:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;\\n\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    %blur-struct%\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n\\n\\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n\\n  let filteredCord = filterTextureCoord(aPosition);\\n\\n  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;\\n\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n    %blur-vertex-out%\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  %blur-fragment-in%\\n) -> @location(0) vec4<f32> {\\n\\n    var   finalColor = vec4(0.0);\\n\\n    %blur-sampling%\\n\\n    return finalColor;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=blur-template.wgsl.mjs.map\n", "import { GpuProgram } from '../../../../rendering/renderers/gpu/shader/GpuProgram';\nimport { GAUSSIAN_VALUES } from '../const';\nimport source from './blur-template.wgsl';\n\nexport function generateBlurProgram(horizontal: boolean, kernelSize: number)\n{\n    const kernel = GAUSSIAN_VALUES[kernelSize];\n    const halfLength = kernel.length;\n\n    const blurStructSource: string[] = [];\n    const blurOutSource: string[] = [];\n    const blurSamplingSource: string[] = [];\n\n    for (let i = 0; i < kernelSize; i++)\n    {\n        blurStructSource[i] = `@location(${i}) offset${i}: vec2<f32>,`;\n\n        if (horizontal)\n        {\n            blurOutSource[i] = `filteredCord + vec2(${i - halfLength + 1} * pixelStrength, 0.0),`;\n        }\n        else\n        {\n            blurOutSource[i] = `filteredCord + vec2(0.0, ${i - halfLength + 1} * pixelStrength),`;\n        }\n\n        const kernelIndex = i < halfLength ? i : (kernelSize - i - 1);\n        const kernelValue = kernel[kernelIndex].toString();\n\n        blurSamplingSource[i] = `finalColor += textureSample(uTexture, uSampler, offset${i}) * ${kernelValue};`;\n    }\n\n    const blurStruct = blurStructSource.join('\\n');\n    const blurOut = blurOutSource.join('\\n');\n    const blurSampling = blurSamplingSource.join('\\n');\n\n    const finalSource = source\n        .replace('%blur-struct%', blurStruct)\n        .replace('%blur-vertex-out%', blurOut)\n        .replace('%blur-fragment-in%', blurStruct)\n        .replace('%blur-sampling%', blurSampling)\n        .replace('%dimension%', horizontal ? 'z' : 'w');\n\n    return GpuProgram.from({\n        vertex: {\n            source: finalSource,\n            entryPoint: 'mainVertex',\n        },\n        fragment: {\n            source: finalSource,\n            entryPoint: 'mainFragment',\n        },\n    });\n}\n\n", "import { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool';\nimport { RendererType } from '../../../rendering/renderers/types';\nimport { Filter } from '../../Filter';\nimport { generateBlurGlProgram } from './gl/generateBlurGlProgram';\nimport { generateBlurProgram } from './gpu/generateBlurProgram';\n\nimport type { RenderSurface } from '../../../rendering/renderers/shared/renderTarget/RenderTargetSystem';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { FilterSystem } from '../../FilterSystem';\nimport type { BlurFilterOptions } from './BlurFilter';\n\n/**\n * Options for BlurFilterPass\n * @memberof filters\n */\nexport interface BlurFilterPassOptions extends BlurFilterOptions\n{\n    /** Do pass along the x-axis (`true`) or y-axis (`false`). */\n    horizontal: boolean;\n}\n\n/**\n * The BlurFilterPass applies a horizontal or vertical Gaussian blur to an object.\n * @memberof filters\n */\nexport class BlurFilterPass extends Filter\n{\n    /** Default blur filter pass options */\n    public static defaultOptions: Partial<BlurFilterPassOptions> = {\n        /** The strength of the blur filter. */\n        strength: 8,\n        /** The quality of the blur filter. */\n        quality: 4,\n        /** The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15. */\n        kernelSize: 5,\n    };\n\n    /** Do pass along the x-axis (`true`) or y-axis (`false`). */\n    public horizontal: boolean;\n    /** The number of passes to run the filter. */\n    public passes!: number;\n    /** The strength of the blur filter. */\n    public strength!: number;\n\n    private _quality: number;\n    private readonly _uniforms: any;\n\n    /**\n     * @param options\n     * @param options.horizontal - Do pass along the x-axis (`true`) or y-axis (`false`).\n     * @param options.strength - The strength of the blur filter.\n     * @param options.quality - The quality of the blur filter.\n     * @param options.kernelSize - The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15.\n     */\n    constructor(options: BlurFilterPassOptions)\n    {\n        options = { ...BlurFilterPass.defaultOptions, ...options };\n\n        const glProgram = generateBlurGlProgram(options.horizontal, options.kernelSize);\n        const gpuProgram = generateBlurProgram(options.horizontal, options.kernelSize);\n\n        super({\n            glProgram,\n            gpuProgram,\n            resources: {\n                blurUniforms: {\n                    uStrength: { value: 0, type: 'f32' },\n                }\n            },\n            ...options\n        });\n\n        this.horizontal = options.horizontal;\n\n        this._quality = 0;\n\n        this.quality = options.quality;\n\n        this.blur = options.strength;\n\n        this._uniforms = this.resources.blurUniforms.uniforms;\n    }\n\n    /**\n     * Applies the filter.\n     * @param filterManager - The manager.\n     * @param input - The input target.\n     * @param output - The output target.\n     * @param clearMode - How to clear\n     */\n    public apply(\n        filterManager: FilterSystem,\n        input: Texture,\n        output: RenderSurface,\n        clearMode: boolean\n    ): void\n    {\n        this._uniforms.uStrength = this.strength / this.passes;\n\n        if (this.passes === 1)\n        {\n            filterManager.applyFilter(this, input, output, clearMode);\n        }\n        else\n        {\n            const tempTexture = TexturePool.getSameSizeTexture(input);\n\n            let flip = input;\n            let flop = tempTexture;\n\n            this._state.blend = false;\n\n            const shouldClear = filterManager.renderer.type === RendererType.WEBGPU;\n\n            for (let i = 0; i < this.passes - 1; i++)\n            {\n                filterManager.applyFilter(this, flip, flop, i === 0 ? true : shouldClear);\n\n                const temp = flop;\n\n                flop = flip;\n                flip = temp;\n            }\n\n            this._state.blend = true;\n            filterManager.applyFilter(this, flip, output, clearMode);\n            TexturePool.returnTexture(tempTexture);\n        }\n    }\n\n    /**\n     * Sets the strength of both the blur.\n     * @default 16\n     */\n    get blur(): number\n    {\n        return this.strength;\n    }\n\n    set blur(value: number)\n    {\n        this.padding = 1 + (Math.abs(value) * 2);\n        this.strength = value;\n    }\n\n    /**\n     * Sets the quality of the blur by modifying the number of passes. More passes means higher\n     * quality blurring but the lower the performance.\n     * @default 4\n     */\n    get quality(): number\n    {\n        return this._quality;\n    }\n\n    set quality(value: number)\n    {\n        this._quality = value;\n        this.passes = value;\n    }\n}\n", "import { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool';\nimport { RendererType } from '../../../rendering/renderers/types';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\nimport { Filter } from '../../Filter';\nimport { BlurFilterPass } from './BlurFilterPass';\n\nimport type { RenderSurface } from '../../../rendering/renderers/shared/renderTarget/RenderTargetSystem';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { FilterOptions } from '../../Filter';\nimport type { FilterSystem } from '../../FilterSystem';\n\n/**\n * Options for BlurFilter\n * @memberof filters\n */\nexport interface BlurFilterOptions extends FilterOptions\n{\n    /**\n     * The strength of the blur filter.\n     * @default 8\n     */\n    strength?: number;\n    /**\n     * The horizontal strength of the blur.\n     * @default 8\n     */\n    strengthX?: number;\n    /**\n     * The vertical strength of the blur.\n     * @default 8\n     */\n    strengthY?: number;\n    /**\n     * The quality of the blur filter.\n     * @default 4\n     */\n    quality?: number;\n    /**\n     * The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15.\n     * @default 5\n     */\n    kernelSize?: number;\n}\n\n/**\n * The BlurFilter applies a Gaussian blur to an object.\n *\n * The strength of the blur can be set for the x-axis and y-axis separately.\n * @memberof filters\n */\nexport class BlurFilter extends Filter\n{\n    /** Default blur filter options */\n    public static defaultOptions: Partial<BlurFilterOptions> = {\n        /** The strength of the blur filter. */\n        strength: 8,\n        /** The quality of the blur filter. */\n        quality: 4,\n        /** The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15. */\n        kernelSize: 5,\n    };\n\n    /** The horizontal blur filter */\n    public blurXFilter: BlurFilterPass;\n    /** The vertical blur filter */\n    public blurYFilter: BlurFilterPass;\n\n    private _repeatEdgePixels = false;\n\n    /**\n     * @param {filters.BlurFilterOptions} options - The options of the blur filter.\n     */\n    constructor(options?: BlurFilterOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(strength?: number, quality?: number, resolution?: number | null, kernelSize?: number);\n    constructor(...args: [BlurFilterOptions?] | [number?, number?, number?, number?])\n    {\n        let options = args[0] ?? {};\n\n        // if options is a number)\n        if (typeof options === 'number')\n        {\n            // #if _DEBUG\n            // eslint-disable-next-line max-len\n            deprecation(v8_0_0, 'BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }');\n            // #endif\n\n            options = { strength: options };\n\n            if (args[1] !== undefined)options.quality = args[1];\n            if (args[2] !== undefined)options.resolution = args[2] || 'inherit';\n            if (args[3] !== undefined)options.kernelSize = args[3];\n        }\n\n        options = { ...BlurFilterPass.defaultOptions, ...options };\n\n        const { strength, strengthX, strengthY, quality, ...rest } = options;\n\n        super({\n            ...rest,\n            compatibleRenderers: RendererType.BOTH,\n            resources: {}\n        });\n\n        this.blurXFilter = new BlurFilterPass({ horizontal: true, ...options });\n        this.blurYFilter = new BlurFilterPass({ horizontal: false, ...options });\n\n        this.quality = quality;\n        this.strengthX = strengthX ?? strength;\n        this.strengthY = strengthY ?? strength;\n        this.repeatEdgePixels = false;\n    }\n\n    /**\n     * Applies the filter.\n     * @param filterManager - The manager.\n     * @param input - The input target.\n     * @param output - The output target.\n     * @param clearMode - How to clear\n     */\n    public apply(\n        filterManager: FilterSystem,\n        input: Texture,\n        output: RenderSurface,\n        clearMode: boolean\n    ): void\n    {\n        const xStrength = Math.abs(this.blurXFilter.strength);\n        const yStrength = Math.abs(this.blurYFilter.strength);\n\n        if (xStrength && yStrength)\n        {\n            const tempTexture = TexturePool.getSameSizeTexture(input);\n\n            this.blurXFilter.blendMode = 'normal';\n            this.blurXFilter.apply(filterManager, input, tempTexture, true);\n            this.blurYFilter.blendMode = this.blendMode;\n            this.blurYFilter.apply(filterManager, tempTexture, output, clearMode);\n\n            TexturePool.returnTexture(tempTexture);\n        }\n        else if (yStrength)\n        {\n            this.blurYFilter.blendMode = this.blendMode;\n            this.blurYFilter.apply(filterManager, input, output, clearMode);\n        }\n        else\n        {\n            this.blurXFilter.blendMode = this.blendMode;\n            this.blurXFilter.apply(filterManager, input, output, clearMode);\n        }\n    }\n\n    protected updatePadding(): void\n    {\n        if (this._repeatEdgePixels)\n        {\n            this.padding = 0;\n        }\n        else\n        {\n            this.padding = Math.max(Math.abs(this.blurXFilter.blur), Math.abs(this.blurYFilter.blur)) * 2;\n        }\n    }\n\n    /**\n     * Sets the strength of both the blurX and blurY properties simultaneously\n     * @default 8\n     */\n    get strength(): number\n    {\n        if (this.strengthX !== this.strengthY)\n        {\n            throw new Error('BlurFilter\\'s strengthX and strengthY are different');\n        }\n\n        return this.strengthX;\n    }\n\n    set strength(value: number)\n    {\n        this.blurXFilter.blur = this.blurYFilter.blur = value;\n        this.updatePadding();\n    }\n\n    /**\n     * Sets the number of passes for blur. More passes means higher quality bluring.\n     * @default 1\n     */\n    get quality(): number\n    {\n        return this.blurXFilter.quality;\n    }\n\n    set quality(value: number)\n    {\n        this.blurXFilter.quality = this.blurYFilter.quality = value;\n    }\n\n    /**\n     * Sets the strength of horizontal blur\n     * @default 8\n     */\n    get strengthX(): number\n    {\n        return this.blurXFilter.blur;\n    }\n\n    set strengthX(value: number)\n    {\n        this.blurXFilter.blur = value;\n        this.updatePadding();\n    }\n\n    /**\n     * Sets the strength of the vertical blur\n     * @default 8\n     */\n    get strengthY(): number\n    {\n        return this.blurYFilter.blur;\n    }\n\n    set strengthY(value: number)\n    {\n        this.blurYFilter.blur = value;\n        this.updatePadding();\n    }\n\n    /**\n     * Sets the strength of both the blurX and blurY properties simultaneously\n     * @default 2\n     * @deprecated since 8.3.0\n     * @see BlurFilter.strength\n     */\n    get blur(): number\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blur is deprecated, please use BlurFilter.strength instead.');\n        // #endif\n\n        return this.strength;\n    }\n\n    set blur(value: number)\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blur is deprecated, please use BlurFilter.strength instead.');\n        // #endif\n        this.strength = value;\n    }\n\n    /**\n     * Sets the strength of the blurX property\n     * @default 2\n     * @deprecated since 8.3.0\n     * @see BlurFilter.strengthX\n     */\n    get blurX(): number\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead.');\n        // #endif\n\n        return this.strengthX;\n    }\n\n    set blurX(value: number)\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead.');\n        // #endif\n        this.strengthX = value;\n    }\n\n    /**\n     * Sets the strength of the blurY property\n     * @default 2\n     * @deprecated since 8.3.0\n     * @see BlurFilter.strengthY\n     */\n    get blurY(): number\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead.');\n        // #endif\n\n        return this.strengthY;\n    }\n\n    set blurY(value: number)\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead.');\n        // #endif\n        this.strengthY = value;\n    }\n\n    /**\n     * If set to true the edge of the target will be clamped\n     * @default false\n     */\n    get repeatEdgePixels(): boolean\n    {\n        return this._repeatEdgePixels;\n    }\n\n    set repeatEdgePixels(value: boolean)\n    {\n        this._repeatEdgePixels = value;\n        this.updatePadding();\n    }\n}\n", "var fragment = \"\\nin vec2 vTextureCoord;\\nin vec4 vColor;\\n\\nout vec4 finalColor;\\n\\nuniform float uNoise;\\nuniform float uSeed;\\nuniform sampler2D uTexture;\\n\\nfloat rand(vec2 co)\\n{\\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n}\\n\\nvoid main()\\n{\\n    vec4 color = texture(uTexture, vTextureCoord);\\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\\n    float diff = (randomValue - 0.5) *  uNoise;\\n\\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\\n    if (color.a > 0.0) {\\n        color.rgb /= color.a;\\n    }\\n\\n    color.r += diff;\\n    color.g += diff;\\n    color.b += diff;\\n\\n    // Premultiply alpha again.\\n    color.rgb *= color.a;\\n\\n    finalColor = color;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=noise.frag.mjs.map\n", "var source = \"\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct NoiseUniforms {\\n  uNoise:f32,\\n  uSeed:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition)\\n  );\\n}\\n\\nfn rand(co:vec2<f32>) -> f32\\n{\\n  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n}\\n\\n\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n\\n    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);\\n  \\n    \\n    var sample = textureSample(uTexture, uSampler, uv);\\n    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);\\n    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;\\n  \\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\\n    if (sample.a > 0.0) {\\n      sample.r /= sample.a;\\n      sample.g /= sample.a;\\n      sample.b /= sample.a;\\n    }\\n\\n    sample.r += diff;\\n    sample.g += diff;\\n    sample.b += diff;\\n\\n    // Premultiply alpha again.\\n    sample.r *= sample.a;\\n    sample.g *= sample.a;\\n    sample.b *= sample.a;\\n    \\n    return sample;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=noise.wgsl.mjs.map\n", "import { GlProgram } from '../../../rendering/renderers/gl/shader/GlProgram';\nimport { GpuProgram } from '../../../rendering/renderers/gpu/shader/GpuProgram';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup';\nimport { Filter } from '../../Filter';\nimport vertex from '../defaultFilter.vert';\nimport fragment from './noise.frag';\nimport source from './noise.wgsl';\n\nimport type { FilterOptions } from '../../Filter';\n\n/**\n * Options for NoiseFilter\n * @memberof filters\n */\nexport interface NoiseFilterOptions extends FilterOptions\n{\n    /** The amount of noise to apply, this value should be in the range (0, 1]. */\n    noise?: number;\n    /** A seed value to apply to the random noise generation. `Math.random()` is a good value to use. */\n    seed?: number;\n}\n\n/**\n * A Noise effect filter.\n *\n * original filter: https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js\n * @memberof filters\n * @author Vico @vicocotea\n */\nexport class NoiseFilter extends Filter\n{\n    public static readonly defaultOptions: NoiseFilterOptions = {\n        noise: 0.5,\n    };\n\n    /**\n     * @param options - The options of the noise filter.\n     */\n    constructor(options: NoiseFilterOptions = {})\n    {\n        options = { ...NoiseFilter.defaultOptions, ...options };\n\n        const gpuProgram = GpuProgram.from({\n            vertex: {\n                source,\n                entryPoint: 'mainVertex',\n            },\n            fragment: {\n                source,\n                entryPoint: 'mainFragment',\n            },\n        });\n\n        const glProgram = GlProgram.from({\n            vertex,\n            fragment,\n            name: 'noise-filter'\n        });\n\n        const { noise, seed, ...rest } = options;\n\n        super({\n            ...rest,\n            gpuProgram,\n            glProgram,\n            resources: {\n                noiseUniforms: new UniformGroup({\n                    uNoise: { value: 1, type: 'f32' },\n                    uSeed: { value: 1, type: 'f32' },\n                })\n            },\n        });\n\n        this.noise = noise;\n        this.seed = seed ?? Math.random();\n    }\n\n    /**\n     * The amount of noise to apply, this value should be in the range (0, 1].\n     * @default 0.5\n     */\n    get noise(): number\n    {\n        return this.resources.noiseUniforms.uniforms.uNoise;\n    }\n\n    set noise(value: number)\n    {\n        this.resources.noiseUniforms.uniforms.uNoise = value;\n    }\n\n    /** A seed value to apply to the random noise generation. `Math.random()` is a good value to use. */\n    get seed(): number\n    {\n        return this.resources.noiseUniforms.uniforms.uSeed;\n    }\n\n    set seed(value: number)\n    {\n        this.resources.noiseUniforms.uniforms.uSeed = value;\n    }\n}\n", "/**\n * Check if a point is inside a triangle.\n * @param px - x coordinate of the point\n * @param py - y coordinate of the point\n * @param x1 - x coordinate of the first vertex of the triangle\n * @param y1 - y coordinate of the first vertex of the triangle\n * @param x2 - x coordinate of the second vertex of the triangle\n * @param y2 - y coordinate of the second vertex of the triangle\n * @param x3 - x coordinate of the third vertex of the triangle\n * @param y3 - y coordinate of the third vertex of the triangle\n * @returns `true` if the point is inside the triangle, `false` otherwise\n */\nexport function pointInTriangle(\n    px: number, py: number,\n    x1: number, y1: number,\n    x2: number, y2: number,\n    x3: number, y3: number\n)\n{\n    // Calculate vectors from point p to each vertex of the triangle\n    const v2x = x3 - x1;\n    const v2y = y3 - y1;\n    const v1x = x2 - x1;\n    const v1y = y2 - y1;\n    const v0x = px - x1;\n    const v0y = py - y1;\n\n    // Compute dot products\n    const dot00 = (v2x * v2x) + (v2y * v2y);\n    const dot01 = (v2x * v1x) + (v2y * v1y);\n    const dot02 = (v2x * v0x) + (v2y * v0y);\n    const dot11 = (v1x * v1x) + (v1y * v1y);\n    const dot12 = (v1x * v0x) + (v1y * v0y);\n\n    // Calculate barycentric coordinates\n    const invDenom = 1 / ((dot00 * dot11) - (dot01 * dot01));\n    const u = ((dot11 * dot02) - (dot01 * dot12)) * invDenom;\n    const v = ((dot00 * dot12) - (dot01 * dot02)) * invDenom;\n\n    // Check if point is in triangle\n    return (u >= 0) && (v >= 0) && (u + v < 1);\n}\n", "import { Container } from '../scene/container/Container';\nimport { UPDATE_PRIORITY } from '../ticker/const';\nimport { Ticker } from '../ticker/Ticker';\n\nimport type { TextureSource } from '../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../rendering/renderers/shared/texture/Texture';\nimport type { Renderer } from '../rendering/renderers/types';\nimport type { GraphicsContext } from '../scene/graphics/shared/GraphicsContext';\nimport type { Text } from '../scene/text/Text';\n\n/** The accepted types to pass to the prepare system */\nexport type PrepareSourceItem = Container | TextureSource | Texture | GraphicsContext;\n\n/** The valid types resolved to the queue ready for upload */\nexport type PrepareQueueItem = TextureSource | Text | GraphicsContext;\n\n/**\n * Part of the prepare system. Responsible for uploading all the items to the GPU.\n * This class provides the base functionality and handles processing the queue asynchronously.\n * @memberof rendering\n */\nexport abstract class PrepareBase\n{\n    /** The number of uploads to process per frame */\n    public static uploadsPerFrame = 4;\n\n    /** Reference to the renderer */\n    protected renderer: Renderer;\n\n    /** The queue to process over a async timer */\n    protected queue: PrepareQueueItem[];\n\n    /** Collection of callbacks to call when the uploads are finished */\n    protected resolves: ((value: void | PromiseLike<void>) => void)[];\n\n    /** Timeout id for next processing call */\n    protected timeout?: number;\n\n    /**\n     * @param {rendering.Renderer} renderer - A reference to the current renderer\n     */\n    constructor(renderer: Renderer)\n    {\n        this.renderer = renderer;\n        this.queue = [];\n        this.resolves = [];\n    }\n\n    /** Resolve the given resource type and return an item for the queue */\n    protected abstract resolveQueueItem(source: PrepareSourceItem, queue: PrepareQueueItem[]): void;\n    protected abstract uploadQueueItem(item: PrepareQueueItem): void;\n\n    /**\n     * Return a copy of the queue\n     * @returns {PrepareQueueItem[]} The queue\n     */\n    public getQueue(): PrepareQueueItem[]\n    {\n        return [...this.queue];\n    }\n\n    /**\n     * Add a textures or graphics resource to the queue\n     * @param {PrepareSourceItem | PrepareSourceItem[]} resource\n     */\n    public add(resource: PrepareSourceItem | PrepareSourceItem[]): this\n    {\n        const resourceArray = Array.isArray(resource) ? resource : [resource];\n\n        for (const resourceItem of resourceArray)\n        {\n            // handle containers and their children\n            if (resourceItem instanceof Container)\n            {\n                this._addContainer(resourceItem);\n            }\n            else\n            {\n                this.resolveQueueItem(resourceItem, this.queue);\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * Recursively add a container and its children to the queue\n     * @param {Container} container - The container to add to the queue\n     */\n    private _addContainer(container: Container): void\n    {\n        this.resolveQueueItem(container, this.queue);\n\n        // recursively add children\n        for (const child of container.children)\n        {\n            this._addContainer(child);\n        }\n    }\n\n    /**\n     * Upload all the textures and graphics to the GPU (optionally add more resources to the queue first)\n     * @param {PrepareSourceItem | PrepareSourceItem[] | undefined} resource\n     */\n    public upload(resource?: PrepareSourceItem | PrepareSourceItem[]): Promise<void>\n    {\n        if (resource)\n        {\n            this.add(resource);\n        }\n\n        return new Promise((resolve) =>\n        {\n            if (this.queue.length)\n            {\n                // add resolve callback to the collection\n                this.resolves.push(resolve);\n\n                // eliminate duplicates first\n                this.dedupeQueue();\n\n                // launch first tick\n                Ticker.system.addOnce(this._tick, this, UPDATE_PRIORITY.UTILITY);\n            }\n            else\n            {\n                // queue is empty, resolve immediately\n                resolve();\n            }\n        });\n    }\n\n    /** eliminate duplicates before processing */\n    public dedupeQueue(): void\n    {\n        const hash = Object.create(null);\n        let nextUnique = 0;\n\n        for (let i = 0; i < this.queue.length; i++)\n        {\n            const current = this.queue[i];\n\n            if (!hash[current.uid])\n            {\n                hash[current.uid] = true;\n                this.queue[nextUnique++] = current;\n            }\n        }\n\n        this.queue.length = nextUnique;\n    }\n\n    /** called per frame by the ticker, defer processing to next tick */\n    private readonly _tick = () =>\n    {\n        this.timeout = setTimeout(this._processQueue, 0) as unknown as number;\n    };\n\n    /** process the queue up to max item limit per frame */\n    private readonly _processQueue = () =>\n    {\n        const { queue } = this;\n        let itemsProcessed = 0;\n\n        // process the maximum number of items per frame\n        while (queue.length && itemsProcessed < PrepareBase.uploadsPerFrame)\n        {\n            const queueItem = queue.shift();\n\n            this.uploadQueueItem(queueItem);\n\n            itemsProcessed++;\n        }\n\n        if (queue.length)\n        {\n            // queue is not empty, continue processing on next frame\n            Ticker.system.addOnce(this._tick, this, UPDATE_PRIORITY.UTILITY);\n        }\n        else\n        {\n            // queue is empty, resolve immediately\n            this._resolve();\n        }\n    };\n\n    /** Call all the resolve callbacks */\n    private _resolve(): void\n    {\n        const { resolves } = this;\n\n        // call all resolve callbacks\n        const array = resolves.slice(0);\n\n        resolves.length = 0;\n\n        for (const resolve of array)\n        {\n            resolve();\n        }\n    }\n}\n", "import { pointInTriangle } from '../../../maths/point/pointInTriangle';\nimport { Geometry } from '../../../rendering/renderers/shared/geometry/Geometry';\nimport { State } from '../../../rendering/renderers/shared/state/State';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\nimport { ViewContainer } from '../../view/ViewContainer';\nimport { MeshGeometry } from './MeshGeometry';\n\nimport type { PointData } from '../../../maths/point/PointData';\nimport type { Topology } from '../../../rendering/renderers/shared/geometry/const';\nimport type { Instruction } from '../../../rendering/renderers/shared/instructions/Instruction';\nimport type { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport type { View } from '../../../rendering/renderers/shared/view/View';\nimport type { ContainerOptions } from '../../container/Container';\nimport type { DestroyOptions } from '../../container/destroyTypes';\n\nexport interface TextureShader extends Shader\n{\n    texture: Texture;\n}\n\n/**\n * Constructor options used for `Mesh` instances. Extends {@link scene.MeshViewOptions}\n * ```js\n * const mesh = new Mesh({\n *    texture: Texture.from('assets/image.png'),\n *    geometry: new PlaneGeometry(),\n *    shader: Shader.from(VERTEX, FRAGMENT),\n * });\n * ```\n * @see {@link scene.Mesh}\n * @see {@link scene.MeshViewOptions}\n * @memberof scene\n */\n\n/**\n * @memberof scene\n */\nexport interface MeshOptions<\n    GEOMETRY extends Geometry = MeshGeometry,\n    SHADER extends Shader = TextureShader\n> extends ContainerOptions\n{\n    /**\n     * Includes vertex positions, face indices, colors, UVs, and\n     * custom attributes within buffers, reducing the cost of passing all\n     * this data to the GPU. Can be shared between multiple Mesh objects.\n     */\n    geometry: GEOMETRY;\n    /**\n     * Represents the vertex and fragment shaders that processes the geometry and runs on the GPU.\n     * Can be shared between multiple Mesh objects.\n     */\n    shader?: SHADER | null;\n    /** The state of WebGL required to render the mesh. */\n    state?: State;\n    /** The texture that the Mesh uses. Null for non-MeshMaterial shaders */\n    texture?: Texture;\n    /** Whether or not to round the x/y position. */\n    roundPixels?: boolean;\n}\n/**\n * Base mesh class.\n *\n * This class empowers you to have maximum flexibility to render any kind of WebGL/WebGPU visuals you can think of.\n * This class assumes a certain level of WebGL/WebGPU knowledge.\n * If you know a bit this should abstract enough away to make your life easier!\n *\n * Pretty much ALL WebGL/WebGPU can be broken down into the following:\n * - Geometry - The structure and data for the mesh. This can include anything from positions, uvs, normals, colors etc..\n * - Shader - This is the shader that PixiJS will render the geometry with (attributes in the shader must match the geometry)\n * - State - This is the state of WebGL required to render the mesh.\n *\n * Through a combination of the above elements you can render anything you want, 2D or 3D!\n * @memberof scene\n */\nexport class Mesh<\n    GEOMETRY extends Geometry = MeshGeometry,\n    SHADER extends Shader = TextureShader\n> extends ViewContainer implements View, Instruction\n{\n    public override readonly renderPipeId: string = 'mesh';\n    public state: State;\n\n    /** @ignore */\n    public _texture: Texture;\n    /** @ignore */\n    public _geometry: GEOMETRY;\n    /** @ignore */\n    public _shader: SHADER | null = null;\n\n    /**\n     * @param {scene.MeshOptions} options - options for the mesh instance\n     */\n    constructor(options: MeshOptions<GEOMETRY, SHADER>);\n    /** @deprecated since 8.0.0 */\n    constructor(geometry: GEOMETRY, shader: SHADER, state?: State, drawMode?: Topology);\n    constructor(...args: [MeshOptions<GEOMETRY, SHADER>] | [GEOMETRY, SHADER, State?, Topology?])\n    {\n        let options = args[0];\n\n        if (options instanceof Geometry)\n        {\n            // #if _DEBUG\n            deprecation(v8_0_0, 'Mesh: use new Mesh({ geometry, shader }) instead');\n            // #endif\n\n            options = {\n                geometry: options,\n                shader: args[1],\n            } as MeshOptions<GEOMETRY, SHADER>;\n\n            if (args[3])\n            {\n                // #if _DEBUG\n                deprecation(v8_0_0, 'Mesh: drawMode argument has been removed, use geometry.topology instead');\n                // #endif\n\n                options.geometry.topology = args[3];\n            }\n        }\n\n        const { geometry, shader, texture, roundPixels, state, ...rest } = options;\n\n        super({\n            label: 'Mesh',\n            ...rest\n        });\n\n        this.allowChildren = false;\n\n        this.shader = shader ?? null;\n        this.texture = texture ?? (shader as unknown as TextureShader)?.texture ?? Texture.WHITE;\n        this.state = state ?? State.for2d();\n\n        this._geometry = geometry;\n        this._geometry.on('update', this.onViewUpdate, this);\n\n        this.roundPixels = roundPixels ?? false;\n    }\n\n    /** Alias for {@link scene.Mesh#shader}. */\n    get material()\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'mesh.material property has been removed, use mesh.shader instead');\n        // #endif\n\n        return this._shader;\n    }\n\n    /**\n     * Represents the vertex and fragment shaders that processes the geometry and runs on the GPU.\n     * Can be shared between multiple Mesh objects.\n     */\n    set shader(value: SHADER | null)\n    {\n        if (this._shader === value) return;\n\n        this._shader = value;\n        this.onViewUpdate();\n    }\n\n    get shader(): SHADER | null\n    {\n        return this._shader;\n    }\n\n    /**\n     * Includes vertex positions, face indices, colors, UVs, and\n     * custom attributes within buffers, reducing the cost of passing all\n     * this data to the GPU. Can be shared between multiple Mesh objects.\n     */\n    set geometry(value: GEOMETRY)\n    {\n        if (this._geometry === value) return;\n\n        this._geometry?.off('update', this.onViewUpdate, this);\n        value.on('update', this.onViewUpdate, this);\n\n        this._geometry = value;\n        this.onViewUpdate();\n    }\n\n    get geometry()\n    {\n        return this._geometry;\n    }\n\n    /** The texture that the Mesh uses. Null for non-MeshMaterial shaders */\n    set texture(value: Texture)\n    {\n        value ||= Texture.EMPTY;\n\n        const currentTexture = this._texture;\n\n        if (currentTexture === value) return;\n\n        if (currentTexture && currentTexture.dynamic) currentTexture.off('update', this.onViewUpdate, this);\n        if (value.dynamic) value.on('update', this.onViewUpdate, this);\n\n        if (this.shader)\n        {\n            (this.shader as unknown as TextureShader).texture = value;\n        }\n\n        this._texture = value;\n        this.onViewUpdate();\n    }\n\n    get texture()\n    {\n        return this._texture;\n    }\n\n    get batched()\n    {\n        if (this._shader) return false;\n\n        // The state must be compatible with the batcher pipe.\n        // It isn't compatible if depth test or culling is enabled.\n        if ((this.state.data & 0b001100) !== 0) return false;\n\n        if (this._geometry instanceof MeshGeometry)\n        {\n            if (this._geometry.batchMode === 'auto')\n            {\n                return this._geometry.positions.length / 2 <= 100;\n            }\n\n            return this._geometry.batchMode === 'batch';\n        }\n\n        return false;\n    }\n\n    /**\n     * The local bounds of the mesh.\n     * @type {rendering.Bounds}\n     */\n    override get bounds()\n    {\n        return this._geometry.bounds;\n    }\n\n    /**\n     * Update local bounds of the mesh.\n     * @private\n     */\n    protected updateBounds()\n    {\n        this._bounds = this._geometry.bounds;\n    }\n\n    /**\n     * Checks if the object contains the given point.\n     * @param point - The point to check\n     */\n    public override containsPoint(point: PointData)\n    {\n        const { x, y } = point;\n\n        if (!this.bounds.containsPoint(x, y)) return false;\n\n        const vertices = this.geometry.getBuffer('aPosition').data;\n\n        const step = this.geometry.topology === 'triangle-strip' ? 3 : 1;\n\n        if (this.geometry.getIndex())\n        {\n            const indices = this.geometry.getIndex().data;\n            const len = indices.length;\n\n            for (let i = 0; i + 2 < len; i += step)\n            {\n                const ind0 = indices[i] * 2;\n                const ind1 = indices[i + 1] * 2;\n                const ind2 = indices[i + 2] * 2;\n\n                if (pointInTriangle(\n                    x, y,\n                    vertices[ind0],\n                    vertices[ind0 + 1],\n                    vertices[ind1],\n                    vertices[ind1 + 1],\n                    vertices[ind2],\n                    vertices[ind2 + 1],\n                ))\n                {\n                    return true;\n                }\n            }\n        }\n        else\n        {\n            const len = vertices.length / 2; // Each vertex has 2 coordinates, x and y\n\n            for (let i = 0; i + 2 < len; i += step)\n            {\n                const ind0 = i * 2;\n                const ind1 = (i + 1) * 2;\n                const ind2 = (i + 2) * 2;\n\n                if (pointInTriangle(\n                    x, y,\n                    vertices[ind0],\n                    vertices[ind0 + 1],\n                    vertices[ind1],\n                    vertices[ind1 + 1],\n                    vertices[ind2],\n                    vertices[ind2 + 1],\n                ))\n                {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the current texture of the renderable as well\n     * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the renderable as well\n     */\n    public override destroy(options?: DestroyOptions): void\n    {\n        super.destroy(options);\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            this._texture.destroy(destroyTextureSource);\n        }\n\n        this._geometry?.off('update', this.onViewUpdate, this);\n\n        this._texture = null;\n        this._geometry = null;\n        this._shader = null;\n    }\n}\n", "import { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { UPDATE_PRIORITY } from '../../ticker/const';\nimport { Ticker } from '../../ticker/Ticker';\nimport { Sprite } from '../sprite/Sprite';\n\nimport type { SpriteOptions } from '../sprite/Sprite';\n\nexport type AnimatedSpriteFrames = Texture[] | FrameObject[];\n\n/**\n * Constructor options used for `AnimatedSprite` instances.\n * @see {@link scene.AnimatedSprite}\n * @memberof scene\n */\nexport interface AnimatedSpriteOptions extends SpriteOptions\n{\n    /** An array of {@link Texture} or frame objects that make up the animation. */\n    textures: AnimatedSpriteFrames;\n    /** Whether to use Ticker.shared to auto update animation time. */\n    autoUpdate?: boolean;\n}\n\n/**\n * An AnimatedSprite is a simple way to display an animation depicted by a list of textures.\n *\n * ```js\n * import { AnimatedSprite, Texture } from 'pixi.js';\n *\n * const alienImages = [\n *     'image_sequence_01.png',\n *     'image_sequence_02.png',\n *     'image_sequence_03.png',\n *     'image_sequence_04.png',\n * ];\n * const textureArray = [];\n *\n * for (let i = 0; i < 4; i++)\n * {\n *     const texture = Texture.from(alienImages[i]);\n *     textureArray.push(texture);\n * }\n *\n * const animatedSprite = new AnimatedSprite(textureArray);\n * ```\n *\n * The more efficient and simpler way to create an animated sprite is using a {@link Spritesheet}\n * containing the animation definitions:\n * @example\n * import { AnimatedSprite, Assets } from 'pixi.js';\n *\n * const sheet = await Assets.load('assets/spritesheet.json');\n * animatedSprite = new AnimatedSprite(sheet.animations['image_sequence']);\n * @memberof scene\n */\nexport class AnimatedSprite extends Sprite\n{\n    /**\n     * The speed that the AnimatedSprite will play at. Higher is faster, lower is slower.\n     * @default 1\n     */\n    public animationSpeed: number;\n\n    /**\n     * Whether or not the animate sprite repeats after playing.\n     * @default true\n     */\n    public loop: boolean;\n\n    /**\n     * Update anchor to [Texture's defaultAnchor]{@link Texture#defaultAnchor} when frame changes.\n     *\n     * Useful with [sprite sheet animations]{@link Spritesheet#animations} created with tools.\n     * Changing anchor for each frame allows to pin sprite origin to certain moving feature\n     * of the frame (e.g. left foot).\n     *\n     * Note: Enabling this will override any previously set `anchor` on each frame change.\n     * @default false\n     */\n    public updateAnchor: boolean;\n\n    /**\n     * User-assigned function to call when an AnimatedSprite finishes playing.\n     * @example\n     * animation.onComplete = () => {\n     *     // Finished!\n     * };\n     */\n    public onComplete?: () => void;\n\n    /**\n     * User-assigned function to call when an AnimatedSprite changes which texture is being rendered.\n     * @example\n     * animation.onFrameChange = () => {\n     *     // Updated!\n     * };\n     */\n    public onFrameChange?: (currentFrame: number) => void;\n\n    /**\n     * User-assigned function to call when `loop` is true, and an AnimatedSprite is played and\n     * loops around to start again.\n     * @example\n     * animation.onLoop = () => {\n     *     // Looped!\n     * };\n     */\n    public onLoop?: () => void;\n\n    private _playing: boolean;\n    private _textures: Texture[];\n    private _durations: number[];\n\n    /**\n     * `true` uses Ticker.shared to auto update animation time.\n     * @default true\n     */\n    private _autoUpdate: boolean;\n\n    /**\n     * `true` if the instance is currently connected to Ticker.shared to auto update animation time.\n     * @default false\n     */\n    private _isConnectedToTicker: boolean;\n\n    /** Elapsed time since animation has been started, used internally to display current texture. */\n    private _currentTime: number;\n\n    /** The texture index that was displayed last time. */\n    private _previousFrame: number;\n    /**\n     * @param frames - Collection of textures or frames to use.\n     * @param autoUpdate - Whether to use Ticker.shared to auto update animation time.\n     */\n    constructor(frames: AnimatedSpriteFrames, autoUpdate?: boolean);\n    /**\n     * @param options - The options for the AnimatedSprite.\n     */\n    constructor(options: AnimatedSpriteOptions);\n    /** @ignore */\n    constructor(...args: [AnimatedSpriteOptions?] | [AnimatedSpriteFrames?] | [AnimatedSpriteFrames?, boolean?])\n    {\n        let options = args[0] as AnimatedSpriteOptions;\n\n        if (Array.isArray(args[0]))\n        {\n            options = {\n                textures: args[0] as AnimatedSpriteFrames,\n                autoUpdate: args[1] as boolean,\n            };\n        }\n\n        const { textures, autoUpdate, ...rest } = options;\n        const [firstFrame] = textures;\n\n        super({\n            ...rest,\n            texture: firstFrame instanceof Texture ? firstFrame : firstFrame.texture,\n        });\n\n        this._textures = null;\n        this._durations = null;\n        this._autoUpdate = autoUpdate ?? true;\n        this._isConnectedToTicker = false;\n\n        this.animationSpeed = 1;\n        this.loop = true;\n        this.updateAnchor = false;\n        this.onComplete = null;\n        this.onFrameChange = null;\n        this.onLoop = null;\n\n        this._currentTime = 0;\n\n        this._playing = false;\n        this._previousFrame = null;\n\n        this.textures = textures;\n    }\n\n    /** Stops the AnimatedSprite. */\n    public stop(): void\n    {\n        if (!this._playing)\n        {\n            return;\n        }\n\n        this._playing = false;\n        if (this._autoUpdate && this._isConnectedToTicker)\n        {\n            Ticker.shared.remove(this.update, this);\n            this._isConnectedToTicker = false;\n        }\n    }\n\n    /** Plays the AnimatedSprite. */\n    public play(): void\n    {\n        if (this._playing)\n        {\n            return;\n        }\n\n        this._playing = true;\n        if (this._autoUpdate && !this._isConnectedToTicker)\n        {\n            Ticker.shared.add(this.update, this, UPDATE_PRIORITY.HIGH);\n            this._isConnectedToTicker = true;\n        }\n    }\n\n    /**\n     * Stops the AnimatedSprite and goes to a specific frame.\n     * @param frameNumber - Frame index to stop at.\n     */\n    public gotoAndStop(frameNumber: number): void\n    {\n        this.stop();\n        this.currentFrame = frameNumber;\n    }\n\n    /**\n     * Goes to a specific frame and begins playing the AnimatedSprite.\n     * @param frameNumber - Frame index to start at.\n     */\n    public gotoAndPlay(frameNumber: number): void\n    {\n        this.currentFrame = frameNumber;\n        this.play();\n    }\n\n    /**\n     * Updates the object transform for rendering.\n     * @param ticker - the ticker to use to update the object.\n     */\n    public update(ticker: Ticker): void\n    {\n        // If the animation isn't playing, no update is needed.\n        if (!this._playing)\n        {\n            return;\n        }\n\n        // Calculate elapsed time based on ticker's deltaTime and animation speed.\n        const deltaTime = ticker.deltaTime;\n        const elapsed = this.animationSpeed * deltaTime;\n        const previousFrame = this.currentFrame;\n\n        // If there are specific durations set for each frame:\n        if (this._durations !== null)\n        {\n            // Calculate the lag for the current frame based on the current time.\n            let lag = this._currentTime % 1 * this._durations[this.currentFrame];\n\n            // Adjust the lag based on elapsed time.\n            lag += elapsed / 60 * 1000;\n\n            // If the lag is negative, adjust the current time and the lag.\n            while (lag < 0)\n            {\n                this._currentTime--;\n                lag += this._durations[this.currentFrame];\n            }\n\n            const sign = Math.sign(this.animationSpeed * deltaTime);\n\n            // Floor the current time to get a whole number frame.\n            this._currentTime = Math.floor(this._currentTime);\n\n            // Adjust the current time and the lag until the lag is less than the current frame's duration.\n            while (lag >= this._durations[this.currentFrame])\n            {\n                lag -= this._durations[this.currentFrame] * sign;\n                this._currentTime += sign;\n            }\n\n            // Adjust the current time based on the lag and current frame's duration.\n            this._currentTime += lag / this._durations[this.currentFrame];\n        }\n        else\n        {\n            // If no specific durations set, simply adjust the current time by elapsed time.\n            this._currentTime += elapsed;\n        }\n\n        // Handle scenarios when animation reaches the start or the end.\n        if (this._currentTime < 0 && !this.loop)\n        {\n            // If the animation shouldn't loop and it reaches the start, go to the first frame.\n            this.gotoAndStop(0);\n\n            // If there's an onComplete callback, call it.\n            if (this.onComplete)\n            {\n                this.onComplete();\n            }\n        }\n        else if (this._currentTime >= this._textures.length && !this.loop)\n        {\n            // If the animation shouldn't loop and it reaches the end, go to the last frame.\n            this.gotoAndStop(this._textures.length - 1);\n\n            // If there's an onComplete callback, call it.\n            if (this.onComplete)\n            {\n                this.onComplete();\n            }\n        }\n        else if (previousFrame !== this.currentFrame)\n        {\n            // If the current frame is different from the last update, handle loop scenarios.\n            if (this.loop && this.onLoop)\n            {\n                if ((this.animationSpeed > 0 && this.currentFrame < previousFrame)\n                    || (this.animationSpeed < 0 && this.currentFrame > previousFrame))\n                {\n                    // If the animation loops, and there's an onLoop callback, call it.\n                    this.onLoop();\n                }\n            }\n\n            // Update the texture for the current frame.\n            this._updateTexture();\n        }\n    }\n\n    /** Updates the displayed texture to match the current frame index. */\n    private _updateTexture(): void\n    {\n        const currentFrame = this.currentFrame;\n\n        if (this._previousFrame === currentFrame)\n        {\n            return;\n        }\n\n        this._previousFrame = currentFrame;\n\n        this.texture = this._textures[currentFrame];\n\n        if (this.updateAnchor)\n        {\n            this.anchor.copyFrom(this.texture.defaultAnchor);\n        }\n\n        if (this.onFrameChange)\n        {\n            this.onFrameChange(this.currentFrame);\n        }\n    }\n\n    /** Stops the AnimatedSprite and destroys it. */\n    public destroy(): void\n    {\n        this.stop();\n        super.destroy();\n\n        this.onComplete = null;\n        this.onFrameChange = null;\n        this.onLoop = null;\n    }\n\n    /**\n     * A short hand way of creating an AnimatedSprite from an array of frame ids.\n     * @param frames - The array of frames ids the AnimatedSprite will use as its texture frames.\n     * @returns - The new animated sprite with the specified frames.\n     */\n    public static fromFrames(frames: string[]): AnimatedSprite\n    {\n        const textures = [];\n\n        for (let i = 0; i < frames.length; ++i)\n        {\n            textures.push(Texture.from(frames[i]));\n        }\n\n        return new AnimatedSprite(textures);\n    }\n\n    /**\n     * A short hand way of creating an AnimatedSprite from an array of image ids.\n     * @param images - The array of image urls the AnimatedSprite will use as its texture frames.\n     * @returns The new animate sprite with the specified images as frames.\n     */\n    public static fromImages(images: string[]): AnimatedSprite\n    {\n        const textures = [];\n\n        for (let i = 0; i < images.length; ++i)\n        {\n            textures.push(Texture.from(images[i]));\n        }\n\n        return new AnimatedSprite(textures);\n    }\n\n    /**\n     * The total number of frames in the AnimatedSprite. This is the same as number of textures\n     * assigned to the AnimatedSprite.\n     * @readonly\n     * @default 0\n     */\n    get totalFrames(): number\n    {\n        return this._textures.length;\n    }\n\n    /** The array of textures used for this AnimatedSprite. */\n    get textures(): AnimatedSpriteFrames\n    {\n        return this._textures;\n    }\n\n    set textures(value: AnimatedSpriteFrames)\n    {\n        if (value[0] instanceof Texture)\n        {\n            this._textures = value as Texture[];\n            this._durations = null;\n        }\n        else\n        {\n            this._textures = [];\n            this._durations = [];\n\n            for (let i = 0; i < value.length; i++)\n            {\n                this._textures.push((value[i] as FrameObject).texture);\n                this._durations.push((value[i] as FrameObject).time);\n            }\n        }\n        this._previousFrame = null;\n        this.gotoAndStop(0);\n        this._updateTexture();\n    }\n\n    /** The AnimatedSprite's current frame index. */\n    get currentFrame(): number\n    {\n        let currentFrame = Math.floor(this._currentTime) % this._textures.length;\n\n        if (currentFrame < 0)\n        {\n            currentFrame += this._textures.length;\n        }\n\n        return currentFrame;\n    }\n\n    set currentFrame(value: number)\n    {\n        if (value < 0 || value > this.totalFrames - 1)\n        {\n            throw new Error(`[AnimatedSprite]: Invalid frame index value ${value}, `\n                + `expected to be between 0 and totalFrames ${this.totalFrames}.`);\n        }\n\n        const previousFrame = this.currentFrame;\n\n        this._currentTime = value;\n\n        if (previousFrame !== this.currentFrame)\n        {\n            this._updateTexture();\n        }\n    }\n\n    /**\n     * Indicates if the AnimatedSprite is currently playing.\n     * @readonly\n     */\n    get playing(): boolean\n    {\n        return this._playing;\n    }\n\n    /** Whether to use Ticker.shared to auto update animation time. */\n    get autoUpdate(): boolean\n    {\n        return this._autoUpdate;\n    }\n\n    set autoUpdate(value: boolean)\n    {\n        if (value !== this._autoUpdate)\n        {\n            this._autoUpdate = value;\n\n            if (!this._autoUpdate && this._isConnectedToTicker)\n            {\n                Ticker.shared.remove(this.update, this);\n                this._isConnectedToTicker = false;\n            }\n            else if (this._autoUpdate && !this._isConnectedToTicker && this._playing)\n            {\n                Ticker.shared.add(this.update, this);\n                this._isConnectedToTicker = true;\n            }\n        }\n    }\n}\n\n/**\n * A reference to a frame in an {@link scene.AnimatedSprite}\n * @memberof scene\n */\nexport interface FrameObject\n{\n    /** The {@link Texture} of the frame. */\n    texture: Texture;\n\n    /** The duration of the frame, in milliseconds. */\n    time: number;\n}\n", "import { Matrix } from '../../maths/matrix/Matrix';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint';\n\nimport type { Observer } from '../../maths/point/ObservablePoint';\n\n/**\n * Options for the {@link utils.Transform} constructor.\n * @memberof utils.Transform\n */\nexport interface TransformOptions\n{\n    /** The matrix to use. */\n    matrix?: Matrix;\n    /** The observer to use. */\n    observer?: {_onUpdate: (transform: Transform) => void}\n}\n\n/**\n * The Transform class facilitates the manipulation of a 2D transformation matrix through\n * user-friendly properties: position, scale, rotation, skew, and pivot.\n * @memberof utils\n */\nexport class Transform\n{\n    /**\n     * The local transformation matrix.\n     * @internal\n     * @private\n     */\n    public _matrix: Matrix;\n\n    /** The coordinate of the object relative to the local coordinates of the parent. */\n    public position: ObservablePoint;\n\n    /** The scale factor of the object. */\n    public scale: ObservablePoint;\n\n    /** The pivot point of the container that it rotates around. */\n    public pivot: ObservablePoint;\n\n    /** The skew amount, on the x and y axis. */\n    public skew: ObservablePoint;\n\n    /** The rotation amount. */\n    protected _rotation: number;\n\n    /**\n     * The X-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     */\n    protected _cx: number;\n\n    /**\n     * The Y-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     */\n    protected _sx: number;\n\n    /**\n     * The X-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     */\n    protected _cy: number;\n\n    /**\n     * The Y-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     */\n    protected _sy: number;\n\n    protected dirty = true;\n    protected observer: Observer<Transform>;\n\n    /**\n     * @param options - Options for the transform.\n     * @param options.matrix - The matrix to use.\n     * @param options.observer - The observer to use.\n     */\n    constructor({ matrix, observer }: TransformOptions = {})\n    {\n        this._matrix = matrix ?? new Matrix();\n        this.observer = observer;\n\n        this.position = new ObservablePoint(this, 0, 0);\n        this.scale = new ObservablePoint(this, 1, 1);\n        this.pivot = new ObservablePoint(this, 0, 0);\n        this.skew = new ObservablePoint(this, 0, 0);\n\n        this._rotation = 0;\n        this._cx = 1;\n        this._sx = 0;\n        this._cy = 0;\n        this._sy = 1;\n    }\n\n    /**\n     * This matrix is computed by combining this Transforms position, scale, rotation, skew, and pivot\n     * properties into a single matrix.\n     * @readonly\n     */\n    get matrix(): Matrix\n    {\n        const lt = this._matrix;\n\n        if (!this.dirty) return lt;\n\n        lt.a = this._cx * this.scale.x;\n        lt.b = this._sx * this.scale.x;\n        lt.c = this._cy * this.scale.y;\n        lt.d = this._sy * this.scale.y;\n\n        lt.tx = this.position.x - ((this.pivot.x * lt.a) + (this.pivot.y * lt.c));\n        lt.ty = this.position.y - ((this.pivot.x * lt.b) + (this.pivot.y * lt.d));\n\n        this.dirty = false;\n\n        return lt;\n    }\n    /**\n     * Called when a value changes.\n     * @param point\n     * @internal\n     * @private\n     */\n    public _onUpdate(point?: ObservablePoint): void\n    {\n        this.dirty = true;\n\n        if (point === this.skew)\n        {\n            this.updateSkew();\n        }\n\n        this.observer?._onUpdate(this);\n    }\n\n    /** Called when the skew or the rotation changes. */\n    protected updateSkew(): void\n    {\n        this._cx = Math.cos(this._rotation + this.skew.y);\n        this._sx = Math.sin(this._rotation + this.skew.y);\n        this._cy = -Math.sin(this._rotation - this.skew.x); // cos, added PI/2\n        this._sy = Math.cos(this._rotation - this.skew.x); // sin, added PI/2\n\n        this.dirty = true;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Transform `\n            + `position=(${this.position.x}, ${this.position.y}) `\n            + `rotation=${this.rotation} `\n            + `scale=(${this.scale.x}, ${this.scale.y}) `\n            + `skew=(${this.skew.x}, ${this.skew.y}) `\n            + `]`;\n    }\n    // #endif\n\n    /**\n     * Decomposes a matrix and sets the transforms properties based on it.\n     * @param matrix - The matrix to decompose\n     */\n    public setFromMatrix(matrix: Matrix): void\n    {\n        matrix.decompose(this);\n        this.dirty = true;\n    }\n\n    /** The rotation of the object in radians. */\n    get rotation(): number\n    {\n        return this._rotation;\n    }\n\n    set rotation(value: number)\n    {\n        if (this._rotation !== value)\n        {\n            this._rotation = value;\n            this._onUpdate(this.skew);\n        }\n    }\n}\n", "import { Cache } from '../../assets/cache/Cache';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { warn } from '../../utils/logging/warn';\nimport { Transform } from '../../utils/misc/Transform';\nimport { ViewContainer } from '../view/ViewContainer';\n\nimport type { Size } from '../../maths/misc/Size';\nimport type { PointData } from '../../maths/point/PointData';\nimport type { Instruction } from '../../rendering/renderers/shared/instructions/Instruction';\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { ContainerOptions } from '../container/Container';\nimport type { Optional } from '../container/container-mixins/measureMixin';\nimport type { DestroyOptions } from '../container/destroyTypes';\n\n/**\n * Constructor options used for `TilingSprite` instances. Extends {@link scene.TilingSpriteViewOptions}\n * ```js\n * const tilingSprite = new TilingSprite({\n *    texture: Texture.from('assets/image.png'),\n *    width: 100,\n *    height: 100,\n *    tilePosition: { x: 100, y: 100 },\n *    tileScale: { x: 2, y: 2 },\n * });\n * ```\n * @see {@link scene.TilingSprite}\n * @see {@link scene.TilingSpriteViewOptions}\n * @memberof scene\n */\nexport interface TilingSpriteOptions extends ContainerOptions\n{\n    /**\n     * The anchor point of the sprite\n     * @default {x: 0, y: 0}\n     */\n    anchor?: PointData\n    /**\n     * The offset of the image that is being tiled.\n     * @default {x: 0, y: 0}\n     */\n    tilePosition?: PointData\n    /**\n     * Scaling of the image that is being tiled.\n     * @default {x: 1, y: 1}\n     */\n    tileScale?: PointData\n    /**\n     * The rotation of the image that is being tiled.\n     * @default 0\n     */\n    tileRotation?: number\n    /**\n     * The texture to use for the sprite.\n     * @default Texture.WHITE\n     */\n    texture?: Texture\n    /**\n     * The width of the tiling sprite. #\n     * @default 256\n     */\n    width?: number\n    /**\n     * The height of the tiling sprite.\n     * @default 256\n     */\n    height?: number\n    // TODO needs a better name..\n    /**\n     * @todo\n     * @default false\n     */\n    applyAnchorToTexture?: boolean\n    /** Whether or not to round the x/y position. */\n    roundPixels?: boolean;\n}\n\n/**\n * A tiling sprite is a fast way of rendering a tiling image.\n * @example\n * const tilingSprite = new TilingSprite({\n *    texture: Texture.from('assets/image.png'),\n *    width: 100,\n *    height: 100,\n * });\n *\n * tilingSprite.tilePosition.x = 100;\n * tilingSprite.tilePosition.y = 100;\n *\n * app.stage.addChild(tilingSprite);\n * @memberof scene\n * @extends scene.Container\n */\nexport class TilingSprite extends ViewContainer implements View, Instruction\n{\n    /**\n     * Creates a new tiling sprite.\n     * @param source - The source to create the texture from.\n     * @param options - The options for creating the tiling sprite.\n     * @returns A new tiling sprite.\n     */\n    public static from(source: Texture | string, options: TilingSpriteOptions = {})\n    {\n        if (typeof source === 'string')\n        {\n            return new TilingSprite({\n                texture: Cache.get(source),\n                ...options,\n            });\n        }\n\n        return new TilingSprite({\n            texture: source,\n            ...options,\n        });\n    }\n\n    /** default options for the TilingSprite */\n    public static defaultOptions: TilingSpriteOptions = {\n        /** The texture to use for the sprite. */\n        texture: Texture.EMPTY,\n        /** The anchor point of the sprite */\n        anchor: { x: 0, y: 0 },\n        /** The offset of the image that is being tiled. */\n        tilePosition: { x: 0, y: 0 },\n        /** Scaling of the image that is being tiled. */\n        tileScale: { x: 1, y: 1 },\n        /** The rotation of the image that is being tiled. */\n        tileRotation: 0,\n        /**\n         * Flags whether the tiling pattern should originate from the origin instead of the top-left corner in\n         * local space.\n         *\n         * This will make the texture coordinates assigned to each vertex dependent on the value of the anchor. Without\n         * this, the top-left corner always gets the (0, 0) texture coordinate.\n         * @default false\n         */\n        applyAnchorToTexture: false,\n    };\n\n    public override readonly renderPipeId: string = 'tilingSprite';\n    public readonly batched = true;\n\n    /**\n     * Flags whether the tiling pattern should originate from the origin instead of the top-left corner in\n     * local space.\n     *\n     * This will make the texture coordinates assigned to each vertex dependent on the value of the anchor. Without\n     * this, the top-left corner always gets the (0, 0) texture coordinate.\n     * @default false\n     */\n    public applyAnchorToTexture: boolean;\n    /**\n     * @see {@link scene.TilingSpriteOptions.applyAnchorToTexture}\n     * @deprecated since 8.0.0\n     */\n    public get uvRespectAnchor(): boolean\n    {\n        warn('uvRespectAnchor is deprecated, please use applyAnchorToTexture instead');\n\n        return this.applyAnchorToTexture;\n    }\n    public set uvRespectAnchor(value: boolean)\n    {\n        warn('uvRespectAnchor is deprecated, please use applyAnchorToTexture instead');\n        this.applyAnchorToTexture = value;\n    }\n    public _anchor: ObservablePoint;\n\n    public _tileTransform: Transform;\n    public _texture: Texture;\n\n    private _width: number;\n    private _height: number;\n\n    /**\n     * @param {rendering.Texture | scene.TilingSpriteOptions} options - The options for creating the tiling sprite.\n     */\n    constructor(options?: Texture | TilingSpriteOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(texture: Texture, width: number, height: number);\n    constructor(...args: [(Texture | TilingSpriteOptions)?] | [Texture, number, number])\n    {\n        let options = args[0] || {};\n\n        if (options instanceof Texture)\n        {\n            options = { texture: options };\n        }\n\n        if (args.length > 1)\n        {\n            // #if _DEBUG\n            deprecation(v8_0_0, 'use new TilingSprite({ texture, width:100, height:100 }) instead');\n            // #endif\n\n            options.width = args[1];\n            options.height = args[2];\n        }\n\n        options = { ...TilingSprite.defaultOptions, ...options };\n\n        const {\n            texture,\n            anchor,\n            tilePosition,\n            tileScale,\n            tileRotation,\n            width,\n            height,\n            applyAnchorToTexture,\n            roundPixels,\n            ...rest\n        } = options ?? {};\n\n        super({\n\n            label: 'TilingSprite',\n            ...rest\n        });\n\n        this.allowChildren = false;\n\n        this._anchor = new ObservablePoint(\n            {\n                _onUpdate: () =>\n                {\n                    this.onViewUpdate();\n                }\n            },\n        );\n\n        this.applyAnchorToTexture = applyAnchorToTexture;\n\n        this.texture = texture;\n        this._width = width ?? texture.width;\n        this._height = height ?? texture.height;\n\n        this._tileTransform = new Transform({\n            observer: {\n                _onUpdate: () => this.onViewUpdate(),\n            }\n        });\n\n        if (anchor) this.anchor = anchor;\n        this.tilePosition = tilePosition;\n        this.tileScale = tileScale;\n        this.tileRotation = tileRotation;\n\n        this.roundPixels = roundPixels ?? false;\n    }\n\n    /**\n     * Changes frame clamping in corresponding textureMatrix\n     * Change to -0.5 to add a pixel to the edge, recommended for transparent trimmed textures in atlas\n     * @default 0.5\n     * @member {number}\n     */\n    get clampMargin()\n    {\n        return this._texture.textureMatrix.clampMargin;\n    }\n\n    set clampMargin(value: number)\n    {\n        this._texture.textureMatrix.clampMargin = value;\n    }\n\n    /**\n     * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n     * and passed to the constructor.\n     *\n     * The default is `(0,0)`, this means the sprite's origin is the top left.\n     *\n     * Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n     *\n     * Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n     *\n     * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n     * @example\n     * import { TilingSprite } from 'pixi.js';\n     *\n     * const sprite = new TilingSprite({texture: Texture.WHITE});\n     * sprite.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).\n     */\n    get anchor(): ObservablePoint\n    {\n        return this._anchor;\n    }\n\n    set anchor(value: PointData | number)\n    {\n        typeof value === 'number' ? this._anchor.set(value) : this._anchor.copyFrom(value);\n    }\n\n    /** The offset of the image that is being tiled. */\n    get tilePosition(): ObservablePoint\n    {\n        return this._tileTransform.position;\n    }\n\n    set tilePosition(value: PointData)\n    {\n        this._tileTransform.position.copyFrom(value);\n    }\n\n    /** The scaling of the image that is being tiled. */\n    get tileScale(): ObservablePoint\n    {\n        return this._tileTransform.scale;\n    }\n\n    set tileScale(value: PointData | number)\n    {\n        typeof value === 'number' ? this._tileTransform.scale.set(value) : this._tileTransform.scale.copyFrom(value);\n    }\n\n    set tileRotation(value)\n    {\n        this._tileTransform.rotation = value;\n    }\n\n    /** The rotation of the image that is being tiled. */\n    get tileRotation()\n    {\n        return this._tileTransform.rotation;\n    }\n\n    /** The transform of the image that is being tiled. */\n    get tileTransform()\n    {\n        return this._tileTransform;\n    }\n\n    set texture(value: Texture)\n    {\n        value ||= Texture.EMPTY;\n\n        const currentTexture = this._texture;\n\n        if (currentTexture === value) return;\n\n        if (currentTexture && currentTexture.dynamic) currentTexture.off('update', this.onViewUpdate, this);\n        if (value.dynamic) value.on('update', this.onViewUpdate, this);\n\n        this._texture = value;\n\n        this.onViewUpdate();\n    }\n\n    /** The texture that the sprite is using. */\n    get texture()\n    {\n        return this._texture;\n    }\n\n    /** The width of the tiling area. */\n    override set width(value: number)\n    {\n        this._width = value;\n        this.onViewUpdate();\n    }\n\n    override get width()\n    {\n        return this._width;\n    }\n\n    override set height(value: number)\n    {\n        this._height = value;\n        this.onViewUpdate();\n    }\n\n    /** The height of the tiling area. */\n    override get height()\n    {\n        return this._height;\n    }\n\n    /**\n     * Sets the size of the TilingSprite to the specified width and height.\n     * This is faster than setting the width and height separately.\n     * @param value - This can be either a number or a [Size]{@link Size} object.\n     * @param height - The height to set. Defaults to the value of `width` if not provided.\n     */\n    public override setSize(value: number | Optional<Size, 'height'>, height?: number): void\n    {\n        if (typeof value === 'object')\n        {\n            height = value.height ?? value.width;\n            value = value.width;\n        }\n\n        this._width = value;\n        this._height = height ?? value;\n\n        this.onViewUpdate();\n    }\n\n    /**\n     * Retrieves the size of the TilingSprite as a [Size]{@link Size} object.\n     * This is faster than get the width and height separately.\n     * @param out - Optional object to store the size in.\n     * @returns - The size of the TilingSprite.\n     */\n    public override getSize(out?: Size): Size\n    {\n        out ||= {} as Size;\n        out.width = this._width;\n        out.height = this._height;\n\n        return out;\n    }\n\n    /**\n     * @private\n     */\n    protected override updateBounds()\n    {\n        const bounds = this._bounds;\n\n        const anchor = this._anchor;\n\n        const width = this._width;\n        const height = this._height;\n\n        bounds.maxX = -anchor._x * width;\n        bounds.minX = bounds.maxX + width;\n\n        bounds.maxY = -anchor._y * height;\n        bounds.minY = bounds.maxY + height;\n    }\n\n    /**\n     * Checks if the object contains the given point.\n     * @param point - The point to check\n     */\n    public override containsPoint(point: PointData)\n    {\n        const width = this._width;\n        const height = this._height;\n        const x1 = -width * this._anchor._x;\n        let y1 = 0;\n\n        if (point.x >= x1 && point.x <= x1 + width)\n        {\n            y1 = -height * this._anchor._y;\n\n            if (point.y >= y1 && point.y <= y1 + height) return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the current texture of the renderable as well\n     * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the renderable as well\n     */\n    public override destroy(options: DestroyOptions = false)\n    {\n        super.destroy(options);\n\n        this._anchor = null;\n        this._tileTransform = null;\n        this._bounds = null;\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            this._texture.destroy(destroyTextureSource);\n        }\n\n        this._texture = null;\n    }\n}\n\n", "import { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { ViewContainer } from '../view/ViewContainer';\n\nimport type { Size } from '../../maths/misc/Size';\nimport type { PointData } from '../../maths/point/PointData';\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { ContainerOptions } from '../container/Container';\nimport type { Optional } from '../container/container-mixins/measureMixin';\nimport type { DestroyOptions } from '../container/destroyTypes';\nimport type { HTMLTextStyle, HTMLTextStyleOptions } from '../text-html/HTMLTextStyle';\nimport type { TextStyle, TextStyleOptions } from './TextStyle';\n\n/**\n * A string or number that can be used as text.\n * @memberof text\n */\nexport type TextString = string | number | { toString: () => string };\n/**\n * A union of all text styles, including HTML, Bitmap and Canvas text styles.\n * @memberof text\n * @see text.TextStyle\n * @see text.HTMLTextStyle\n */\nexport type AnyTextStyle = TextStyle | HTMLTextStyle;\n/**\n * A union of all text style options, including HTML, Bitmap and Canvas text style options.\n * @memberof text\n * @see text.TextStyleOptions\n * @see text.HTMLTextStyleOptions\n */\nexport type AnyTextStyleOptions = TextStyleOptions | HTMLTextStyleOptions;\n\n/**\n * Options for the {@link scene.Text} class.\n * @example\n * const text = new Text({\n *    text: 'Hello Pixi!',\n *    style: {\n *       fontFamily: 'Arial',\n *       fontSize: 24,\n *    fill: 0xff1010,\n *    align: 'center',\n *  }\n * });\n * @memberof text\n */\nexport interface TextOptions<\n    TEXT_STYLE extends TextStyle = TextStyle,\n    TEXT_STYLE_OPTIONS extends TextStyleOptions = TextStyleOptions,\n> extends ContainerOptions\n{\n    /** The anchor point of the text. */\n    anchor?: PointData | number;\n    /** The copy for the text object. To split a line you can use '\\n'. */\n    text?: TextString;\n    /** The resolution of the text. */\n    resolution?: number;\n    /**\n     * The text style\n     * @type {\n     * text.TextStyle |\n     * Partial<text.TextStyle> |\n     * text.TextStyleOptions |\n     * text.HTMLTextStyle |\n     * Partial<text.HTMLTextStyle> |\n     * text.HTMLTextStyleOptions\n     * }\n     */\n    style?: TEXT_STYLE | TEXT_STYLE_OPTIONS;\n    /** Whether or not to round the x/y position. */\n    roundPixels?: boolean;\n}\n\n/**\n * An abstract Text class, used by all text type in Pixi. This includes Canvas, HTML, and Bitmap Text.\n * @see scene.Text\n * @see scene.BitmapText\n * @see scene.HTMLText\n * @memberof scene\n */\nexport abstract class AbstractText<\n    TEXT_STYLE extends TextStyle = TextStyle,\n    TEXT_STYLE_OPTIONS extends TextStyleOptions = TextStyleOptions,\n> extends ViewContainer implements View\n{\n    public batched = true;\n    public _anchor: ObservablePoint;\n\n    public _resolution: number = null;\n    public _autoResolution: boolean = true;\n\n    public _style: TEXT_STYLE;\n    public _didTextUpdate = true;\n\n    protected _text: string;\n    private readonly _styleClass: new (options: TEXT_STYLE_OPTIONS) => TEXT_STYLE;\n\n    constructor(\n        options: TextOptions<TEXT_STYLE, TEXT_STYLE_OPTIONS>,\n        styleClass: new (options: TEXT_STYLE_OPTIONS) => TEXT_STYLE\n    )\n    {\n        const { text, resolution, style, anchor, width, height, roundPixels, ...rest } = options;\n\n        super({\n            ...rest\n        });\n\n        this._styleClass = styleClass;\n\n        this.text = text ?? '';\n\n        this.style = style;\n\n        this.resolution = resolution ?? null;\n\n        this.allowChildren = false;\n\n        this._anchor = new ObservablePoint(\n            {\n                _onUpdate: () =>\n                {\n                    this.onViewUpdate();\n                },\n            },\n        );\n\n        if (anchor) this.anchor = anchor;\n        this.roundPixels = roundPixels ?? false;\n\n        // needs to be set after the container has initiated\n        if (width !== undefined) this.width = width;\n        if (height !== undefined) this.height = height;\n    }\n\n    /**\n     * The anchor sets the origin point of the text.\n     * The default is `(0,0)`, this means the text's origin is the top left.\n     *\n     * Setting the anchor to `(0.5,0.5)` means the text's origin is centered.\n     *\n     * Setting the anchor to `(1,1)` would mean the text's origin point will be the bottom right corner.\n     *\n     * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n     * @example\n     * import { Text } from 'pixi.js';\n     *\n     * const text = new Text('hello world');\n     * text.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).\n     */\n    get anchor(): ObservablePoint\n    {\n        return this._anchor;\n    }\n\n    set anchor(value: PointData | number)\n    {\n        typeof value === 'number' ? this._anchor.set(value) : this._anchor.copyFrom(value);\n    }\n\n    /** Set the copy for the text object. To split a line you can use '\\n'. */\n    set text(value: TextString)\n    {\n        // check its a string\n        value = value.toString();\n\n        if (this._text === value) return;\n\n        this._text = value as string;\n        this.onViewUpdate();\n    }\n\n    get text(): string\n    {\n        return this._text;\n    }\n\n    /**\n     * The resolution / device pixel ratio of the canvas.\n     * @default 1\n     */\n    set resolution(value: number)\n    {\n        this._autoResolution = value === null;\n        this._resolution = value;\n        this.onViewUpdate();\n    }\n\n    get resolution(): number\n    {\n        return this._resolution;\n    }\n\n    get style(): TEXT_STYLE\n    {\n        return this._style;\n    }\n\n    /**\n     * Set the style of the text.\n     *\n     * Set up an event listener to listen for changes on the style object and mark the text as dirty.\n     *\n     * If setting the `style` can also be partial {@link AnyTextStyleOptions}.\n     * @type {\n     * text.TextStyle |\n     * Partial<text.TextStyle> |\n     * text.TextStyleOptions |\n     * text.HTMLTextStyle |\n     * Partial<text.HTMLTextStyle> |\n     * text.HTMLTextStyleOptions\n     * }\n     */\n    set style(style: TEXT_STYLE | Partial<TEXT_STYLE> | TEXT_STYLE_OPTIONS)\n    {\n        style ||= {};\n\n        this._style?.off('update', this.onViewUpdate, this);\n\n        if (style instanceof this._styleClass)\n        {\n            this._style = style as TEXT_STYLE;\n        }\n        else\n        {\n            this._style = new this._styleClass(style as TEXT_STYLE_OPTIONS);\n        }\n\n        this._style.on('update', this.onViewUpdate, this);\n        this.onViewUpdate();\n    }\n\n    /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */\n    override get width(): number\n    {\n        return Math.abs(this.scale.x) * this.bounds.width;\n    }\n\n    override set width(value: number)\n    {\n        this._setWidth(value, this.bounds.width);\n    }\n\n    /** The height of the sprite, setting this will actually modify the scale to achieve the value set. */\n    override get height(): number\n    {\n        return Math.abs(this.scale.y) * this.bounds.height;\n    }\n\n    override set height(value: number)\n    {\n        this._setHeight(value, this.bounds.height);\n    }\n\n    /**\n     * Retrieves the size of the Text as a [Size]{@link Size} object.\n     * This is faster than get the width and height separately.\n     * @param out - Optional object to store the size in.\n     * @returns - The size of the Text.\n     */\n    public override getSize(out?: Size): Size\n    {\n        out ||= {} as Size;\n        out.width = Math.abs(this.scale.x) * this.bounds.width;\n        out.height = Math.abs(this.scale.y) * this.bounds.height;\n\n        return out;\n    }\n\n    /**\n     * Sets the size of the Text to the specified width and height.\n     * This is faster than setting the width and height separately.\n     * @param value - This can be either a number or a [Size]{@link Size} object.\n     * @param height - The height to set. Defaults to the value of `width` if not provided.\n     */\n    public override setSize(value: number | Optional<Size, 'height'>, height?: number)\n    {\n        if (typeof value === 'object')\n        {\n            height = value.height ?? value.width;\n            value = value.width;\n        }\n        else\n        {\n            height ??= value;\n        }\n\n        value !== undefined && this._setWidth(value, this.bounds.width);\n        height !== undefined && this._setHeight(height, this.bounds.height);\n    }\n\n    /**\n     * Checks if the text contains the given point.\n     * @param point - The point to check\n     */\n    public override containsPoint(point: PointData)\n    {\n        const width = this.bounds.width;\n        const height = this.bounds.height;\n\n        const x1 = -width * this.anchor.x;\n        let y1 = 0;\n\n        if (point.x >= x1 && point.x <= x1 + width)\n        {\n            y1 = -height * this.anchor.y;\n\n            if (point.y >= y1 && point.y <= y1 + height) return true;\n        }\n\n        return false;\n    }\n\n    public override onViewUpdate()\n    {\n        if (!this.didViewUpdate) this._didTextUpdate = true;\n        super.onViewUpdate();\n    }\n\n    public _getKey(): string\n    {\n        return `${this.text}:${this._style.styleKey}:${this._resolution}`;\n    }\n\n    /**\n     * Destroys this text renderable and optionally its style texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the texture of the text style\n     * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the text style\n     * @param {boolean} [options.style=false] - Should it destroy the style of the text\n     */\n    public override destroy(options: DestroyOptions = false): void\n    {\n        super.destroy(options);\n\n        (this as any).owner = null;\n        this._bounds = null;\n        this._anchor = null;\n\n        if (typeof options === 'boolean' ? options : options?.style)\n        {\n            this._style.destroy(options);\n        }\n\n        this._style = null;\n        this._text = null;\n    }\n}\n\nexport function ensureOptions<\n    TEXT_STYLE extends TextStyle,\n    TEXT_STYLE_OPTIONS extends TextStyleOptions\n>(\n    args: any[],\n    name: string\n): TextOptions<TEXT_STYLE, TEXT_STYLE_OPTIONS>\n{\n    let options = (args[0] ?? {}) as TextOptions<TEXT_STYLE, TEXT_STYLE_OPTIONS>;\n\n    // @deprecated\n    if (typeof options === 'string' || args[1])\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, `use new ${name}({ text: \"hi!\", style }) instead`);\n        // #endif\n\n        options = {\n            text: options,\n            style: args[1],\n        } as TextOptions<TEXT_STYLE, TEXT_STYLE_OPTIONS>;\n    }\n\n    return options;\n}\n", "import { AbstractText, ensureOptions } from './AbstractText';\nimport { CanvasTextMetrics } from './canvas/CanvasTextMetrics';\nimport { TextStyle } from './TextStyle';\n\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { TextOptions, TextString } from './AbstractText';\nimport type { TextStyleOptions } from './TextStyle';\n\n/**\n * A Text Object will create a line or multiple lines of text.\n *\n * To split a line you can use '\\n' in your text string, or, on the `style` object,\n * change its `wordWrap` property to true and and givae the `wordWrapWidth` property a value.\n *\n * The primary advantage of this class over BitmapText is that you have great control over the style of the text,\n * which you can change at runtime.\n *\n * The primary disadvantages is that each piece of text has it's own texture, which can use more memory.\n * When text changes, this texture has to be re-generated and re-uploaded to the GPU, taking up time.\n * @example\n * import { Text } from 'pixi.js';\n *\n * const text = new Text({\n *     text: 'Hello Pixi!',\n *     style: {\n *         fontFamily: 'Arial',\n *         fontSize: 24,\n *         fill: 0xff1010,\n *         align: 'center',\n *     }\n * });\n * @memberof scene\n */\nexport class Text\n    extends AbstractText<TextStyle, TextStyleOptions>\n    implements View\n{\n    public override readonly renderPipeId: string = 'text';\n\n    /**\n     * @param {text.TextOptions} options - The options of the text.\n     */\n    constructor(options?: TextOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(text?: TextString, options?: Partial<TextStyle>);\n    constructor(...args: [TextOptions?] | [TextString, Partial<TextStyle>])\n    {\n        const options = ensureOptions(args, 'Text');\n\n        super(options, TextStyle);\n    }\n\n    /** @private */\n    protected updateBounds()\n    {\n        const bounds = this._bounds;\n        const anchor = this._anchor;\n\n        const canvasMeasurement = CanvasTextMetrics.measureText(\n            this._text,\n            this._style\n        );\n\n        const { width, height } = canvasMeasurement;\n\n        bounds.minX = (-anchor._x * width);\n        bounds.maxX = bounds.minX + width;\n        bounds.minY = (-anchor._y * height);\n        bounds.maxY = bounds.minY + height;\n    }\n}\n", "import { TextureSource } from '../rendering/renderers/shared/texture/sources/TextureSource';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture';\nimport { Container } from '../scene/container/Container';\nimport { Graphics } from '../scene/graphics/shared/Graphics';\nimport { GraphicsContext } from '../scene/graphics/shared/GraphicsContext';\nimport { Mesh } from '../scene/mesh/shared/Mesh';\nimport { Sprite } from '../scene/sprite/Sprite';\nimport { AnimatedSprite } from '../scene/sprite-animated/AnimatedSprite';\nimport { TilingSprite } from '../scene/sprite-tiling/TilingSprite';\nimport { Text } from '../scene/text/Text';\nimport { PrepareBase } from './PrepareBase';\n\nimport type { FillInstruction, TextureInstruction } from '../scene/graphics/shared/GraphicsContext';\nimport type { FrameObject } from '../scene/sprite-animated/AnimatedSprite';\nimport type { PrepareQueueItem, PrepareSourceItem } from './PrepareBase';\n\n/**\n * Part of the prepare system. Responsible for uploading all the items to the GPU.\n * This class extends the base functionality and resolves given resource items ready for the queue.\n * @memberof rendering\n */\nexport abstract class PrepareQueue extends PrepareBase\n{\n    /**\n     * Resolve the given resource type and return an item for the queue\n     * @param source\n     * @param queue\n     */\n    protected resolveQueueItem(source: PrepareSourceItem, queue: PrepareQueueItem[]): void\n    {\n        if (source instanceof Container)\n        {\n            this.resolveContainerQueueItem(source, queue);\n        }\n        else if (source instanceof TextureSource || source instanceof Texture)\n        {\n            queue.push(source.source);\n        }\n        else if (source instanceof GraphicsContext)\n        {\n            queue.push(source);\n        }\n\n        // could not resolve the resource type\n        return null;\n    }\n\n    /**\n     * Resolve the given container and return an item for the queue\n     * @param container\n     * @param queue\n     */\n    protected resolveContainerQueueItem(container: Container, queue: PrepareQueueItem[]): void\n    {\n        // Note: we are just concerned with the given view.\n        // Children are handled by the recursive call of the base class\n\n        if (container instanceof Sprite || container instanceof TilingSprite || container instanceof Mesh)\n        {\n            queue.push(container.texture.source);\n        }\n        else if (container instanceof Text)\n        {\n            queue.push(container);\n        }\n        else if (container instanceof Graphics)\n        {\n            queue.push(container.context);\n        }\n        else if (container instanceof AnimatedSprite)\n        {\n            container.textures.forEach((textureOrFrame) =>\n            {\n                if ((textureOrFrame as Texture).source)\n                {\n                    queue.push((textureOrFrame as Texture).source);\n                }\n                else\n                {\n                    queue.push((textureOrFrame as FrameObject).texture.source);\n                }\n            });\n        }\n    }\n\n    /**\n     * Resolve the given graphics context and return an item for the queue\n     * @param graphicsContext\n     */\n    protected resolveGraphicsContextQueueItem(graphicsContext: GraphicsContext): PrepareQueueItem | null\n    {\n        this.renderer.graphicsContext.getContextRenderData(graphicsContext);\n\n        const { instructions } = graphicsContext;\n\n        for (const instruction of instructions)\n        {\n            if (instruction.action === 'texture')\n            {\n                const { image } = (instruction as TextureInstruction).data;\n\n                return image.source;\n            }\n            else if (instruction.action === 'fill')\n            {\n                const { texture } = (instruction as FillInstruction).data.style;\n\n                return texture.source;\n            }\n        }\n\n        return null;\n    }\n}\n", "import { warn } from '../../utils/logging/warn';\nimport { AbstractText, ensureOptions } from '../text/AbstractText';\nimport { TextStyle } from '../text/TextStyle';\nimport { BitmapFontManager } from './BitmapFontManager';\n\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { TextOptions, TextString } from '../text/AbstractText';\nimport type { TextStyleOptions } from '../text/TextStyle';\n\n/**\n * A BitmapText Object will create a line or multiple lines of text.\n *\n * To split a line you can use '\\n' in your text string, or, on the `style` object,\n * change its `wordWrap` property to true and and give the `wordWrapWidth` property a value.\n *\n * The text is created using a bitmap font (a sprite sheet of characters).\n *\n * The primary advantage of this render mode over `text` is that all of your textures are pre-generated and loaded,\n * meaning that rendering is fast, and changing text is much faster than Text.\n *\n * The primary disadvantage is that supporting character sets other than latin, such as CJK languages,\n * may be impractical due to the number of characters.\n *\n * <b>Pre-loaded BitmapFonts:</b>\n *\n *\n * PixiJS enables the loading of BitmapFonts through its Asset Manager, supporting both XML and FNT formats.\n * Additionally, PixiJS is compatible with MSDF (Multi-channel Signed Distance Field) and SDF (Signed Distance Field) fonts.\n * These advanced font types allow for scaling without quality degradation and must be created with specific tools,\n * such as the one available at https://msdf-bmfont.donmccurdy.com/.\n *\n * <b>Dynamically Generated BitmapFonts:</b>\n *\n *\n * PixiJS also offers the capability to generate BitmapFonts dynamically. This means that fonts are created in real-time\n * based on specified styles, eliminating the need for pre-loading. This process is initiated simply by assigning a style\n * to a BitmapText object, which then automatically generates the required font.\n *\n * However, dynamically generating a large number of fonts may lead to significant memory use. To prevent this,\n * PixiJS smartly attempts to reuse fonts that closely match the desired style parameters. For instance, if a text style\n * requires a font size of 80 but a similar font of size 100 has already been generated, PixiJS will scale the existing\n * font to fit the new requirement, rather than creating a new font from scratch.\n *\n * For those who prefer to manage BitmapFonts manually, PixiJS provides the BitmapFont.install method. This method\n * allows for the pre-generation and preparation of fonts, making them readily available for use by specifying the\n * fontFamily in your text styling.\n *\n * This approach ensures efficient font management within PixiJS, balancing between dynamic generation for flexibility\n * and manual management for optimized performance.\n * @example\n * import { BitmapText, BitmapFont } from 'pixi.js';\n *\n * // generate a dynamic font behind the scenes:\n * const text = new BitmapText({\n *     text: 'Hello Pixi!',\n *     style: {\n *         fontFamily: 'Arial',\n *         fontSize: 24,\n *         fill: 0xff1010,\n *         align: 'center',\n *     }\n * });\n *\n * // pre install\n * BitmapFont.install({\n *    name: 'myFont',\n *    style:{\n *        fontFamily: 'Arial',\n *    }\n * })\n *\n * // new bitmap text with preinstalled font\n * const text = new BitmapText({\n *     text: 'Hello Pixi!',\n *     style: {\n *        fontFamily: 'myFont',\n *        fontSize: 24,\n *        fill: 0xff1010,\n *        align: 'center',\n *     }\n * }\n *\n * // load a font from an xml file\n * const font = await Assets.load('path/to/myLoadedFont.fnt');\n *\n * // new bitmap text with loaded font\n * const text = new BitmapText({\n *     text: 'Hello Pixi!',\n *     style: {\n *        fontFamily: 'myLoadedFont', // the name of the font in the fnt file\n *        fontSize: 24,\n *        fill: 0xff1010,\n *        align: 'center',\n *     }\n * }\n * @memberof scene\n */\nexport class BitmapText extends AbstractText<TextStyle, TextStyleOptions> implements View\n{\n    public override readonly renderPipeId: string = 'bitmapText';\n\n    /**\n     * **Note:** Our docs parser struggles to properly understand the constructor signature.\n     * This is the correct signature.\n     * ```ts\n     * new BitmapText(options?: TextOptions);\n     * ```\n     * @param { text.TextOptions } options - The options of the bitmap text.\n     */\n    constructor(options?: TextOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(text?: TextString, options?: Partial<TextStyle>);\n    constructor(...args: [TextOptions?] | [TextString, Partial<TextStyle>])\n    {\n        const options = ensureOptions(args, 'BitmapText');\n\n        options.style ??= options.style || {};\n        options.style.fill ??= 0xffffff;\n\n        super(options, TextStyle);\n    }\n\n    /** @private */\n    protected updateBounds()\n    {\n        const bounds = this._bounds;\n        const anchor = this._anchor;\n\n        const bitmapMeasurement = BitmapFontManager.measureText(this.text, this._style);\n        const scale = bitmapMeasurement.scale;\n        const offset = bitmapMeasurement.offsetY * scale;\n\n        let width = bitmapMeasurement.width * scale;\n        let height = bitmapMeasurement.height * scale;\n\n        const stroke = this._style._stroke;\n\n        if (stroke)\n        {\n            width += stroke.width;\n            height += stroke.width;\n        }\n\n        bounds.minX = (-anchor._x * width);\n        bounds.maxX = bounds.minX + width;\n        bounds.minY = (-anchor._y * (height + offset));\n        bounds.maxY = bounds.minY + height;\n    }\n\n    /**\n     * The resolution / device pixel ratio of the canvas.\n     * @default 1\n     */\n    override set resolution(value: number)\n    {\n        // #if _DEBUG\n        if (value !== null)\n        {\n            warn(\n            // eslint-disable-next-line max-len\n                '[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.'\n            );\n        }\n        // #endif\n    }\n\n    override get resolution(): number\n    {\n        return this._resolution;\n    }\n}\n", "import { AbstractText, ensureOptions } from '../text/AbstractText';\nimport { HTMLTextStyle } from './HTMLTextStyle';\nimport { measureHtmlText } from './utils/measureHtmlText';\n\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { TextOptions, TextString } from '../text/AbstractText';\nimport type { HTMLTextStyleOptions } from './HTMLTextStyle';\n\n/**\n * Constructor options used for `HTMLText` instances.\n * @property {string} [text=''] - The string that you would like the text to display.\n * @property {text.HTMLTextStyle | text.HTMLTextStyleOptions} [style] - The style of the text.\n * @memberof text\n */\nexport type HTMLTextOptions = TextOptions<HTMLTextStyle, HTMLTextStyleOptions>;\n\n/**\n * A HTMLText Object will create a line or multiple lines of text.\n *\n * To split a line you can use '\\n' in your text string, or, on the `style` object,\n * change its `wordWrap` property to true and and give the `wordWrapWidth` property a value.\n *\n * HTMLText uses an svg foreignObject to render HTML text.\n *\n *\n * The primary advantages of this render mode are:\n *\n *  - Supports [HTML tags](https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/HTML_text_fundamentals)\n * for styling such as `<strong>`, or `<em>`, as well as `<span style=\"\">`\n *\n *       - Better support for emojis and other HTML layout features, better compatibility with CSS\n *     line-height and letter-spacing.\n *\n *\n * The primary disadvantages are:\n *   - Unlike `text`, `html` rendering will vary slightly between platforms and browsers.\n * `html` uses SVG/DOM to render text and not Context2D's fillText like `text`.\n *\n *   - Performance and memory usage is on-par with `text` (that is to say, slow and heavy)\n *\n *   - Only works with browsers that support <foreignObject>.\n * @example\n * import { HTMLText } from 'pixi.js';\n *\n * const text = new HTMLText({\n *     text: 'Hello Pixi!',\n *     style: {\n *         fontFamily: 'Arial',\n *         fontSize: 24,\n *         fill: 0xff1010,\n *         align: 'center',\n *     }\n * });\n * @memberof scene\n */\nexport class HTMLText extends AbstractText<HTMLTextStyle, HTMLTextStyleOptions> implements View\n{\n    public override readonly renderPipeId: string = 'htmlText';\n\n    /**\n     * @param {text.HTMLTextOptions} options - The options of the html text.\n     */\n    constructor(options?: HTMLTextOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(text?: TextString, options?: Partial<HTMLTextStyle>);\n    constructor(...args: [HTMLTextOptions?] | [TextString, Partial<HTMLTextStyle>])\n    {\n        const options = ensureOptions<HTMLTextStyle, HTMLTextStyleOptions>(args, 'HtmlText');\n\n        super(options, HTMLTextStyle);\n    }\n\n    /** @private */\n    protected updateBounds()\n    {\n        const bounds = this._bounds;\n        const anchor = this._anchor;\n\n        const htmlMeasurement = measureHtmlText(this.text, this._style as HTMLTextStyle);\n\n        const { width, height } = htmlMeasurement;\n\n        bounds.minX = (-anchor._x * width);\n        bounds.maxX = bounds.minX + width;\n        bounds.minY = (-anchor._y * height);\n        bounds.maxY = bounds.minY + height;\n    }\n}\n", "import { TextureSource } from '../rendering/renderers/shared/texture/sources/TextureSource';\nimport { GraphicsContext } from '../scene/graphics/shared/GraphicsContext';\nimport { Text } from '../scene/text/Text';\nimport { BitmapText } from '../scene/text-bitmap/BitmapText';\nimport { HTMLText } from '../scene/text-html/HTMLText';\nimport { PrepareQueue } from './PrepareQueue';\n\nimport type { FillInstruction, TextureInstruction } from '../scene/graphics/shared/GraphicsContext';\nimport type { PrepareQueueItem } from './PrepareBase';\n\n/**\n * Part of the prepare system. Responsible for uploading all the items to the GPU.\n * This class extends the resolver functionality and uploads the given queue items.\n * @memberof rendering\n */\nexport abstract class PrepareUpload extends PrepareQueue\n{\n    /**\n     * Upload the given queue item\n     * @param item\n     */\n    protected uploadQueueItem(item: PrepareQueueItem): void\n    {\n        if (item instanceof TextureSource)\n        {\n            this.uploadTextureSource(item);\n        }\n        else if (item instanceof Text)\n        {\n            this.uploadText(item);\n        }\n        else if (item instanceof HTMLText)\n        {\n            this.uploadHTMLText(item);\n        }\n        else if (item instanceof BitmapText)\n        {\n            this.uploadBitmapText(item);\n        }\n        else if (item instanceof GraphicsContext)\n        {\n            this.uploadGraphicsContext(item);\n        }\n    }\n\n    protected uploadTextureSource(textureSource: TextureSource): void\n    {\n        this.renderer.texture.initSource(textureSource);\n    }\n\n    protected uploadText(_text: Text): void\n    {\n        this.renderer.renderPipes.text.initGpuText(_text);\n    }\n\n    protected uploadBitmapText(_text: BitmapText): void\n    {\n        this.renderer.renderPipes.bitmapText.initGpuText(_text);\n    }\n\n    protected uploadHTMLText(_text: HTMLText): void\n    {\n        this.renderer.renderPipes.htmlText.initGpuText(_text);\n    }\n\n    /**\n     * Resolve the given graphics context and return an item for the queue\n     * @param graphicsContext\n     */\n    protected uploadGraphicsContext(graphicsContext: GraphicsContext): void\n    {\n        this.renderer.graphicsContext.getContextRenderData(graphicsContext);\n\n        const { instructions } = graphicsContext;\n\n        for (const instruction of instructions)\n        {\n            if (instruction.action === 'texture')\n            {\n                const { image } = (instruction as TextureInstruction).data;\n\n                this.uploadTextureSource(image.source);\n            }\n            else if (instruction.action === 'fill')\n            {\n                const { texture } = (instruction as FillInstruction).data.style;\n\n                this.uploadTextureSource(texture.source);\n            }\n        }\n\n        return null;\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { PrepareUpload } from './PrepareUpload';\n\nimport type { System } from '../rendering/renderers/shared/system/System';\n\n/**\n * The prepare system provides renderer-specific plugins for pre-rendering DisplayObjects. This is useful for\n * asynchronously preparing and uploading to the GPU assets, textures, graphics waiting to be displayed.\n *\n * Do not instantiate this plugin directly. It is available from the `renderer.prepare` property.\n * @example\n * import 'pixi.js/prepare';\n * import { Application, Graphics } from 'pixi.js';\n *\n * // Create a new application (prepare will be auto-added to renderer)\n * const app = new Application();\n * await app.init();\n * document.body.appendChild(app.view);\n *\n * // Don't start rendering right away\n * app.stop();\n *\n * // Create a display object\n * const rect = new Graphics()\n *     .beginFill(0x00ff00)\n *     .drawRect(40, 40, 200, 200);\n *\n * // Add to the stage\n * app.stage.addChild(rect);\n *\n * // Don't start rendering until the graphic is uploaded to the GPU\n * app.renderer.prepare.upload(app.stage, () => {\n *     app.start();\n * });\n * @memberof rendering\n */\nexport class PrepareSystem extends PrepareUpload implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n            ExtensionType.WebGPUSystem,\n        ],\n        name: 'prepare',\n    } as const;\n\n    /** Destroys the plugin, don't use after this. */\n    public destroy(): void\n    {\n        clearTimeout(this.timeout);\n        this.renderer = null;\n        this.queue = null;\n        this.resolves = null;\n    }\n}\n", "import { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation';\n\n/**\n * The different topology types supported by the renderer used to describe how the geometry should be renderer\n * @memberof rendering\n */\nexport type Topology =\n    'point-list'\n    | 'line-list'\n    | 'line-strip'\n    | 'triangle-list'\n    | 'triangle-strip';\n\nconst DEPRECATED_DRAW_MODES = {\n    POINTS: 'point-list',\n    LINES: 'line-list',\n    LINE_STRIP: 'line-strip',\n    TRIANGLES: 'triangle-list',\n    TRIANGLE_STRIP: 'triangle-strip',\n};\n\n/** @deprecated since 8.0.0 */\nexport const DRAW_MODES = new Proxy(DEPRECATED_DRAW_MODES, {\n    get(target, prop: keyof typeof DEPRECATED_DRAW_MODES)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, `DRAW_MODES.${prop} is deprecated, use '${DEPRECATED_DRAW_MODES[prop]}' instead`);\n        // #endif\n\n        return target[prop];\n    },\n});\n\n/**\n * The different types of vertex formats supported by the renderer\n * @memberof rendering\n */\nexport type VertexFormat =\n    | 'uint8x2'\n    | 'uint8x4'\n    | 'sint8x2'\n    | 'sint8x4'\n    | 'unorm8x2'\n    | 'unorm8x4'\n    | 'snorm8x2'\n    | 'snorm8x4'\n    | 'uint16x2'\n    | 'uint16x4'\n    | 'sint16x2'\n    | 'sint16x4'\n    | 'unorm16x2'\n    | 'unorm16x4'\n    | 'snorm16x2'\n    | 'snorm16x4'\n    | 'float16x2'\n    | 'float16x4'\n    | 'float32'\n    | 'float32x2'\n    | 'float32x3'\n    | 'float32x4'\n    | 'uint32'\n    | 'uint32x2'\n    | 'uint32x3'\n    | 'uint32x4'\n    | 'sint32'\n    | 'sint32x2'\n    | 'sint32x3'\n    | 'sint32x4';\n\n", "import { Rectangle } from '../../../../maths/shapes/Rectangle';\n\nimport type { TextureSource } from '../texture/sources/TextureSource';\n\nconst fullFrame = new Rectangle(0, 0, 1, 1);\n\n/**\n * Takes a Texture source and a normalised frame\n * and returns a viewport for that frame.\n * @param viewport - The viewport rectangle to set.\n * @param source - The source to get the pixel width and height from.\n * @param frame - The frame to get the viewport from.\n * @returns the passed in viewport.\n */\nexport function viewportFromFrame(\n    viewport: Rectangle,\n    source: TextureSource,\n    frame?: Rectangle\n)\n{\n    frame ||= fullFrame;\n\n    const pixelWidth = source.pixelWidth;\n    const pixelHeight = source.pixelHeight;\n\n    viewport.x = (frame.x * pixelWidth) | 0;\n    viewport.y = (frame.y * pixelHeight) | 0;\n    viewport.width = (frame.width * pixelWidth) | 0;\n    viewport.height = (frame.height * pixelHeight) | 0;\n\n    return viewport;\n}\n", "import { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation';\n\n/**\n * Specifies the alpha composition mode for textures.\n *\n * - `no-premultiply-alpha`: Does not premultiply alpha.\n * - `premultiply-alpha-on-upload`: Premultiplies alpha on texture upload.\n * - `premultiplied-alpha`: Assumes the texture is already in premultiplied alpha format.\n * @typedef {'no-premultiply-alpha' | 'premultiply-alpha-on-upload' | 'premultiplied-alpha'} ALPHA_MODES\n */\nexport type ALPHA_MODES =\n    'no-premultiply-alpha' |\n    'premultiply-alpha-on-upload' |\n    'premultiplied-alpha';\n\n/**\n * Constants for multi-sampling antialiasing.\n * @see Framebuffer#multisample\n * @name MSAA_QUALITY\n * @static\n * @enum {number}\n * @property {number} NONE - No multisampling for this renderTexture\n * @property {number} LOW - Try 2 samples\n * @property {number} MEDIUM - Try 4 samples\n * @property {number} HIGH - Try 8 samples\n */\nexport enum MSAA_QUALITY\n{\n    NONE = 0,\n    LOW = 2,\n    MEDIUM = 4,\n    HIGH = 8\n}\n\nexport type TEXTURE_FORMATS =\n    // 8-bit formats\n    'r8unorm' |\n    'r8snorm' |\n    'r8uint' |\n    'r8sint' |\n\n    // 16-bit formats\n    'r16uint' |\n    'r16sint' |\n    'r16float' |\n    'rg8unorm' |\n    'rg8snorm' |\n    'rg8uint' |\n    'rg8sint' |\n\n    // 32-bit formats\n    'r32uint' |\n    'r32sint' |\n    'r32float' |\n    'rg16uint' |\n    'rg16sint' |\n    'rg16float' |\n    'rgba8unorm' |\n    'rgba8unorm-srgb' |\n    'rgba8snorm' |\n    'rgba8uint' |\n    'rgba8sint' |\n    'bgra8unorm' |\n    'bgra8unorm-srgb' |\n    // Packed 32-bit formats\n    'rgb9e5ufloat' |\n    'rgb10a2unorm' |\n    'rg11b10ufloat' |\n\n    // 64-bit formats\n    'rg32uint' |\n    'rg32sint' |\n    'rg32float' |\n    'rgba16uint' |\n    'rgba16sint' |\n    'rgba16float' |\n\n    // 128-bit formats\n    'rgba32uint' |\n    'rgba32sint' |\n    'rgba32float' |\n\n    // Depth/stencil formats\n    'stencil8' |\n    'depth16unorm' |\n    'depth24plus' |\n    'depth24plus-stencil8' |\n    'depth32float' |\n\n    // \"depth32float-stencil8\" feature\n    'depth32float-stencil8' |\n\n    // BC compressed formats usable if \"texture-compression-bc\" is both\n    // supported by the device/user agent and enabled in requestDevice.\n    'bc1-rgba-unorm' |\n    'bc1-rgba-unorm-srgb' |\n    'bc2-rgba-unorm' |\n    'bc2-rgba-unorm-srgb' |\n    'bc3-rgba-unorm' |\n    'bc3-rgba-unorm-srgb' |\n    'bc4-r-unorm' |\n    'bc4-r-snorm' |\n    'bc5-rg-unorm' |\n    'bc5-rg-snorm' |\n    'bc6h-rgb-ufloat' |\n    'bc6h-rgb-float' |\n    'bc7-rgba-unorm' |\n    'bc7-rgba-unorm-srgb' |\n\n    // ETC2 compressed formats usable if \"texture-compression-etc2\" is both\n    // supported by the device/user agent and enabled in requestDevice.\n    'etc2-rgb8unorm' |\n    'etc2-rgb8unorm-srgb' |\n    'etc2-rgb8a1unorm' |\n    'etc2-rgb8a1unorm-srgb' |\n    'etc2-rgba8unorm' |\n    'etc2-rgba8unorm-srgb' |\n    'eac-r11unorm' |\n    'eac-r11snorm' |\n    'eac-rg11unorm' |\n    'eac-rg11snorm' |\n\n    // ASTC compressed formats usable if \"texture-compression-astc\" is both\n    // supported by the device/user agent and enabled in requestDevice.\n    'astc-4x4-unorm' |\n    'astc-4x4-unorm-srgb' |\n    'astc-5x4-unorm' |\n    'astc-5x4-unorm-srgb' |\n    'astc-5x5-unorm' |\n    'astc-5x5-unorm-srgb' |\n    'astc-6x5-unorm' |\n    'astc-6x5-unorm-srgb' |\n    'astc-6x6-unorm' |\n    'astc-6x6-unorm-srgb' |\n    'astc-8x5-unorm' |\n    'astc-8x5-unorm-srgb' |\n    'astc-8x6-unorm' |\n    'astc-8x6-unorm-srgb' |\n    'astc-8x8-unorm' |\n    'astc-8x8-unorm-srgb' |\n    'astc-10x5-unorm' |\n    'astc-10x5-unorm-srgb' |\n    'astc-10x6-unorm' |\n    'astc-10x6-unorm-srgb' |\n    'astc-10x8-unorm' |\n    'astc-10x8-unorm-srgb' |\n    'astc-10x10-unorm' |\n    'astc-10x10-unorm-srgb' |\n    'astc-12x10-unorm' |\n    'astc-12x10-unorm-srgb' |\n    'astc-12x12-unorm' |\n    'astc-12x12-unorm-srgb';\n\nexport type TEXTURE_VIEW_DIMENSIONS =\n    '1d' |\n    '2d' |\n    '2d-array' |\n    'cube' |\n    'cube-array' |\n    '3d';\n\nexport type TEXTURE_DIMENSIONS =\n    | '1d'\n    | '2d'\n    | '3d';\n\nexport type WRAP_MODE =\n    /**\n     * The texture uvs are clamped\n     * @default 33071\n     */\n    | 'clamp-to-edge'\n    /**\n     * The texture uvs tile and repeat\n     * @default 10497\n     */\n    | 'repeat'\n    /**\n     * The texture uvs tile and repeat with mirroring\n     * @default 33648\n     */\n    | 'mirror-repeat';\n\nexport enum DEPRECATED_WRAP_MODES\n{\n    CLAMP = 'clamp-to-edge',\n\n    REPEAT = 'repeat',\n\n    MIRRORED_REPEAT = 'mirror-repeat',\n}\n\n/** @deprecated since 8.0.0 */\nexport const WRAP_MODES = new Proxy(DEPRECATED_WRAP_MODES, {\n    get(target, prop: keyof typeof DEPRECATED_WRAP_MODES)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, `DRAW_MODES.${prop} is deprecated, use '${DEPRECATED_WRAP_MODES[prop]}' instead`);\n        // #endif\n\n        return target[prop];\n    },\n});\n\n/**\n * The scale modes that are supported by pixi.\n *\n * The {@link settings.SCALE_MODE} scale mode affects the default scaling mode of future operations.\n * It can be re-assigned to either LINEAR or NEAREST, depending upon suitability.\n * @static\n */\nexport type SCALE_MODE =\n    /** Pixelating scaling */\n | 'nearest'\n     /** Smooth scaling */\n | 'linear';\n\nexport enum DEPRECATED_SCALE_MODES\n{\n    NEAREST = 'nearest',\n    LINEAR = 'linear',\n}\n\n/**\n * @deprecated since 8.0.0\n */\nexport const SCALE_MODES = new Proxy(DEPRECATED_SCALE_MODES, {\n    get(target, prop: keyof typeof DEPRECATED_SCALE_MODES)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, `DRAW_MODES.${prop} is deprecated, use '${DEPRECATED_SCALE_MODES[prop]}' instead`);\n        // #endif\n\n        return target[prop];\n    },\n});\n\nexport type COMPARE_FUNCTION =\n    | 'never'\n    | 'less'\n    | 'equal'\n    | 'less-equal'\n    | 'greater'\n    | 'not-equal'\n    | 'greater-equal'\n    | 'always';\n", "import type { ArrayFixed } from '../../../utils/types';\nimport type { PlaneGeometry } from '../../mesh-plane/PlaneGeometry';\n\n/**\n * Apply a projective transformation to a plane geometry\n * @param width - The width of the plane\n * @param height - The height of the plane\n * @param geometry - The plane geometry to apply the transformation to\n * @param transformationMatrix - The transformation matrix to apply\n */\nexport function applyProjectiveTransformationToPlane(\n    width: number,\n    height: number,\n    geometry: PlaneGeometry,\n    transformationMatrix: ArrayFixed<number, 9>\n)\n{\n    const buffer = geometry.buffers[0];\n\n    // Access the vertices of the mesh\n    const vertices = buffer.data;\n\n    const { verticesX, verticesY } = geometry;\n\n    const sizeX = (width) / (verticesX - 1);\n    const sizeY = (height) / (verticesY - 1);\n\n    let index = 0;\n\n    const a00 = transformationMatrix[0];\n    const a01 = transformationMatrix[1];\n    const a02 = transformationMatrix[2];\n    const a10 = transformationMatrix[3];\n    const a11 = transformationMatrix[4];\n    const a12 = transformationMatrix[5];\n    const a20 = transformationMatrix[6];\n    const a21 = transformationMatrix[7];\n    const a22 = transformationMatrix[8];\n\n    // Apply the transformation to each vertex\n    for (let i = 0; i < vertices.length; i += 2)\n    {\n        const x = (index % verticesX) * sizeX;\n        const y = ((index / verticesX) | 0) * sizeY;\n\n        const newX = (a00 * x) + (a01 * y) + a02;\n        const newY = (a10 * x) + (a11 * y) + a12;\n        const w = (a20 * x) + (a21 * y) + a22;\n\n        vertices[i] = newX / w;\n        vertices[i + 1] = newY / w;\n\n        index++;\n    }\n\n    // Update the mesh geometry to reflect the changes\n    buffer.update();\n}\n", "import type { ArrayFixed } from '../../../utils/types';\n\ntype Matrix3x3 = ArrayFixed<number, 9>;\ntype Vector3 = ArrayFixed<number, 3>;\n\nfunction computeAdjugate(out: Matrix3x3, matrix: Matrix3x3): Matrix3x3\n{\n    const a00 = matrix[0];\n    const a01 = matrix[1];\n    const a02 = matrix[2];\n    const a10 = matrix[3];\n    const a11 = matrix[4];\n    const a12 = matrix[5];\n    const a20 = matrix[6];\n    const a21 = matrix[7];\n    const a22 = matrix[8];\n\n    out[0] = (a11 * a22) - (a12 * a21);\n    out[1] = (a02 * a21) - (a01 * a22);\n    out[2] = (a01 * a12) - (a02 * a11);\n    out[3] = (a12 * a20) - (a10 * a22);\n    out[4] = (a00 * a22) - (a02 * a20);\n    out[5] = (a02 * a10) - (a00 * a12);\n    out[6] = (a10 * a21) - (a11 * a20);\n    out[7] = (a01 * a20) - (a00 * a21);\n    out[8] = (a00 * a11) - (a01 * a10);\n\n    return out;\n}\n\nfunction multiplyMatrix3x3(out: Matrix3x3, a: Matrix3x3, b: Matrix3x3)\n{\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a10 = a[3];\n    const a11 = a[4];\n    const a12 = a[5];\n    const a20 = a[6];\n    const a21 = a[7];\n    const a22 = a[8];\n\n    const b00 = b[0];\n    const b01 = b[1];\n    const b02 = b[2];\n    const b10 = b[3];\n    const b11 = b[4];\n    const b12 = b[5];\n    const b20 = b[6];\n    const b21 = b[7];\n    const b22 = b[8];\n\n    out[0] = (b00 * a00) + (b01 * a10) + (b02 * a20);\n    out[1] = (b00 * a01) + (b01 * a11) + (b02 * a21);\n    out[2] = (b00 * a02) + (b01 * a12) + (b02 * a22);\n\n    out[3] = (b10 * a00) + (b11 * a10) + (b12 * a20);\n    out[4] = (b10 * a01) + (b11 * a11) + (b12 * a21);\n    out[5] = (b10 * a02) + (b11 * a12) + (b12 * a22);\n\n    out[6] = (b20 * a00) + (b21 * a10) + (b22 * a20);\n    out[7] = (b20 * a01) + (b21 * a11) + (b22 * a21);\n    out[8] = (b20 * a02) + (b21 * a12) + (b22 * a22);\n\n    return out;\n}\n\nfunction multiplyMatrixAndVector(out: Vector3, m: Matrix3x3, v: Vector3): Vector3\n{\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n\n    out[0] = (m[0] * x) + (m[1] * y) + (m[2] * z);\n    out[1] = (m[3] * x) + (m[4] * y) + (m[5] * z);\n    out[2] = (m[6] * x) + (m[7] * y) + (m[8] * z);\n\n    return out;\n}\n\n//\nconst tempMatrix: Matrix3x3 = [0, 0, 0, 0, 0, 0, 0, 0, 0];\nconst tempVec: Vector3 = [0, 0, 0];\nconst tempVec2: Vector3 = [0, 0, 0];\n\nfunction generateBasisToPointsMatrix(\n    out: Matrix3x3,\n    x1: number, y1: number,\n    x2: number, y2: number,\n    x3: number, y3: number,\n    x4: number, y4: number\n): Matrix3x3\n{\n    const m: Matrix3x3 = tempMatrix;\n\n    m[0] = x1;\n    m[1] = x2;\n    m[2] = x3;\n    m[3] = y1;\n    m[4] = y2;\n    m[5] = y3;\n    m[6] = 1;\n    m[7] = 1;\n    m[8] = 1;\n\n    const adjugateM: Matrix3x3 = computeAdjugate(\n        out, // reusing out as adjugateM is only used once\n        m\n    );\n\n    tempVec2[0] = x4;\n    tempVec2[1] = y4;\n    tempVec2[2] = 1;\n\n    const v: Vector3 = multiplyMatrixAndVector(\n        tempVec,\n        adjugateM,\n        tempVec2,\n    );\n\n    const diagonalMatrix = out; // we can reuse the out matrix as the diagonal matrix is only used once\n\n    out[0] = v[0];\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = v[1];\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = v[2];\n\n    return multiplyMatrix3x3(out, diagonalMatrix, m);\n}\n\nconst tempSourceMatrix: Matrix3x3 = [0, 0, 0, 0, 0, 0, 0, 0, 0];\nconst tempDestinationMatrix: Matrix3x3 = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n/**\n * Compute a 2D projection matrix\n * @param out - The matrix to store the result in\n * @param x1s - The x coordinate of the first source point\n * @param y1s - The y coordinate of the first source point\n * @param x1d - The x coordinate of the first destination point\n * @param y1d - The y coordinate of the first destination point\n * @param x2s - The x coordinate of the second source point\n * @param y2s - The y coordinate of the second source point\n * @param x2d - The x coordinate of the second destination point\n * @param y2d - The y coordinate of the second destination point\n * @param x3s - The x coordinate of the third source point\n * @param y3s - The y coordinate of the third source point\n * @param x3d - The x coordinate of the third destination point\n * @param y3d - The y coordinate of the third destination point\n * @param x4s - The x coordinate of the fourth source point\n * @param y4s - The y coordinate of the fourth source point\n * @param x4d - The x coordinate of the fourth destination point\n * @param y4d - The y coordinate of the fourth destination point\n * @returns - The computed 2D projection matrix\n * @private\n */\n// eslint-disable-next-line max-params\nexport function compute2DProjection(\n    out: Matrix3x3,\n    x1s: number, y1s: number, x1d: number, y1d: number,\n    x2s: number, y2s: number, x2d: number, y2d: number,\n    x3s: number, y3s: number, x3d: number, y3d: number,\n    x4s: number, y4s: number, x4d: number, y4d: number\n): Matrix3x3\n{\n    const sourceMatrix = generateBasisToPointsMatrix(\n        tempSourceMatrix,\n        x1s, y1s, x2s, y2s, x3s, y3s, x4s, y4s\n    );\n\n    const destinationMatrix = generateBasisToPointsMatrix(\n        tempDestinationMatrix,\n        x1d, y1d, x2d, y2d, x3d, y3d, x4d, y4d\n    );\n\n    return multiplyMatrix3x3(\n        out,\n        computeAdjugate(sourceMatrix, sourceMatrix),\n        destinationMatrix\n    );\n}\n", "import { PlaneGeometry } from '../mesh-plane/PlaneGeometry';\nimport { applyProjectiveTransformationToPlane } from './utils/applyProjectiveTransformationToPlane';\nimport { compute2DProjection } from './utils/compute2DProjections';\n\nimport type { ArrayFixed } from '../../utils/types';\nimport type { PlaneGeometryOptions } from '../mesh-plane/PlaneGeometry';\n\n/**\n * Constructor options used for `PerspectivePlaneGeometry` instances.\n * @memberof scene\n */\nexport interface PerspectivePlaneGeometryOptions extends PlaneGeometryOptions\n{\n    /** The width of the plane */\n    width: number;\n    /** The height of the plane */\n    height: number;\n}\n\n/**\n * A PerspectivePlaneGeometry allows you to draw a 2d plane with perspective. Where ever you move the corners\n * the texture will be projected to look like it is in 3d space. Great for mapping a 2D mesh into a 3D scene.\n *\n * IMPORTANT: This is not a full 3D mesh, it is a 2D mesh with a perspective projection applied to it :)\n *\n * ```js\n * const perspectivePlaneGeometry = new PerspectivePlaneGeometry({\n *  width: 100,\n *  height: 100,\n *  verticesX: 10,\n *  verticesY: 10,\n * });\n * ```\n * @see {@link scene.PerspectivePlaneGeometry}\n * @memberof scene\n */\nexport class PerspectivePlaneGeometry extends PlaneGeometry\n{\n    /** The corner points of the quad you can modify these directly, if you do make sure to call `updateProjection` */\n    public corners: [number, number, number, number, number, number, number, number];\n    private readonly _projectionMatrix: ArrayFixed<number, 9> = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n    /**\n     * @param options - Options to be applied to MeshPlane\n     * @param options.width - The width of the plane\n     * @param options.height - The height of the plane\n     * @param options.verticesX - The amount of vertices on the x axis\n     * @param options.verticesY - The amount of vertices on the y axis\n     */\n    constructor(options: PerspectivePlaneGeometryOptions)\n    {\n        super(options);\n\n        const { width, height } = options;\n\n        this.corners = [0, 0, width, 0, width, height, 0, height];\n    }\n\n    /**\n     * Will set the corners of the quad to the given coordinates\n     * Calculating the perspective so it looks correct!\n     * @param x0 - x coordinate of the first corner\n     * @param y0 - y coordinate of the first corner\n     * @param x1 - x coordinate of the second corner\n     * @param y1 - y coordinate of the second corner\n     * @param x2 - x coordinate of the third corner\n     * @param y2 - y coordinate of the third corner\n     * @param x3 - x coordinate of the fourth corner\n     * @param y3 - y coordinate of the fourth corner\n     */\n    public setCorners(x0: number, y0: number, x1: number, y1: number, x2: number, y2: number, x3: number, y3: number)\n    {\n        const corners = this.corners;\n\n        corners[0] = x0;\n        corners[1] = y0;\n        corners[2] = x1;\n        corners[3] = y1;\n        corners[4] = x2;\n        corners[5] = y2;\n        corners[6] = x3;\n        corners[7] = y3;\n\n        this.updateProjection();\n    }\n\n    /** Update the projection matrix based on the corners */\n    public updateProjection()\n    {\n        const { width, height } = this;\n        const corners = this.corners;\n\n        const projectionMatrix = compute2DProjection(\n            this._projectionMatrix,\n            0, 0, // top-left source\n            corners[0], corners[1], // top-left dest\n            width, 0, // top-right source\n            corners[2], corners[3], // top-right dest\n            width, height, // bottom-right source\n            corners[4], corners[5], // bottom-right dest\n            0, height, // bottom-left source\n            corners[6], corners[7] // bottom-left dest\n        );\n\n        applyProjectiveTransformationToPlane(\n            width,\n            height,\n            this,\n            projectionMatrix\n        );\n    }\n}\n\n", "import { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { definedProps } from '../container/utils/definedProps';\nimport { Mesh } from '../mesh/shared/Mesh';\nimport { PerspectivePlaneGeometry } from './PerspectivePlaneGeometry';\n\nimport type { MeshPlaneOptions } from '../mesh-plane/MeshPlane';\n/**\n *\n * Constructor options used for `PerspectiveMesh` instances.\n * ```js\n * const meshPlane = new PerspectiveMesh({\n *  texture: Texture.from('snake.png'),\n *  verticesX: 20,\n *  verticesY: 20,\n *  x0: 0,\n *  y0: 0,\n *  x1: 100,\n *  y1: 0,\n *  x2: 100,\n *  y2: 100,\n *  x3: 0,\n *  y3: 100\n * });\n * @see {@link scene.PerspectiveMesh}\n * @memberof scene\n */\nexport interface PerspectivePlaneOptions extends MeshPlaneOptions\n{\n    /** top left corner x value */\n    x0?: number,\n    /** top left corner y value */\n    y0?: number,\n    /** top right corner x value */\n    x1?: number,\n    /** top right corner y value */\n    y1?: number,\n    /** bottom right corner x value */\n    x2?: number,\n    /** bottom right corner y value */\n    y2?: number,\n    /** bottom left corner x value */\n    x3?: number,\n    /** bottom left corner y value */\n    y3?: number\n}\n\n/**\n * A perspective mesh that allows you to draw a 2d plane with perspective. Where ever you move the corners\n * the texture will be projected to look like it is in 3d space. Great for mapping a 2D mesh into a 3D scene.\n *\n * The calculations is done at the uv level. This means that the more vertices you have the more smooth\n * the perspective will be. If you have a low amount of vertices you may see the texture stretch. Too many vertices\n * could be slower. It is a balance between performance and quality! We leave that to you to decide.\n *\n * IMPORTANT: This is not a full 3D mesh, it is a 2D mesh with a perspective projection applied to it :)\n * @example\n * ```js\n * const meshPlane = new PerspectiveMesh({\n *  texture: Texture.from('snake.png'),\n *  verticesX: 20,\n *  verticesY: 20,\n *  x0: 0,\n *  y0: 0,\n *  x1: 100,\n *  y1: 0,\n *  x2: 100,\n *  y2: 100,\n *  x3: 0,\n *  y3: 100\n * });\n * @see {@link scene.PerspectiveMesh}\n * @memberof scene\n */\nexport class PerspectiveMesh extends Mesh<PerspectivePlaneGeometry>\n{\n    /** default options for the mesh */\n    public static defaultOptions: PerspectivePlaneOptions = {\n        texture: Texture.WHITE,\n        verticesX: 10,\n        verticesY: 10,\n        x0: 0,\n        y0: 0,\n        x1: 100,\n        y1: 0,\n        x2: 100,\n        y2: 100,\n        x3: 0,\n        y3: 100\n    };\n\n    /**\n     * @param options - Options to be applied to PerspectiveMesh\n     */\n    constructor(options: PerspectivePlaneOptions)\n    {\n        options = { ...PerspectiveMesh.defaultOptions, ...options };\n\n        const { texture, verticesX, verticesY, ...rest } = options;\n        const planeGeometry = new PerspectivePlaneGeometry(definedProps({\n            width: texture.width,\n            height: texture.height,\n            verticesX,\n            verticesY,\n        }));\n\n        super(definedProps({ ...rest, geometry: planeGeometry }));\n\n        this._texture = texture;\n\n        this.geometry.setCorners(\n            options.x0, options.y0,\n            options.x1, options.y1,\n            options.x2, options.y2,\n            options.x3, options.y3\n        );\n    }\n\n    /** Update the geometry when the texture is updated */\n    protected textureUpdated(): void\n    {\n        const geometry: PerspectivePlaneGeometry = this.geometry as any;\n\n        if (!geometry) return;\n\n        const { width, height } = this.texture;\n\n        if (geometry.width !== width || geometry.height !== height)\n        {\n            geometry.width = width;\n            geometry.height = height;\n            geometry.updateProjection();\n        }\n    }\n\n    set texture(value: Texture)\n    {\n        if (this._texture === value) return;\n\n        super.texture = value;\n\n        this.textureUpdated();\n    }\n\n    /** The texture that the mesh uses */\n    get texture(): Texture\n    {\n        return this._texture;\n    }\n\n    /**\n     * Set the corners of the quad to the given coordinates\n     * The mesh will then calculate the perspective so it looks correct!\n     * @param x0 - x coordinate of the first corner\n     * @param y0 - y coordinate of the first corner\n     * @param x1 - x coordinate of the second corner\n     * @param y1 - y coordinate of the second corner\n     * @param x2 - x coordinate of the third corner\n     * @param y2 - y coordinate of the third corner\n     * @param x3 - x coordinate of the fourth corner\n     * @param y3 - y coordinate of the fourth corner\n     */\n    public setCorners(x0: number, y0: number, x1: number, y1: number, x2: number, y2: number, x3: number, y3: number)\n    {\n        this.geometry.setCorners(x0, y0, x1, y1, x2, y2, x3, y3);\n    }\n}\n", "import { MeshGeometry } from '../mesh/shared/MeshGeometry';\n\nimport type { PointData } from '../../maths/point/PointData';\nimport type { MeshGeometryOptions } from '../mesh/shared/MeshGeometry';\n\n/**\n * Constructor options used for `RopeGeometry` instances.\n * ```js\n * const ropeGeometry = new RopeGeometry({\n *    points: [new Point(0, 0), new Point(100, 0)],\n *    width: 10,\n *    textureScale: 0,\n * });\n * ```\n * @see {@link scene.RopeGeometry}\n * @memberof scene\n */\nexport interface RopeGeometryOptions\n{\n    /** The width (i.e., thickness) of the rope. */\n    width?: number;\n    /** An array of points that determine the rope. */\n    points?: PointData[];\n    /**\n     * Rope texture scale, if zero then the rope texture is stretched.\n     * By default the rope texture will be stretched to match\n     * rope length. If textureScale is positive this value will be treated as a scaling\n     * factor and the texture will preserve its aspect ratio instead. To create a tiling rope\n     * set baseTexture.wrapMode to 'repeat' and use a power of two texture,\n     * then set textureScale=1 to keep the original texture pixel size.\n     * In order to reduce alpha channel artifacts provide a larger texture and downsample -\n     * i.e. set textureScale=0.5 to scale it down twice.\n     */\n    textureScale?: number;\n}\n\n/**\n * RopeGeometry allows you to draw a geometry across several points and then manipulate these points.\n * @example\n * import { Point, RopeGeometry } from 'pixi.js';\n *\n * for (let i = 0; i < 20; i++) {\n *     points.push(new Point(i * 50, 0));\n * };\n * const rope = new RopeGeometry(100, points);\n * @memberof scene\n */\nexport class RopeGeometry extends MeshGeometry\n{\n    /** Default options for RopeGeometry constructor. */\n    public static defaultOptions: RopeGeometryOptions & MeshGeometryOptions = {\n        /** The width (i.e., thickness) of the rope. */\n        width: 200,\n        /** An array of points that determine the rope. */\n        points: [],\n        /** Rope texture scale, if zero then the rope texture is stretched. */\n        textureScale: 0,\n    };\n\n    /** An array of points that determine the rope. */\n    public points: PointData[];\n\n    /** Rope texture scale, if zero then the rope texture is stretched. */\n    public readonly textureScale: number;\n\n    /**\n     * The width (i.e., thickness) of the rope.\n     * @readonly\n     */\n    public _width: number;\n\n    /**\n     * @param options - Options to be applied to rope geometry\n     */\n    constructor(options: RopeGeometryOptions)\n    {\n        const { width, points, textureScale } = { ...RopeGeometry.defaultOptions, ...options };\n\n        super({\n            positions: new Float32Array(points.length * 4),\n            uvs: new Float32Array(points.length * 4),\n            indices: new Uint32Array((points.length - 1) * 6),\n        });\n\n        this.points = points;\n        this._width = width;\n        this.textureScale = textureScale;\n\n        this._build();\n    }\n\n    /**\n     * The width (i.e., thickness) of the rope.\n     * @readonly\n     */\n    get width(): number\n    {\n        return this._width;\n    }\n\n    /** Refreshes Rope indices and uvs */\n    private _build(): void\n    {\n        const points = this.points;\n\n        if (!points) return;\n\n        const vertexBuffer = this.getBuffer('aPosition');\n        const uvBuffer = this.getBuffer('aUV');\n        const indexBuffer = this.getIndex();\n\n        // if too little points, or texture hasn't got UVs set yet just move on.\n        if (points.length < 1)\n        {\n            return;\n        }\n\n        // if the number of points has changed we will need to recreate the arraybuffers\n        if (vertexBuffer.data.length / 4 !== points.length)\n        {\n            vertexBuffer.data = new Float32Array(points.length * 4);\n            uvBuffer.data = new Float32Array(points.length * 4);\n            indexBuffer.data = new Uint16Array((points.length - 1) * 6);\n        }\n\n        const uvs = uvBuffer.data;\n        const indices = indexBuffer.data;\n\n        uvs[0] = 0;\n        uvs[1] = 0;\n        uvs[2] = 0;\n        uvs[3] = 1;\n\n        let amount = 0;\n        let prev = points[0];\n        const textureWidth = this._width * this.textureScale;\n        const total = points.length; // - 1;\n\n        for (let i = 0; i < total; i++)\n        {\n            // time to do some smart drawing!\n            const index = i * 4;\n\n            if (this.textureScale > 0)\n            {\n                // calculate pixel distance from previous point\n                const dx = prev.x - points[i].x;\n                const dy = prev.y - points[i].y;\n                const distance = Math.sqrt((dx * dx) + (dy * dy));\n\n                prev = points[i];\n                amount += distance / textureWidth;\n            }\n            else\n            {\n                // stretch texture\n                amount = i / (total - 1);\n            }\n\n            uvs[index] = amount;\n            uvs[index + 1] = 0;\n\n            uvs[index + 2] = amount;\n            uvs[index + 3] = 1;\n        }\n\n        let indexCount = 0;\n\n        for (let i = 0; i < total - 1; i++)\n        {\n            const index = i * 2;\n\n            indices[indexCount++] = index;\n            indices[indexCount++] = index + 1;\n            indices[indexCount++] = index + 2;\n\n            indices[indexCount++] = index + 2;\n            indices[indexCount++] = index + 1;\n            indices[indexCount++] = index + 3;\n        }\n\n        // ensure that the changes are uploaded\n        uvBuffer.update();\n        indexBuffer.update();\n\n        this.updateVertices();\n    }\n\n    /** refreshes vertices of Rope mesh */\n    public updateVertices(): void\n    {\n        const points = this.points;\n\n        if (points.length < 1)\n        {\n            return;\n        }\n\n        let lastPoint = points[0];\n        let nextPoint;\n        let perpX = 0;\n        let perpY = 0;\n\n        const vertices = this.buffers[0].data;\n        const total = points.length;\n        const halfWidth = this.textureScale > 0 ? this.textureScale * this._width / 2 : this._width / 2;\n\n        for (let i = 0; i < total; i++)\n        {\n            const point = points[i];\n            const index = i * 4;\n\n            if (i < points.length - 1)\n            {\n                nextPoint = points[i + 1];\n            }\n            else\n            {\n                nextPoint = point;\n            }\n\n            perpY = -(nextPoint.x - lastPoint.x);\n            perpX = nextPoint.y - lastPoint.y;\n\n            let ratio = (1 - (i / (total - 1))) * 10;\n\n            if (ratio > 1)\n            {\n                ratio = 1;\n            }\n\n            const perpLength = Math.sqrt((perpX * perpX) + (perpY * perpY));\n\n            if (perpLength < 1e-6)\n            {\n                perpX = 0;\n                perpY = 0;\n            }\n            else\n            {\n                perpX /= perpLength;\n                perpY /= perpLength;\n\n                perpX *= halfWidth;\n                perpY *= halfWidth;\n            }\n\n            vertices[index] = point.x + perpX;\n            vertices[index + 1] = point.y + perpY;\n            vertices[index + 2] = point.x - perpX;\n            vertices[index + 3] = point.y - perpY;\n\n            lastPoint = point;\n        }\n\n        this.buffers[0].update();\n    }\n\n    /** Refreshes Rope indices and uvs */\n    public update(): void\n    {\n        if (this.textureScale > 0)\n        {\n            this._build(); // we need to update UVs\n        }\n        else\n        {\n            this.updateVertices();\n        }\n    }\n}\n", "import { definedProps } from '../container/utils/definedProps';\nimport { Mesh } from '../mesh/shared/Mesh';\nimport { RopeGeometry } from './RopeGeometry';\n\nimport type { PointData } from '../../maths/point/PointData';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport type { MeshOptions } from '../mesh/shared/Mesh';\n\n/**\n * Constructor options used for `MeshRope` instances.\n * ```js\n * const meshRope = new MeshRope({\n *    texture: Texture.from('snake.png'),\n *    points: [new Point(0, 0), new Point(100, 0)],\n *    textureScale: 0,\n * });\n * ```\n * @see {@link scene.MeshRope}\n * @memberof scene\n */\nexport interface MeshRopeOptions extends Omit<MeshOptions, 'geometry'>\n{\n    /** The texture to use on the rope. */\n    texture: Texture;\n    /** An array of points that determine the rope. */\n    points: PointData[];\n    /**\n     * Rope texture scale, if zero then the rope texture is stretched.\n     * Positive values scale rope texture\n     * keeping its aspect ratio. You can reduce alpha channel artifacts by providing a larger texture\n     * and downsampling here. If set to zero, texture will be stretched instead.\n     */\n    textureScale?: number;\n}\n\n/**\n * The rope allows you to draw a texture across several points and then manipulate these points\n * @example\n * import { Point, MeshRope, Texture } from 'pixi.js';\n *\n * for (let i = 0; i < 20; i++) {\n *     points.push(new Point(i * 50, 0));\n * };\n * const rope = new MeshRope(Texture.from('snake.png'), points);\n * @memberof scene\n */\nexport class MeshRope extends Mesh\n{\n    public static defaultOptions: Partial<MeshRopeOptions> = {\n        textureScale: 0,\n    };\n\n    /** re-calculate vertices by rope points each frame */\n    public autoUpdate: boolean;\n\n    /**\n     * Note: The wrap mode of the texture is set to REPEAT if `textureScale` is positive.\n     * @param options\n     * @param options.texture - The texture to use on the rope.\n     * @param options.points - An array of {@link math.Point} objects to construct this rope.\n     * @param {number} options.textureScale - Optional. Positive values scale rope texture\n     * keeping its aspect ratio. You can reduce alpha channel artifacts by providing a larger texture\n     * and downsampling here. If set to zero, texture will be stretched instead.\n     */\n    constructor(options: MeshRopeOptions)\n    {\n        const { texture, points, textureScale, ...rest } = { ...MeshRope.defaultOptions, ...options };\n        const ropeGeometry = new RopeGeometry(definedProps({ width: texture.height, points, textureScale }));\n\n        if (textureScale > 0)\n        {\n            // attempt to set UV wrapping, will fail on non-power of two textures\n            texture.source.style.addressMode = 'repeat';\n        }\n        super(definedProps({\n            ...rest,\n            texture,\n            geometry: ropeGeometry,\n        }));\n\n        this.autoUpdate = true;\n\n        this.onRender = this._render;\n    }\n\n    private _render(): void\n    {\n        const geometry: RopeGeometry = this.geometry as any;\n\n        if (this.autoUpdate || geometry._width !== this.texture.height)\n        {\n            geometry._width = this.texture.height;\n            geometry.update();\n        }\n    }\n}\n", "import { Color } from '../../../color/Color';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport { bgr2rgb } from '../../container/container-mixins/getGlobalMixin';\nimport { assignWithIgnore } from '../../container/utils/assignWithIgnore';\n\nimport type { ColorSource } from '../../../color/Color';\n\n/**\n * Represents a particle with properties for position, scale, rotation, color, and texture.\n * @property {number} x - The x-coordinate of the particle.\n * @property {number} y - The y-coordinate of the particle.\n * @property {number} scaleX - The scale factor in the x-axis.\n * @property {number} scaleY - The scale factor in the y-axis.\n * @property {number} anchorX - The x-coordinate of the anchor point.\n * @property {number} anchorY - The y-coordinate of the anchor point.\n * @property {number} rotation - The rotation of the particle in radians.\n * @property {number} color - The color of the particle as a hexadecimal number.\n * @property {Texture} texture - The texture of the particle.\n * @memberof scene\n */\nexport interface IParticle\n{\n    x: number;\n    y: number;\n    scaleX: number;\n    scaleY: number;\n    anchorX: number;\n    anchorY: number;\n    rotation: number;\n    color: number;\n    texture: Texture;\n}\n\n/**\n * Represents the options for creating a new particle.\n * @property {number} x - The x-coordinate of the particle.\n * @property {number} y - The y-coordinate of the particle.\n * @property {number} scaleX - The scale factor in the x-axis.\n * @property {number} scaleY - The scale factor in the y-axis.\n * @property {number} anchorX - The x-coordinate of the anchor point.\n * @property {number} anchorY - The y-coordinate of the anchor point.\n * @property {number} rotation - The rotation of the particle in radians.\n * @property {Texture} texture - The texture of the particle.\n * @property {ColorSource} tint - The tint color of the particle as a hexadecimal number.\n * @property {number} alpha - The alpha value of the particle.\n * @memberof scene\n */\nexport type ParticleOptions = Omit<Partial<IParticle>, 'color'> & {\n    texture: Texture\n    tint?: ColorSource;\n    alpha?: number;\n};\n\n/**\n * Represents a single particle within a particle container. This class implements the IParticle interface,\n * providing properties and methods to manage the particle's position, scale, rotation, color, and texture.\n *\n * The reason we use a particle over a sprite is that these are much lighter weight and we can create a lot of them\n * without taking on the overhead of a full sprite.\n *\n * Here is an example of how to create a new particle:\n *\n * ```javascript\n * const particle = new Particle({\n *   texture,\n *   x: 100,\n *   y: 100,\n *   scaleX: 0.5,\n *   scaleY: 0.5,\n *   rotation: Math.PI / 2,\n *   color: 0xff0000,\n * });\n * ```\n * @implements {IParticle}\n * @memberof scene\n */\nexport class Particle implements IParticle\n{\n    /** Default options for constructing with options */\n    public static defaultOptions: Partial<ParticleOptions> = {\n        anchorX: 0,\n        anchorY: 0,\n        x: 0,\n        y: 0,\n        scaleX: 1,\n        scaleY: 1,\n        rotation: 0,\n        tint: 0xffffff,\n        alpha: 1,\n    };\n    /** The x-coordinate of the anchor point. */\n    public anchorX: number;\n    /** The y-coordinate of the anchor point. */\n    public anchorY: number;\n    /** The x-coordinate of the particle. */\n    public x: number;\n    /** The y-coordinate of the particle. */\n    public y: number;\n    /** The scale factor in the x-axis. */\n    public scaleX: number;\n    /** The scale factor in the y-axis. */\n    public scaleY: number;\n    /** The rotation of the particle in radians. */\n    public rotation: number;\n    /** The color of the particle as a hexadecimal number. */\n    public color: number;\n    /** The texture of the particle. */\n    public texture: Texture;\n\n    private _alpha: number;\n    private _tint: number;\n\n    constructor(options: Texture | ParticleOptions)\n    {\n        if (options instanceof Texture)\n        {\n            this.texture = options;\n            assignWithIgnore(this, Particle.defaultOptions, {});\n        }\n        else\n        {\n            const combined = { ...Particle.defaultOptions, ...options };\n\n            assignWithIgnore(this, combined, {});\n        }\n    }\n\n    /** Gets or sets the alpha value of the particle. */\n    get alpha(): number\n    {\n        return this._alpha;\n    }\n\n    set alpha(value: number)\n    {\n        this._alpha = Math.min(Math.max(value, 0), 1);\n\n        this._updateColor();\n    }\n\n    /** Gets or sets the tint color of the particle. */\n    get tint(): number\n    {\n        return bgr2rgb(this._tint);\n    }\n\n    set tint(value: ColorSource)\n    {\n        if (typeof value === 'number')\n        {\n            this._tint = value;\n        }\n        else\n        {\n            this._tint = Color.shared.setValue(value ?? 0xFFFFFF).toBgrNumber();\n        }\n\n        this._updateColor();\n    }\n\n    private _updateColor()\n    {\n        // combine alpha and tint\n        this.color = this._tint + (((this._alpha * 255) | 0) << 24);\n    }\n}\n", "import type { VertexFormat } from '../../../rendering/renderers/shared/geometry/const';\nimport type { IParticle } from './Particle';\n\nexport interface ParticleRendererProperty\n{\n    attributeName: string;\n    format: VertexFormat;\n    code: string;\n    dynamic: boolean;\n    // optional update function if you have customized this stuff and need it to work with unsafe-eval\n    updateFunction?: (ps: IParticle[], f32v: Float32Array, u32v: Uint32Array, offset: number, stride: number) => void;\n}\n\nexport const particleData = {\n    vertex: {\n        attributeName: 'aVertex',\n        format: 'float32x2',\n        code: `\n            const texture = p.texture;\n            const sx = p.scaleX;\n            const sy = p.scaleY;\n            const ax = p.anchorX;\n            const ay = p.anchorY;\n            const trim = texture.trim;\n            const orig = texture.orig;\n\n            if (trim)\n            {\n                w1 = trim.x - (ax * orig.width);\n                w0 = w1 + trim.width;\n\n                h1 = trim.y - (ay * orig.height);\n                h0 = h1 + trim.height;\n            }\n            else\n            {\n                w1 = -ax * (orig.width);\n                w0 = w1 + orig.width;\n\n                h1 = -ay * (orig.height);\n                h0 = h1 + orig.height;\n            }\n\n            f32v[offset] = w1 * sx;\n            f32v[offset + 1] = h1 * sy;\n\n            f32v[offset + stride] = w0 * sx;\n            f32v[offset + stride + 1] = h1 * sy;\n\n            f32v[offset + (stride * 2)] = w0 * sx;\n            f32v[offset + (stride * 2) + 1] = h0 * sy;\n\n            f32v[offset + (stride * 3)] = w1 * sx;\n            f32v[offset + (stride * 3) + 1] = h0 * sy;\n        `,\n        dynamic: false,\n    },\n    // positionData\n    position: {\n        attributeName: 'aPosition',\n        format: 'float32x2',\n        code: `\n            var x = p.x;\n            var y = p.y;\n\n            f32v[offset] = x;\n            f32v[offset + 1] = y;\n\n            f32v[offset + stride] = x;\n            f32v[offset + stride + 1] = y;\n\n            f32v[offset + (stride * 2)] = x;\n            f32v[offset + (stride * 2) + 1] = y;\n\n            f32v[offset + (stride * 3)] = x;\n            f32v[offset + (stride * 3) + 1] = y;\n        `,\n        dynamic: true,\n    },\n    // rotationData\n    rotation: {\n        attributeName: 'aRotation',\n        format: 'float32',\n        code: `\n            var rotation = p.rotation;\n\n            f32v[offset] = rotation;\n            f32v[offset + stride] = rotation;\n            f32v[offset + (stride * 2)] = rotation;\n            f32v[offset + (stride * 3)] = rotation;\n        `,\n        dynamic: false,\n    },\n    // uvsData\n    uvs: {\n        attributeName: 'aUV',\n        format: 'float32x2',\n        code: `\n            var uvs = p.texture.uvs;\n\n            f32v[offset] = uvs.x0;\n            f32v[offset + 1] = uvs.y0;\n\n            f32v[offset + stride] = uvs.x1;\n            f32v[offset + stride + 1] = uvs.y1;\n\n            f32v[offset + (stride * 2)] = uvs.x2;\n            f32v[offset + (stride * 2) + 1] = uvs.y2;\n\n            f32v[offset + (stride * 3)] = uvs.x3;\n            f32v[offset + (stride * 3) + 1] = uvs.y3;\n        `,\n        dynamic: false,\n    },\n    // tintData\n    color: {\n        attributeName: 'aColor',\n        format: 'unorm8x4',\n        code: `\n            const c = p.color;\n\n            u32v[offset] = c;\n            u32v[offset + stride] = c;\n            u32v[offset + (stride * 2)] = c;\n            u32v[offset + (stride * 3)] = c;\n        `,\n        dynamic: false,\n    },\n} as Record<string, ParticleRendererProperty>;\n", "import { Bounds } from '../../container/bounds/Bounds';\nimport { ViewContainer } from '../../view/ViewContainer';\nimport { particleData } from './particleData';\n\nimport type { Instruction } from '../../../rendering/renderers/shared/instructions/Instruction';\nimport type { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { ContainerChild, ContainerOptions } from '../../container/Container';\nimport type { DestroyOptions } from '../../container/destroyTypes';\nimport type { IParticle } from './Particle';\nimport type { ParticleRendererProperty } from './particleData';\n\nconst emptyBounds = new Bounds(0, 0, 0, 0);\n\n/**\n * Represents the properties of a particle that can be dynamically updated.\n * @property {boolean} [vertices] - Indicates if vertices are dynamic.\n * @property {boolean} [position] - Indicates if position is dynamic.\n * @property {boolean} [rotation] - Indicates if rotation is dynamic.\n * @property {boolean} [uvs] - Indicates if UVs are dynamic.\n * @property {boolean} [color] - Indicates if color is dynamic.\n * @memberof scene\n */\nexport interface ParticleProperties\n{\n    vertex?: boolean;\n    position?: boolean;\n    rotation?: boolean;\n    uvs?: boolean;\n    color?: boolean;\n}\n\n/**\n * Options for the ParticleContainer constructor.\n * @extends ContainerOptions\n * @property {Record<string, boolean>} dynamicProperties - Specifies which properties are dynamic.\n * @property {Shader} shader - The shader to use for rendering.\n * @property {boolean} roundPixels - Indicates if pixels should be rounded.\n * @property {Texture} texture - The texture to use for rendering - if not provided the texture of the first child is used.\n * @property {IParticle[]} particles - An array of particles to add to the container.\n * @memberof scene\n */\nexport interface ParticleContainerOptions extends Omit<ContainerOptions, 'children'>\n{\n    dynamicProperties?: Record<string, boolean>;\n    shader?: Shader;\n    roundPixels?: boolean;\n    texture?: Texture;\n    particles?: IParticle[];\n}\n\n/**\n * The ParticleContainer class is a highly optimized container that can render 1000s or particles at great speed.\n *\n * A ParticleContainer is specialized in that it can only contain and render particles. Particles are\n * lightweight objects that use minimal memory, which helps boost performance.\n *\n * It can render particles EXTREMELY fast!\n *\n * The tradeoff of using a ParticleContainer is that most advanced functionality is unavailable. Particles are simple\n * and cannot have children, filters, masks, etc. They possess only the basic properties: position, scale, rotation,\n * and color.\n *\n * All particles must share the same texture source (using something like a sprite sheet works well here).\n *\n * When creating a ParticleContainer, a developer can specify which of these properties are static and which are dynamic.\n * - Static properties are only updated when you add or remove a child, or when the `update` function is called.\n * - Dynamic properties are updated every frame.\n *\n * It is up to the developer to specify which properties are static and which are dynamic. Generally, the more static\n * properties you have (i.e., those that do not change per frame), the faster the rendering.\n *\n * If the developer modifies the children order or any static properties of the particle, they must call the `update` method.\n *\n * By default, only the `position` property is set to dynamic, which makes rendering very fast!\n *\n * Developers can also provide a custom shader to the particle container, allowing them to render particles in a custom way.\n *\n * To help with performance, the particle containers bounds are not calculated.\n * It's up to the developer to set the boundsArea property.\n *\n * It's extremely easy to use. Below is an example of rendering thousands of sprites at lightning speed.\n *\n * --------- EXPERIMENTAL ---------\n *\n * This is a new API, things may change and it may not work as expected.\n * We want to hear your feedback as we go!\n *\n * --------------------------------\n * @example\n * import { ParticleContainer, Particle } from 'pixi.js';\n *\n * const container = new ParticleContainer();\n *\n * for (let i = 0; i < 100; ++i)\n * {\n *     let particle = new Particle(texture);\n *     container.addParticle(particle);\n * }\n * @memberof scene\n */\nexport class ParticleContainer extends ViewContainer implements Instruction\n{\n    /**\n     * Defines the default options for creating a ParticleContainer.\n     * @property {Record<string, boolean>} dynamicProperties - Specifies which properties are dynamic.\n     * @property {boolean} roundPixels - Indicates if pixels should be  rounded.\n     */\n    public static defaultOptions: ParticleContainerOptions = {\n        dynamicProperties: {\n            vertex: false, // Indicates if vertex positions are dynamic.\n            position: true, // Indicates if particle positions are dynamic.\n            rotation: false, // Indicates if particle rotations are dynamic.\n            uvs: false, // Indicates if UV coordinates are dynamic.\n            color: false, // Indicates if particle colors are dynamic.\n        },\n        roundPixels: false, // Indicates if pixels should be rounded for rendering.\n    };\n\n    /** The unique identifier for the render pipe of this ParticleContainer. */\n    public override readonly renderPipeId: string = 'particle';\n\n    public batched = false;\n\n    /**\n     * A record of properties and their corresponding ParticleRendererProperty.\n     * @internal\n     */\n    public _properties: Record<string, ParticleRendererProperty>;\n\n    /** Indicates if the children of this ParticleContainer have changed and need to be updated. */\n    public _childrenDirty = false;\n\n    /**\n     * An array of particles that are children of this ParticleContainer.\n     * it can be modified directly, after which the 'update' method must be called.\n     * to ensure the container is rendered correctly.\n     */\n    public particleChildren: IParticle[];\n\n    /** The shader used for rendering particles in this ParticleContainer. */\n    public shader: Shader;\n\n    /**\n     * The texture used for rendering particles in this ParticleContainer.\n     * Defaults to the first childs texture if not set\n     */\n    public texture: Texture;\n\n    /**\n     * @param options - The options for creating the sprite.\n     */\n    constructor(options: ParticleContainerOptions = {})\n    {\n        options = {\n            ...ParticleContainer.defaultOptions,\n            ...options,\n            dynamicProperties: {\n                ...ParticleContainer.defaultOptions.dynamicProperties,\n                ...options?.dynamicProperties,\n            },\n        };\n\n        // split out\n        const { dynamicProperties, shader, roundPixels, texture, particles, ...rest } = options;\n\n        super({\n            label: 'ParticleContainer',\n            ...rest,\n        });\n\n        this.texture = texture || null;\n        this.shader = shader;\n\n        this._properties = {};\n\n        for (const key in particleData)\n        {\n            const property = particleData[key];\n            const dynamic = dynamicProperties[key];\n\n            this._properties[key] = {\n                ...property,\n                dynamic,\n            };\n        }\n\n        this.allowChildren = true;\n        this.roundPixels = roundPixels ?? false;\n\n        this.particleChildren = particles ?? [];\n    }\n\n    /**\n     * Adds one or more particles to the container.\n     *\n     * Multiple items can be added like so: `myContainer.addParticle(thingOne, thingTwo, thingThree)`\n     * @param {...IParticle} children - The Particle(s) to add to the container\n     * @returns {IParticle} - The first child that was added.\n     */\n    public addParticle(...children: IParticle[]): IParticle\n    {\n        for (let i = 0; i < children.length; i++)\n        {\n            this.particleChildren.push(children[i]);\n        }\n\n        this.onViewUpdate();\n\n        return children[0];\n    }\n\n    /**\n     * Removes one or more particles from the container.\n     * @param {...IParticle} children - The Particle(s) to remove\n     * @returns {IParticle} The first child that was removed.\n     */\n    public removeParticle(...children: IParticle[]): IParticle\n    {\n        let didRemove = false;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            const index = this.particleChildren.indexOf(children[i] as IParticle);\n\n            if (index > -1)\n            {\n                this.particleChildren.splice(index, 1);\n                didRemove = true;\n            }\n        }\n\n        if (didRemove) this.onViewUpdate();\n\n        return children[0];\n    }\n\n    /**\n     * Updates the particle container.\n     * Please call this when you modify the particleChildren array.\n     * or any static properties of the particles.\n     */\n    public update()\n    {\n        this._childrenDirty = true;\n    }\n\n    protected override onViewUpdate()\n    {\n        this._childrenDirty = true;\n        super.onViewUpdate();\n    }\n\n    /**\n     * ParticleContainer does not calculated bounds as it would slow things down,\n     * its up to you to set this via the boundsArea property\n     */\n    public get bounds()\n    {\n        return emptyBounds;\n    }\n\n    /** @private */\n    protected override updateBounds(): void { /* empty */ }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the current texture of the renderable as well\n     * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the renderable as well\n     */\n    public override destroy(options: DestroyOptions = false)\n    {\n        super.destroy(options);\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            const texture = this.texture ?? this.particleChildren[0]?.texture;\n\n            if (texture)\n            {\n                texture.destroy(destroyTextureSource);\n            }\n        }\n\n        this.texture = null;\n        this.shader?.destroy();\n    }\n\n    /**\n     * Removes all particles from this container that are within the begin and end indexes.\n     * @param beginIndex - The beginning position.\n     * @param endIndex - The ending position. Default value is size of the container.\n     * @returns - List of removed particles\n     */\n    public removeParticles(beginIndex?: number, endIndex?: number)\n    {\n        const children = this.particleChildren.splice(beginIndex, endIndex);\n\n        this.onViewUpdate();\n\n        return children;\n    }\n\n    /**\n     * Removes a particle from the specified index position.\n     * @param index - The index to get the particle from\n     * @returns The particle that was removed.\n     */\n    public removeParticleAt<U extends IParticle>(index: number): U\n    {\n        const child = this.particleChildren.splice(index, 1);\n\n        this.onViewUpdate();\n\n        return child[0] as U;\n    }\n\n    /**\n     * Adds a particle to the container at a specified index. If the index is out of bounds an error will be thrown.\n     * If the particle is already in this container, it will be moved to the specified index.\n     * @param {Container} child - The particle to add.\n     * @param {number} index - The absolute index where the particle will be positioned at the end of the operation.\n     * @returns {Container} The particle that was added.\n     */\n    public addParticleAt<U extends IParticle>(child: U, index: number): U\n    {\n        this.particleChildren.splice(index, 0, child);\n\n        this.onViewUpdate();\n\n        return child;\n    }\n\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.addParticle()` instead.\n     * @param {...any} _children\n     * @throws {Error} Always throws an error as this method is not available.\n     */\n    public override addChild<U extends ContainerChild[]>(..._children: U): U[0]\n    {\n        throw new Error(\n            'ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     * Calling this method will throw an error. Please use `ParticleContainer.removeParticle()` instead.\n     * @param {...any} _children\n     * @throws {Error} Always throws an error as this method is not available.\n     */\n    public override removeChild<U extends ContainerChild[]>(..._children: U): U[0]\n    {\n        throw new Error(\n            'ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.removeParticles()` instead.\n     * @param {number} [_beginIndex]\n     * @param {number} [_endIndex]\n     * @throws {Error} Always throws an error as this method is not available.\n     */\n    public override removeChildren(_beginIndex?: number, _endIndex?: number): ContainerChild[]\n    {\n        throw new Error(\n            'ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.removeParticleAt()` instead.\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     */\n    public override removeChildAt<U extends ContainerChild>(_index: number): U\n    {\n        throw new Error(\n            'ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.getParticleAt()` instead.\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     */\n    public override getChildAt<U extends ContainerChild>(_index: number): U\n    {\n        throw new Error(\n            'ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.setParticleIndex()` instead.\n     * @param {ContainerChild} _child\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     */\n    public override setChildIndex(_child: ContainerChild, _index: number): void\n    {\n        throw new Error(\n            'ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.getParticleIndex()` instead.\n     * @param {ContainerChild} _child\n     * @throws {Error} Always throws an error as this method is not available.\n     */\n    public override getChildIndex(_child: ContainerChild): number\n    {\n        throw new Error(\n            'ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.addParticleAt()` instead.\n     * @param {ContainerChild} _child\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     */\n    public override addChildAt<U extends ContainerChild>(_child: U, _index: number): U\n    {\n        throw new Error(\n            'ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.swapParticles()` instead.\n     * @param {ContainerChild} _child\n     * @param {ContainerChild} _child2\n     */\n    public override swapChildren<U extends ContainerChild>(_child: U, _child2: U): void\n    {\n        throw new Error(\n            'ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()',\n        );\n    }\n\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error.\n     * @param _child - The child to reparent\n     * @throws {Error} Always throws an error as this method is not available.\n     */\n    public override reparentChild(..._child: ContainerChild[]): any\n    {\n        throw new Error('ParticleContainer.reparentChild() is not available with the particle container');\n    }\n\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error.\n     * @param _child - The child to reparent\n     * @param _index - The index to reparent the child to\n     * @throws {Error} Always throws an error as this method is not available.\n     */\n    public override reparentChildAt(_child: ContainerChild, _index: number): any\n    {\n        throw new Error('ParticleContainer.reparentChildAt() is not available with the particle container');\n    }\n}\n", "import { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { ViewContainer } from '../view/ViewContainer';\nimport { NineSliceGeometry } from './NineSliceGeometry';\n\nimport type { Size } from '../../maths/misc/Size';\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { ContainerOptions } from '../container/Container';\nimport type { Optional } from '../container/container-mixins/measureMixin';\nimport type { DestroyOptions } from '../container/destroyTypes';\n\n/**\n * Constructor options used for `NineSliceSprite` instances.\n * ```js\n * const nineSliceSprite = new NineSliceSprite({\n *    texture: Texture.from('button.png'),\n *    leftWidth: 20,\n *    topHeight: 20,\n *    rightWidth: 20,\n *    bottomHeight: 20,\n * });\n * ```\n * @see {@link scene.NineSliceSprite}\n * @memberof scene\n */\nexport interface NineSliceSpriteOptions extends ContainerOptions\n{\n    /** The texture to use on the NineSliceSprite. */\n    texture: Texture;\n    /** Width of the left vertical bar (A) */\n    leftWidth?: number;\n    /** Height of the top horizontal bar (C) */\n    topHeight?: number;\n    /** Width of the right vertical bar (B) */\n    rightWidth?: number;\n    /** Height of the bottom horizontal bar (D) */\n    bottomHeight?: number;\n    /** Width of the NineSliceSprite, setting this will actually modify the vertices and not the UV's of this plane. */\n    width?: number;\n    /** Height of the NineSliceSprite, setting this will actually modify the vertices and not UV's of this plane. */\n    height?: number;\n    /** Whether or not to round the x/y position. */\n    roundPixels?: boolean;\n}\n\n/**\n * The NineSliceSprite allows you to stretch a texture using 9-slice scaling. The corners will remain unscaled (useful\n * for buttons with rounded corners for example) and the other areas will be scaled horizontally and or vertically\n *\n * <pre>\n *      A                          B\n *    +---+----------------------+---+\n *  C | 1 |          2           | 3 |\n *    +---+----------------------+---+\n *    |   |                      |   |\n *    | 4 |          5           | 6 |\n *    |   |                      |   |\n *    +---+----------------------+---+\n *  D | 7 |          8           | 9 |\n *    +---+----------------------+---+\n *  When changing this objects width and/or height:\n *     areas 1 3 7 and 9 will remain unscaled.\n *     areas 2 and 8 will be stretched horizontally\n *     areas 4 and 6 will be stretched vertically\n *     area 5 will be stretched both horizontally and vertically\n * </pre>\n * @example\n * import { NineSliceSprite, Texture } from 'pixi.js';\n *\n * const plane9 = new NineSliceSprite(Texture.from('BoxWithRoundedCorners.png'), 15, 15, 15, 15);\n * @memberof scene\n */\nexport class NineSliceSprite extends ViewContainer implements View\n{\n    /** The default options, used to override the initial values of any options passed in the constructor. */\n    public static defaultOptions: NineSliceSpriteOptions = {\n        /** @default Texture.EMPTY */\n        texture: Texture.EMPTY,\n    };\n\n    public override readonly renderPipeId: string = 'nineSliceSprite';\n    public _texture: Texture;\n\n    public batched = true;\n\n    private _leftWidth: number;\n    private _topHeight: number;\n    private _rightWidth: number;\n    private _bottomHeight: number;\n    private _width: number;\n    private _height: number;\n\n    /**\n     * @param {scene.NineSliceSpriteOptions|Texture} options - Options to use\n     * @param options.texture - The texture to use on the NineSliceSprite.\n     * @param options.leftWidth - Width of the left vertical bar (A)\n     * @param options.topHeight - Height of the top horizontal bar (C)\n     * @param options.rightWidth - Width of the right vertical bar (B)\n     * @param options.bottomHeight - Height of the bottom horizontal bar (D)\n     * @param options.width - Width of the NineSliceSprite,\n     * setting this will actually modify the vertices and not the UV's of this plane.\n     * @param options.height - Height of the NineSliceSprite,\n     * setting this will actually modify the vertices and not UV's of this plane.\n     */\n    constructor(options: NineSliceSpriteOptions | Texture)\n    {\n        if ((options instanceof Texture))\n        {\n            options = { texture: options };\n        }\n\n        const {\n            width,\n            height,\n            leftWidth,\n            rightWidth,\n            topHeight,\n            bottomHeight,\n            texture,\n            roundPixels,\n            ...rest\n        } = options;\n\n        super({\n            label: 'NineSliceSprite',\n            ...rest\n        });\n\n        this._leftWidth = leftWidth ?? texture?.defaultBorders?.left ?? NineSliceGeometry.defaultOptions.leftWidth;\n        this._topHeight = topHeight ?? texture?.defaultBorders?.top ?? NineSliceGeometry.defaultOptions.topHeight;\n        this._rightWidth = rightWidth ?? texture?.defaultBorders?.right ?? NineSliceGeometry.defaultOptions.rightWidth;\n        this._bottomHeight = bottomHeight\n                            ?? texture?.defaultBorders?.bottom\n                            ?? NineSliceGeometry.defaultOptions.bottomHeight;\n        this.bounds.maxX = this._width = width ?? texture.width ?? NineSliceGeometry.defaultOptions.width;\n        this.bounds.maxY = this._height = height ?? texture.height ?? NineSliceGeometry.defaultOptions.height;\n\n        this.allowChildren = false;\n        this.texture = texture ?? NineSliceSprite.defaultOptions.texture;\n        this.roundPixels = roundPixels ?? false;\n    }\n\n    /** @private */\n    protected override updateBounds(): void { /* empty */ }\n\n    /** The width of the NineSliceSprite, setting this will actually modify the vertices and UV's of this plane. */\n    override get width(): number\n    {\n        return this._width;\n    }\n\n    override set width(value: number)\n    {\n        this.bounds.maxX = this._width = value;\n        this.onViewUpdate();\n    }\n\n    /** The height of the NineSliceSprite, setting this will actually modify the vertices and UV's of this plane. */\n    override get height(): number\n    {\n        return this._height;\n    }\n\n    override set height(value: number)\n    {\n        this.bounds.maxY = this._height = value;\n        this.onViewUpdate();\n    }\n\n    /**\n     * Sets the size of the NiceSliceSprite to the specified width and height.\n     * setting this will actually modify the vertices and UV's of this plane\n     * This is faster than setting the width and height separately.\n     * @param value - This can be either a number or a [Size]{@link Size} object.\n     * @param height - The height to set. Defaults to the value of `width` if not provided.\n     */\n    public override setSize(value: number | Optional<Size, 'height'>, height?: number): void\n    {\n        if (typeof value === 'object')\n        {\n            height = value.height ?? value.width;\n            value = value.width;\n        }\n\n        this.bounds.maxX = this._width = value;\n        this.bounds.maxY = this._height = height ?? value;\n        this.onViewUpdate();\n    }\n\n    /**\n     * Retrieves the size of the NineSliceSprite as a [Size]{@link Size} object.\n     * This is faster than get the width and height separately.\n     * @param out - Optional object to store the size in.\n     * @returns - The size of the NineSliceSprite.\n     */\n    public override getSize(out?: Size): Size\n    {\n        out ||= {} as Size;\n        out.width = this._width;\n        out.height = this._height;\n\n        return out;\n    }\n\n    /** The width of the left column (a) of the NineSliceSprite. */\n    get leftWidth(): number\n    {\n        return this._leftWidth;\n    }\n\n    set leftWidth(value: number)\n    {\n        this._leftWidth = value;\n\n        this.onViewUpdate();\n    }\n\n    /** The width of the right column (b) of the NineSliceSprite. */\n    get topHeight(): number\n    {\n        return this._topHeight;\n    }\n\n    set topHeight(value: number)\n    {\n        this._topHeight = value;\n        this.onViewUpdate();\n    }\n\n    /** The width of the right column (b) of the NineSliceSprite. */\n    get rightWidth(): number\n    {\n        return this._rightWidth;\n    }\n\n    set rightWidth(value: number)\n    {\n        this._rightWidth = value;\n        this.onViewUpdate();\n    }\n\n    /** The width of the right column (b) of the NineSliceSprite. */\n    get bottomHeight(): number\n    {\n        return this._bottomHeight;\n    }\n\n    set bottomHeight(value: number)\n    {\n        this._bottomHeight = value;\n        this.onViewUpdate();\n    }\n\n    /** The texture that the NineSliceSprite is using. */\n    get texture(): Texture\n    {\n        return this._texture;\n    }\n\n    set texture(value: Texture)\n    {\n        value ||= Texture.EMPTY;\n\n        const currentTexture = this._texture;\n\n        if (currentTexture === value) return;\n\n        if (currentTexture && currentTexture.dynamic) currentTexture.off('update', this.onViewUpdate, this);\n        if (value.dynamic) value.on('update', this.onViewUpdate, this);\n\n        this._texture = value;\n\n        this.onViewUpdate();\n    }\n\n    /** The original width of the texture */\n    get originalWidth()\n    {\n        return this._texture.width;\n    }\n\n    /** The original height of the texture */\n    get originalHeight()\n    {\n        return this._texture.height;\n    }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the current texture of the renderable as well\n     * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the renderable as well\n     */\n    public override destroy(options?: DestroyOptions): void\n    {\n        super.destroy(options);\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            this._texture.destroy(destroyTextureSource);\n        }\n\n        this._texture = null;\n    }\n}\n\n/**\n * Please use the `NineSliceSprite` class instead.\n * @deprecated since 8.0.0\n * @memberof scene\n */\nexport class NineSlicePlane extends NineSliceSprite\n{\n    constructor(options: NineSliceSpriteOptions | Texture);\n    /** @deprecated since 8.0.0 */\n    constructor(texture: Texture, leftWidth: number, topHeight: number, rightWidth: number, bottomHeight: number);\n    constructor(...args: [NineSliceSpriteOptions | Texture] | [Texture, number, number, number, number])\n    {\n        let options = args[0];\n\n        if (options instanceof Texture)\n        {\n            // #if _DEBUG\n            // eslint-disable-next-line max-len\n            deprecation(v8_0_0, 'NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}');\n            // #endif\n\n            options = {\n                texture: options,\n                leftWidth: args[1],\n                topHeight: args[2],\n                rightWidth: args[3],\n                bottomHeight: args[4],\n            };\n        }\n\n        // #if _DEBUG\n        deprecation(v8_0_0, 'NineSlicePlane is deprecated. Use NineSliceSprite instead.');\n        // #endif\n\n        super(options);\n    }\n}\n", "// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck - we dynamically create the other index files, so these will throw errors if we don't ignore them\n\nimport { browserExt } from './environment-browser/browserExt';\nimport { webworkerExt } from './environment-webworker/webworkerExt';\nimport { extensions } from './extensions/Extensions';\nimport './rendering/init';\nimport './spritesheet/init';\n\nexport * from './accessibility';\nexport * from './advanced-blend-modes';\nexport * from './app';\nexport * from './assets';\nexport * from './color';\nexport * from './compressed-textures';\nexport * from './culling';\nexport * from './environment';\nexport * from './environment-browser';\nexport * from './environment-webworker';\nexport * from './events';\nexport * from './extensions';\nexport * from './filters';\nexport * from './maths';\nexport * from './prepare';\nexport * from './rendering';\nexport * from './scene';\nexport * from './spritesheet';\nexport * from './ticker';\nexport * from './utils';\n\nextensions.add(browserExt, webworkerExt);\n", "function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/*!\n * GSAP 3.12.5\n * https://gsap.com\n *\n * @license Copyright 2008-2024, GreenSock. All rights reserved.\n * Subject to the terms at https://gsap.com/standard-license or for\n * Club GSAP members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\nvar _config = {\n  autoSleep: 120,\n  force3D: \"auto\",\n  nullTargetWarn: 1,\n  units: {\n    lineHeight: \"\"\n  }\n},\n    _defaults = {\n  duration: .5,\n  overwrite: false,\n  delay: 0\n},\n    _suppressOverwrites,\n    _reverting,\n    _context,\n    _bigNum = 1e8,\n    _tinyNum = 1 / _bigNum,\n    _2PI = Math.PI * 2,\n    _HALF_PI = _2PI / 4,\n    _gsID = 0,\n    _sqrt = Math.sqrt,\n    _cos = Math.cos,\n    _sin = Math.sin,\n    _isString = function _isString(value) {\n  return typeof value === \"string\";\n},\n    _isFunction = function _isFunction(value) {\n  return typeof value === \"function\";\n},\n    _isNumber = function _isNumber(value) {\n  return typeof value === \"number\";\n},\n    _isUndefined = function _isUndefined(value) {\n  return typeof value === \"undefined\";\n},\n    _isObject = function _isObject(value) {\n  return typeof value === \"object\";\n},\n    _isNotFalse = function _isNotFalse(value) {\n  return value !== false;\n},\n    _windowExists = function _windowExists() {\n  return typeof window !== \"undefined\";\n},\n    _isFuncOrString = function _isFuncOrString(value) {\n  return _isFunction(value) || _isString(value);\n},\n    _isTypedArray = typeof ArrayBuffer === \"function\" && ArrayBuffer.isView || function () {},\n    // note: IE10 has ArrayBuffer, but NOT ArrayBuffer.isView().\n_isArray = Array.isArray,\n    _strictNumExp = /(?:-?\\.?\\d|\\.)+/gi,\n    //only numbers (including negatives and decimals) but NOT relative values.\n_numExp = /[-+=.]*\\d+[.e\\-+]*\\d*[e\\-+]*\\d*/g,\n    //finds any numbers, including ones that start with += or -=, negative numbers, and ones in scientific notation like 1e-8.\n_numWithUnitExp = /[-+=.]*\\d+[.e-]*\\d*[a-z%]*/g,\n    _complexStringNumExp = /[-+=.]*\\d+\\.?\\d*(?:e-|e\\+)?\\d*/gi,\n    //duplicate so that while we're looping through matches from exec(), it doesn't contaminate the lastIndex of _numExp which we use to search for colors too.\n_relExp = /[+-]=-?[.\\d]+/,\n    _delimitedValueExp = /[^,'\"\\[\\]\\s]+/gi,\n    // previously /[#\\-+.]*\\b[a-z\\d\\-=+%.]+/gi but didn't catch special characters.\n_unitExp = /^[+\\-=e\\s\\d]*\\d+[.\\d]*([a-z]*|%)\\s*$/i,\n    _globalTimeline,\n    _win,\n    _coreInitted,\n    _doc,\n    _globals = {},\n    _installScope = {},\n    _coreReady,\n    _install = function _install(scope) {\n  return (_installScope = _merge(scope, _globals)) && gsap;\n},\n    _missingPlugin = function _missingPlugin(property, value) {\n  return console.warn(\"Invalid property\", property, \"set to\", value, \"Missing plugin? gsap.registerPlugin()\");\n},\n    _warn = function _warn(message, suppress) {\n  return !suppress && console.warn(message);\n},\n    _addGlobal = function _addGlobal(name, obj) {\n  return name && (_globals[name] = obj) && _installScope && (_installScope[name] = obj) || _globals;\n},\n    _emptyFunc = function _emptyFunc() {\n  return 0;\n},\n    _startAtRevertConfig = {\n  suppressEvents: true,\n  isStart: true,\n  kill: false\n},\n    _revertConfigNoKill = {\n  suppressEvents: true,\n  kill: false\n},\n    _revertConfig = {\n  suppressEvents: true\n},\n    _reservedProps = {},\n    _lazyTweens = [],\n    _lazyLookup = {},\n    _lastRenderedFrame,\n    _plugins = {},\n    _effects = {},\n    _nextGCFrame = 30,\n    _harnessPlugins = [],\n    _callbackNames = \"\",\n    _harness = function _harness(targets) {\n  var target = targets[0],\n      harnessPlugin,\n      i;\n  _isObject(target) || _isFunction(target) || (targets = [targets]);\n\n  if (!(harnessPlugin = (target._gsap || {}).harness)) {\n    // find the first target with a harness. We assume targets passed into an animation will be of similar type, meaning the same kind of harness can be used for them all (performance optimization)\n    i = _harnessPlugins.length;\n\n    while (i-- && !_harnessPlugins[i].targetTest(target)) {}\n\n    harnessPlugin = _harnessPlugins[i];\n  }\n\n  i = targets.length;\n\n  while (i--) {\n    targets[i] && (targets[i]._gsap || (targets[i]._gsap = new GSCache(targets[i], harnessPlugin))) || targets.splice(i, 1);\n  }\n\n  return targets;\n},\n    _getCache = function _getCache(target) {\n  return target._gsap || _harness(toArray(target))[0]._gsap;\n},\n    _getProperty = function _getProperty(target, property, v) {\n  return (v = target[property]) && _isFunction(v) ? target[property]() : _isUndefined(v) && target.getAttribute && target.getAttribute(property) || v;\n},\n    _forEachName = function _forEachName(names, func) {\n  return (names = names.split(\",\")).forEach(func) || names;\n},\n    //split a comma-delimited list of names into an array, then run a forEach() function and return the split array (this is just a way to consolidate/shorten some code).\n_round = function _round(value) {\n  return Math.round(value * 100000) / 100000 || 0;\n},\n    _roundPrecise = function _roundPrecise(value) {\n  return Math.round(value * 10000000) / 10000000 || 0;\n},\n    // increased precision mostly for timing values.\n_parseRelative = function _parseRelative(start, value) {\n  var operator = value.charAt(0),\n      end = parseFloat(value.substr(2));\n  start = parseFloat(start);\n  return operator === \"+\" ? start + end : operator === \"-\" ? start - end : operator === \"*\" ? start * end : start / end;\n},\n    _arrayContainsAny = function _arrayContainsAny(toSearch, toFind) {\n  //searches one array to find matches for any of the items in the toFind array. As soon as one is found, it returns true. It does NOT return all the matches; it's simply a boolean search.\n  var l = toFind.length,\n      i = 0;\n\n  for (; toSearch.indexOf(toFind[i]) < 0 && ++i < l;) {}\n\n  return i < l;\n},\n    _lazyRender = function _lazyRender() {\n  var l = _lazyTweens.length,\n      a = _lazyTweens.slice(0),\n      i,\n      tween;\n\n  _lazyLookup = {};\n  _lazyTweens.length = 0;\n\n  for (i = 0; i < l; i++) {\n    tween = a[i];\n    tween && tween._lazy && (tween.render(tween._lazy[0], tween._lazy[1], true)._lazy = 0);\n  }\n},\n    _lazySafeRender = function _lazySafeRender(animation, time, suppressEvents, force) {\n  _lazyTweens.length && !_reverting && _lazyRender();\n  animation.render(time, suppressEvents, force || _reverting && time < 0 && (animation._initted || animation._startAt));\n  _lazyTweens.length && !_reverting && _lazyRender(); //in case rendering caused any tweens to lazy-init, we should render them because typically when someone calls seek() or time() or progress(), they expect an immediate render.\n},\n    _numericIfPossible = function _numericIfPossible(value) {\n  var n = parseFloat(value);\n  return (n || n === 0) && (value + \"\").match(_delimitedValueExp).length < 2 ? n : _isString(value) ? value.trim() : value;\n},\n    _passThrough = function _passThrough(p) {\n  return p;\n},\n    _setDefaults = function _setDefaults(obj, defaults) {\n  for (var p in defaults) {\n    p in obj || (obj[p] = defaults[p]);\n  }\n\n  return obj;\n},\n    _setKeyframeDefaults = function _setKeyframeDefaults(excludeDuration) {\n  return function (obj, defaults) {\n    for (var p in defaults) {\n      p in obj || p === \"duration\" && excludeDuration || p === \"ease\" || (obj[p] = defaults[p]);\n    }\n  };\n},\n    _merge = function _merge(base, toMerge) {\n  for (var p in toMerge) {\n    base[p] = toMerge[p];\n  }\n\n  return base;\n},\n    _mergeDeep = function _mergeDeep(base, toMerge) {\n  for (var p in toMerge) {\n    p !== \"__proto__\" && p !== \"constructor\" && p !== \"prototype\" && (base[p] = _isObject(toMerge[p]) ? _mergeDeep(base[p] || (base[p] = {}), toMerge[p]) : toMerge[p]);\n  }\n\n  return base;\n},\n    _copyExcluding = function _copyExcluding(obj, excluding) {\n  var copy = {},\n      p;\n\n  for (p in obj) {\n    p in excluding || (copy[p] = obj[p]);\n  }\n\n  return copy;\n},\n    _inheritDefaults = function _inheritDefaults(vars) {\n  var parent = vars.parent || _globalTimeline,\n      func = vars.keyframes ? _setKeyframeDefaults(_isArray(vars.keyframes)) : _setDefaults;\n\n  if (_isNotFalse(vars.inherit)) {\n    while (parent) {\n      func(vars, parent.vars.defaults);\n      parent = parent.parent || parent._dp;\n    }\n  }\n\n  return vars;\n},\n    _arraysMatch = function _arraysMatch(a1, a2) {\n  var i = a1.length,\n      match = i === a2.length;\n\n  while (match && i-- && a1[i] === a2[i]) {}\n\n  return i < 0;\n},\n    _addLinkedListItem = function _addLinkedListItem(parent, child, firstProp, lastProp, sortBy) {\n  if (firstProp === void 0) {\n    firstProp = \"_first\";\n  }\n\n  if (lastProp === void 0) {\n    lastProp = \"_last\";\n  }\n\n  var prev = parent[lastProp],\n      t;\n\n  if (sortBy) {\n    t = child[sortBy];\n\n    while (prev && prev[sortBy] > t) {\n      prev = prev._prev;\n    }\n  }\n\n  if (prev) {\n    child._next = prev._next;\n    prev._next = child;\n  } else {\n    child._next = parent[firstProp];\n    parent[firstProp] = child;\n  }\n\n  if (child._next) {\n    child._next._prev = child;\n  } else {\n    parent[lastProp] = child;\n  }\n\n  child._prev = prev;\n  child.parent = child._dp = parent;\n  return child;\n},\n    _removeLinkedListItem = function _removeLinkedListItem(parent, child, firstProp, lastProp) {\n  if (firstProp === void 0) {\n    firstProp = \"_first\";\n  }\n\n  if (lastProp === void 0) {\n    lastProp = \"_last\";\n  }\n\n  var prev = child._prev,\n      next = child._next;\n\n  if (prev) {\n    prev._next = next;\n  } else if (parent[firstProp] === child) {\n    parent[firstProp] = next;\n  }\n\n  if (next) {\n    next._prev = prev;\n  } else if (parent[lastProp] === child) {\n    parent[lastProp] = prev;\n  }\n\n  child._next = child._prev = child.parent = null; // don't delete the _dp just so we can revert if necessary. But parent should be null to indicate the item isn't in a linked list.\n},\n    _removeFromParent = function _removeFromParent(child, onlyIfParentHasAutoRemove) {\n  child.parent && (!onlyIfParentHasAutoRemove || child.parent.autoRemoveChildren) && child.parent.remove && child.parent.remove(child);\n  child._act = 0;\n},\n    _uncache = function _uncache(animation, child) {\n  if (animation && (!child || child._end > animation._dur || child._start < 0)) {\n    // performance optimization: if a child animation is passed in we should only uncache if that child EXTENDS the animation (its end time is beyond the end)\n    var a = animation;\n\n    while (a) {\n      a._dirty = 1;\n      a = a.parent;\n    }\n  }\n\n  return animation;\n},\n    _recacheAncestors = function _recacheAncestors(animation) {\n  var parent = animation.parent;\n\n  while (parent && parent.parent) {\n    //sometimes we must force a re-sort of all children and update the duration/totalDuration of all ancestor timelines immediately in case, for example, in the middle of a render loop, one tween alters another tween's timeScale which shoves its startTime before 0, forcing the parent timeline to shift around and shiftChildren() which could affect that next tween's render (startTime). Doesn't matter for the root timeline though.\n    parent._dirty = 1;\n    parent.totalDuration();\n    parent = parent.parent;\n  }\n\n  return animation;\n},\n    _rewindStartAt = function _rewindStartAt(tween, totalTime, suppressEvents, force) {\n  return tween._startAt && (_reverting ? tween._startAt.revert(_revertConfigNoKill) : tween.vars.immediateRender && !tween.vars.autoRevert || tween._startAt.render(totalTime, true, force));\n},\n    _hasNoPausedAncestors = function _hasNoPausedAncestors(animation) {\n  return !animation || animation._ts && _hasNoPausedAncestors(animation.parent);\n},\n    _elapsedCycleDuration = function _elapsedCycleDuration(animation) {\n  return animation._repeat ? _animationCycle(animation._tTime, animation = animation.duration() + animation._rDelay) * animation : 0;\n},\n    // feed in the totalTime and cycleDuration and it'll return the cycle (iteration minus 1) and if the playhead is exactly at the very END, it will NOT bump up to the next cycle.\n_animationCycle = function _animationCycle(tTime, cycleDuration) {\n  var whole = Math.floor(tTime /= cycleDuration);\n  return tTime && whole === tTime ? whole - 1 : whole;\n},\n    _parentToChildTotalTime = function _parentToChildTotalTime(parentTime, child) {\n  return (parentTime - child._start) * child._ts + (child._ts >= 0 ? 0 : child._dirty ? child.totalDuration() : child._tDur);\n},\n    _setEnd = function _setEnd(animation) {\n  return animation._end = _roundPrecise(animation._start + (animation._tDur / Math.abs(animation._ts || animation._rts || _tinyNum) || 0));\n},\n    _alignPlayhead = function _alignPlayhead(animation, totalTime) {\n  // adjusts the animation's _start and _end according to the provided totalTime (only if the parent's smoothChildTiming is true and the animation isn't paused). It doesn't do any rendering or forcing things back into parent timelines, etc. - that's what totalTime() is for.\n  var parent = animation._dp;\n\n  if (parent && parent.smoothChildTiming && animation._ts) {\n    animation._start = _roundPrecise(parent._time - (animation._ts > 0 ? totalTime / animation._ts : ((animation._dirty ? animation.totalDuration() : animation._tDur) - totalTime) / -animation._ts));\n\n    _setEnd(animation);\n\n    parent._dirty || _uncache(parent, animation); //for performance improvement. If the parent's cache is already dirty, it already took care of marking the ancestors as dirty too, so skip the function call here.\n  }\n\n  return animation;\n},\n\n/*\n_totalTimeToTime = (clampedTotalTime, duration, repeat, repeatDelay, yoyo) => {\n\tlet cycleDuration = duration + repeatDelay,\n\t\ttime = _round(clampedTotalTime % cycleDuration);\n\tif (time > duration) {\n\t\ttime = duration;\n\t}\n\treturn (yoyo && (~~(clampedTotalTime / cycleDuration) & 1)) ? duration - time : time;\n},\n*/\n_postAddChecks = function _postAddChecks(timeline, child) {\n  var t;\n\n  if (child._time || !child._dur && child._initted || child._start < timeline._time && (child._dur || !child.add)) {\n    // in case, for example, the _start is moved on a tween that has already rendered, or if it's being inserted into a timeline BEFORE where the playhead is currently. Imagine it's at its end state, then the startTime is moved WAY later (after the end of this timeline), it should render at its beginning. Special case: if it's a timeline (has .add() method) and no duration, we can skip rendering because the user may be populating it AFTER adding it to a parent timeline (unconventional, but possible, and we wouldn't want it to get removed if the parent's autoRemoveChildren is true).\n    t = _parentToChildTotalTime(timeline.rawTime(), child);\n\n    if (!child._dur || _clamp(0, child.totalDuration(), t) - child._tTime > _tinyNum) {\n      child.render(t, true);\n    }\n  } //if the timeline has already ended but the inserted tween/timeline extends the duration, we should enable this timeline again so that it renders properly. We should also align the playhead with the parent timeline's when appropriate.\n\n\n  if (_uncache(timeline, child)._dp && timeline._initted && timeline._time >= timeline._dur && timeline._ts) {\n    //in case any of the ancestors had completed but should now be enabled...\n    if (timeline._dur < timeline.duration()) {\n      t = timeline;\n\n      while (t._dp) {\n        t.rawTime() >= 0 && t.totalTime(t._tTime); //moves the timeline (shifts its startTime) if necessary, and also enables it. If it's currently zero, though, it may not be scheduled to render until later so there's no need to force it to align with the current playhead position. Only move to catch up with the playhead.\n\n        t = t._dp;\n      }\n    }\n\n    timeline._zTime = -_tinyNum; // helps ensure that the next render() will be forced (crossingStart = true in render()), even if the duration hasn't changed (we're adding a child which would need to get rendered). Definitely an edge case. Note: we MUST do this AFTER the loop above where the totalTime() might trigger a render() because this _addToTimeline() method gets called from the Animation constructor, BEFORE tweens even record their targets, etc. so we wouldn't want things to get triggered in the wrong order.\n  }\n},\n    _addToTimeline = function _addToTimeline(timeline, child, position, skipChecks) {\n  child.parent && _removeFromParent(child);\n  child._start = _roundPrecise((_isNumber(position) ? position : position || timeline !== _globalTimeline ? _parsePosition(timeline, position, child) : timeline._time) + child._delay);\n  child._end = _roundPrecise(child._start + (child.totalDuration() / Math.abs(child.timeScale()) || 0));\n\n  _addLinkedListItem(timeline, child, \"_first\", \"_last\", timeline._sort ? \"_start\" : 0);\n\n  _isFromOrFromStart(child) || (timeline._recent = child);\n  skipChecks || _postAddChecks(timeline, child);\n  timeline._ts < 0 && _alignPlayhead(timeline, timeline._tTime); // if the timeline is reversed and the new child makes it longer, we may need to adjust the parent's _start (push it back)\n\n  return timeline;\n},\n    _scrollTrigger = function _scrollTrigger(animation, trigger) {\n  return (_globals.ScrollTrigger || _missingPlugin(\"scrollTrigger\", trigger)) && _globals.ScrollTrigger.create(trigger, animation);\n},\n    _attemptInitTween = function _attemptInitTween(tween, time, force, suppressEvents, tTime) {\n  _initTween(tween, time, tTime);\n\n  if (!tween._initted) {\n    return 1;\n  }\n\n  if (!force && tween._pt && !_reverting && (tween._dur && tween.vars.lazy !== false || !tween._dur && tween.vars.lazy) && _lastRenderedFrame !== _ticker.frame) {\n    _lazyTweens.push(tween);\n\n    tween._lazy = [tTime, suppressEvents];\n    return 1;\n  }\n},\n    _parentPlayheadIsBeforeStart = function _parentPlayheadIsBeforeStart(_ref) {\n  var parent = _ref.parent;\n  return parent && parent._ts && parent._initted && !parent._lock && (parent.rawTime() < 0 || _parentPlayheadIsBeforeStart(parent));\n},\n    // check parent's _lock because when a timeline repeats/yoyos and does its artificial wrapping, we shouldn't force the ratio back to 0\n_isFromOrFromStart = function _isFromOrFromStart(_ref2) {\n  var data = _ref2.data;\n  return data === \"isFromStart\" || data === \"isStart\";\n},\n    _renderZeroDurationTween = function _renderZeroDurationTween(tween, totalTime, suppressEvents, force) {\n  var prevRatio = tween.ratio,\n      ratio = totalTime < 0 || !totalTime && (!tween._start && _parentPlayheadIsBeforeStart(tween) && !(!tween._initted && _isFromOrFromStart(tween)) || (tween._ts < 0 || tween._dp._ts < 0) && !_isFromOrFromStart(tween)) ? 0 : 1,\n      // if the tween or its parent is reversed and the totalTime is 0, we should go to a ratio of 0. Edge case: if a from() or fromTo() stagger tween is placed later in a timeline, the \"startAt\" zero-duration tween could initially render at a time when the parent timeline's playhead is technically BEFORE where this tween is, so make sure that any \"from\" and \"fromTo\" startAt tweens are rendered the first time at a ratio of 1.\n  repeatDelay = tween._rDelay,\n      tTime = 0,\n      pt,\n      iteration,\n      prevIteration;\n\n  if (repeatDelay && tween._repeat) {\n    // in case there's a zero-duration tween that has a repeat with a repeatDelay\n    tTime = _clamp(0, tween._tDur, totalTime);\n    iteration = _animationCycle(tTime, repeatDelay);\n    tween._yoyo && iteration & 1 && (ratio = 1 - ratio);\n\n    if (iteration !== _animationCycle(tween._tTime, repeatDelay)) {\n      // if iteration changed\n      prevRatio = 1 - ratio;\n      tween.vars.repeatRefresh && tween._initted && tween.invalidate();\n    }\n  }\n\n  if (ratio !== prevRatio || _reverting || force || tween._zTime === _tinyNum || !totalTime && tween._zTime) {\n    if (!tween._initted && _attemptInitTween(tween, totalTime, force, suppressEvents, tTime)) {\n      // if we render the very beginning (time == 0) of a fromTo(), we must force the render (normal tweens wouldn't need to render at a time of 0 when the prevTime was also 0). This is also mandatory to make sure overwriting kicks in immediately.\n      return;\n    }\n\n    prevIteration = tween._zTime;\n    tween._zTime = totalTime || (suppressEvents ? _tinyNum : 0); // when the playhead arrives at EXACTLY time 0 (right on top) of a zero-duration tween, we need to discern if events are suppressed so that when the playhead moves again (next time), it'll trigger the callback. If events are NOT suppressed, obviously the callback would be triggered in this render. Basically, the callback should fire either when the playhead ARRIVES or LEAVES this exact spot, not both. Imagine doing a timeline.seek(0) and there's a callback that sits at 0. Since events are suppressed on that seek() by default, nothing will fire, but when the playhead moves off of that position, the callback should fire. This behavior is what people intuitively expect.\n\n    suppressEvents || (suppressEvents = totalTime && !prevIteration); // if it was rendered previously at exactly 0 (_zTime) and now the playhead is moving away, DON'T fire callbacks otherwise they'll seem like duplicates.\n\n    tween.ratio = ratio;\n    tween._from && (ratio = 1 - ratio);\n    tween._time = 0;\n    tween._tTime = tTime;\n    pt = tween._pt;\n\n    while (pt) {\n      pt.r(ratio, pt.d);\n      pt = pt._next;\n    }\n\n    totalTime < 0 && _rewindStartAt(tween, totalTime, suppressEvents, true);\n    tween._onUpdate && !suppressEvents && _callback(tween, \"onUpdate\");\n    tTime && tween._repeat && !suppressEvents && tween.parent && _callback(tween, \"onRepeat\");\n\n    if ((totalTime >= tween._tDur || totalTime < 0) && tween.ratio === ratio) {\n      ratio && _removeFromParent(tween, 1);\n\n      if (!suppressEvents && !_reverting) {\n        _callback(tween, ratio ? \"onComplete\" : \"onReverseComplete\", true);\n\n        tween._prom && tween._prom();\n      }\n    }\n  } else if (!tween._zTime) {\n    tween._zTime = totalTime;\n  }\n},\n    _findNextPauseTween = function _findNextPauseTween(animation, prevTime, time) {\n  var child;\n\n  if (time > prevTime) {\n    child = animation._first;\n\n    while (child && child._start <= time) {\n      if (child.data === \"isPause\" && child._start > prevTime) {\n        return child;\n      }\n\n      child = child._next;\n    }\n  } else {\n    child = animation._last;\n\n    while (child && child._start >= time) {\n      if (child.data === \"isPause\" && child._start < prevTime) {\n        return child;\n      }\n\n      child = child._prev;\n    }\n  }\n},\n    _setDuration = function _setDuration(animation, duration, skipUncache, leavePlayhead) {\n  var repeat = animation._repeat,\n      dur = _roundPrecise(duration) || 0,\n      totalProgress = animation._tTime / animation._tDur;\n  totalProgress && !leavePlayhead && (animation._time *= dur / animation._dur);\n  animation._dur = dur;\n  animation._tDur = !repeat ? dur : repeat < 0 ? 1e10 : _roundPrecise(dur * (repeat + 1) + animation._rDelay * repeat);\n  totalProgress > 0 && !leavePlayhead && _alignPlayhead(animation, animation._tTime = animation._tDur * totalProgress);\n  animation.parent && _setEnd(animation);\n  skipUncache || _uncache(animation.parent, animation);\n  return animation;\n},\n    _onUpdateTotalDuration = function _onUpdateTotalDuration(animation) {\n  return animation instanceof Timeline ? _uncache(animation) : _setDuration(animation, animation._dur);\n},\n    _zeroPosition = {\n  _start: 0,\n  endTime: _emptyFunc,\n  totalDuration: _emptyFunc\n},\n    _parsePosition = function _parsePosition(animation, position, percentAnimation) {\n  var labels = animation.labels,\n      recent = animation._recent || _zeroPosition,\n      clippedDuration = animation.duration() >= _bigNum ? recent.endTime(false) : animation._dur,\n      //in case there's a child that infinitely repeats, users almost never intend for the insertion point of a new child to be based on a SUPER long value like that so we clip it and assume the most recently-added child's endTime should be used instead.\n  i,\n      offset,\n      isPercent;\n\n  if (_isString(position) && (isNaN(position) || position in labels)) {\n    //if the string is a number like \"1\", check to see if there's a label with that name, otherwise interpret it as a number (absolute value).\n    offset = position.charAt(0);\n    isPercent = position.substr(-1) === \"%\";\n    i = position.indexOf(\"=\");\n\n    if (offset === \"<\" || offset === \">\") {\n      i >= 0 && (position = position.replace(/=/, \"\"));\n      return (offset === \"<\" ? recent._start : recent.endTime(recent._repeat >= 0)) + (parseFloat(position.substr(1)) || 0) * (isPercent ? (i < 0 ? recent : percentAnimation).totalDuration() / 100 : 1);\n    }\n\n    if (i < 0) {\n      position in labels || (labels[position] = clippedDuration);\n      return labels[position];\n    }\n\n    offset = parseFloat(position.charAt(i - 1) + position.substr(i + 1));\n\n    if (isPercent && percentAnimation) {\n      offset = offset / 100 * (_isArray(percentAnimation) ? percentAnimation[0] : percentAnimation).totalDuration();\n    }\n\n    return i > 1 ? _parsePosition(animation, position.substr(0, i - 1), percentAnimation) + offset : clippedDuration + offset;\n  }\n\n  return position == null ? clippedDuration : +position;\n},\n    _createTweenType = function _createTweenType(type, params, timeline) {\n  var isLegacy = _isNumber(params[1]),\n      varsIndex = (isLegacy ? 2 : 1) + (type < 2 ? 0 : 1),\n      vars = params[varsIndex],\n      irVars,\n      parent;\n\n  isLegacy && (vars.duration = params[1]);\n  vars.parent = timeline;\n\n  if (type) {\n    irVars = vars;\n    parent = timeline;\n\n    while (parent && !(\"immediateRender\" in irVars)) {\n      // inheritance hasn't happened yet, but someone may have set a default in an ancestor timeline. We could do vars.immediateRender = _isNotFalse(_inheritDefaults(vars).immediateRender) but that'd exact a slight performance penalty because _inheritDefaults() also runs in the Tween constructor. We're paying a small kb price here to gain speed.\n      irVars = parent.vars.defaults || {};\n      parent = _isNotFalse(parent.vars.inherit) && parent.parent;\n    }\n\n    vars.immediateRender = _isNotFalse(irVars.immediateRender);\n    type < 2 ? vars.runBackwards = 1 : vars.startAt = params[varsIndex - 1]; // \"from\" vars\n  }\n\n  return new Tween(params[0], vars, params[varsIndex + 1]);\n},\n    _conditionalReturn = function _conditionalReturn(value, func) {\n  return value || value === 0 ? func(value) : func;\n},\n    _clamp = function _clamp(min, max, value) {\n  return value < min ? min : value > max ? max : value;\n},\n    getUnit = function getUnit(value, v) {\n  return !_isString(value) || !(v = _unitExp.exec(value)) ? \"\" : v[1];\n},\n    // note: protect against padded numbers as strings, like \"100.100\". That shouldn't return \"00\" as the unit. If it's numeric, return no unit.\nclamp = function clamp(min, max, value) {\n  return _conditionalReturn(value, function (v) {\n    return _clamp(min, max, v);\n  });\n},\n    _slice = [].slice,\n    _isArrayLike = function _isArrayLike(value, nonEmpty) {\n  return value && _isObject(value) && \"length\" in value && (!nonEmpty && !value.length || value.length - 1 in value && _isObject(value[0])) && !value.nodeType && value !== _win;\n},\n    _flatten = function _flatten(ar, leaveStrings, accumulator) {\n  if (accumulator === void 0) {\n    accumulator = [];\n  }\n\n  return ar.forEach(function (value) {\n    var _accumulator;\n\n    return _isString(value) && !leaveStrings || _isArrayLike(value, 1) ? (_accumulator = accumulator).push.apply(_accumulator, toArray(value)) : accumulator.push(value);\n  }) || accumulator;\n},\n    //takes any value and returns an array. If it's a string (and leaveStrings isn't true), it'll use document.querySelectorAll() and convert that to an array. It'll also accept iterables like jQuery objects.\ntoArray = function toArray(value, scope, leaveStrings) {\n  return _context && !scope && _context.selector ? _context.selector(value) : _isString(value) && !leaveStrings && (_coreInitted || !_wake()) ? _slice.call((scope || _doc).querySelectorAll(value), 0) : _isArray(value) ? _flatten(value, leaveStrings) : _isArrayLike(value) ? _slice.call(value, 0) : value ? [value] : [];\n},\n    selector = function selector(value) {\n  value = toArray(value)[0] || _warn(\"Invalid scope\") || {};\n  return function (v) {\n    var el = value.current || value.nativeElement || value;\n    return toArray(v, el.querySelectorAll ? el : el === value ? _warn(\"Invalid scope\") || _doc.createElement(\"div\") : value);\n  };\n},\n    shuffle = function shuffle(a) {\n  return a.sort(function () {\n    return .5 - Math.random();\n  });\n},\n    // alternative that's a bit faster and more reliably diverse but bigger:   for (let j, v, i = a.length; i; j = Math.floor(Math.random() * i), v = a[--i], a[i] = a[j], a[j] = v); return a;\n//for distributing values across an array. Can accept a number, a function or (most commonly) a function which can contain the following properties: {base, amount, from, ease, grid, axis, length, each}. Returns a function that expects the following parameters: index, target, array. Recognizes the following\ndistribute = function distribute(v) {\n  if (_isFunction(v)) {\n    return v;\n  }\n\n  var vars = _isObject(v) ? v : {\n    each: v\n  },\n      //n:1 is just to indicate v was a number; we leverage that later to set v according to the length we get. If a number is passed in, we treat it like the old stagger value where 0.1, for example, would mean that things would be distributed with 0.1 between each element in the array rather than a total \"amount\" that's chunked out among them all.\n  ease = _parseEase(vars.ease),\n      from = vars.from || 0,\n      base = parseFloat(vars.base) || 0,\n      cache = {},\n      isDecimal = from > 0 && from < 1,\n      ratios = isNaN(from) || isDecimal,\n      axis = vars.axis,\n      ratioX = from,\n      ratioY = from;\n\n  if (_isString(from)) {\n    ratioX = ratioY = {\n      center: .5,\n      edges: .5,\n      end: 1\n    }[from] || 0;\n  } else if (!isDecimal && ratios) {\n    ratioX = from[0];\n    ratioY = from[1];\n  }\n\n  return function (i, target, a) {\n    var l = (a || vars).length,\n        distances = cache[l],\n        originX,\n        originY,\n        x,\n        y,\n        d,\n        j,\n        max,\n        min,\n        wrapAt;\n\n    if (!distances) {\n      wrapAt = vars.grid === \"auto\" ? 0 : (vars.grid || [1, _bigNum])[1];\n\n      if (!wrapAt) {\n        max = -_bigNum;\n\n        while (max < (max = a[wrapAt++].getBoundingClientRect().left) && wrapAt < l) {}\n\n        wrapAt < l && wrapAt--;\n      }\n\n      distances = cache[l] = [];\n      originX = ratios ? Math.min(wrapAt, l) * ratioX - .5 : from % wrapAt;\n      originY = wrapAt === _bigNum ? 0 : ratios ? l * ratioY / wrapAt - .5 : from / wrapAt | 0;\n      max = 0;\n      min = _bigNum;\n\n      for (j = 0; j < l; j++) {\n        x = j % wrapAt - originX;\n        y = originY - (j / wrapAt | 0);\n        distances[j] = d = !axis ? _sqrt(x * x + y * y) : Math.abs(axis === \"y\" ? y : x);\n        d > max && (max = d);\n        d < min && (min = d);\n      }\n\n      from === \"random\" && shuffle(distances);\n      distances.max = max - min;\n      distances.min = min;\n      distances.v = l = (parseFloat(vars.amount) || parseFloat(vars.each) * (wrapAt > l ? l - 1 : !axis ? Math.max(wrapAt, l / wrapAt) : axis === \"y\" ? l / wrapAt : wrapAt) || 0) * (from === \"edges\" ? -1 : 1);\n      distances.b = l < 0 ? base - l : base;\n      distances.u = getUnit(vars.amount || vars.each) || 0; //unit\n\n      ease = ease && l < 0 ? _invertEase(ease) : ease;\n    }\n\n    l = (distances[i] - distances.min) / distances.max || 0;\n    return _roundPrecise(distances.b + (ease ? ease(l) : l) * distances.v) + distances.u; //round in order to work around floating point errors\n  };\n},\n    _roundModifier = function _roundModifier(v) {\n  //pass in 0.1 get a function that'll round to the nearest tenth, or 5 to round to the closest 5, or 0.001 to the closest 1000th, etc.\n  var p = Math.pow(10, ((v + \"\").split(\".\")[1] || \"\").length); //to avoid floating point math errors (like 24 * 0.1 == 2.4000000000000004), we chop off at a specific number of decimal places (much faster than toFixed())\n\n  return function (raw) {\n    var n = _roundPrecise(Math.round(parseFloat(raw) / v) * v * p);\n\n    return (n - n % 1) / p + (_isNumber(raw) ? 0 : getUnit(raw)); // n - n % 1 replaces Math.floor() in order to handle negative values properly. For example, Math.floor(-150.00000000000003) is 151!\n  };\n},\n    snap = function snap(snapTo, value) {\n  var isArray = _isArray(snapTo),\n      radius,\n      is2D;\n\n  if (!isArray && _isObject(snapTo)) {\n    radius = isArray = snapTo.radius || _bigNum;\n\n    if (snapTo.values) {\n      snapTo = toArray(snapTo.values);\n\n      if (is2D = !_isNumber(snapTo[0])) {\n        radius *= radius; //performance optimization so we don't have to Math.sqrt() in the loop.\n      }\n    } else {\n      snapTo = _roundModifier(snapTo.increment);\n    }\n  }\n\n  return _conditionalReturn(value, !isArray ? _roundModifier(snapTo) : _isFunction(snapTo) ? function (raw) {\n    is2D = snapTo(raw);\n    return Math.abs(is2D - raw) <= radius ? is2D : raw;\n  } : function (raw) {\n    var x = parseFloat(is2D ? raw.x : raw),\n        y = parseFloat(is2D ? raw.y : 0),\n        min = _bigNum,\n        closest = 0,\n        i = snapTo.length,\n        dx,\n        dy;\n\n    while (i--) {\n      if (is2D) {\n        dx = snapTo[i].x - x;\n        dy = snapTo[i].y - y;\n        dx = dx * dx + dy * dy;\n      } else {\n        dx = Math.abs(snapTo[i] - x);\n      }\n\n      if (dx < min) {\n        min = dx;\n        closest = i;\n      }\n    }\n\n    closest = !radius || min <= radius ? snapTo[closest] : raw;\n    return is2D || closest === raw || _isNumber(raw) ? closest : closest + getUnit(raw);\n  });\n},\n    random = function random(min, max, roundingIncrement, returnFunction) {\n  return _conditionalReturn(_isArray(min) ? !max : roundingIncrement === true ? !!(roundingIncrement = 0) : !returnFunction, function () {\n    return _isArray(min) ? min[~~(Math.random() * min.length)] : (roundingIncrement = roundingIncrement || 1e-5) && (returnFunction = roundingIncrement < 1 ? Math.pow(10, (roundingIncrement + \"\").length - 2) : 1) && Math.floor(Math.round((min - roundingIncrement / 2 + Math.random() * (max - min + roundingIncrement * .99)) / roundingIncrement) * roundingIncrement * returnFunction) / returnFunction;\n  });\n},\n    pipe = function pipe() {\n  for (var _len = arguments.length, functions = new Array(_len), _key = 0; _key < _len; _key++) {\n    functions[_key] = arguments[_key];\n  }\n\n  return function (value) {\n    return functions.reduce(function (v, f) {\n      return f(v);\n    }, value);\n  };\n},\n    unitize = function unitize(func, unit) {\n  return function (value) {\n    return func(parseFloat(value)) + (unit || getUnit(value));\n  };\n},\n    normalize = function normalize(min, max, value) {\n  return mapRange(min, max, 0, 1, value);\n},\n    _wrapArray = function _wrapArray(a, wrapper, value) {\n  return _conditionalReturn(value, function (index) {\n    return a[~~wrapper(index)];\n  });\n},\n    wrap = function wrap(min, max, value) {\n  // NOTE: wrap() CANNOT be an arrow function! A very odd compiling bug causes problems (unrelated to GSAP).\n  var range = max - min;\n  return _isArray(min) ? _wrapArray(min, wrap(0, min.length), max) : _conditionalReturn(value, function (value) {\n    return (range + (value - min) % range) % range + min;\n  });\n},\n    wrapYoyo = function wrapYoyo(min, max, value) {\n  var range = max - min,\n      total = range * 2;\n  return _isArray(min) ? _wrapArray(min, wrapYoyo(0, min.length - 1), max) : _conditionalReturn(value, function (value) {\n    value = (total + (value - min) % total) % total || 0;\n    return min + (value > range ? total - value : value);\n  });\n},\n    _replaceRandom = function _replaceRandom(value) {\n  //replaces all occurrences of random(...) in a string with the calculated random value. can be a range like random(-100, 100, 5) or an array like random([0, 100, 500])\n  var prev = 0,\n      s = \"\",\n      i,\n      nums,\n      end,\n      isArray;\n\n  while (~(i = value.indexOf(\"random(\", prev))) {\n    end = value.indexOf(\")\", i);\n    isArray = value.charAt(i + 7) === \"[\";\n    nums = value.substr(i + 7, end - i - 7).match(isArray ? _delimitedValueExp : _strictNumExp);\n    s += value.substr(prev, i - prev) + random(isArray ? nums : +nums[0], isArray ? 0 : +nums[1], +nums[2] || 1e-5);\n    prev = end + 1;\n  }\n\n  return s + value.substr(prev, value.length - prev);\n},\n    mapRange = function mapRange(inMin, inMax, outMin, outMax, value) {\n  var inRange = inMax - inMin,\n      outRange = outMax - outMin;\n  return _conditionalReturn(value, function (value) {\n    return outMin + ((value - inMin) / inRange * outRange || 0);\n  });\n},\n    interpolate = function interpolate(start, end, progress, mutate) {\n  var func = isNaN(start + end) ? 0 : function (p) {\n    return (1 - p) * start + p * end;\n  };\n\n  if (!func) {\n    var isString = _isString(start),\n        master = {},\n        p,\n        i,\n        interpolators,\n        l,\n        il;\n\n    progress === true && (mutate = 1) && (progress = null);\n\n    if (isString) {\n      start = {\n        p: start\n      };\n      end = {\n        p: end\n      };\n    } else if (_isArray(start) && !_isArray(end)) {\n      interpolators = [];\n      l = start.length;\n      il = l - 2;\n\n      for (i = 1; i < l; i++) {\n        interpolators.push(interpolate(start[i - 1], start[i])); //build the interpolators up front as a performance optimization so that when the function is called many times, it can just reuse them.\n      }\n\n      l--;\n\n      func = function func(p) {\n        p *= l;\n        var i = Math.min(il, ~~p);\n        return interpolators[i](p - i);\n      };\n\n      progress = end;\n    } else if (!mutate) {\n      start = _merge(_isArray(start) ? [] : {}, start);\n    }\n\n    if (!interpolators) {\n      for (p in end) {\n        _addPropTween.call(master, start, p, \"get\", end[p]);\n      }\n\n      func = function func(p) {\n        return _renderPropTweens(p, master) || (isString ? start.p : start);\n      };\n    }\n  }\n\n  return _conditionalReturn(progress, func);\n},\n    _getLabelInDirection = function _getLabelInDirection(timeline, fromTime, backward) {\n  //used for nextLabel() and previousLabel()\n  var labels = timeline.labels,\n      min = _bigNum,\n      p,\n      distance,\n      label;\n\n  for (p in labels) {\n    distance = labels[p] - fromTime;\n\n    if (distance < 0 === !!backward && distance && min > (distance = Math.abs(distance))) {\n      label = p;\n      min = distance;\n    }\n  }\n\n  return label;\n},\n    _callback = function _callback(animation, type, executeLazyFirst) {\n  var v = animation.vars,\n      callback = v[type],\n      prevContext = _context,\n      context = animation._ctx,\n      params,\n      scope,\n      result;\n\n  if (!callback) {\n    return;\n  }\n\n  params = v[type + \"Params\"];\n  scope = v.callbackScope || animation;\n  executeLazyFirst && _lazyTweens.length && _lazyRender(); //in case rendering caused any tweens to lazy-init, we should render them because typically when a timeline finishes, users expect things to have rendered fully. Imagine an onUpdate on a timeline that reports/checks tweened values.\n\n  context && (_context = context);\n  result = params ? callback.apply(scope, params) : callback.call(scope);\n  _context = prevContext;\n  return result;\n},\n    _interrupt = function _interrupt(animation) {\n  _removeFromParent(animation);\n\n  animation.scrollTrigger && animation.scrollTrigger.kill(!!_reverting);\n  animation.progress() < 1 && _callback(animation, \"onInterrupt\");\n  return animation;\n},\n    _quickTween,\n    _registerPluginQueue = [],\n    _createPlugin = function _createPlugin(config) {\n  if (!config) return;\n  config = !config.name && config[\"default\"] || config; // UMD packaging wraps things oddly, so for example MotionPathHelper becomes {MotionPathHelper:MotionPathHelper, default:MotionPathHelper}.\n\n  if (_windowExists() || config.headless) {\n    // edge case: some build tools may pass in a null/undefined value\n    var name = config.name,\n        isFunc = _isFunction(config),\n        Plugin = name && !isFunc && config.init ? function () {\n      this._props = [];\n    } : config,\n        //in case someone passes in an object that's not a plugin, like CustomEase\n    instanceDefaults = {\n      init: _emptyFunc,\n      render: _renderPropTweens,\n      add: _addPropTween,\n      kill: _killPropTweensOf,\n      modifier: _addPluginModifier,\n      rawVars: 0\n    },\n        statics = {\n      targetTest: 0,\n      get: 0,\n      getSetter: _getSetter,\n      aliases: {},\n      register: 0\n    };\n\n    _wake();\n\n    if (config !== Plugin) {\n      if (_plugins[name]) {\n        return;\n      }\n\n      _setDefaults(Plugin, _setDefaults(_copyExcluding(config, instanceDefaults), statics)); //static methods\n\n\n      _merge(Plugin.prototype, _merge(instanceDefaults, _copyExcluding(config, statics))); //instance methods\n\n\n      _plugins[Plugin.prop = name] = Plugin;\n\n      if (config.targetTest) {\n        _harnessPlugins.push(Plugin);\n\n        _reservedProps[name] = 1;\n      }\n\n      name = (name === \"css\" ? \"CSS\" : name.charAt(0).toUpperCase() + name.substr(1)) + \"Plugin\"; //for the global name. \"motionPath\" should become MotionPathPlugin\n    }\n\n    _addGlobal(name, Plugin);\n\n    config.register && config.register(gsap, Plugin, PropTween);\n  } else {\n    _registerPluginQueue.push(config);\n  }\n},\n\n/*\n * --------------------------------------------------------------------------------------\n * COLORS\n * --------------------------------------------------------------------------------------\n */\n_255 = 255,\n    _colorLookup = {\n  aqua: [0, _255, _255],\n  lime: [0, _255, 0],\n  silver: [192, 192, 192],\n  black: [0, 0, 0],\n  maroon: [128, 0, 0],\n  teal: [0, 128, 128],\n  blue: [0, 0, _255],\n  navy: [0, 0, 128],\n  white: [_255, _255, _255],\n  olive: [128, 128, 0],\n  yellow: [_255, _255, 0],\n  orange: [_255, 165, 0],\n  gray: [128, 128, 128],\n  purple: [128, 0, 128],\n  green: [0, 128, 0],\n  red: [_255, 0, 0],\n  pink: [_255, 192, 203],\n  cyan: [0, _255, _255],\n  transparent: [_255, _255, _255, 0]\n},\n    // possible future idea to replace the hard-coded color name values - put this in the ticker.wake() where we set the _doc:\n// let ctx = _doc.createElement(\"canvas\").getContext(\"2d\");\n// _forEachName(\"aqua,lime,silver,black,maroon,teal,blue,navy,white,olive,yellow,orange,gray,purple,green,red,pink,cyan\", color => {ctx.fillStyle = color; _colorLookup[color] = splitColor(ctx.fillStyle)});\n_hue = function _hue(h, m1, m2) {\n  h += h < 0 ? 1 : h > 1 ? -1 : 0;\n  return (h * 6 < 1 ? m1 + (m2 - m1) * h * 6 : h < .5 ? m2 : h * 3 < 2 ? m1 + (m2 - m1) * (2 / 3 - h) * 6 : m1) * _255 + .5 | 0;\n},\n    splitColor = function splitColor(v, toHSL, forceAlpha) {\n  var a = !v ? _colorLookup.black : _isNumber(v) ? [v >> 16, v >> 8 & _255, v & _255] : 0,\n      r,\n      g,\n      b,\n      h,\n      s,\n      l,\n      max,\n      min,\n      d,\n      wasHSL;\n\n  if (!a) {\n    if (v.substr(-1) === \",\") {\n      //sometimes a trailing comma is included and we should chop it off (typically from a comma-delimited list of values like a textShadow:\"2px 2px 2px blue, 5px 5px 5px rgb(255,0,0)\" - in this example \"blue,\" has a trailing comma. We could strip it out inside parseComplex() but we'd need to do it to the beginning and ending values plus it wouldn't provide protection from other potential scenarios like if the user passes in a similar value.\n      v = v.substr(0, v.length - 1);\n    }\n\n    if (_colorLookup[v]) {\n      a = _colorLookup[v];\n    } else if (v.charAt(0) === \"#\") {\n      if (v.length < 6) {\n        //for shorthand like #9F0 or #9F0F (could have alpha)\n        r = v.charAt(1);\n        g = v.charAt(2);\n        b = v.charAt(3);\n        v = \"#\" + r + r + g + g + b + b + (v.length === 5 ? v.charAt(4) + v.charAt(4) : \"\");\n      }\n\n      if (v.length === 9) {\n        // hex with alpha, like #fd5e53ff\n        a = parseInt(v.substr(1, 6), 16);\n        return [a >> 16, a >> 8 & _255, a & _255, parseInt(v.substr(7), 16) / 255];\n      }\n\n      v = parseInt(v.substr(1), 16);\n      a = [v >> 16, v >> 8 & _255, v & _255];\n    } else if (v.substr(0, 3) === \"hsl\") {\n      a = wasHSL = v.match(_strictNumExp);\n\n      if (!toHSL) {\n        h = +a[0] % 360 / 360;\n        s = +a[1] / 100;\n        l = +a[2] / 100;\n        g = l <= .5 ? l * (s + 1) : l + s - l * s;\n        r = l * 2 - g;\n        a.length > 3 && (a[3] *= 1); //cast as number\n\n        a[0] = _hue(h + 1 / 3, r, g);\n        a[1] = _hue(h, r, g);\n        a[2] = _hue(h - 1 / 3, r, g);\n      } else if (~v.indexOf(\"=\")) {\n        //if relative values are found, just return the raw strings with the relative prefixes in place.\n        a = v.match(_numExp);\n        forceAlpha && a.length < 4 && (a[3] = 1);\n        return a;\n      }\n    } else {\n      a = v.match(_strictNumExp) || _colorLookup.transparent;\n    }\n\n    a = a.map(Number);\n  }\n\n  if (toHSL && !wasHSL) {\n    r = a[0] / _255;\n    g = a[1] / _255;\n    b = a[2] / _255;\n    max = Math.max(r, g, b);\n    min = Math.min(r, g, b);\n    l = (max + min) / 2;\n\n    if (max === min) {\n      h = s = 0;\n    } else {\n      d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      h = max === r ? (g - b) / d + (g < b ? 6 : 0) : max === g ? (b - r) / d + 2 : (r - g) / d + 4;\n      h *= 60;\n    }\n\n    a[0] = ~~(h + .5);\n    a[1] = ~~(s * 100 + .5);\n    a[2] = ~~(l * 100 + .5);\n  }\n\n  forceAlpha && a.length < 4 && (a[3] = 1);\n  return a;\n},\n    _colorOrderData = function _colorOrderData(v) {\n  // strips out the colors from the string, finds all the numeric slots (with units) and returns an array of those. The Array also has a \"c\" property which is an Array of the index values where the colors belong. This is to help work around issues where there's a mis-matched order of color/numeric data like drop-shadow(#f00 0px 1px 2px) and drop-shadow(0x 1px 2px #f00). This is basically a helper function used in _formatColors()\n  var values = [],\n      c = [],\n      i = -1;\n  v.split(_colorExp).forEach(function (v) {\n    var a = v.match(_numWithUnitExp) || [];\n    values.push.apply(values, a);\n    c.push(i += a.length + 1);\n  });\n  values.c = c;\n  return values;\n},\n    _formatColors = function _formatColors(s, toHSL, orderMatchData) {\n  var result = \"\",\n      colors = (s + result).match(_colorExp),\n      type = toHSL ? \"hsla(\" : \"rgba(\",\n      i = 0,\n      c,\n      shell,\n      d,\n      l;\n\n  if (!colors) {\n    return s;\n  }\n\n  colors = colors.map(function (color) {\n    return (color = splitColor(color, toHSL, 1)) && type + (toHSL ? color[0] + \",\" + color[1] + \"%,\" + color[2] + \"%,\" + color[3] : color.join(\",\")) + \")\";\n  });\n\n  if (orderMatchData) {\n    d = _colorOrderData(s);\n    c = orderMatchData.c;\n\n    if (c.join(result) !== d.c.join(result)) {\n      shell = s.replace(_colorExp, \"1\").split(_numWithUnitExp);\n      l = shell.length - 1;\n\n      for (; i < l; i++) {\n        result += shell[i] + (~c.indexOf(i) ? colors.shift() || type + \"0,0,0,0)\" : (d.length ? d : colors.length ? colors : orderMatchData).shift());\n      }\n    }\n  }\n\n  if (!shell) {\n    shell = s.split(_colorExp);\n    l = shell.length - 1;\n\n    for (; i < l; i++) {\n      result += shell[i] + colors[i];\n    }\n  }\n\n  return result + shell[l];\n},\n    _colorExp = function () {\n  var s = \"(?:\\\\b(?:(?:rgb|rgba|hsl|hsla)\\\\(.+?\\\\))|\\\\B#(?:[0-9a-f]{3,4}){1,2}\\\\b\",\n      //we'll dynamically build this Regular Expression to conserve file size. After building it, it will be able to find rgb(), rgba(), # (hexadecimal), and named color values like red, blue, purple, etc.,\n  p;\n\n  for (p in _colorLookup) {\n    s += \"|\" + p + \"\\\\b\";\n  }\n\n  return new RegExp(s + \")\", \"gi\");\n}(),\n    _hslExp = /hsl[a]?\\(/,\n    _colorStringFilter = function _colorStringFilter(a) {\n  var combined = a.join(\" \"),\n      toHSL;\n  _colorExp.lastIndex = 0;\n\n  if (_colorExp.test(combined)) {\n    toHSL = _hslExp.test(combined);\n    a[1] = _formatColors(a[1], toHSL);\n    a[0] = _formatColors(a[0], toHSL, _colorOrderData(a[1])); // make sure the order of numbers/colors match with the END value.\n\n    return true;\n  }\n},\n\n/*\n * --------------------------------------------------------------------------------------\n * TICKER\n * --------------------------------------------------------------------------------------\n */\n_tickerActive,\n    _ticker = function () {\n  var _getTime = Date.now,\n      _lagThreshold = 500,\n      _adjustedLag = 33,\n      _startTime = _getTime(),\n      _lastUpdate = _startTime,\n      _gap = 1000 / 240,\n      _nextTime = _gap,\n      _listeners = [],\n      _id,\n      _req,\n      _raf,\n      _self,\n      _delta,\n      _i,\n      _tick = function _tick(v) {\n    var elapsed = _getTime() - _lastUpdate,\n        manual = v === true,\n        overlap,\n        dispatch,\n        time,\n        frame;\n\n    (elapsed > _lagThreshold || elapsed < 0) && (_startTime += elapsed - _adjustedLag);\n    _lastUpdate += elapsed;\n    time = _lastUpdate - _startTime;\n    overlap = time - _nextTime;\n\n    if (overlap > 0 || manual) {\n      frame = ++_self.frame;\n      _delta = time - _self.time * 1000;\n      _self.time = time = time / 1000;\n      _nextTime += overlap + (overlap >= _gap ? 4 : _gap - overlap);\n      dispatch = 1;\n    }\n\n    manual || (_id = _req(_tick)); //make sure the request is made before we dispatch the \"tick\" event so that timing is maintained. Otherwise, if processing the \"tick\" requires a bunch of time (like 15ms) and we're using a setTimeout() that's based on 16.7ms, it'd technically take 31.7ms between frames otherwise.\n\n    if (dispatch) {\n      for (_i = 0; _i < _listeners.length; _i++) {\n        // use _i and check _listeners.length instead of a variable because a listener could get removed during the loop, and if that happens to an element less than the current index, it'd throw things off in the loop.\n        _listeners[_i](time, _delta, frame, v);\n      }\n    }\n  };\n\n  _self = {\n    time: 0,\n    frame: 0,\n    tick: function tick() {\n      _tick(true);\n    },\n    deltaRatio: function deltaRatio(fps) {\n      return _delta / (1000 / (fps || 60));\n    },\n    wake: function wake() {\n      if (_coreReady) {\n        if (!_coreInitted && _windowExists()) {\n          _win = _coreInitted = window;\n          _doc = _win.document || {};\n          _globals.gsap = gsap;\n          (_win.gsapVersions || (_win.gsapVersions = [])).push(gsap.version);\n\n          _install(_installScope || _win.GreenSockGlobals || !_win.gsap && _win || {});\n\n          _registerPluginQueue.forEach(_createPlugin);\n        }\n\n        _raf = typeof requestAnimationFrame !== \"undefined\" && requestAnimationFrame;\n        _id && _self.sleep();\n\n        _req = _raf || function (f) {\n          return setTimeout(f, _nextTime - _self.time * 1000 + 1 | 0);\n        };\n\n        _tickerActive = 1;\n\n        _tick(2);\n      }\n    },\n    sleep: function sleep() {\n      (_raf ? cancelAnimationFrame : clearTimeout)(_id);\n      _tickerActive = 0;\n      _req = _emptyFunc;\n    },\n    lagSmoothing: function lagSmoothing(threshold, adjustedLag) {\n      _lagThreshold = threshold || Infinity; // zero should be interpreted as basically unlimited\n\n      _adjustedLag = Math.min(adjustedLag || 33, _lagThreshold);\n    },\n    fps: function fps(_fps) {\n      _gap = 1000 / (_fps || 240);\n      _nextTime = _self.time * 1000 + _gap;\n    },\n    add: function add(callback, once, prioritize) {\n      var func = once ? function (t, d, f, v) {\n        callback(t, d, f, v);\n\n        _self.remove(func);\n      } : callback;\n\n      _self.remove(callback);\n\n      _listeners[prioritize ? \"unshift\" : \"push\"](func);\n\n      _wake();\n\n      return func;\n    },\n    remove: function remove(callback, i) {\n      ~(i = _listeners.indexOf(callback)) && _listeners.splice(i, 1) && _i >= i && _i--;\n    },\n    _listeners: _listeners\n  };\n  return _self;\n}(),\n    _wake = function _wake() {\n  return !_tickerActive && _ticker.wake();\n},\n    //also ensures the core classes are initialized.\n\n/*\n* -------------------------------------------------\n* EASING\n* -------------------------------------------------\n*/\n_easeMap = {},\n    _customEaseExp = /^[\\d.\\-M][\\d.\\-,\\s]/,\n    _quotesExp = /[\"']/g,\n    _parseObjectInString = function _parseObjectInString(value) {\n  //takes a string like \"{wiggles:10, type:anticipate})\" and turns it into a real object. Notice it ends in \")\" and includes the {} wrappers. This is because we only use this function for parsing ease configs and prioritized optimization rather than reusability.\n  var obj = {},\n      split = value.substr(1, value.length - 3).split(\":\"),\n      key = split[0],\n      i = 1,\n      l = split.length,\n      index,\n      val,\n      parsedVal;\n\n  for (; i < l; i++) {\n    val = split[i];\n    index = i !== l - 1 ? val.lastIndexOf(\",\") : val.length;\n    parsedVal = val.substr(0, index);\n    obj[key] = isNaN(parsedVal) ? parsedVal.replace(_quotesExp, \"\").trim() : +parsedVal;\n    key = val.substr(index + 1).trim();\n  }\n\n  return obj;\n},\n    _valueInParentheses = function _valueInParentheses(value) {\n  var open = value.indexOf(\"(\") + 1,\n      close = value.indexOf(\")\"),\n      nested = value.indexOf(\"(\", open);\n  return value.substring(open, ~nested && nested < close ? value.indexOf(\")\", close + 1) : close);\n},\n    _configEaseFromString = function _configEaseFromString(name) {\n  //name can be a string like \"elastic.out(1,0.5)\", and pass in _easeMap as obj and it'll parse it out and call the actual function like _easeMap.Elastic.easeOut.config(1,0.5). It will also parse custom ease strings as long as CustomEase is loaded and registered (internally as _easeMap._CE).\n  var split = (name + \"\").split(\"(\"),\n      ease = _easeMap[split[0]];\n  return ease && split.length > 1 && ease.config ? ease.config.apply(null, ~name.indexOf(\"{\") ? [_parseObjectInString(split[1])] : _valueInParentheses(name).split(\",\").map(_numericIfPossible)) : _easeMap._CE && _customEaseExp.test(name) ? _easeMap._CE(\"\", name) : ease;\n},\n    _invertEase = function _invertEase(ease) {\n  return function (p) {\n    return 1 - ease(1 - p);\n  };\n},\n    // allow yoyoEase to be set in children and have those affected when the parent/ancestor timeline yoyos.\n_propagateYoyoEase = function _propagateYoyoEase(timeline, isYoyo) {\n  var child = timeline._first,\n      ease;\n\n  while (child) {\n    if (child instanceof Timeline) {\n      _propagateYoyoEase(child, isYoyo);\n    } else if (child.vars.yoyoEase && (!child._yoyo || !child._repeat) && child._yoyo !== isYoyo) {\n      if (child.timeline) {\n        _propagateYoyoEase(child.timeline, isYoyo);\n      } else {\n        ease = child._ease;\n        child._ease = child._yEase;\n        child._yEase = ease;\n        child._yoyo = isYoyo;\n      }\n    }\n\n    child = child._next;\n  }\n},\n    _parseEase = function _parseEase(ease, defaultEase) {\n  return !ease ? defaultEase : (_isFunction(ease) ? ease : _easeMap[ease] || _configEaseFromString(ease)) || defaultEase;\n},\n    _insertEase = function _insertEase(names, easeIn, easeOut, easeInOut) {\n  if (easeOut === void 0) {\n    easeOut = function easeOut(p) {\n      return 1 - easeIn(1 - p);\n    };\n  }\n\n  if (easeInOut === void 0) {\n    easeInOut = function easeInOut(p) {\n      return p < .5 ? easeIn(p * 2) / 2 : 1 - easeIn((1 - p) * 2) / 2;\n    };\n  }\n\n  var ease = {\n    easeIn: easeIn,\n    easeOut: easeOut,\n    easeInOut: easeInOut\n  },\n      lowercaseName;\n\n  _forEachName(names, function (name) {\n    _easeMap[name] = _globals[name] = ease;\n    _easeMap[lowercaseName = name.toLowerCase()] = easeOut;\n\n    for (var p in ease) {\n      _easeMap[lowercaseName + (p === \"easeIn\" ? \".in\" : p === \"easeOut\" ? \".out\" : \".inOut\")] = _easeMap[name + \".\" + p] = ease[p];\n    }\n  });\n\n  return ease;\n},\n    _easeInOutFromOut = function _easeInOutFromOut(easeOut) {\n  return function (p) {\n    return p < .5 ? (1 - easeOut(1 - p * 2)) / 2 : .5 + easeOut((p - .5) * 2) / 2;\n  };\n},\n    _configElastic = function _configElastic(type, amplitude, period) {\n  var p1 = amplitude >= 1 ? amplitude : 1,\n      //note: if amplitude is < 1, we simply adjust the period for a more natural feel. Otherwise the math doesn't work right and the curve starts at 1.\n  p2 = (period || (type ? .3 : .45)) / (amplitude < 1 ? amplitude : 1),\n      p3 = p2 / _2PI * (Math.asin(1 / p1) || 0),\n      easeOut = function easeOut(p) {\n    return p === 1 ? 1 : p1 * Math.pow(2, -10 * p) * _sin((p - p3) * p2) + 1;\n  },\n      ease = type === \"out\" ? easeOut : type === \"in\" ? function (p) {\n    return 1 - easeOut(1 - p);\n  } : _easeInOutFromOut(easeOut);\n\n  p2 = _2PI / p2; //precalculate to optimize\n\n  ease.config = function (amplitude, period) {\n    return _configElastic(type, amplitude, period);\n  };\n\n  return ease;\n},\n    _configBack = function _configBack(type, overshoot) {\n  if (overshoot === void 0) {\n    overshoot = 1.70158;\n  }\n\n  var easeOut = function easeOut(p) {\n    return p ? --p * p * ((overshoot + 1) * p + overshoot) + 1 : 0;\n  },\n      ease = type === \"out\" ? easeOut : type === \"in\" ? function (p) {\n    return 1 - easeOut(1 - p);\n  } : _easeInOutFromOut(easeOut);\n\n  ease.config = function (overshoot) {\n    return _configBack(type, overshoot);\n  };\n\n  return ease;\n}; // a cheaper (kb and cpu) but more mild way to get a parameterized weighted ease by feeding in a value between -1 (easeIn) and 1 (easeOut) where 0 is linear.\n// _weightedEase = ratio => {\n// \tlet y = 0.5 + ratio / 2;\n// \treturn p => (2 * (1 - p) * p * y + p * p);\n// },\n// a stronger (but more expensive kb/cpu) parameterized weighted ease that lets you feed in a value between -1 (easeIn) and 1 (easeOut) where 0 is linear.\n// _weightedEaseStrong = ratio => {\n// \tratio = .5 + ratio / 2;\n// \tlet o = 1 / 3 * (ratio < .5 ? ratio : 1 - ratio),\n// \t\tb = ratio - o,\n// \t\tc = ratio + o;\n// \treturn p => p === 1 ? p : 3 * b * (1 - p) * (1 - p) * p + 3 * c * (1 - p) * p * p + p * p * p;\n// };\n\n\n_forEachName(\"Linear,Quad,Cubic,Quart,Quint,Strong\", function (name, i) {\n  var power = i < 5 ? i + 1 : i;\n\n  _insertEase(name + \",Power\" + (power - 1), i ? function (p) {\n    return Math.pow(p, power);\n  } : function (p) {\n    return p;\n  }, function (p) {\n    return 1 - Math.pow(1 - p, power);\n  }, function (p) {\n    return p < .5 ? Math.pow(p * 2, power) / 2 : 1 - Math.pow((1 - p) * 2, power) / 2;\n  });\n});\n\n_easeMap.Linear.easeNone = _easeMap.none = _easeMap.Linear.easeIn;\n\n_insertEase(\"Elastic\", _configElastic(\"in\"), _configElastic(\"out\"), _configElastic());\n\n(function (n, c) {\n  var n1 = 1 / c,\n      n2 = 2 * n1,\n      n3 = 2.5 * n1,\n      easeOut = function easeOut(p) {\n    return p < n1 ? n * p * p : p < n2 ? n * Math.pow(p - 1.5 / c, 2) + .75 : p < n3 ? n * (p -= 2.25 / c) * p + .9375 : n * Math.pow(p - 2.625 / c, 2) + .984375;\n  };\n\n  _insertEase(\"Bounce\", function (p) {\n    return 1 - easeOut(1 - p);\n  }, easeOut);\n})(7.5625, 2.75);\n\n_insertEase(\"Expo\", function (p) {\n  return p ? Math.pow(2, 10 * (p - 1)) : 0;\n});\n\n_insertEase(\"Circ\", function (p) {\n  return -(_sqrt(1 - p * p) - 1);\n});\n\n_insertEase(\"Sine\", function (p) {\n  return p === 1 ? 1 : -_cos(p * _HALF_PI) + 1;\n});\n\n_insertEase(\"Back\", _configBack(\"in\"), _configBack(\"out\"), _configBack());\n\n_easeMap.SteppedEase = _easeMap.steps = _globals.SteppedEase = {\n  config: function config(steps, immediateStart) {\n    if (steps === void 0) {\n      steps = 1;\n    }\n\n    var p1 = 1 / steps,\n        p2 = steps + (immediateStart ? 0 : 1),\n        p3 = immediateStart ? 1 : 0,\n        max = 1 - _tinyNum;\n    return function (p) {\n      return ((p2 * _clamp(0, max, p) | 0) + p3) * p1;\n    };\n  }\n};\n_defaults.ease = _easeMap[\"quad.out\"];\n\n_forEachName(\"onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt\", function (name) {\n  return _callbackNames += name + \",\" + name + \"Params,\";\n});\n/*\n * --------------------------------------------------------------------------------------\n * CACHE\n * --------------------------------------------------------------------------------------\n */\n\n\nexport var GSCache = function GSCache(target, harness) {\n  this.id = _gsID++;\n  target._gsap = this;\n  this.target = target;\n  this.harness = harness;\n  this.get = harness ? harness.get : _getProperty;\n  this.set = harness ? harness.getSetter : _getSetter;\n};\n/*\n * --------------------------------------------------------------------------------------\n * ANIMATION\n * --------------------------------------------------------------------------------------\n */\n\nexport var Animation = /*#__PURE__*/function () {\n  function Animation(vars) {\n    this.vars = vars;\n    this._delay = +vars.delay || 0;\n\n    if (this._repeat = vars.repeat === Infinity ? -2 : vars.repeat || 0) {\n      // TODO: repeat: Infinity on a timeline's children must flag that timeline internally and affect its totalDuration, otherwise it'll stop in the negative direction when reaching the start.\n      this._rDelay = vars.repeatDelay || 0;\n      this._yoyo = !!vars.yoyo || !!vars.yoyoEase;\n    }\n\n    this._ts = 1;\n\n    _setDuration(this, +vars.duration, 1, 1);\n\n    this.data = vars.data;\n\n    if (_context) {\n      this._ctx = _context;\n\n      _context.data.push(this);\n    }\n\n    _tickerActive || _ticker.wake();\n  }\n\n  var _proto = Animation.prototype;\n\n  _proto.delay = function delay(value) {\n    if (value || value === 0) {\n      this.parent && this.parent.smoothChildTiming && this.startTime(this._start + value - this._delay);\n      this._delay = value;\n      return this;\n    }\n\n    return this._delay;\n  };\n\n  _proto.duration = function duration(value) {\n    return arguments.length ? this.totalDuration(this._repeat > 0 ? value + (value + this._rDelay) * this._repeat : value) : this.totalDuration() && this._dur;\n  };\n\n  _proto.totalDuration = function totalDuration(value) {\n    if (!arguments.length) {\n      return this._tDur;\n    }\n\n    this._dirty = 0;\n    return _setDuration(this, this._repeat < 0 ? value : (value - this._repeat * this._rDelay) / (this._repeat + 1));\n  };\n\n  _proto.totalTime = function totalTime(_totalTime, suppressEvents) {\n    _wake();\n\n    if (!arguments.length) {\n      return this._tTime;\n    }\n\n    var parent = this._dp;\n\n    if (parent && parent.smoothChildTiming && this._ts) {\n      _alignPlayhead(this, _totalTime);\n\n      !parent._dp || parent.parent || _postAddChecks(parent, this); // edge case: if this is a child of a timeline that already completed, for example, we must re-activate the parent.\n      //in case any of the ancestor timelines had completed but should now be enabled, we should reset their totalTime() which will also ensure that they're lined up properly and enabled. Skip for animations that are on the root (wasteful). Example: a TimelineLite.exportRoot() is performed when there's a paused tween on the root, the export will not complete until that tween is unpaused, but imagine a child gets restarted later, after all [unpaused] tweens have completed. The start of that child would get pushed out, but one of the ancestors may have completed.\n\n      while (parent && parent.parent) {\n        if (parent.parent._time !== parent._start + (parent._ts >= 0 ? parent._tTime / parent._ts : (parent.totalDuration() - parent._tTime) / -parent._ts)) {\n          parent.totalTime(parent._tTime, true);\n        }\n\n        parent = parent.parent;\n      }\n\n      if (!this.parent && this._dp.autoRemoveChildren && (this._ts > 0 && _totalTime < this._tDur || this._ts < 0 && _totalTime > 0 || !this._tDur && !_totalTime)) {\n        //if the animation doesn't have a parent, put it back into its last parent (recorded as _dp for exactly cases like this). Limit to parents with autoRemoveChildren (like globalTimeline) so that if the user manually removes an animation from a timeline and then alters its playhead, it doesn't get added back in.\n        _addToTimeline(this._dp, this, this._start - this._delay);\n      }\n    }\n\n    if (this._tTime !== _totalTime || !this._dur && !suppressEvents || this._initted && Math.abs(this._zTime) === _tinyNum || !_totalTime && !this._initted && (this.add || this._ptLookup)) {\n      // check for _ptLookup on a Tween instance to ensure it has actually finished being instantiated, otherwise if this.reverse() gets called in the Animation constructor, it could trigger a render() here even though the _targets weren't populated, thus when _init() is called there won't be any PropTweens (it'll act like the tween is non-functional)\n      this._ts || (this._pTime = _totalTime); // otherwise, if an animation is paused, then the playhead is moved back to zero, then resumed, it'd revert back to the original time at the pause\n      //if (!this._lock) { // avoid endless recursion (not sure we need this yet or if it's worth the performance hit)\n      //   this._lock = 1;\n\n      _lazySafeRender(this, _totalTime, suppressEvents); //   this._lock = 0;\n      //}\n\n    }\n\n    return this;\n  };\n\n  _proto.time = function time(value, suppressEvents) {\n    return arguments.length ? this.totalTime(Math.min(this.totalDuration(), value + _elapsedCycleDuration(this)) % (this._dur + this._rDelay) || (value ? this._dur : 0), suppressEvents) : this._time; // note: if the modulus results in 0, the playhead could be exactly at the end or the beginning, and we always defer to the END with a non-zero value, otherwise if you set the time() to the very end (duration()), it would render at the START!\n  };\n\n  _proto.totalProgress = function totalProgress(value, suppressEvents) {\n    return arguments.length ? this.totalTime(this.totalDuration() * value, suppressEvents) : this.totalDuration() ? Math.min(1, this._tTime / this._tDur) : this.rawTime() > 0 ? 1 : 0;\n  };\n\n  _proto.progress = function progress(value, suppressEvents) {\n    return arguments.length ? this.totalTime(this.duration() * (this._yoyo && !(this.iteration() & 1) ? 1 - value : value) + _elapsedCycleDuration(this), suppressEvents) : this.duration() ? Math.min(1, this._time / this._dur) : this.rawTime() > 0 ? 1 : 0;\n  };\n\n  _proto.iteration = function iteration(value, suppressEvents) {\n    var cycleDuration = this.duration() + this._rDelay;\n\n    return arguments.length ? this.totalTime(this._time + (value - 1) * cycleDuration, suppressEvents) : this._repeat ? _animationCycle(this._tTime, cycleDuration) + 1 : 1;\n  } // potential future addition:\n  // isPlayingBackwards() {\n  // \tlet animation = this,\n  // \t\torientation = 1; // 1 = forward, -1 = backward\n  // \twhile (animation) {\n  // \t\torientation *= animation.reversed() || (animation.repeat() && !(animation.iteration() & 1)) ? -1 : 1;\n  // \t\tanimation = animation.parent;\n  // \t}\n  // \treturn orientation < 0;\n  // }\n  ;\n\n  _proto.timeScale = function timeScale(value, suppressEvents) {\n    if (!arguments.length) {\n      return this._rts === -_tinyNum ? 0 : this._rts; // recorded timeScale. Special case: if someone calls reverse() on an animation with timeScale of 0, we assign it -_tinyNum to remember it's reversed.\n    }\n\n    if (this._rts === value) {\n      return this;\n    }\n\n    var tTime = this.parent && this._ts ? _parentToChildTotalTime(this.parent._time, this) : this._tTime; // make sure to do the parentToChildTotalTime() BEFORE setting the new _ts because the old one must be used in that calculation.\n    // future addition? Up side: fast and minimal file size. Down side: only works on this animation; if a timeline is reversed, for example, its childrens' onReverse wouldn't get called.\n    //(+value < 0 && this._rts >= 0) && _callback(this, \"onReverse\", true);\n    // prioritize rendering where the parent's playhead lines up instead of this._tTime because there could be a tween that's animating another tween's timeScale in the same rendering loop (same parent), thus if the timeScale tween renders first, it would alter _start BEFORE _tTime was set on that tick (in the rendering loop), effectively freezing it until the timeScale tween finishes.\n\n    this._rts = +value || 0;\n    this._ts = this._ps || value === -_tinyNum ? 0 : this._rts; // _ts is the functional timeScale which would be 0 if the animation is paused.\n\n    this.totalTime(_clamp(-Math.abs(this._delay), this._tDur, tTime), suppressEvents !== false);\n\n    _setEnd(this); // if parent.smoothChildTiming was false, the end time didn't get updated in the _alignPlayhead() method, so do it here.\n\n\n    return _recacheAncestors(this);\n  };\n\n  _proto.paused = function paused(value) {\n    if (!arguments.length) {\n      return this._ps;\n    }\n\n    if (this._ps !== value) {\n      this._ps = value;\n\n      if (value) {\n        this._pTime = this._tTime || Math.max(-this._delay, this.rawTime()); // if the pause occurs during the delay phase, make sure that's factored in when resuming.\n\n        this._ts = this._act = 0; // _ts is the functional timeScale, so a paused tween would effectively have a timeScale of 0. We record the \"real\" timeScale as _rts (recorded time scale)\n      } else {\n        _wake();\n\n        this._ts = this._rts; //only defer to _pTime (pauseTime) if tTime is zero. Remember, someone could pause() an animation, then scrub the playhead and resume(). If the parent doesn't have smoothChildTiming, we render at the rawTime() because the startTime won't get updated.\n\n        this.totalTime(this.parent && !this.parent.smoothChildTiming ? this.rawTime() : this._tTime || this._pTime, this.progress() === 1 && Math.abs(this._zTime) !== _tinyNum && (this._tTime -= _tinyNum)); // edge case: animation.progress(1).pause().play() wouldn't render again because the playhead is already at the end, but the call to totalTime() below will add it back to its parent...and not remove it again (since removing only happens upon rendering at a new time). Offsetting the _tTime slightly is done simply to cause the final render in totalTime() that'll pop it off its timeline (if autoRemoveChildren is true, of course). Check to make sure _zTime isn't -_tinyNum to avoid an edge case where the playhead is pushed to the end but INSIDE a tween/callback, the timeline itself is paused thus halting rendering and leaving a few unrendered. When resuming, it wouldn't render those otherwise.\n      }\n    }\n\n    return this;\n  };\n\n  _proto.startTime = function startTime(value) {\n    if (arguments.length) {\n      this._start = value;\n      var parent = this.parent || this._dp;\n      parent && (parent._sort || !this.parent) && _addToTimeline(parent, this, value - this._delay);\n      return this;\n    }\n\n    return this._start;\n  };\n\n  _proto.endTime = function endTime(includeRepeats) {\n    return this._start + (_isNotFalse(includeRepeats) ? this.totalDuration() : this.duration()) / Math.abs(this._ts || 1);\n  };\n\n  _proto.rawTime = function rawTime(wrapRepeats) {\n    var parent = this.parent || this._dp; // _dp = detached parent\n\n    return !parent ? this._tTime : wrapRepeats && (!this._ts || this._repeat && this._time && this.totalProgress() < 1) ? this._tTime % (this._dur + this._rDelay) : !this._ts ? this._tTime : _parentToChildTotalTime(parent.rawTime(wrapRepeats), this);\n  };\n\n  _proto.revert = function revert(config) {\n    if (config === void 0) {\n      config = _revertConfig;\n    }\n\n    var prevIsReverting = _reverting;\n    _reverting = config;\n\n    if (this._initted || this._startAt) {\n      this.timeline && this.timeline.revert(config);\n      this.totalTime(-0.01, config.suppressEvents);\n    }\n\n    this.data !== \"nested\" && config.kill !== false && this.kill();\n    _reverting = prevIsReverting;\n    return this;\n  };\n\n  _proto.globalTime = function globalTime(rawTime) {\n    var animation = this,\n        time = arguments.length ? rawTime : animation.rawTime();\n\n    while (animation) {\n      time = animation._start + time / (Math.abs(animation._ts) || 1);\n      animation = animation._dp;\n    }\n\n    return !this.parent && this._sat ? this._sat.globalTime(rawTime) : time; // the _startAt tweens for .fromTo() and .from() that have immediateRender should always be FIRST in the timeline (important for context.revert()). \"_sat\" stands for _startAtTween, referring to the parent tween that created the _startAt. We must discern if that tween had immediateRender so that we can know whether or not to prioritize it in revert().\n  };\n\n  _proto.repeat = function repeat(value) {\n    if (arguments.length) {\n      this._repeat = value === Infinity ? -2 : value;\n      return _onUpdateTotalDuration(this);\n    }\n\n    return this._repeat === -2 ? Infinity : this._repeat;\n  };\n\n  _proto.repeatDelay = function repeatDelay(value) {\n    if (arguments.length) {\n      var time = this._time;\n      this._rDelay = value;\n\n      _onUpdateTotalDuration(this);\n\n      return time ? this.time(time) : this;\n    }\n\n    return this._rDelay;\n  };\n\n  _proto.yoyo = function yoyo(value) {\n    if (arguments.length) {\n      this._yoyo = value;\n      return this;\n    }\n\n    return this._yoyo;\n  };\n\n  _proto.seek = function seek(position, suppressEvents) {\n    return this.totalTime(_parsePosition(this, position), _isNotFalse(suppressEvents));\n  };\n\n  _proto.restart = function restart(includeDelay, suppressEvents) {\n    return this.play().totalTime(includeDelay ? -this._delay : 0, _isNotFalse(suppressEvents));\n  };\n\n  _proto.play = function play(from, suppressEvents) {\n    from != null && this.seek(from, suppressEvents);\n    return this.reversed(false).paused(false);\n  };\n\n  _proto.reverse = function reverse(from, suppressEvents) {\n    from != null && this.seek(from || this.totalDuration(), suppressEvents);\n    return this.reversed(true).paused(false);\n  };\n\n  _proto.pause = function pause(atTime, suppressEvents) {\n    atTime != null && this.seek(atTime, suppressEvents);\n    return this.paused(true);\n  };\n\n  _proto.resume = function resume() {\n    return this.paused(false);\n  };\n\n  _proto.reversed = function reversed(value) {\n    if (arguments.length) {\n      !!value !== this.reversed() && this.timeScale(-this._rts || (value ? -_tinyNum : 0)); // in case timeScale is zero, reversing would have no effect so we use _tinyNum.\n\n      return this;\n    }\n\n    return this._rts < 0;\n  };\n\n  _proto.invalidate = function invalidate() {\n    this._initted = this._act = 0;\n    this._zTime = -_tinyNum;\n    return this;\n  };\n\n  _proto.isActive = function isActive() {\n    var parent = this.parent || this._dp,\n        start = this._start,\n        rawTime;\n    return !!(!parent || this._ts && this._initted && parent.isActive() && (rawTime = parent.rawTime(true)) >= start && rawTime < this.endTime(true) - _tinyNum);\n  };\n\n  _proto.eventCallback = function eventCallback(type, callback, params) {\n    var vars = this.vars;\n\n    if (arguments.length > 1) {\n      if (!callback) {\n        delete vars[type];\n      } else {\n        vars[type] = callback;\n        params && (vars[type + \"Params\"] = params);\n        type === \"onUpdate\" && (this._onUpdate = callback);\n      }\n\n      return this;\n    }\n\n    return vars[type];\n  };\n\n  _proto.then = function then(onFulfilled) {\n    var self = this;\n    return new Promise(function (resolve) {\n      var f = _isFunction(onFulfilled) ? onFulfilled : _passThrough,\n          _resolve = function _resolve() {\n        var _then = self.then;\n        self.then = null; // temporarily null the then() method to avoid an infinite loop (see https://github.com/greensock/GSAP/issues/322)\n\n        _isFunction(f) && (f = f(self)) && (f.then || f === self) && (self.then = _then);\n        resolve(f);\n        self.then = _then;\n      };\n\n      if (self._initted && self.totalProgress() === 1 && self._ts >= 0 || !self._tTime && self._ts < 0) {\n        _resolve();\n      } else {\n        self._prom = _resolve;\n      }\n    });\n  };\n\n  _proto.kill = function kill() {\n    _interrupt(this);\n  };\n\n  return Animation;\n}();\n\n_setDefaults(Animation.prototype, {\n  _time: 0,\n  _start: 0,\n  _end: 0,\n  _tTime: 0,\n  _tDur: 0,\n  _dirty: 0,\n  _repeat: 0,\n  _yoyo: false,\n  parent: null,\n  _initted: false,\n  _rDelay: 0,\n  _ts: 1,\n  _dp: 0,\n  ratio: 0,\n  _zTime: -_tinyNum,\n  _prom: 0,\n  _ps: false,\n  _rts: 1\n});\n/*\n * -------------------------------------------------\n * TIMELINE\n * -------------------------------------------------\n */\n\n\nexport var Timeline = /*#__PURE__*/function (_Animation) {\n  _inheritsLoose(Timeline, _Animation);\n\n  function Timeline(vars, position) {\n    var _this;\n\n    if (vars === void 0) {\n      vars = {};\n    }\n\n    _this = _Animation.call(this, vars) || this;\n    _this.labels = {};\n    _this.smoothChildTiming = !!vars.smoothChildTiming;\n    _this.autoRemoveChildren = !!vars.autoRemoveChildren;\n    _this._sort = _isNotFalse(vars.sortChildren);\n    _globalTimeline && _addToTimeline(vars.parent || _globalTimeline, _assertThisInitialized(_this), position);\n    vars.reversed && _this.reverse();\n    vars.paused && _this.paused(true);\n    vars.scrollTrigger && _scrollTrigger(_assertThisInitialized(_this), vars.scrollTrigger);\n    return _this;\n  }\n\n  var _proto2 = Timeline.prototype;\n\n  _proto2.to = function to(targets, vars, position) {\n    _createTweenType(0, arguments, this);\n\n    return this;\n  };\n\n  _proto2.from = function from(targets, vars, position) {\n    _createTweenType(1, arguments, this);\n\n    return this;\n  };\n\n  _proto2.fromTo = function fromTo(targets, fromVars, toVars, position) {\n    _createTweenType(2, arguments, this);\n\n    return this;\n  };\n\n  _proto2.set = function set(targets, vars, position) {\n    vars.duration = 0;\n    vars.parent = this;\n    _inheritDefaults(vars).repeatDelay || (vars.repeat = 0);\n    vars.immediateRender = !!vars.immediateRender;\n    new Tween(targets, vars, _parsePosition(this, position), 1);\n    return this;\n  };\n\n  _proto2.call = function call(callback, params, position) {\n    return _addToTimeline(this, Tween.delayedCall(0, callback, params), position);\n  } //ONLY for backward compatibility! Maybe delete?\n  ;\n\n  _proto2.staggerTo = function staggerTo(targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams) {\n    vars.duration = duration;\n    vars.stagger = vars.stagger || stagger;\n    vars.onComplete = onCompleteAll;\n    vars.onCompleteParams = onCompleteAllParams;\n    vars.parent = this;\n    new Tween(targets, vars, _parsePosition(this, position));\n    return this;\n  };\n\n  _proto2.staggerFrom = function staggerFrom(targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams) {\n    vars.runBackwards = 1;\n    _inheritDefaults(vars).immediateRender = _isNotFalse(vars.immediateRender);\n    return this.staggerTo(targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams);\n  };\n\n  _proto2.staggerFromTo = function staggerFromTo(targets, duration, fromVars, toVars, stagger, position, onCompleteAll, onCompleteAllParams) {\n    toVars.startAt = fromVars;\n    _inheritDefaults(toVars).immediateRender = _isNotFalse(toVars.immediateRender);\n    return this.staggerTo(targets, duration, toVars, stagger, position, onCompleteAll, onCompleteAllParams);\n  };\n\n  _proto2.render = function render(totalTime, suppressEvents, force) {\n    var prevTime = this._time,\n        tDur = this._dirty ? this.totalDuration() : this._tDur,\n        dur = this._dur,\n        tTime = totalTime <= 0 ? 0 : _roundPrecise(totalTime),\n        // if a paused timeline is resumed (or its _start is updated for another reason...which rounds it), that could result in the playhead shifting a **tiny** amount and a zero-duration child at that spot may get rendered at a different ratio, like its totalTime in render() may be 1e-17 instead of 0, for example.\n    crossingStart = this._zTime < 0 !== totalTime < 0 && (this._initted || !dur),\n        time,\n        child,\n        next,\n        iteration,\n        cycleDuration,\n        prevPaused,\n        pauseTween,\n        timeScale,\n        prevStart,\n        prevIteration,\n        yoyo,\n        isYoyo;\n    this !== _globalTimeline && tTime > tDur && totalTime >= 0 && (tTime = tDur);\n\n    if (tTime !== this._tTime || force || crossingStart) {\n      if (prevTime !== this._time && dur) {\n        //if totalDuration() finds a child with a negative startTime and smoothChildTiming is true, things get shifted around internally so we need to adjust the time accordingly. For example, if a tween starts at -30 we must shift EVERYTHING forward 30 seconds and move this timeline's startTime backward by 30 seconds so that things align with the playhead (no jump).\n        tTime += this._time - prevTime;\n        totalTime += this._time - prevTime;\n      }\n\n      time = tTime;\n      prevStart = this._start;\n      timeScale = this._ts;\n      prevPaused = !timeScale;\n\n      if (crossingStart) {\n        dur || (prevTime = this._zTime); //when the playhead arrives at EXACTLY time 0 (right on top) of a zero-duration timeline, we need to discern if events are suppressed so that when the playhead moves again (next time), it'll trigger the callback. If events are NOT suppressed, obviously the callback would be triggered in this render. Basically, the callback should fire either when the playhead ARRIVES or LEAVES this exact spot, not both. Imagine doing a timeline.seek(0) and there's a callback that sits at 0. Since events are suppressed on that seek() by default, nothing will fire, but when the playhead moves off of that position, the callback should fire. This behavior is what people intuitively expect.\n\n        (totalTime || !suppressEvents) && (this._zTime = totalTime);\n      }\n\n      if (this._repeat) {\n        //adjust the time for repeats and yoyos\n        yoyo = this._yoyo;\n        cycleDuration = dur + this._rDelay;\n\n        if (this._repeat < -1 && totalTime < 0) {\n          return this.totalTime(cycleDuration * 100 + totalTime, suppressEvents, force);\n        }\n\n        time = _roundPrecise(tTime % cycleDuration); //round to avoid floating point errors. (4 % 0.8 should be 0 but some browsers report it as 0.79999999!)\n\n        if (tTime === tDur) {\n          // the tDur === tTime is for edge cases where there's a lengthy decimal on the duration and it may reach the very end but the time is rendered as not-quite-there (remember, tDur is rounded to 4 decimals whereas dur isn't)\n          iteration = this._repeat;\n          time = dur;\n        } else {\n          iteration = ~~(tTime / cycleDuration);\n\n          if (iteration && iteration === tTime / cycleDuration) {\n            time = dur;\n            iteration--;\n          }\n\n          time > dur && (time = dur);\n        }\n\n        prevIteration = _animationCycle(this._tTime, cycleDuration);\n        !prevTime && this._tTime && prevIteration !== iteration && this._tTime - prevIteration * cycleDuration - this._dur <= 0 && (prevIteration = iteration); // edge case - if someone does addPause() at the very beginning of a repeating timeline, that pause is technically at the same spot as the end which causes this._time to get set to 0 when the totalTime would normally place the playhead at the end. See https://gsap.com/forums/topic/23823-closing-nav-animation-not-working-on-ie-and-iphone-6-maybe-other-older-browser/?tab=comments#comment-113005 also, this._tTime - prevIteration * cycleDuration - this._dur <= 0 just checks to make sure it wasn't previously in the \"repeatDelay\" portion\n\n        if (yoyo && iteration & 1) {\n          time = dur - time;\n          isYoyo = 1;\n        }\n        /*\n        make sure children at the end/beginning of the timeline are rendered properly. If, for example,\n        a 3-second long timeline rendered at 2.9 seconds previously, and now renders at 3.2 seconds (which\n        would get translated to 2.8 seconds if the timeline yoyos or 0.2 seconds if it just repeats), there\n        could be a callback or a short tween that's at 2.95 or 3 seconds in which wouldn't render. So\n        we need to push the timeline to the end (and/or beginning depending on its yoyo value). Also we must\n        ensure that zero-duration tweens at the very beginning or end of the Timeline work.\n        */\n\n\n        if (iteration !== prevIteration && !this._lock) {\n          var rewinding = yoyo && prevIteration & 1,\n              doesWrap = rewinding === (yoyo && iteration & 1);\n          iteration < prevIteration && (rewinding = !rewinding);\n          prevTime = rewinding ? 0 : tTime % dur ? dur : tTime; // if the playhead is landing exactly at the end of an iteration, use that totalTime rather than only the duration, otherwise it'll skip the 2nd render since it's effectively at the same time.\n\n          this._lock = 1;\n          this.render(prevTime || (isYoyo ? 0 : _roundPrecise(iteration * cycleDuration)), suppressEvents, !dur)._lock = 0;\n          this._tTime = tTime; // if a user gets the iteration() inside the onRepeat, for example, it should be accurate.\n\n          !suppressEvents && this.parent && _callback(this, \"onRepeat\");\n          this.vars.repeatRefresh && !isYoyo && (this.invalidate()._lock = 1);\n\n          if (prevTime && prevTime !== this._time || prevPaused !== !this._ts || this.vars.onRepeat && !this.parent && !this._act) {\n            // if prevTime is 0 and we render at the very end, _time will be the end, thus won't match. So in this edge case, prevTime won't match _time but that's okay. If it gets killed in the onRepeat, eject as well.\n            return this;\n          }\n\n          dur = this._dur; // in case the duration changed in the onRepeat\n\n          tDur = this._tDur;\n\n          if (doesWrap) {\n            this._lock = 2;\n            prevTime = rewinding ? dur : -0.0001;\n            this.render(prevTime, true);\n            this.vars.repeatRefresh && !isYoyo && this.invalidate();\n          }\n\n          this._lock = 0;\n\n          if (!this._ts && !prevPaused) {\n            return this;\n          } //in order for yoyoEase to work properly when there's a stagger, we must swap out the ease in each sub-tween.\n\n\n          _propagateYoyoEase(this, isYoyo);\n        }\n      }\n\n      if (this._hasPause && !this._forcing && this._lock < 2) {\n        pauseTween = _findNextPauseTween(this, _roundPrecise(prevTime), _roundPrecise(time));\n\n        if (pauseTween) {\n          tTime -= time - (time = pauseTween._start);\n        }\n      }\n\n      this._tTime = tTime;\n      this._time = time;\n      this._act = !timeScale; //as long as it's not paused, force it to be active so that if the user renders independent of the parent timeline, it'll be forced to re-render on the next tick.\n\n      if (!this._initted) {\n        this._onUpdate = this.vars.onUpdate;\n        this._initted = 1;\n        this._zTime = totalTime;\n        prevTime = 0; // upon init, the playhead should always go forward; someone could invalidate() a completed timeline and then if they restart(), that would make child tweens render in reverse order which could lock in the wrong starting values if they build on each other, like tl.to(obj, {x: 100}).to(obj, {x: 0}).\n      }\n\n      if (!prevTime && time && !suppressEvents && !iteration) {\n        _callback(this, \"onStart\");\n\n        if (this._tTime !== tTime) {\n          // in case the onStart triggered a render at a different spot, eject. Like if someone did animation.pause(0.5) or something inside the onStart.\n          return this;\n        }\n      }\n\n      if (time >= prevTime && totalTime >= 0) {\n        child = this._first;\n\n        while (child) {\n          next = child._next;\n\n          if ((child._act || time >= child._start) && child._ts && pauseTween !== child) {\n            if (child.parent !== this) {\n              // an extreme edge case - the child's render could do something like kill() the \"next\" one in the linked list, or reparent it. In that case we must re-initiate the whole render to be safe.\n              return this.render(totalTime, suppressEvents, force);\n            }\n\n            child.render(child._ts > 0 ? (time - child._start) * child._ts : (child._dirty ? child.totalDuration() : child._tDur) + (time - child._start) * child._ts, suppressEvents, force);\n\n            if (time !== this._time || !this._ts && !prevPaused) {\n              //in case a tween pauses or seeks the timeline when rendering, like inside of an onUpdate/onComplete\n              pauseTween = 0;\n              next && (tTime += this._zTime = -_tinyNum); // it didn't finish rendering, so flag zTime as negative so that so that the next time render() is called it'll be forced (to render any remaining children)\n\n              break;\n            }\n          }\n\n          child = next;\n        }\n      } else {\n        child = this._last;\n        var adjustedTime = totalTime < 0 ? totalTime : time; //when the playhead goes backward beyond the start of this timeline, we must pass that information down to the child animations so that zero-duration tweens know whether to render their starting or ending values.\n\n        while (child) {\n          next = child._prev;\n\n          if ((child._act || adjustedTime <= child._end) && child._ts && pauseTween !== child) {\n            if (child.parent !== this) {\n              // an extreme edge case - the child's render could do something like kill() the \"next\" one in the linked list, or reparent it. In that case we must re-initiate the whole render to be safe.\n              return this.render(totalTime, suppressEvents, force);\n            }\n\n            child.render(child._ts > 0 ? (adjustedTime - child._start) * child._ts : (child._dirty ? child.totalDuration() : child._tDur) + (adjustedTime - child._start) * child._ts, suppressEvents, force || _reverting && (child._initted || child._startAt)); // if reverting, we should always force renders of initted tweens (but remember that .fromTo() or .from() may have a _startAt but not _initted yet). If, for example, a .fromTo() tween with a stagger (which creates an internal timeline) gets reverted BEFORE some of its child tweens render for the first time, it may not properly trigger them to revert.\n\n            if (time !== this._time || !this._ts && !prevPaused) {\n              //in case a tween pauses or seeks the timeline when rendering, like inside of an onUpdate/onComplete\n              pauseTween = 0;\n              next && (tTime += this._zTime = adjustedTime ? -_tinyNum : _tinyNum); // it didn't finish rendering, so adjust zTime so that so that the next time render() is called it'll be forced (to render any remaining children)\n\n              break;\n            }\n          }\n\n          child = next;\n        }\n      }\n\n      if (pauseTween && !suppressEvents) {\n        this.pause();\n        pauseTween.render(time >= prevTime ? 0 : -_tinyNum)._zTime = time >= prevTime ? 1 : -1;\n\n        if (this._ts) {\n          //the callback resumed playback! So since we may have held back the playhead due to where the pause is positioned, go ahead and jump to where it's SUPPOSED to be (if no pause happened).\n          this._start = prevStart; //if the pause was at an earlier time and the user resumed in the callback, it could reposition the timeline (changing its startTime), throwing things off slightly, so we make sure the _start doesn't shift.\n\n          _setEnd(this);\n\n          return this.render(totalTime, suppressEvents, force);\n        }\n      }\n\n      this._onUpdate && !suppressEvents && _callback(this, \"onUpdate\", true);\n      if (tTime === tDur && this._tTime >= this.totalDuration() || !tTime && prevTime) if (prevStart === this._start || Math.abs(timeScale) !== Math.abs(this._ts)) if (!this._lock) {\n        // remember, a child's callback may alter this timeline's playhead or timeScale which is why we need to add some of these checks.\n        (totalTime || !dur) && (tTime === tDur && this._ts > 0 || !tTime && this._ts < 0) && _removeFromParent(this, 1); // don't remove if the timeline is reversed and the playhead isn't at 0, otherwise tl.progress(1).reverse() won't work. Only remove if the playhead is at the end and timeScale is positive, or if the playhead is at 0 and the timeScale is negative.\n\n        if (!suppressEvents && !(totalTime < 0 && !prevTime) && (tTime || prevTime || !tDur)) {\n          _callback(this, tTime === tDur && totalTime >= 0 ? \"onComplete\" : \"onReverseComplete\", true);\n\n          this._prom && !(tTime < tDur && this.timeScale() > 0) && this._prom();\n        }\n      }\n    }\n\n    return this;\n  };\n\n  _proto2.add = function add(child, position) {\n    var _this2 = this;\n\n    _isNumber(position) || (position = _parsePosition(this, position, child));\n\n    if (!(child instanceof Animation)) {\n      if (_isArray(child)) {\n        child.forEach(function (obj) {\n          return _this2.add(obj, position);\n        });\n        return this;\n      }\n\n      if (_isString(child)) {\n        return this.addLabel(child, position);\n      }\n\n      if (_isFunction(child)) {\n        child = Tween.delayedCall(0, child);\n      } else {\n        return this;\n      }\n    }\n\n    return this !== child ? _addToTimeline(this, child, position) : this; //don't allow a timeline to be added to itself as a child!\n  };\n\n  _proto2.getChildren = function getChildren(nested, tweens, timelines, ignoreBeforeTime) {\n    if (nested === void 0) {\n      nested = true;\n    }\n\n    if (tweens === void 0) {\n      tweens = true;\n    }\n\n    if (timelines === void 0) {\n      timelines = true;\n    }\n\n    if (ignoreBeforeTime === void 0) {\n      ignoreBeforeTime = -_bigNum;\n    }\n\n    var a = [],\n        child = this._first;\n\n    while (child) {\n      if (child._start >= ignoreBeforeTime) {\n        if (child instanceof Tween) {\n          tweens && a.push(child);\n        } else {\n          timelines && a.push(child);\n          nested && a.push.apply(a, child.getChildren(true, tweens, timelines));\n        }\n      }\n\n      child = child._next;\n    }\n\n    return a;\n  };\n\n  _proto2.getById = function getById(id) {\n    var animations = this.getChildren(1, 1, 1),\n        i = animations.length;\n\n    while (i--) {\n      if (animations[i].vars.id === id) {\n        return animations[i];\n      }\n    }\n  };\n\n  _proto2.remove = function remove(child) {\n    if (_isString(child)) {\n      return this.removeLabel(child);\n    }\n\n    if (_isFunction(child)) {\n      return this.killTweensOf(child);\n    }\n\n    _removeLinkedListItem(this, child);\n\n    if (child === this._recent) {\n      this._recent = this._last;\n    }\n\n    return _uncache(this);\n  };\n\n  _proto2.totalTime = function totalTime(_totalTime2, suppressEvents) {\n    if (!arguments.length) {\n      return this._tTime;\n    }\n\n    this._forcing = 1;\n\n    if (!this._dp && this._ts) {\n      //special case for the global timeline (or any other that has no parent or detached parent).\n      this._start = _roundPrecise(_ticker.time - (this._ts > 0 ? _totalTime2 / this._ts : (this.totalDuration() - _totalTime2) / -this._ts));\n    }\n\n    _Animation.prototype.totalTime.call(this, _totalTime2, suppressEvents);\n\n    this._forcing = 0;\n    return this;\n  };\n\n  _proto2.addLabel = function addLabel(label, position) {\n    this.labels[label] = _parsePosition(this, position);\n    return this;\n  };\n\n  _proto2.removeLabel = function removeLabel(label) {\n    delete this.labels[label];\n    return this;\n  };\n\n  _proto2.addPause = function addPause(position, callback, params) {\n    var t = Tween.delayedCall(0, callback || _emptyFunc, params);\n    t.data = \"isPause\";\n    this._hasPause = 1;\n    return _addToTimeline(this, t, _parsePosition(this, position));\n  };\n\n  _proto2.removePause = function removePause(position) {\n    var child = this._first;\n    position = _parsePosition(this, position);\n\n    while (child) {\n      if (child._start === position && child.data === \"isPause\") {\n        _removeFromParent(child);\n      }\n\n      child = child._next;\n    }\n  };\n\n  _proto2.killTweensOf = function killTweensOf(targets, props, onlyActive) {\n    var tweens = this.getTweensOf(targets, onlyActive),\n        i = tweens.length;\n\n    while (i--) {\n      _overwritingTween !== tweens[i] && tweens[i].kill(targets, props);\n    }\n\n    return this;\n  };\n\n  _proto2.getTweensOf = function getTweensOf(targets, onlyActive) {\n    var a = [],\n        parsedTargets = toArray(targets),\n        child = this._first,\n        isGlobalTime = _isNumber(onlyActive),\n        // a number is interpreted as a global time. If the animation spans\n    children;\n\n    while (child) {\n      if (child instanceof Tween) {\n        if (_arrayContainsAny(child._targets, parsedTargets) && (isGlobalTime ? (!_overwritingTween || child._initted && child._ts) && child.globalTime(0) <= onlyActive && child.globalTime(child.totalDuration()) > onlyActive : !onlyActive || child.isActive())) {\n          // note: if this is for overwriting, it should only be for tweens that aren't paused and are initted.\n          a.push(child);\n        }\n      } else if ((children = child.getTweensOf(parsedTargets, onlyActive)).length) {\n        a.push.apply(a, children);\n      }\n\n      child = child._next;\n    }\n\n    return a;\n  } // potential future feature - targets() on timelines\n  // targets() {\n  // \tlet result = [];\n  // \tthis.getChildren(true, true, false).forEach(t => result.push(...t.targets()));\n  // \treturn result.filter((v, i) => result.indexOf(v) === i);\n  // }\n  ;\n\n  _proto2.tweenTo = function tweenTo(position, vars) {\n    vars = vars || {};\n\n    var tl = this,\n        endTime = _parsePosition(tl, position),\n        _vars = vars,\n        startAt = _vars.startAt,\n        _onStart = _vars.onStart,\n        onStartParams = _vars.onStartParams,\n        immediateRender = _vars.immediateRender,\n        initted,\n        tween = Tween.to(tl, _setDefaults({\n      ease: vars.ease || \"none\",\n      lazy: false,\n      immediateRender: false,\n      time: endTime,\n      overwrite: \"auto\",\n      duration: vars.duration || Math.abs((endTime - (startAt && \"time\" in startAt ? startAt.time : tl._time)) / tl.timeScale()) || _tinyNum,\n      onStart: function onStart() {\n        tl.pause();\n\n        if (!initted) {\n          var duration = vars.duration || Math.abs((endTime - (startAt && \"time\" in startAt ? startAt.time : tl._time)) / tl.timeScale());\n          tween._dur !== duration && _setDuration(tween, duration, 0, 1).render(tween._time, true, true);\n          initted = 1;\n        }\n\n        _onStart && _onStart.apply(tween, onStartParams || []); //in case the user had an onStart in the vars - we don't want to overwrite it.\n      }\n    }, vars));\n\n    return immediateRender ? tween.render(0) : tween;\n  };\n\n  _proto2.tweenFromTo = function tweenFromTo(fromPosition, toPosition, vars) {\n    return this.tweenTo(toPosition, _setDefaults({\n      startAt: {\n        time: _parsePosition(this, fromPosition)\n      }\n    }, vars));\n  };\n\n  _proto2.recent = function recent() {\n    return this._recent;\n  };\n\n  _proto2.nextLabel = function nextLabel(afterTime) {\n    if (afterTime === void 0) {\n      afterTime = this._time;\n    }\n\n    return _getLabelInDirection(this, _parsePosition(this, afterTime));\n  };\n\n  _proto2.previousLabel = function previousLabel(beforeTime) {\n    if (beforeTime === void 0) {\n      beforeTime = this._time;\n    }\n\n    return _getLabelInDirection(this, _parsePosition(this, beforeTime), 1);\n  };\n\n  _proto2.currentLabel = function currentLabel(value) {\n    return arguments.length ? this.seek(value, true) : this.previousLabel(this._time + _tinyNum);\n  };\n\n  _proto2.shiftChildren = function shiftChildren(amount, adjustLabels, ignoreBeforeTime) {\n    if (ignoreBeforeTime === void 0) {\n      ignoreBeforeTime = 0;\n    }\n\n    var child = this._first,\n        labels = this.labels,\n        p;\n\n    while (child) {\n      if (child._start >= ignoreBeforeTime) {\n        child._start += amount;\n        child._end += amount;\n      }\n\n      child = child._next;\n    }\n\n    if (adjustLabels) {\n      for (p in labels) {\n        if (labels[p] >= ignoreBeforeTime) {\n          labels[p] += amount;\n        }\n      }\n    }\n\n    return _uncache(this);\n  };\n\n  _proto2.invalidate = function invalidate(soft) {\n    var child = this._first;\n    this._lock = 0;\n\n    while (child) {\n      child.invalidate(soft);\n      child = child._next;\n    }\n\n    return _Animation.prototype.invalidate.call(this, soft);\n  };\n\n  _proto2.clear = function clear(includeLabels) {\n    if (includeLabels === void 0) {\n      includeLabels = true;\n    }\n\n    var child = this._first,\n        next;\n\n    while (child) {\n      next = child._next;\n      this.remove(child);\n      child = next;\n    }\n\n    this._dp && (this._time = this._tTime = this._pTime = 0);\n    includeLabels && (this.labels = {});\n    return _uncache(this);\n  };\n\n  _proto2.totalDuration = function totalDuration(value) {\n    var max = 0,\n        self = this,\n        child = self._last,\n        prevStart = _bigNum,\n        prev,\n        start,\n        parent;\n\n    if (arguments.length) {\n      return self.timeScale((self._repeat < 0 ? self.duration() : self.totalDuration()) / (self.reversed() ? -value : value));\n    }\n\n    if (self._dirty) {\n      parent = self.parent;\n\n      while (child) {\n        prev = child._prev; //record it here in case the tween changes position in the sequence...\n\n        child._dirty && child.totalDuration(); //could change the tween._startTime, so make sure the animation's cache is clean before analyzing it.\n\n        start = child._start;\n\n        if (start > prevStart && self._sort && child._ts && !self._lock) {\n          //in case one of the tweens shifted out of order, it needs to be re-inserted into the correct position in the sequence\n          self._lock = 1; //prevent endless recursive calls - there are methods that get triggered that check duration/totalDuration when we add().\n\n          _addToTimeline(self, child, start - child._delay, 1)._lock = 0;\n        } else {\n          prevStart = start;\n        }\n\n        if (start < 0 && child._ts) {\n          //children aren't allowed to have negative startTimes unless smoothChildTiming is true, so adjust here if one is found.\n          max -= start;\n\n          if (!parent && !self._dp || parent && parent.smoothChildTiming) {\n            self._start += start / self._ts;\n            self._time -= start;\n            self._tTime -= start;\n          }\n\n          self.shiftChildren(-start, false, -1e999);\n          prevStart = 0;\n        }\n\n        child._end > max && child._ts && (max = child._end);\n        child = prev;\n      }\n\n      _setDuration(self, self === _globalTimeline && self._time > max ? self._time : max, 1, 1);\n\n      self._dirty = 0;\n    }\n\n    return self._tDur;\n  };\n\n  Timeline.updateRoot = function updateRoot(time) {\n    if (_globalTimeline._ts) {\n      _lazySafeRender(_globalTimeline, _parentToChildTotalTime(time, _globalTimeline));\n\n      _lastRenderedFrame = _ticker.frame;\n    }\n\n    if (_ticker.frame >= _nextGCFrame) {\n      _nextGCFrame += _config.autoSleep || 120;\n      var child = _globalTimeline._first;\n      if (!child || !child._ts) if (_config.autoSleep && _ticker._listeners.length < 2) {\n        while (child && !child._ts) {\n          child = child._next;\n        }\n\n        child || _ticker.sleep();\n      }\n    }\n  };\n\n  return Timeline;\n}(Animation);\n\n_setDefaults(Timeline.prototype, {\n  _lock: 0,\n  _hasPause: 0,\n  _forcing: 0\n});\n\nvar _addComplexStringPropTween = function _addComplexStringPropTween(target, prop, start, end, setter, stringFilter, funcParam) {\n  //note: we call _addComplexStringPropTween.call(tweenInstance...) to ensure that it's scoped properly. We may call it from within a plugin too, thus \"this\" would refer to the plugin.\n  var pt = new PropTween(this._pt, target, prop, 0, 1, _renderComplexString, null, setter),\n      index = 0,\n      matchIndex = 0,\n      result,\n      startNums,\n      color,\n      endNum,\n      chunk,\n      startNum,\n      hasRandom,\n      a;\n  pt.b = start;\n  pt.e = end;\n  start += \"\"; //ensure values are strings\n\n  end += \"\";\n\n  if (hasRandom = ~end.indexOf(\"random(\")) {\n    end = _replaceRandom(end);\n  }\n\n  if (stringFilter) {\n    a = [start, end];\n    stringFilter(a, target, prop); //pass an array with the starting and ending values and let the filter do whatever it needs to the values.\n\n    start = a[0];\n    end = a[1];\n  }\n\n  startNums = start.match(_complexStringNumExp) || [];\n\n  while (result = _complexStringNumExp.exec(end)) {\n    endNum = result[0];\n    chunk = end.substring(index, result.index);\n\n    if (color) {\n      color = (color + 1) % 5;\n    } else if (chunk.substr(-5) === \"rgba(\") {\n      color = 1;\n    }\n\n    if (endNum !== startNums[matchIndex++]) {\n      startNum = parseFloat(startNums[matchIndex - 1]) || 0; //these nested PropTweens are handled in a special way - we'll never actually call a render or setter method on them. We'll just loop through them in the parent complex string PropTween's render method.\n\n      pt._pt = {\n        _next: pt._pt,\n        p: chunk || matchIndex === 1 ? chunk : \",\",\n        //note: SVG spec allows omission of comma/space when a negative sign is wedged between two numbers, like 2.5-5.3 instead of 2.5,-5.3 but when tweening, the negative value may switch to positive, so we insert the comma just in case.\n        s: startNum,\n        c: endNum.charAt(1) === \"=\" ? _parseRelative(startNum, endNum) - startNum : parseFloat(endNum) - startNum,\n        m: color && color < 4 ? Math.round : 0\n      };\n      index = _complexStringNumExp.lastIndex;\n    }\n  }\n\n  pt.c = index < end.length ? end.substring(index, end.length) : \"\"; //we use the \"c\" of the PropTween to store the final part of the string (after the last number)\n\n  pt.fp = funcParam;\n\n  if (_relExp.test(end) || hasRandom) {\n    pt.e = 0; //if the end string contains relative values or dynamic random(...) values, delete the end it so that on the final render we don't actually set it to the string with += or -= characters (forces it to use the calculated value).\n  }\n\n  this._pt = pt; //start the linked list with this new PropTween. Remember, we call _addComplexStringPropTween.call(tweenInstance...) to ensure that it's scoped properly. We may call it from within a plugin too, thus \"this\" would refer to the plugin.\n\n  return pt;\n},\n    _addPropTween = function _addPropTween(target, prop, start, end, index, targets, modifier, stringFilter, funcParam, optional) {\n  _isFunction(end) && (end = end(index || 0, target, targets));\n  var currentValue = target[prop],\n      parsedStart = start !== \"get\" ? start : !_isFunction(currentValue) ? currentValue : funcParam ? target[prop.indexOf(\"set\") || !_isFunction(target[\"get\" + prop.substr(3)]) ? prop : \"get\" + prop.substr(3)](funcParam) : target[prop](),\n      setter = !_isFunction(currentValue) ? _setterPlain : funcParam ? _setterFuncWithParam : _setterFunc,\n      pt;\n\n  if (_isString(end)) {\n    if (~end.indexOf(\"random(\")) {\n      end = _replaceRandom(end);\n    }\n\n    if (end.charAt(1) === \"=\") {\n      pt = _parseRelative(parsedStart, end) + (getUnit(parsedStart) || 0);\n\n      if (pt || pt === 0) {\n        // to avoid isNaN, like if someone passes in a value like \"!= whatever\"\n        end = pt;\n      }\n    }\n  }\n\n  if (!optional || parsedStart !== end || _forceAllPropTweens) {\n    if (!isNaN(parsedStart * end) && end !== \"\") {\n      // fun fact: any number multiplied by \"\" is evaluated as the number 0!\n      pt = new PropTween(this._pt, target, prop, +parsedStart || 0, end - (parsedStart || 0), typeof currentValue === \"boolean\" ? _renderBoolean : _renderPlain, 0, setter);\n      funcParam && (pt.fp = funcParam);\n      modifier && pt.modifier(modifier, this, target);\n      return this._pt = pt;\n    }\n\n    !currentValue && !(prop in target) && _missingPlugin(prop, end);\n    return _addComplexStringPropTween.call(this, target, prop, parsedStart, end, setter, stringFilter || _config.stringFilter, funcParam);\n  }\n},\n    //creates a copy of the vars object and processes any function-based values (putting the resulting values directly into the copy) as well as strings with \"random()\" in them. It does NOT process relative values.\n_processVars = function _processVars(vars, index, target, targets, tween) {\n  _isFunction(vars) && (vars = _parseFuncOrString(vars, tween, index, target, targets));\n\n  if (!_isObject(vars) || vars.style && vars.nodeType || _isArray(vars) || _isTypedArray(vars)) {\n    return _isString(vars) ? _parseFuncOrString(vars, tween, index, target, targets) : vars;\n  }\n\n  var copy = {},\n      p;\n\n  for (p in vars) {\n    copy[p] = _parseFuncOrString(vars[p], tween, index, target, targets);\n  }\n\n  return copy;\n},\n    _checkPlugin = function _checkPlugin(property, vars, tween, index, target, targets) {\n  var plugin, pt, ptLookup, i;\n\n  if (_plugins[property] && (plugin = new _plugins[property]()).init(target, plugin.rawVars ? vars[property] : _processVars(vars[property], index, target, targets, tween), tween, index, targets) !== false) {\n    tween._pt = pt = new PropTween(tween._pt, target, property, 0, 1, plugin.render, plugin, 0, plugin.priority);\n\n    if (tween !== _quickTween) {\n      ptLookup = tween._ptLookup[tween._targets.indexOf(target)]; //note: we can't use tween._ptLookup[index] because for staggered tweens, the index from the fullTargets array won't match what it is in each individual tween that spawns from the stagger.\n\n      i = plugin._props.length;\n\n      while (i--) {\n        ptLookup[plugin._props[i]] = pt;\n      }\n    }\n  }\n\n  return plugin;\n},\n    _overwritingTween,\n    //store a reference temporarily so we can avoid overwriting itself.\n_forceAllPropTweens,\n    _initTween = function _initTween(tween, time, tTime) {\n  var vars = tween.vars,\n      ease = vars.ease,\n      startAt = vars.startAt,\n      immediateRender = vars.immediateRender,\n      lazy = vars.lazy,\n      onUpdate = vars.onUpdate,\n      runBackwards = vars.runBackwards,\n      yoyoEase = vars.yoyoEase,\n      keyframes = vars.keyframes,\n      autoRevert = vars.autoRevert,\n      dur = tween._dur,\n      prevStartAt = tween._startAt,\n      targets = tween._targets,\n      parent = tween.parent,\n      fullTargets = parent && parent.data === \"nested\" ? parent.vars.targets : targets,\n      autoOverwrite = tween._overwrite === \"auto\" && !_suppressOverwrites,\n      tl = tween.timeline,\n      cleanVars,\n      i,\n      p,\n      pt,\n      target,\n      hasPriority,\n      gsData,\n      harness,\n      plugin,\n      ptLookup,\n      index,\n      harnessVars,\n      overwritten;\n  tl && (!keyframes || !ease) && (ease = \"none\");\n  tween._ease = _parseEase(ease, _defaults.ease);\n  tween._yEase = yoyoEase ? _invertEase(_parseEase(yoyoEase === true ? ease : yoyoEase, _defaults.ease)) : 0;\n\n  if (yoyoEase && tween._yoyo && !tween._repeat) {\n    //there must have been a parent timeline with yoyo:true that is currently in its yoyo phase, so flip the eases.\n    yoyoEase = tween._yEase;\n    tween._yEase = tween._ease;\n    tween._ease = yoyoEase;\n  }\n\n  tween._from = !tl && !!vars.runBackwards; //nested timelines should never run backwards - the backwards-ness is in the child tweens.\n\n  if (!tl || keyframes && !vars.stagger) {\n    //if there's an internal timeline, skip all the parsing because we passed that task down the chain.\n    harness = targets[0] ? _getCache(targets[0]).harness : 0;\n    harnessVars = harness && vars[harness.prop]; //someone may need to specify CSS-specific values AND non-CSS values, like if the element has an \"x\" property plus it's a standard DOM element. We allow people to distinguish by wrapping plugin-specific stuff in a css:{} object for example.\n\n    cleanVars = _copyExcluding(vars, _reservedProps);\n\n    if (prevStartAt) {\n      prevStartAt._zTime < 0 && prevStartAt.progress(1); // in case it's a lazy startAt that hasn't rendered yet.\n\n      time < 0 && runBackwards && immediateRender && !autoRevert ? prevStartAt.render(-1, true) : prevStartAt.revert(runBackwards && dur ? _revertConfigNoKill : _startAtRevertConfig); // if it's a \"startAt\" (not \"from()\" or runBackwards: true), we only need to do a shallow revert (keep transforms cached in CSSPlugin)\n      // don't just _removeFromParent(prevStartAt.render(-1, true)) because that'll leave inline styles. We're creating a new _startAt for \"startAt\" tweens that re-capture things to ensure that if the pre-tween values changed since the tween was created, they're recorded.\n\n      prevStartAt._lazy = 0;\n    }\n\n    if (startAt) {\n      _removeFromParent(tween._startAt = Tween.set(targets, _setDefaults({\n        data: \"isStart\",\n        overwrite: false,\n        parent: parent,\n        immediateRender: true,\n        lazy: !prevStartAt && _isNotFalse(lazy),\n        startAt: null,\n        delay: 0,\n        onUpdate: onUpdate && function () {\n          return _callback(tween, \"onUpdate\");\n        },\n        stagger: 0\n      }, startAt))); //copy the properties/values into a new object to avoid collisions, like var to = {x:0}, from = {x:500}; timeline.fromTo(e, from, to).fromTo(e, to, from);\n\n\n      tween._startAt._dp = 0; // don't allow it to get put back into root timeline! Like when revert() is called and totalTime() gets set.\n\n      tween._startAt._sat = tween; // used in globalTime(). _sat stands for _startAtTween\n\n      time < 0 && (_reverting || !immediateRender && !autoRevert) && tween._startAt.revert(_revertConfigNoKill); // rare edge case, like if a render is forced in the negative direction of a non-initted tween.\n\n      if (immediateRender) {\n        if (dur && time <= 0 && tTime <= 0) {\n          // check tTime here because in the case of a yoyo tween whose playhead gets pushed to the end like tween.progress(1), we should allow it through so that the onComplete gets fired properly.\n          time && (tween._zTime = time);\n          return; //we skip initialization here so that overwriting doesn't occur until the tween actually begins. Otherwise, if you create several immediateRender:true tweens of the same target/properties to drop into a Timeline, the last one created would overwrite the first ones because they didn't get placed into the timeline yet before the first render occurs and kicks in overwriting.\n        }\n      }\n    } else if (runBackwards && dur) {\n      //from() tweens must be handled uniquely: their beginning values must be rendered but we don't want overwriting to occur yet (when time is still 0). Wait until the tween actually begins before doing all the routines like overwriting. At that time, we should render at the END of the tween to ensure that things initialize correctly (remember, from() tweens go backwards)\n      if (!prevStartAt) {\n        time && (immediateRender = false); //in rare cases (like if a from() tween runs and then is invalidate()-ed), immediateRender could be true but the initial forced-render gets skipped, so there's no need to force the render in this context when the _time is greater than 0\n\n        p = _setDefaults({\n          overwrite: false,\n          data: \"isFromStart\",\n          //we tag the tween with as \"isFromStart\" so that if [inside a plugin] we need to only do something at the very END of a tween, we have a way of identifying this tween as merely the one that's setting the beginning values for a \"from()\" tween. For example, clearProps in CSSPlugin should only get applied at the very END of a tween and without this tag, from(...{height:100, clearProps:\"height\", delay:1}) would wipe the height at the beginning of the tween and after 1 second, it'd kick back in.\n          lazy: immediateRender && !prevStartAt && _isNotFalse(lazy),\n          immediateRender: immediateRender,\n          //zero-duration tweens render immediately by default, but if we're not specifically instructed to render this tween immediately, we should skip this and merely _init() to record the starting values (rendering them immediately would push them to completion which is wasteful in that case - we'd have to render(-1) immediately after)\n          stagger: 0,\n          parent: parent //ensures that nested tweens that had a stagger are handled properly, like gsap.from(\".class\", {y: gsap.utils.wrap([-100,100]), stagger: 0.5})\n\n        }, cleanVars);\n        harnessVars && (p[harness.prop] = harnessVars); // in case someone does something like .from(..., {css:{}})\n\n        _removeFromParent(tween._startAt = Tween.set(targets, p));\n\n        tween._startAt._dp = 0; // don't allow it to get put back into root timeline!\n\n        tween._startAt._sat = tween; // used in globalTime()\n\n        time < 0 && (_reverting ? tween._startAt.revert(_revertConfigNoKill) : tween._startAt.render(-1, true));\n        tween._zTime = time;\n\n        if (!immediateRender) {\n          _initTween(tween._startAt, _tinyNum, _tinyNum); //ensures that the initial values are recorded\n\n        } else if (!time) {\n          return;\n        }\n      }\n    }\n\n    tween._pt = tween._ptCache = 0;\n    lazy = dur && _isNotFalse(lazy) || lazy && !dur;\n\n    for (i = 0; i < targets.length; i++) {\n      target = targets[i];\n      gsData = target._gsap || _harness(targets)[i]._gsap;\n      tween._ptLookup[i] = ptLookup = {};\n      _lazyLookup[gsData.id] && _lazyTweens.length && _lazyRender(); //if other tweens of the same target have recently initted but haven't rendered yet, we've got to force the render so that the starting values are correct (imagine populating a timeline with a bunch of sequential tweens and then jumping to the end)\n\n      index = fullTargets === targets ? i : fullTargets.indexOf(target);\n\n      if (harness && (plugin = new harness()).init(target, harnessVars || cleanVars, tween, index, fullTargets) !== false) {\n        tween._pt = pt = new PropTween(tween._pt, target, plugin.name, 0, 1, plugin.render, plugin, 0, plugin.priority);\n\n        plugin._props.forEach(function (name) {\n          ptLookup[name] = pt;\n        });\n\n        plugin.priority && (hasPriority = 1);\n      }\n\n      if (!harness || harnessVars) {\n        for (p in cleanVars) {\n          if (_plugins[p] && (plugin = _checkPlugin(p, cleanVars, tween, index, target, fullTargets))) {\n            plugin.priority && (hasPriority = 1);\n          } else {\n            ptLookup[p] = pt = _addPropTween.call(tween, target, p, \"get\", cleanVars[p], index, fullTargets, 0, vars.stringFilter);\n          }\n        }\n      }\n\n      tween._op && tween._op[i] && tween.kill(target, tween._op[i]);\n\n      if (autoOverwrite && tween._pt) {\n        _overwritingTween = tween;\n\n        _globalTimeline.killTweensOf(target, ptLookup, tween.globalTime(time)); // make sure the overwriting doesn't overwrite THIS tween!!!\n\n\n        overwritten = !tween.parent;\n        _overwritingTween = 0;\n      }\n\n      tween._pt && lazy && (_lazyLookup[gsData.id] = 1);\n    }\n\n    hasPriority && _sortPropTweensByPriority(tween);\n    tween._onInit && tween._onInit(tween); //plugins like RoundProps must wait until ALL of the PropTweens are instantiated. In the plugin's init() function, it sets the _onInit on the tween instance. May not be pretty/intuitive, but it's fast and keeps file size down.\n  }\n\n  tween._onUpdate = onUpdate;\n  tween._initted = (!tween._op || tween._pt) && !overwritten; // if overwrittenProps resulted in the entire tween being killed, do NOT flag it as initted or else it may render for one tick.\n\n  keyframes && time <= 0 && tl.render(_bigNum, true, true); // if there's a 0% keyframe, it'll render in the \"before\" state for any staggered/delayed animations thus when the following tween initializes, it'll use the \"before\" state instead of the \"after\" state as the initial values.\n},\n    _updatePropTweens = function _updatePropTweens(tween, property, value, start, startIsRelative, ratio, time, skipRecursion) {\n  var ptCache = (tween._pt && tween._ptCache || (tween._ptCache = {}))[property],\n      pt,\n      rootPT,\n      lookup,\n      i;\n\n  if (!ptCache) {\n    ptCache = tween._ptCache[property] = [];\n    lookup = tween._ptLookup;\n    i = tween._targets.length;\n\n    while (i--) {\n      pt = lookup[i][property];\n\n      if (pt && pt.d && pt.d._pt) {\n        // it's a plugin, so find the nested PropTween\n        pt = pt.d._pt;\n\n        while (pt && pt.p !== property && pt.fp !== property) {\n          // \"fp\" is functionParam for things like setting CSS variables which require .setProperty(\"--var-name\", value)\n          pt = pt._next;\n        }\n      }\n\n      if (!pt) {\n        // there is no PropTween associated with that property, so we must FORCE one to be created and ditch out of this\n        // if the tween has other properties that already rendered at new positions, we'd normally have to rewind to put them back like tween.render(0, true) before forcing an _initTween(), but that can create another edge case like tweening a timeline's progress would trigger onUpdates to fire which could move other things around. It's better to just inform users that .resetTo() should ONLY be used for tweens that already have that property. For example, you can't gsap.to(...{ y: 0 }) and then tween.restTo(\"x\", 200) for example.\n        _forceAllPropTweens = 1; // otherwise, when we _addPropTween() and it finds no change between the start and end values, it skips creating a PropTween (for efficiency...why tween when there's no difference?) but in this case we NEED that PropTween created so we can edit it.\n\n        tween.vars[property] = \"+=0\";\n\n        _initTween(tween, time);\n\n        _forceAllPropTweens = 0;\n        return skipRecursion ? _warn(property + \" not eligible for reset\") : 1; // if someone tries to do a quickTo() on a special property like borderRadius which must get split into 4 different properties, that's not eligible for .resetTo().\n      }\n\n      ptCache.push(pt);\n    }\n  }\n\n  i = ptCache.length;\n\n  while (i--) {\n    rootPT = ptCache[i];\n    pt = rootPT._pt || rootPT; // complex values may have nested PropTweens. We only accommodate the FIRST value.\n\n    pt.s = (start || start === 0) && !startIsRelative ? start : pt.s + (start || 0) + ratio * pt.c;\n    pt.c = value - pt.s;\n    rootPT.e && (rootPT.e = _round(value) + getUnit(rootPT.e)); // mainly for CSSPlugin (end value)\n\n    rootPT.b && (rootPT.b = pt.s + getUnit(rootPT.b)); // (beginning value)\n  }\n},\n    _addAliasesToVars = function _addAliasesToVars(targets, vars) {\n  var harness = targets[0] ? _getCache(targets[0]).harness : 0,\n      propertyAliases = harness && harness.aliases,\n      copy,\n      p,\n      i,\n      aliases;\n\n  if (!propertyAliases) {\n    return vars;\n  }\n\n  copy = _merge({}, vars);\n\n  for (p in propertyAliases) {\n    if (p in copy) {\n      aliases = propertyAliases[p].split(\",\");\n      i = aliases.length;\n\n      while (i--) {\n        copy[aliases[i]] = copy[p];\n      }\n    }\n  }\n\n  return copy;\n},\n    // parses multiple formats, like {\"0%\": {x: 100}, {\"50%\": {x: -20}} and { x: {\"0%\": 100, \"50%\": -20} }, and an \"ease\" can be set on any object. We populate an \"allProps\" object with an Array for each property, like {x: [{}, {}], y:[{}, {}]} with data for each property tween. The objects have a \"t\" (time), \"v\", (value), and \"e\" (ease) property. This allows us to piece together a timeline later.\n_parseKeyframe = function _parseKeyframe(prop, obj, allProps, easeEach) {\n  var ease = obj.ease || easeEach || \"power1.inOut\",\n      p,\n      a;\n\n  if (_isArray(obj)) {\n    a = allProps[prop] || (allProps[prop] = []); // t = time (out of 100), v = value, e = ease\n\n    obj.forEach(function (value, i) {\n      return a.push({\n        t: i / (obj.length - 1) * 100,\n        v: value,\n        e: ease\n      });\n    });\n  } else {\n    for (p in obj) {\n      a = allProps[p] || (allProps[p] = []);\n      p === \"ease\" || a.push({\n        t: parseFloat(prop),\n        v: obj[p],\n        e: ease\n      });\n    }\n  }\n},\n    _parseFuncOrString = function _parseFuncOrString(value, tween, i, target, targets) {\n  return _isFunction(value) ? value.call(tween, i, target, targets) : _isString(value) && ~value.indexOf(\"random(\") ? _replaceRandom(value) : value;\n},\n    _staggerTweenProps = _callbackNames + \"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert\",\n    _staggerPropsToSkip = {};\n\n_forEachName(_staggerTweenProps + \",id,stagger,delay,duration,paused,scrollTrigger\", function (name) {\n  return _staggerPropsToSkip[name] = 1;\n});\n/*\n * --------------------------------------------------------------------------------------\n * TWEEN\n * --------------------------------------------------------------------------------------\n */\n\n\nexport var Tween = /*#__PURE__*/function (_Animation2) {\n  _inheritsLoose(Tween, _Animation2);\n\n  function Tween(targets, vars, position, skipInherit) {\n    var _this3;\n\n    if (typeof vars === \"number\") {\n      position.duration = vars;\n      vars = position;\n      position = null;\n    }\n\n    _this3 = _Animation2.call(this, skipInherit ? vars : _inheritDefaults(vars)) || this;\n    var _this3$vars = _this3.vars,\n        duration = _this3$vars.duration,\n        delay = _this3$vars.delay,\n        immediateRender = _this3$vars.immediateRender,\n        stagger = _this3$vars.stagger,\n        overwrite = _this3$vars.overwrite,\n        keyframes = _this3$vars.keyframes,\n        defaults = _this3$vars.defaults,\n        scrollTrigger = _this3$vars.scrollTrigger,\n        yoyoEase = _this3$vars.yoyoEase,\n        parent = vars.parent || _globalTimeline,\n        parsedTargets = (_isArray(targets) || _isTypedArray(targets) ? _isNumber(targets[0]) : \"length\" in vars) ? [targets] : toArray(targets),\n        tl,\n        i,\n        copy,\n        l,\n        p,\n        curTarget,\n        staggerFunc,\n        staggerVarsToMerge;\n    _this3._targets = parsedTargets.length ? _harness(parsedTargets) : _warn(\"GSAP target \" + targets + \" not found. https://gsap.com\", !_config.nullTargetWarn) || [];\n    _this3._ptLookup = []; //PropTween lookup. An array containing an object for each target, having keys for each tweening property\n\n    _this3._overwrite = overwrite;\n\n    if (keyframes || stagger || _isFuncOrString(duration) || _isFuncOrString(delay)) {\n      vars = _this3.vars;\n      tl = _this3.timeline = new Timeline({\n        data: \"nested\",\n        defaults: defaults || {},\n        targets: parent && parent.data === \"nested\" ? parent.vars.targets : parsedTargets\n      }); // we need to store the targets because for staggers and keyframes, we end up creating an individual tween for each but function-based values need to know the index and the whole Array of targets.\n\n      tl.kill();\n      tl.parent = tl._dp = _assertThisInitialized(_this3);\n      tl._start = 0;\n\n      if (stagger || _isFuncOrString(duration) || _isFuncOrString(delay)) {\n        l = parsedTargets.length;\n        staggerFunc = stagger && distribute(stagger);\n\n        if (_isObject(stagger)) {\n          //users can pass in callbacks like onStart/onComplete in the stagger object. These should fire with each individual tween.\n          for (p in stagger) {\n            if (~_staggerTweenProps.indexOf(p)) {\n              staggerVarsToMerge || (staggerVarsToMerge = {});\n              staggerVarsToMerge[p] = stagger[p];\n            }\n          }\n        }\n\n        for (i = 0; i < l; i++) {\n          copy = _copyExcluding(vars, _staggerPropsToSkip);\n          copy.stagger = 0;\n          yoyoEase && (copy.yoyoEase = yoyoEase);\n          staggerVarsToMerge && _merge(copy, staggerVarsToMerge);\n          curTarget = parsedTargets[i]; //don't just copy duration or delay because if they're a string or function, we'd end up in an infinite loop because _isFuncOrString() would evaluate as true in the child tweens, entering this loop, etc. So we parse the value straight from vars and default to 0.\n\n          copy.duration = +_parseFuncOrString(duration, _assertThisInitialized(_this3), i, curTarget, parsedTargets);\n          copy.delay = (+_parseFuncOrString(delay, _assertThisInitialized(_this3), i, curTarget, parsedTargets) || 0) - _this3._delay;\n\n          if (!stagger && l === 1 && copy.delay) {\n            // if someone does delay:\"random(1, 5)\", repeat:-1, for example, the delay shouldn't be inside the repeat.\n            _this3._delay = delay = copy.delay;\n            _this3._start += delay;\n            copy.delay = 0;\n          }\n\n          tl.to(curTarget, copy, staggerFunc ? staggerFunc(i, curTarget, parsedTargets) : 0);\n          tl._ease = _easeMap.none;\n        }\n\n        tl.duration() ? duration = delay = 0 : _this3.timeline = 0; // if the timeline's duration is 0, we don't need a timeline internally!\n      } else if (keyframes) {\n        _inheritDefaults(_setDefaults(tl.vars.defaults, {\n          ease: \"none\"\n        }));\n\n        tl._ease = _parseEase(keyframes.ease || vars.ease || \"none\");\n        var time = 0,\n            a,\n            kf,\n            v;\n\n        if (_isArray(keyframes)) {\n          keyframes.forEach(function (frame) {\n            return tl.to(parsedTargets, frame, \">\");\n          });\n          tl.duration(); // to ensure tl._dur is cached because we tap into it for performance purposes in the render() method.\n        } else {\n          copy = {};\n\n          for (p in keyframes) {\n            p === \"ease\" || p === \"easeEach\" || _parseKeyframe(p, keyframes[p], copy, keyframes.easeEach);\n          }\n\n          for (p in copy) {\n            a = copy[p].sort(function (a, b) {\n              return a.t - b.t;\n            });\n            time = 0;\n\n            for (i = 0; i < a.length; i++) {\n              kf = a[i];\n              v = {\n                ease: kf.e,\n                duration: (kf.t - (i ? a[i - 1].t : 0)) / 100 * duration\n              };\n              v[p] = kf.v;\n              tl.to(parsedTargets, v, time);\n              time += v.duration;\n            }\n          }\n\n          tl.duration() < duration && tl.to({}, {\n            duration: duration - tl.duration()\n          }); // in case keyframes didn't go to 100%\n        }\n      }\n\n      duration || _this3.duration(duration = tl.duration());\n    } else {\n      _this3.timeline = 0; //speed optimization, faster lookups (no going up the prototype chain)\n    }\n\n    if (overwrite === true && !_suppressOverwrites) {\n      _overwritingTween = _assertThisInitialized(_this3);\n\n      _globalTimeline.killTweensOf(parsedTargets);\n\n      _overwritingTween = 0;\n    }\n\n    _addToTimeline(parent, _assertThisInitialized(_this3), position);\n\n    vars.reversed && _this3.reverse();\n    vars.paused && _this3.paused(true);\n\n    if (immediateRender || !duration && !keyframes && _this3._start === _roundPrecise(parent._time) && _isNotFalse(immediateRender) && _hasNoPausedAncestors(_assertThisInitialized(_this3)) && parent.data !== \"nested\") {\n      _this3._tTime = -_tinyNum; //forces a render without having to set the render() \"force\" parameter to true because we want to allow lazying by default (using the \"force\" parameter always forces an immediate full render)\n\n      _this3.render(Math.max(0, -delay) || 0); //in case delay is negative\n\n    }\n\n    scrollTrigger && _scrollTrigger(_assertThisInitialized(_this3), scrollTrigger);\n    return _this3;\n  }\n\n  var _proto3 = Tween.prototype;\n\n  _proto3.render = function render(totalTime, suppressEvents, force) {\n    var prevTime = this._time,\n        tDur = this._tDur,\n        dur = this._dur,\n        isNegative = totalTime < 0,\n        tTime = totalTime > tDur - _tinyNum && !isNegative ? tDur : totalTime < _tinyNum ? 0 : totalTime,\n        time,\n        pt,\n        iteration,\n        cycleDuration,\n        prevIteration,\n        isYoyo,\n        ratio,\n        timeline,\n        yoyoEase;\n\n    if (!dur) {\n      _renderZeroDurationTween(this, totalTime, suppressEvents, force);\n    } else if (tTime !== this._tTime || !totalTime || force || !this._initted && this._tTime || this._startAt && this._zTime < 0 !== isNegative) {\n      //this senses if we're crossing over the start time, in which case we must record _zTime and force the render, but we do it in this lengthy conditional way for performance reasons (usually we can skip the calculations): this._initted && (this._zTime < 0) !== (totalTime < 0)\n      time = tTime;\n      timeline = this.timeline;\n\n      if (this._repeat) {\n        //adjust the time for repeats and yoyos\n        cycleDuration = dur + this._rDelay;\n\n        if (this._repeat < -1 && isNegative) {\n          return this.totalTime(cycleDuration * 100 + totalTime, suppressEvents, force);\n        }\n\n        time = _roundPrecise(tTime % cycleDuration); //round to avoid floating point errors. (4 % 0.8 should be 0 but some browsers report it as 0.79999999!)\n\n        if (tTime === tDur) {\n          // the tDur === tTime is for edge cases where there's a lengthy decimal on the duration and it may reach the very end but the time is rendered as not-quite-there (remember, tDur is rounded to 4 decimals whereas dur isn't)\n          iteration = this._repeat;\n          time = dur;\n        } else {\n          iteration = ~~(tTime / cycleDuration);\n\n          if (iteration && iteration === _roundPrecise(tTime / cycleDuration)) {\n            time = dur;\n            iteration--;\n          }\n\n          time > dur && (time = dur);\n        }\n\n        isYoyo = this._yoyo && iteration & 1;\n\n        if (isYoyo) {\n          yoyoEase = this._yEase;\n          time = dur - time;\n        }\n\n        prevIteration = _animationCycle(this._tTime, cycleDuration);\n\n        if (time === prevTime && !force && this._initted && iteration === prevIteration) {\n          //could be during the repeatDelay part. No need to render and fire callbacks.\n          this._tTime = tTime;\n          return this;\n        }\n\n        if (iteration !== prevIteration) {\n          timeline && this._yEase && _propagateYoyoEase(timeline, isYoyo); //repeatRefresh functionality\n\n          if (this.vars.repeatRefresh && !isYoyo && !this._lock && this._time !== cycleDuration && this._initted) {\n            // this._time will === cycleDuration when we render at EXACTLY the end of an iteration. Without this condition, it'd often do the repeatRefresh render TWICE (again on the very next tick).\n            this._lock = force = 1; //force, otherwise if lazy is true, the _attemptInitTween() will return and we'll jump out and get caught bouncing on each tick.\n\n            this.render(_roundPrecise(cycleDuration * iteration), true).invalidate()._lock = 0;\n          }\n        }\n      }\n\n      if (!this._initted) {\n        if (_attemptInitTween(this, isNegative ? totalTime : time, force, suppressEvents, tTime)) {\n          this._tTime = 0; // in constructor if immediateRender is true, we set _tTime to -_tinyNum to have the playhead cross the starting point but we can't leave _tTime as a negative number.\n\n          return this;\n        }\n\n        if (prevTime !== this._time && !(force && this.vars.repeatRefresh && iteration !== prevIteration)) {\n          // rare edge case - during initialization, an onUpdate in the _startAt (.fromTo()) might force this tween to render at a different spot in which case we should ditch this render() call so that it doesn't revert the values. But we also don't want to dump if we're doing a repeatRefresh render!\n          return this;\n        }\n\n        if (dur !== this._dur) {\n          // while initting, a plugin like InertiaPlugin might alter the duration, so rerun from the start to ensure everything renders as it should.\n          return this.render(totalTime, suppressEvents, force);\n        }\n      }\n\n      this._tTime = tTime;\n      this._time = time;\n\n      if (!this._act && this._ts) {\n        this._act = 1; //as long as it's not paused, force it to be active so that if the user renders independent of the parent timeline, it'll be forced to re-render on the next tick.\n\n        this._lazy = 0;\n      }\n\n      this.ratio = ratio = (yoyoEase || this._ease)(time / dur);\n\n      if (this._from) {\n        this.ratio = ratio = 1 - ratio;\n      }\n\n      if (time && !prevTime && !suppressEvents && !iteration) {\n        _callback(this, \"onStart\");\n\n        if (this._tTime !== tTime) {\n          // in case the onStart triggered a render at a different spot, eject. Like if someone did animation.pause(0.5) or something inside the onStart.\n          return this;\n        }\n      }\n\n      pt = this._pt;\n\n      while (pt) {\n        pt.r(ratio, pt.d);\n        pt = pt._next;\n      }\n\n      timeline && timeline.render(totalTime < 0 ? totalTime : timeline._dur * timeline._ease(time / this._dur), suppressEvents, force) || this._startAt && (this._zTime = totalTime);\n\n      if (this._onUpdate && !suppressEvents) {\n        isNegative && _rewindStartAt(this, totalTime, suppressEvents, force); //note: for performance reasons, we tuck this conditional logic inside less traveled areas (most tweens don't have an onUpdate). We'd just have it at the end before the onComplete, but the values should be updated before any onUpdate is called, so we ALSO put it here and then if it's not called, we do so later near the onComplete.\n\n        _callback(this, \"onUpdate\");\n      }\n\n      this._repeat && iteration !== prevIteration && this.vars.onRepeat && !suppressEvents && this.parent && _callback(this, \"onRepeat\");\n\n      if ((tTime === this._tDur || !tTime) && this._tTime === tTime) {\n        isNegative && !this._onUpdate && _rewindStartAt(this, totalTime, true, true);\n        (totalTime || !dur) && (tTime === this._tDur && this._ts > 0 || !tTime && this._ts < 0) && _removeFromParent(this, 1); // don't remove if we're rendering at exactly a time of 0, as there could be autoRevert values that should get set on the next tick (if the playhead goes backward beyond the startTime, negative totalTime). Don't remove if the timeline is reversed and the playhead isn't at 0, otherwise tl.progress(1).reverse() won't work. Only remove if the playhead is at the end and timeScale is positive, or if the playhead is at 0 and the timeScale is negative.\n\n        if (!suppressEvents && !(isNegative && !prevTime) && (tTime || prevTime || isYoyo)) {\n          // if prevTime and tTime are zero, we shouldn't fire the onReverseComplete. This could happen if you gsap.to(... {paused:true}).play();\n          _callback(this, tTime === tDur ? \"onComplete\" : \"onReverseComplete\", true);\n\n          this._prom && !(tTime < tDur && this.timeScale() > 0) && this._prom();\n        }\n      }\n    }\n\n    return this;\n  };\n\n  _proto3.targets = function targets() {\n    return this._targets;\n  };\n\n  _proto3.invalidate = function invalidate(soft) {\n    // \"soft\" gives us a way to clear out everything EXCEPT the recorded pre-\"from\" portion of from() tweens. Otherwise, for example, if you tween.progress(1).render(0, true true).invalidate(), the \"from\" values would persist and then on the next render, the from() tweens would initialize and the current value would match the \"from\" values, thus animate from the same value to the same value (no animation). We tap into this in ScrollTrigger's refresh() where we must push a tween to completion and then back again but honor its init state in case the tween is dependent on another tween further up on the page.\n    (!soft || !this.vars.runBackwards) && (this._startAt = 0);\n    this._pt = this._op = this._onUpdate = this._lazy = this.ratio = 0;\n    this._ptLookup = [];\n    this.timeline && this.timeline.invalidate(soft);\n    return _Animation2.prototype.invalidate.call(this, soft);\n  };\n\n  _proto3.resetTo = function resetTo(property, value, start, startIsRelative, skipRecursion) {\n    _tickerActive || _ticker.wake();\n    this._ts || this.play();\n    var time = Math.min(this._dur, (this._dp._time - this._start) * this._ts),\n        ratio;\n    this._initted || _initTween(this, time);\n    ratio = this._ease(time / this._dur); // don't just get tween.ratio because it may not have rendered yet.\n    // possible future addition to allow an object with multiple values to update, like tween.resetTo({x: 100, y: 200}); At this point, it doesn't seem worth the added kb given the fact that most users will likely opt for the convenient gsap.quickTo() way of interacting with this method.\n    // if (_isObject(property)) { // performance optimization\n    // \tfor (p in property) {\n    // \t\tif (_updatePropTweens(this, p, property[p], value ? value[p] : null, start, ratio, time)) {\n    // \t\t\treturn this.resetTo(property, value, start, startIsRelative); // if a PropTween wasn't found for the property, it'll get forced with a re-initialization so we need to jump out and start over again.\n    // \t\t}\n    // \t}\n    // } else {\n\n    if (_updatePropTweens(this, property, value, start, startIsRelative, ratio, time, skipRecursion)) {\n      return this.resetTo(property, value, start, startIsRelative, 1); // if a PropTween wasn't found for the property, it'll get forced with a re-initialization so we need to jump out and start over again.\n    } //}\n\n\n    _alignPlayhead(this, 0);\n\n    this.parent || _addLinkedListItem(this._dp, this, \"_first\", \"_last\", this._dp._sort ? \"_start\" : 0);\n    return this.render(0);\n  };\n\n  _proto3.kill = function kill(targets, vars) {\n    if (vars === void 0) {\n      vars = \"all\";\n    }\n\n    if (!targets && (!vars || vars === \"all\")) {\n      this._lazy = this._pt = 0;\n      return this.parent ? _interrupt(this) : this;\n    }\n\n    if (this.timeline) {\n      var tDur = this.timeline.totalDuration();\n      this.timeline.killTweensOf(targets, vars, _overwritingTween && _overwritingTween.vars.overwrite !== true)._first || _interrupt(this); // if nothing is left tweening, interrupt.\n\n      this.parent && tDur !== this.timeline.totalDuration() && _setDuration(this, this._dur * this.timeline._tDur / tDur, 0, 1); // if a nested tween is killed that changes the duration, it should affect this tween's duration. We must use the ratio, though, because sometimes the internal timeline is stretched like for keyframes where they don't all add up to whatever the parent tween's duration was set to.\n\n      return this;\n    }\n\n    var parsedTargets = this._targets,\n        killingTargets = targets ? toArray(targets) : parsedTargets,\n        propTweenLookup = this._ptLookup,\n        firstPT = this._pt,\n        overwrittenProps,\n        curLookup,\n        curOverwriteProps,\n        props,\n        p,\n        pt,\n        i;\n\n    if ((!vars || vars === \"all\") && _arraysMatch(parsedTargets, killingTargets)) {\n      vars === \"all\" && (this._pt = 0);\n      return _interrupt(this);\n    }\n\n    overwrittenProps = this._op = this._op || [];\n\n    if (vars !== \"all\") {\n      //so people can pass in a comma-delimited list of property names\n      if (_isString(vars)) {\n        p = {};\n\n        _forEachName(vars, function (name) {\n          return p[name] = 1;\n        });\n\n        vars = p;\n      }\n\n      vars = _addAliasesToVars(parsedTargets, vars);\n    }\n\n    i = parsedTargets.length;\n\n    while (i--) {\n      if (~killingTargets.indexOf(parsedTargets[i])) {\n        curLookup = propTweenLookup[i];\n\n        if (vars === \"all\") {\n          overwrittenProps[i] = vars;\n          props = curLookup;\n          curOverwriteProps = {};\n        } else {\n          curOverwriteProps = overwrittenProps[i] = overwrittenProps[i] || {};\n          props = vars;\n        }\n\n        for (p in props) {\n          pt = curLookup && curLookup[p];\n\n          if (pt) {\n            if (!(\"kill\" in pt.d) || pt.d.kill(p) === true) {\n              _removeLinkedListItem(this, pt, \"_pt\");\n            }\n\n            delete curLookup[p];\n          }\n\n          if (curOverwriteProps !== \"all\") {\n            curOverwriteProps[p] = 1;\n          }\n        }\n      }\n    }\n\n    this._initted && !this._pt && firstPT && _interrupt(this); //if all tweening properties are killed, kill the tween. Without this line, if there's a tween with multiple targets and then you killTweensOf() each target individually, the tween would technically still remain active and fire its onComplete even though there aren't any more properties tweening.\n\n    return this;\n  };\n\n  Tween.to = function to(targets, vars) {\n    return new Tween(targets, vars, arguments[2]);\n  };\n\n  Tween.from = function from(targets, vars) {\n    return _createTweenType(1, arguments);\n  };\n\n  Tween.delayedCall = function delayedCall(delay, callback, params, scope) {\n    return new Tween(callback, 0, {\n      immediateRender: false,\n      lazy: false,\n      overwrite: false,\n      delay: delay,\n      onComplete: callback,\n      onReverseComplete: callback,\n      onCompleteParams: params,\n      onReverseCompleteParams: params,\n      callbackScope: scope\n    }); // we must use onReverseComplete too for things like timeline.add(() => {...}) which should be triggered in BOTH directions (forward and reverse)\n  };\n\n  Tween.fromTo = function fromTo(targets, fromVars, toVars) {\n    return _createTweenType(2, arguments);\n  };\n\n  Tween.set = function set(targets, vars) {\n    vars.duration = 0;\n    vars.repeatDelay || (vars.repeat = 0);\n    return new Tween(targets, vars);\n  };\n\n  Tween.killTweensOf = function killTweensOf(targets, props, onlyActive) {\n    return _globalTimeline.killTweensOf(targets, props, onlyActive);\n  };\n\n  return Tween;\n}(Animation);\n\n_setDefaults(Tween.prototype, {\n  _targets: [],\n  _lazy: 0,\n  _startAt: 0,\n  _op: 0,\n  _onInit: 0\n}); //add the pertinent timeline methods to Tween instances so that users can chain conveniently and create a timeline automatically. (removed due to concerns that it'd ultimately add to more confusion especially for beginners)\n// _forEachName(\"to,from,fromTo,set,call,add,addLabel,addPause\", name => {\n// \tTween.prototype[name] = function() {\n// \t\tlet tl = new Timeline();\n// \t\treturn _addToTimeline(tl, this)[name].apply(tl, toArray(arguments));\n// \t}\n// });\n//for backward compatibility. Leverage the timeline calls.\n\n\n_forEachName(\"staggerTo,staggerFrom,staggerFromTo\", function (name) {\n  Tween[name] = function () {\n    var tl = new Timeline(),\n        params = _slice.call(arguments, 0);\n\n    params.splice(name === \"staggerFromTo\" ? 5 : 4, 0, 0);\n    return tl[name].apply(tl, params);\n  };\n});\n/*\n * --------------------------------------------------------------------------------------\n * PROPTWEEN\n * --------------------------------------------------------------------------------------\n */\n\n\nvar _setterPlain = function _setterPlain(target, property, value) {\n  return target[property] = value;\n},\n    _setterFunc = function _setterFunc(target, property, value) {\n  return target[property](value);\n},\n    _setterFuncWithParam = function _setterFuncWithParam(target, property, value, data) {\n  return target[property](data.fp, value);\n},\n    _setterAttribute = function _setterAttribute(target, property, value) {\n  return target.setAttribute(property, value);\n},\n    _getSetter = function _getSetter(target, property) {\n  return _isFunction(target[property]) ? _setterFunc : _isUndefined(target[property]) && target.setAttribute ? _setterAttribute : _setterPlain;\n},\n    _renderPlain = function _renderPlain(ratio, data) {\n  return data.set(data.t, data.p, Math.round((data.s + data.c * ratio) * 1000000) / 1000000, data);\n},\n    _renderBoolean = function _renderBoolean(ratio, data) {\n  return data.set(data.t, data.p, !!(data.s + data.c * ratio), data);\n},\n    _renderComplexString = function _renderComplexString(ratio, data) {\n  var pt = data._pt,\n      s = \"\";\n\n  if (!ratio && data.b) {\n    //b = beginning string\n    s = data.b;\n  } else if (ratio === 1 && data.e) {\n    //e = ending string\n    s = data.e;\n  } else {\n    while (pt) {\n      s = pt.p + (pt.m ? pt.m(pt.s + pt.c * ratio) : Math.round((pt.s + pt.c * ratio) * 10000) / 10000) + s; //we use the \"p\" property for the text inbetween (like a suffix). And in the context of a complex string, the modifier (m) is typically just Math.round(), like for RGB colors.\n\n      pt = pt._next;\n    }\n\n    s += data.c; //we use the \"c\" of the PropTween to store the final chunk of non-numeric text.\n  }\n\n  data.set(data.t, data.p, s, data);\n},\n    _renderPropTweens = function _renderPropTweens(ratio, data) {\n  var pt = data._pt;\n\n  while (pt) {\n    pt.r(ratio, pt.d);\n    pt = pt._next;\n  }\n},\n    _addPluginModifier = function _addPluginModifier(modifier, tween, target, property) {\n  var pt = this._pt,\n      next;\n\n  while (pt) {\n    next = pt._next;\n    pt.p === property && pt.modifier(modifier, tween, target);\n    pt = next;\n  }\n},\n    _killPropTweensOf = function _killPropTweensOf(property) {\n  var pt = this._pt,\n      hasNonDependentRemaining,\n      next;\n\n  while (pt) {\n    next = pt._next;\n\n    if (pt.p === property && !pt.op || pt.op === property) {\n      _removeLinkedListItem(this, pt, \"_pt\");\n    } else if (!pt.dep) {\n      hasNonDependentRemaining = 1;\n    }\n\n    pt = next;\n  }\n\n  return !hasNonDependentRemaining;\n},\n    _setterWithModifier = function _setterWithModifier(target, property, value, data) {\n  data.mSet(target, property, data.m.call(data.tween, value, data.mt), data);\n},\n    _sortPropTweensByPriority = function _sortPropTweensByPriority(parent) {\n  var pt = parent._pt,\n      next,\n      pt2,\n      first,\n      last; //sorts the PropTween linked list in order of priority because some plugins need to do their work after ALL of the PropTweens were created (like RoundPropsPlugin and ModifiersPlugin)\n\n  while (pt) {\n    next = pt._next;\n    pt2 = first;\n\n    while (pt2 && pt2.pr > pt.pr) {\n      pt2 = pt2._next;\n    }\n\n    if (pt._prev = pt2 ? pt2._prev : last) {\n      pt._prev._next = pt;\n    } else {\n      first = pt;\n    }\n\n    if (pt._next = pt2) {\n      pt2._prev = pt;\n    } else {\n      last = pt;\n    }\n\n    pt = next;\n  }\n\n  parent._pt = first;\n}; //PropTween key: t = target, p = prop, r = renderer, d = data, s = start, c = change, op = overwriteProperty (ONLY populated when it's different than p), pr = priority, _next/_prev for the linked list siblings, set = setter, m = modifier, mSet = modifierSetter (the original setter, before a modifier was added)\n\n\nexport var PropTween = /*#__PURE__*/function () {\n  function PropTween(next, target, prop, start, change, renderer, data, setter, priority) {\n    this.t = target;\n    this.s = start;\n    this.c = change;\n    this.p = prop;\n    this.r = renderer || _renderPlain;\n    this.d = data || this;\n    this.set = setter || _setterPlain;\n    this.pr = priority || 0;\n    this._next = next;\n\n    if (next) {\n      next._prev = this;\n    }\n  }\n\n  var _proto4 = PropTween.prototype;\n\n  _proto4.modifier = function modifier(func, tween, target) {\n    this.mSet = this.mSet || this.set; //in case it was already set (a PropTween can only have one modifier)\n\n    this.set = _setterWithModifier;\n    this.m = func;\n    this.mt = target; //modifier target\n\n    this.tween = tween;\n  };\n\n  return PropTween;\n}(); //Initialization tasks\n\n_forEachName(_callbackNames + \"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger\", function (name) {\n  return _reservedProps[name] = 1;\n});\n\n_globals.TweenMax = _globals.TweenLite = Tween;\n_globals.TimelineLite = _globals.TimelineMax = Timeline;\n_globalTimeline = new Timeline({\n  sortChildren: false,\n  defaults: _defaults,\n  autoRemoveChildren: true,\n  id: \"root\",\n  smoothChildTiming: true\n});\n_config.stringFilter = _colorStringFilter;\n\nvar _media = [],\n    _listeners = {},\n    _emptyArray = [],\n    _lastMediaTime = 0,\n    _contextID = 0,\n    _dispatch = function _dispatch(type) {\n  return (_listeners[type] || _emptyArray).map(function (f) {\n    return f();\n  });\n},\n    _onMediaChange = function _onMediaChange() {\n  var time = Date.now(),\n      matches = [];\n\n  if (time - _lastMediaTime > 2) {\n    _dispatch(\"matchMediaInit\");\n\n    _media.forEach(function (c) {\n      var queries = c.queries,\n          conditions = c.conditions,\n          match,\n          p,\n          anyMatch,\n          toggled;\n\n      for (p in queries) {\n        match = _win.matchMedia(queries[p]).matches; // Firefox doesn't update the \"matches\" property of the MediaQueryList object correctly - it only does so as it calls its change handler - so we must re-create a media query here to ensure it's accurate.\n\n        match && (anyMatch = 1);\n\n        if (match !== conditions[p]) {\n          conditions[p] = match;\n          toggled = 1;\n        }\n      }\n\n      if (toggled) {\n        c.revert();\n        anyMatch && matches.push(c);\n      }\n    });\n\n    _dispatch(\"matchMediaRevert\");\n\n    matches.forEach(function (c) {\n      return c.onMatch(c, function (func) {\n        return c.add(null, func);\n      });\n    });\n    _lastMediaTime = time;\n\n    _dispatch(\"matchMedia\");\n  }\n};\n\nvar Context = /*#__PURE__*/function () {\n  function Context(func, scope) {\n    this.selector = scope && selector(scope);\n    this.data = [];\n    this._r = []; // returned/cleanup functions\n\n    this.isReverted = false;\n    this.id = _contextID++; // to work around issues that frameworks like Vue cause by making things into Proxies which make it impossible to do something like _media.indexOf(this) because \"this\" would no longer refer to the Context instance itself - it'd refer to a Proxy! We needed a way to identify the context uniquely\n\n    func && this.add(func);\n  }\n\n  var _proto5 = Context.prototype;\n\n  _proto5.add = function add(name, func, scope) {\n    // possible future addition if we need the ability to add() an animation to a context and for whatever reason cannot create that animation inside of a context.add(() => {...}) function.\n    // if (name && _isFunction(name.revert)) {\n    // \tthis.data.push(name);\n    // \treturn (name._ctx = this);\n    // }\n    if (_isFunction(name)) {\n      scope = func;\n      func = name;\n      name = _isFunction;\n    }\n\n    var self = this,\n        f = function f() {\n      var prev = _context,\n          prevSelector = self.selector,\n          result;\n      prev && prev !== self && prev.data.push(self);\n      scope && (self.selector = selector(scope));\n      _context = self;\n      result = func.apply(self, arguments);\n      _isFunction(result) && self._r.push(result);\n      _context = prev;\n      self.selector = prevSelector;\n      self.isReverted = false;\n      return result;\n    };\n\n    self.last = f;\n    return name === _isFunction ? f(self, function (func) {\n      return self.add(null, func);\n    }) : name ? self[name] = f : f;\n  };\n\n  _proto5.ignore = function ignore(func) {\n    var prev = _context;\n    _context = null;\n    func(this);\n    _context = prev;\n  };\n\n  _proto5.getTweens = function getTweens() {\n    var a = [];\n    this.data.forEach(function (e) {\n      return e instanceof Context ? a.push.apply(a, e.getTweens()) : e instanceof Tween && !(e.parent && e.parent.data === \"nested\") && a.push(e);\n    });\n    return a;\n  };\n\n  _proto5.clear = function clear() {\n    this._r.length = this.data.length = 0;\n  };\n\n  _proto5.kill = function kill(revert, matchMedia) {\n    var _this4 = this;\n\n    if (revert) {\n      (function () {\n        var tweens = _this4.getTweens(),\n            i = _this4.data.length,\n            t;\n\n        while (i--) {\n          // Flip plugin tweens are very different in that they should actually be pushed to their end. The plugin replaces the timeline's .revert() method to do exactly that. But we also need to remove any of those nested tweens inside the flip timeline so that they don't get individually reverted.\n          t = _this4.data[i];\n\n          if (t.data === \"isFlip\") {\n            t.revert();\n            t.getChildren(true, true, false).forEach(function (tween) {\n              return tweens.splice(tweens.indexOf(tween), 1);\n            });\n          }\n        } // save as an object so that we can cache the globalTime for each tween to optimize performance during the sort\n\n\n        tweens.map(function (t) {\n          return {\n            g: t._dur || t._delay || t._sat && !t._sat.vars.immediateRender ? t.globalTime(0) : -Infinity,\n            t: t\n          };\n        }).sort(function (a, b) {\n          return b.g - a.g || -Infinity;\n        }).forEach(function (o) {\n          return o.t.revert(revert);\n        }); // note: all of the _startAt tweens should be reverted in reverse order that they were created, and they'll all have the same globalTime (-1) so the \" || -1\" in the sort keeps the order properly.\n\n        i = _this4.data.length;\n\n        while (i--) {\n          // make sure we loop backwards so that, for example, SplitTexts that were created later on the same element get reverted first\n          t = _this4.data[i];\n\n          if (t instanceof Timeline) {\n            if (t.data !== \"nested\") {\n              t.scrollTrigger && t.scrollTrigger.revert();\n              t.kill(); // don't revert() the timeline because that's duplicating efforts since we already reverted all the tweens\n            }\n          } else {\n            !(t instanceof Tween) && t.revert && t.revert(revert);\n          }\n        }\n\n        _this4._r.forEach(function (f) {\n          return f(revert, _this4);\n        });\n\n        _this4.isReverted = true;\n      })();\n    } else {\n      this.data.forEach(function (e) {\n        return e.kill && e.kill();\n      });\n    }\n\n    this.clear();\n\n    if (matchMedia) {\n      var i = _media.length;\n\n      while (i--) {\n        // previously, we checked _media.indexOf(this), but some frameworks like Vue enforce Proxy objects that make it impossible to get the proper result that way, so we must use a unique ID number instead.\n        _media[i].id === this.id && _media.splice(i, 1);\n      }\n    }\n  };\n\n  _proto5.revert = function revert(config) {\n    this.kill(config || {});\n  };\n\n  return Context;\n}();\n\nvar MatchMedia = /*#__PURE__*/function () {\n  function MatchMedia(scope) {\n    this.contexts = [];\n    this.scope = scope;\n    _context && _context.data.push(this);\n  }\n\n  var _proto6 = MatchMedia.prototype;\n\n  _proto6.add = function add(conditions, func, scope) {\n    _isObject(conditions) || (conditions = {\n      matches: conditions\n    });\n    var context = new Context(0, scope || this.scope),\n        cond = context.conditions = {},\n        mq,\n        p,\n        active;\n    _context && !context.selector && (context.selector = _context.selector); // in case a context is created inside a context. Like a gsap.matchMedia() that's inside a scoped gsap.context()\n\n    this.contexts.push(context);\n    func = context.add(\"onMatch\", func);\n    context.queries = conditions;\n\n    for (p in conditions) {\n      if (p === \"all\") {\n        active = 1;\n      } else {\n        mq = _win.matchMedia(conditions[p]);\n\n        if (mq) {\n          _media.indexOf(context) < 0 && _media.push(context);\n          (cond[p] = mq.matches) && (active = 1);\n          mq.addListener ? mq.addListener(_onMediaChange) : mq.addEventListener(\"change\", _onMediaChange);\n        }\n      }\n    }\n\n    active && func(context, function (f) {\n      return context.add(null, f);\n    });\n    return this;\n  } // refresh() {\n  // \tlet time = _lastMediaTime,\n  // \t\tmedia = _media;\n  // \t_lastMediaTime = -1;\n  // \t_media = this.contexts;\n  // \t_onMediaChange();\n  // \t_lastMediaTime = time;\n  // \t_media = media;\n  // }\n  ;\n\n  _proto6.revert = function revert(config) {\n    this.kill(config || {});\n  };\n\n  _proto6.kill = function kill(revert) {\n    this.contexts.forEach(function (c) {\n      return c.kill(revert, true);\n    });\n  };\n\n  return MatchMedia;\n}();\n/*\n * --------------------------------------------------------------------------------------\n * GSAP\n * --------------------------------------------------------------------------------------\n */\n\n\nvar _gsap = {\n  registerPlugin: function registerPlugin() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    args.forEach(function (config) {\n      return _createPlugin(config);\n    });\n  },\n  timeline: function timeline(vars) {\n    return new Timeline(vars);\n  },\n  getTweensOf: function getTweensOf(targets, onlyActive) {\n    return _globalTimeline.getTweensOf(targets, onlyActive);\n  },\n  getProperty: function getProperty(target, property, unit, uncache) {\n    _isString(target) && (target = toArray(target)[0]); //in case selector text or an array is passed in\n\n    var getter = _getCache(target || {}).get,\n        format = unit ? _passThrough : _numericIfPossible;\n\n    unit === \"native\" && (unit = \"\");\n    return !target ? target : !property ? function (property, unit, uncache) {\n      return format((_plugins[property] && _plugins[property].get || getter)(target, property, unit, uncache));\n    } : format((_plugins[property] && _plugins[property].get || getter)(target, property, unit, uncache));\n  },\n  quickSetter: function quickSetter(target, property, unit) {\n    target = toArray(target);\n\n    if (target.length > 1) {\n      var setters = target.map(function (t) {\n        return gsap.quickSetter(t, property, unit);\n      }),\n          l = setters.length;\n      return function (value) {\n        var i = l;\n\n        while (i--) {\n          setters[i](value);\n        }\n      };\n    }\n\n    target = target[0] || {};\n\n    var Plugin = _plugins[property],\n        cache = _getCache(target),\n        p = cache.harness && (cache.harness.aliases || {})[property] || property,\n        // in case it's an alias, like \"rotate\" for \"rotation\".\n    setter = Plugin ? function (value) {\n      var p = new Plugin();\n      _quickTween._pt = 0;\n      p.init(target, unit ? value + unit : value, _quickTween, 0, [target]);\n      p.render(1, p);\n      _quickTween._pt && _renderPropTweens(1, _quickTween);\n    } : cache.set(target, p);\n\n    return Plugin ? setter : function (value) {\n      return setter(target, p, unit ? value + unit : value, cache, 1);\n    };\n  },\n  quickTo: function quickTo(target, property, vars) {\n    var _merge2;\n\n    var tween = gsap.to(target, _merge((_merge2 = {}, _merge2[property] = \"+=0.1\", _merge2.paused = true, _merge2), vars || {})),\n        func = function func(value, start, startIsRelative) {\n      return tween.resetTo(property, value, start, startIsRelative);\n    };\n\n    func.tween = tween;\n    return func;\n  },\n  isTweening: function isTweening(targets) {\n    return _globalTimeline.getTweensOf(targets, true).length > 0;\n  },\n  defaults: function defaults(value) {\n    value && value.ease && (value.ease = _parseEase(value.ease, _defaults.ease));\n    return _mergeDeep(_defaults, value || {});\n  },\n  config: function config(value) {\n    return _mergeDeep(_config, value || {});\n  },\n  registerEffect: function registerEffect(_ref3) {\n    var name = _ref3.name,\n        effect = _ref3.effect,\n        plugins = _ref3.plugins,\n        defaults = _ref3.defaults,\n        extendTimeline = _ref3.extendTimeline;\n    (plugins || \"\").split(\",\").forEach(function (pluginName) {\n      return pluginName && !_plugins[pluginName] && !_globals[pluginName] && _warn(name + \" effect requires \" + pluginName + \" plugin.\");\n    });\n\n    _effects[name] = function (targets, vars, tl) {\n      return effect(toArray(targets), _setDefaults(vars || {}, defaults), tl);\n    };\n\n    if (extendTimeline) {\n      Timeline.prototype[name] = function (targets, vars, position) {\n        return this.add(_effects[name](targets, _isObject(vars) ? vars : (position = vars) && {}, this), position);\n      };\n    }\n  },\n  registerEase: function registerEase(name, ease) {\n    _easeMap[name] = _parseEase(ease);\n  },\n  parseEase: function parseEase(ease, defaultEase) {\n    return arguments.length ? _parseEase(ease, defaultEase) : _easeMap;\n  },\n  getById: function getById(id) {\n    return _globalTimeline.getById(id);\n  },\n  exportRoot: function exportRoot(vars, includeDelayedCalls) {\n    if (vars === void 0) {\n      vars = {};\n    }\n\n    var tl = new Timeline(vars),\n        child,\n        next;\n    tl.smoothChildTiming = _isNotFalse(vars.smoothChildTiming);\n\n    _globalTimeline.remove(tl);\n\n    tl._dp = 0; //otherwise it'll get re-activated when adding children and be re-introduced into _globalTimeline's linked list (then added to itself).\n\n    tl._time = tl._tTime = _globalTimeline._time;\n    child = _globalTimeline._first;\n\n    while (child) {\n      next = child._next;\n\n      if (includeDelayedCalls || !(!child._dur && child instanceof Tween && child.vars.onComplete === child._targets[0])) {\n        _addToTimeline(tl, child, child._start - child._delay);\n      }\n\n      child = next;\n    }\n\n    _addToTimeline(_globalTimeline, tl, 0);\n\n    return tl;\n  },\n  context: function context(func, scope) {\n    return func ? new Context(func, scope) : _context;\n  },\n  matchMedia: function matchMedia(scope) {\n    return new MatchMedia(scope);\n  },\n  matchMediaRefresh: function matchMediaRefresh() {\n    return _media.forEach(function (c) {\n      var cond = c.conditions,\n          found,\n          p;\n\n      for (p in cond) {\n        if (cond[p]) {\n          cond[p] = false;\n          found = 1;\n        }\n      }\n\n      found && c.revert();\n    }) || _onMediaChange();\n  },\n  addEventListener: function addEventListener(type, callback) {\n    var a = _listeners[type] || (_listeners[type] = []);\n    ~a.indexOf(callback) || a.push(callback);\n  },\n  removeEventListener: function removeEventListener(type, callback) {\n    var a = _listeners[type],\n        i = a && a.indexOf(callback);\n    i >= 0 && a.splice(i, 1);\n  },\n  utils: {\n    wrap: wrap,\n    wrapYoyo: wrapYoyo,\n    distribute: distribute,\n    random: random,\n    snap: snap,\n    normalize: normalize,\n    getUnit: getUnit,\n    clamp: clamp,\n    splitColor: splitColor,\n    toArray: toArray,\n    selector: selector,\n    mapRange: mapRange,\n    pipe: pipe,\n    unitize: unitize,\n    interpolate: interpolate,\n    shuffle: shuffle\n  },\n  install: _install,\n  effects: _effects,\n  ticker: _ticker,\n  updateRoot: Timeline.updateRoot,\n  plugins: _plugins,\n  globalTimeline: _globalTimeline,\n  core: {\n    PropTween: PropTween,\n    globals: _addGlobal,\n    Tween: Tween,\n    Timeline: Timeline,\n    Animation: Animation,\n    getCache: _getCache,\n    _removeLinkedListItem: _removeLinkedListItem,\n    reverting: function reverting() {\n      return _reverting;\n    },\n    context: function context(toAdd) {\n      if (toAdd && _context) {\n        _context.data.push(toAdd);\n\n        toAdd._ctx = _context;\n      }\n\n      return _context;\n    },\n    suppressOverwrites: function suppressOverwrites(value) {\n      return _suppressOverwrites = value;\n    }\n  }\n};\n\n_forEachName(\"to,from,fromTo,delayedCall,set,killTweensOf\", function (name) {\n  return _gsap[name] = Tween[name];\n});\n\n_ticker.add(Timeline.updateRoot);\n\n_quickTween = _gsap.to({}, {\n  duration: 0\n}); // ---- EXTRA PLUGINS --------------------------------------------------------\n\nvar _getPluginPropTween = function _getPluginPropTween(plugin, prop) {\n  var pt = plugin._pt;\n\n  while (pt && pt.p !== prop && pt.op !== prop && pt.fp !== prop) {\n    pt = pt._next;\n  }\n\n  return pt;\n},\n    _addModifiers = function _addModifiers(tween, modifiers) {\n  var targets = tween._targets,\n      p,\n      i,\n      pt;\n\n  for (p in modifiers) {\n    i = targets.length;\n\n    while (i--) {\n      pt = tween._ptLookup[i][p];\n\n      if (pt && (pt = pt.d)) {\n        if (pt._pt) {\n          // is a plugin\n          pt = _getPluginPropTween(pt, p);\n        }\n\n        pt && pt.modifier && pt.modifier(modifiers[p], tween, targets[i], p);\n      }\n    }\n  }\n},\n    _buildModifierPlugin = function _buildModifierPlugin(name, modifier) {\n  return {\n    name: name,\n    rawVars: 1,\n    //don't pre-process function-based values or \"random()\" strings.\n    init: function init(target, vars, tween) {\n      tween._onInit = function (tween) {\n        var temp, p;\n\n        if (_isString(vars)) {\n          temp = {};\n\n          _forEachName(vars, function (name) {\n            return temp[name] = 1;\n          }); //if the user passes in a comma-delimited list of property names to roundProps, like \"x,y\", we round to whole numbers.\n\n\n          vars = temp;\n        }\n\n        if (modifier) {\n          temp = {};\n\n          for (p in vars) {\n            temp[p] = modifier(vars[p]);\n          }\n\n          vars = temp;\n        }\n\n        _addModifiers(tween, vars);\n      };\n    }\n  };\n}; //register core plugins\n\n\nexport var gsap = _gsap.registerPlugin({\n  name: \"attr\",\n  init: function init(target, vars, tween, index, targets) {\n    var p, pt, v;\n    this.tween = tween;\n\n    for (p in vars) {\n      v = target.getAttribute(p) || \"\";\n      pt = this.add(target, \"setAttribute\", (v || 0) + \"\", vars[p], index, targets, 0, 0, p);\n      pt.op = p;\n      pt.b = v; // record the beginning value so we can revert()\n\n      this._props.push(p);\n    }\n  },\n  render: function render(ratio, data) {\n    var pt = data._pt;\n\n    while (pt) {\n      _reverting ? pt.set(pt.t, pt.p, pt.b, pt) : pt.r(ratio, pt.d); // if reverting, go back to the original (pt.b)\n\n      pt = pt._next;\n    }\n  }\n}, {\n  name: \"endArray\",\n  init: function init(target, value) {\n    var i = value.length;\n\n    while (i--) {\n      this.add(target, i, target[i] || 0, value[i], 0, 0, 0, 0, 0, 1);\n    }\n  }\n}, _buildModifierPlugin(\"roundProps\", _roundModifier), _buildModifierPlugin(\"modifiers\"), _buildModifierPlugin(\"snap\", snap)) || _gsap; //to prevent the core plugins from being dropped via aggressive tree shaking, we must include them in the variable declaration in this way.\n\nTween.version = Timeline.version = gsap.version = \"3.12.5\";\n_coreReady = 1;\n_windowExists() && _wake();\nvar Power0 = _easeMap.Power0,\n    Power1 = _easeMap.Power1,\n    Power2 = _easeMap.Power2,\n    Power3 = _easeMap.Power3,\n    Power4 = _easeMap.Power4,\n    Linear = _easeMap.Linear,\n    Quad = _easeMap.Quad,\n    Cubic = _easeMap.Cubic,\n    Quart = _easeMap.Quart,\n    Quint = _easeMap.Quint,\n    Strong = _easeMap.Strong,\n    Elastic = _easeMap.Elastic,\n    Back = _easeMap.Back,\n    SteppedEase = _easeMap.SteppedEase,\n    Bounce = _easeMap.Bounce,\n    Sine = _easeMap.Sine,\n    Expo = _easeMap.Expo,\n    Circ = _easeMap.Circ;\nexport { Power0, Power1, Power2, Power3, Power4, Linear, Quad, Cubic, Quart, Quint, Strong, Elastic, Back, SteppedEase, Bounce, Sine, Expo, Circ };\nexport { Tween as TweenMax, Tween as TweenLite, Timeline as TimelineMax, Timeline as TimelineLite, gsap as default, wrap, wrapYoyo, distribute, random, snap, normalize, getUnit, clamp, splitColor, toArray, selector, mapRange, pipe, unitize, interpolate, shuffle }; //export some internal methods/orojects for use in CSSPlugin so that we can externalize that file and allow custom builds that exclude it.\n\nexport { _getProperty, _numExp, _numWithUnitExp, _isString, _isUndefined, _renderComplexString, _relExp, _setDefaults, _removeLinkedListItem, _forEachName, _sortPropTweensByPriority, _colorStringFilter, _replaceRandom, _checkPlugin, _plugins, _ticker, _config, _roundModifier, _round, _missingPlugin, _getSetter, _getCache, _colorExp, _parseRelative };", "/*!\n * CSSPlugin 3.12.5\n * https://gsap.com\n *\n * Copyright 2008-2024, GreenSock. All rights reserved.\n * Subject to the terms at https://gsap.com/standard-license or for\n * Club GSAP members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\nimport { gsap, _getProperty, _numExp, _numWithUnitExp, getUnit, _isString, _isUndefined, _renderComplexString, _relExp, _forEachName, _sortPropTweensByPriority, _colorStringFilter, _checkPlugin, _replaceRandom, _plugins, GSCache, PropTween, _config, _ticker, _round, _missingPlugin, _getSetter, _getCache, _colorExp, _parseRelative, _setDefaults, _removeLinkedListItem //for the commented-out className feature.\n} from \"./gsap-core.js\";\n\nvar _win,\n    _doc,\n    _docElement,\n    _pluginInitted,\n    _tempDiv,\n    _tempDivStyler,\n    _recentSetterPlugin,\n    _reverting,\n    _windowExists = function _windowExists() {\n  return typeof window !== \"undefined\";\n},\n    _transformProps = {},\n    _RAD2DEG = 180 / Math.PI,\n    _DEG2RAD = Math.PI / 180,\n    _atan2 = Math.atan2,\n    _bigNum = 1e8,\n    _capsExp = /([A-Z])/g,\n    _horizontalExp = /(left|right|width|margin|padding|x)/i,\n    _complexExp = /[\\s,\\(]\\S/,\n    _propertyAliases = {\n  autoAlpha: \"opacity,visibility\",\n  scale: \"scaleX,scaleY\",\n  alpha: \"opacity\"\n},\n    _renderCSSProp = function _renderCSSProp(ratio, data) {\n  return data.set(data.t, data.p, Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u, data);\n},\n    _renderPropWithEnd = function _renderPropWithEnd(ratio, data) {\n  return data.set(data.t, data.p, ratio === 1 ? data.e : Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u, data);\n},\n    _renderCSSPropWithBeginning = function _renderCSSPropWithBeginning(ratio, data) {\n  return data.set(data.t, data.p, ratio ? Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u : data.b, data);\n},\n    //if units change, we need a way to render the original unit/value when the tween goes all the way back to the beginning (ratio:0)\n_renderRoundedCSSProp = function _renderRoundedCSSProp(ratio, data) {\n  var value = data.s + data.c * ratio;\n  data.set(data.t, data.p, ~~(value + (value < 0 ? -.5 : .5)) + data.u, data);\n},\n    _renderNonTweeningValue = function _renderNonTweeningValue(ratio, data) {\n  return data.set(data.t, data.p, ratio ? data.e : data.b, data);\n},\n    _renderNonTweeningValueOnlyAtEnd = function _renderNonTweeningValueOnlyAtEnd(ratio, data) {\n  return data.set(data.t, data.p, ratio !== 1 ? data.b : data.e, data);\n},\n    _setterCSSStyle = function _setterCSSStyle(target, property, value) {\n  return target.style[property] = value;\n},\n    _setterCSSProp = function _setterCSSProp(target, property, value) {\n  return target.style.setProperty(property, value);\n},\n    _setterTransform = function _setterTransform(target, property, value) {\n  return target._gsap[property] = value;\n},\n    _setterScale = function _setterScale(target, property, value) {\n  return target._gsap.scaleX = target._gsap.scaleY = value;\n},\n    _setterScaleWithRender = function _setterScaleWithRender(target, property, value, data, ratio) {\n  var cache = target._gsap;\n  cache.scaleX = cache.scaleY = value;\n  cache.renderTransform(ratio, cache);\n},\n    _setterTransformWithRender = function _setterTransformWithRender(target, property, value, data, ratio) {\n  var cache = target._gsap;\n  cache[property] = value;\n  cache.renderTransform(ratio, cache);\n},\n    _transformProp = \"transform\",\n    _transformOriginProp = _transformProp + \"Origin\",\n    _saveStyle = function _saveStyle(property, isNotCSS) {\n  var _this = this;\n\n  var target = this.target,\n      style = target.style,\n      cache = target._gsap;\n\n  if (property in _transformProps && style) {\n    this.tfm = this.tfm || {};\n\n    if (property !== \"transform\") {\n      property = _propertyAliases[property] || property;\n      ~property.indexOf(\",\") ? property.split(\",\").forEach(function (a) {\n        return _this.tfm[a] = _get(target, a);\n      }) : this.tfm[property] = cache.x ? cache[property] : _get(target, property); // note: scale would map to \"scaleX,scaleY\", thus we loop and apply them both.\n\n      property === _transformOriginProp && (this.tfm.zOrigin = cache.zOrigin);\n    } else {\n      return _propertyAliases.transform.split(\",\").forEach(function (p) {\n        return _saveStyle.call(_this, p, isNotCSS);\n      });\n    }\n\n    if (this.props.indexOf(_transformProp) >= 0) {\n      return;\n    }\n\n    if (cache.svg) {\n      this.svgo = target.getAttribute(\"data-svg-origin\");\n      this.props.push(_transformOriginProp, isNotCSS, \"\");\n    }\n\n    property = _transformProp;\n  }\n\n  (style || isNotCSS) && this.props.push(property, isNotCSS, style[property]);\n},\n    _removeIndependentTransforms = function _removeIndependentTransforms(style) {\n  if (style.translate) {\n    style.removeProperty(\"translate\");\n    style.removeProperty(\"scale\");\n    style.removeProperty(\"rotate\");\n  }\n},\n    _revertStyle = function _revertStyle() {\n  var props = this.props,\n      target = this.target,\n      style = target.style,\n      cache = target._gsap,\n      i,\n      p;\n\n  for (i = 0; i < props.length; i += 3) {\n    // stored like this: property, isNotCSS, value\n    props[i + 1] ? target[props[i]] = props[i + 2] : props[i + 2] ? style[props[i]] = props[i + 2] : style.removeProperty(props[i].substr(0, 2) === \"--\" ? props[i] : props[i].replace(_capsExp, \"-$1\").toLowerCase());\n  }\n\n  if (this.tfm) {\n    for (p in this.tfm) {\n      cache[p] = this.tfm[p];\n    }\n\n    if (cache.svg) {\n      cache.renderTransform();\n      target.setAttribute(\"data-svg-origin\", this.svgo || \"\");\n    }\n\n    i = _reverting();\n\n    if ((!i || !i.isStart) && !style[_transformProp]) {\n      _removeIndependentTransforms(style);\n\n      if (cache.zOrigin && style[_transformOriginProp]) {\n        style[_transformOriginProp] += \" \" + cache.zOrigin + \"px\"; // since we're uncaching, we must put the zOrigin back into the transformOrigin so that we can pull it out accurately when we parse again. Otherwise, we'd lose the z portion of the origin since we extract it to protect from Safari bugs.\n\n        cache.zOrigin = 0;\n        cache.renderTransform();\n      }\n\n      cache.uncache = 1; // if it's a startAt that's being reverted in the _initTween() of the core, we don't need to uncache transforms. This is purely a performance optimization.\n    }\n  }\n},\n    _getStyleSaver = function _getStyleSaver(target, properties) {\n  var saver = {\n    target: target,\n    props: [],\n    revert: _revertStyle,\n    save: _saveStyle\n  };\n  target._gsap || gsap.core.getCache(target); // just make sure there's a _gsap cache defined because we read from it in _saveStyle() and it's more efficient to just check it here once.\n\n  properties && properties.split(\",\").forEach(function (p) {\n    return saver.save(p);\n  });\n  return saver;\n},\n    _supports3D,\n    _createElement = function _createElement(type, ns) {\n  var e = _doc.createElementNS ? _doc.createElementNS((ns || \"http://www.w3.org/1999/xhtml\").replace(/^https/, \"http\"), type) : _doc.createElement(type); //some servers swap in https for http in the namespace which can break things, making \"style\" inaccessible.\n\n  return e && e.style ? e : _doc.createElement(type); //some environments won't allow access to the element's style when created with a namespace in which case we default to the standard createElement() to work around the issue. Also note that when GSAP is embedded directly inside an SVG file, createElement() won't allow access to the style object in Firefox (see https://gsap.com/forums/topic/20215-problem-using-tweenmax-in-standalone-self-containing-svg-file-err-cannot-set-property-csstext-of-undefined/).\n},\n    _getComputedProperty = function _getComputedProperty(target, property, skipPrefixFallback) {\n  var cs = getComputedStyle(target);\n  return cs[property] || cs.getPropertyValue(property.replace(_capsExp, \"-$1\").toLowerCase()) || cs.getPropertyValue(property) || !skipPrefixFallback && _getComputedProperty(target, _checkPropPrefix(property) || property, 1) || \"\"; //css variables may not need caps swapped out for dashes and lowercase.\n},\n    _prefixes = \"O,Moz,ms,Ms,Webkit\".split(\",\"),\n    _checkPropPrefix = function _checkPropPrefix(property, element, preferPrefix) {\n  var e = element || _tempDiv,\n      s = e.style,\n      i = 5;\n\n  if (property in s && !preferPrefix) {\n    return property;\n  }\n\n  property = property.charAt(0).toUpperCase() + property.substr(1);\n\n  while (i-- && !(_prefixes[i] + property in s)) {}\n\n  return i < 0 ? null : (i === 3 ? \"ms\" : i >= 0 ? _prefixes[i] : \"\") + property;\n},\n    _initCore = function _initCore() {\n  if (_windowExists() && window.document) {\n    _win = window;\n    _doc = _win.document;\n    _docElement = _doc.documentElement;\n    _tempDiv = _createElement(\"div\") || {\n      style: {}\n    };\n    _tempDivStyler = _createElement(\"div\");\n    _transformProp = _checkPropPrefix(_transformProp);\n    _transformOriginProp = _transformProp + \"Origin\";\n    _tempDiv.style.cssText = \"border-width:0;line-height:0;position:absolute;padding:0\"; //make sure to override certain properties that may contaminate measurements, in case the user has overreaching style sheets.\n\n    _supports3D = !!_checkPropPrefix(\"perspective\");\n    _reverting = gsap.core.reverting;\n    _pluginInitted = 1;\n  }\n},\n    _getBBoxHack = function _getBBoxHack(swapIfPossible) {\n  //works around issues in some browsers (like Firefox) that don't correctly report getBBox() on SVG elements inside a <defs> element and/or <mask>. We try creating an SVG, adding it to the documentElement and toss the element in there so that it's definitely part of the rendering tree, then grab the bbox and if it works, we actually swap out the original getBBox() method for our own that does these extra steps whenever getBBox is needed. This helps ensure that performance is optimal (only do all these extra steps when absolutely necessary...most elements don't need it).\n  var svg = _createElement(\"svg\", this.ownerSVGElement && this.ownerSVGElement.getAttribute(\"xmlns\") || \"http://www.w3.org/2000/svg\"),\n      oldParent = this.parentNode,\n      oldSibling = this.nextSibling,\n      oldCSS = this.style.cssText,\n      bbox;\n\n  _docElement.appendChild(svg);\n\n  svg.appendChild(this);\n  this.style.display = \"block\";\n\n  if (swapIfPossible) {\n    try {\n      bbox = this.getBBox();\n      this._gsapBBox = this.getBBox; //store the original\n\n      this.getBBox = _getBBoxHack;\n    } catch (e) {}\n  } else if (this._gsapBBox) {\n    bbox = this._gsapBBox();\n  }\n\n  if (oldParent) {\n    if (oldSibling) {\n      oldParent.insertBefore(this, oldSibling);\n    } else {\n      oldParent.appendChild(this);\n    }\n  }\n\n  _docElement.removeChild(svg);\n\n  this.style.cssText = oldCSS;\n  return bbox;\n},\n    _getAttributeFallbacks = function _getAttributeFallbacks(target, attributesArray) {\n  var i = attributesArray.length;\n\n  while (i--) {\n    if (target.hasAttribute(attributesArray[i])) {\n      return target.getAttribute(attributesArray[i]);\n    }\n  }\n},\n    _getBBox = function _getBBox(target) {\n  var bounds;\n\n  try {\n    bounds = target.getBBox(); //Firefox throws errors if you try calling getBBox() on an SVG element that's not rendered (like in a <symbol> or <defs>). https://bugzilla.mozilla.org/show_bug.cgi?id=612118\n  } catch (error) {\n    bounds = _getBBoxHack.call(target, true);\n  }\n\n  bounds && (bounds.width || bounds.height) || target.getBBox === _getBBoxHack || (bounds = _getBBoxHack.call(target, true)); //some browsers (like Firefox) misreport the bounds if the element has zero width and height (it just assumes it's at x:0, y:0), thus we need to manually grab the position in that case.\n\n  return bounds && !bounds.width && !bounds.x && !bounds.y ? {\n    x: +_getAttributeFallbacks(target, [\"x\", \"cx\", \"x1\"]) || 0,\n    y: +_getAttributeFallbacks(target, [\"y\", \"cy\", \"y1\"]) || 0,\n    width: 0,\n    height: 0\n  } : bounds;\n},\n    _isSVG = function _isSVG(e) {\n  return !!(e.getCTM && (!e.parentNode || e.ownerSVGElement) && _getBBox(e));\n},\n    //reports if the element is an SVG on which getBBox() actually works\n_removeProperty = function _removeProperty(target, property) {\n  if (property) {\n    var style = target.style,\n        first2Chars;\n\n    if (property in _transformProps && property !== _transformOriginProp) {\n      property = _transformProp;\n    }\n\n    if (style.removeProperty) {\n      first2Chars = property.substr(0, 2);\n\n      if (first2Chars === \"ms\" || property.substr(0, 6) === \"webkit\") {\n        //Microsoft and some Webkit browsers don't conform to the standard of capitalizing the first prefix character, so we adjust so that when we prefix the caps with a dash, it's correct (otherwise it'd be \"ms-transform\" instead of \"-ms-transform\" for IE9, for example)\n        property = \"-\" + property;\n      }\n\n      style.removeProperty(first2Chars === \"--\" ? property : property.replace(_capsExp, \"-$1\").toLowerCase());\n    } else {\n      //note: old versions of IE use \"removeAttribute()\" instead of \"removeProperty()\"\n      style.removeAttribute(property);\n    }\n  }\n},\n    _addNonTweeningPT = function _addNonTweeningPT(plugin, target, property, beginning, end, onlySetAtEnd) {\n  var pt = new PropTween(plugin._pt, target, property, 0, 1, onlySetAtEnd ? _renderNonTweeningValueOnlyAtEnd : _renderNonTweeningValue);\n  plugin._pt = pt;\n  pt.b = beginning;\n  pt.e = end;\n\n  plugin._props.push(property);\n\n  return pt;\n},\n    _nonConvertibleUnits = {\n  deg: 1,\n  rad: 1,\n  turn: 1\n},\n    _nonStandardLayouts = {\n  grid: 1,\n  flex: 1\n},\n    //takes a single value like 20px and converts it to the unit specified, like \"%\", returning only the numeric amount.\n_convertToUnit = function _convertToUnit(target, property, value, unit) {\n  var curValue = parseFloat(value) || 0,\n      curUnit = (value + \"\").trim().substr((curValue + \"\").length) || \"px\",\n      // some browsers leave extra whitespace at the beginning of CSS variables, hence the need to trim()\n  style = _tempDiv.style,\n      horizontal = _horizontalExp.test(property),\n      isRootSVG = target.tagName.toLowerCase() === \"svg\",\n      measureProperty = (isRootSVG ? \"client\" : \"offset\") + (horizontal ? \"Width\" : \"Height\"),\n      amount = 100,\n      toPixels = unit === \"px\",\n      toPercent = unit === \"%\",\n      px,\n      parent,\n      cache,\n      isSVG;\n\n  if (unit === curUnit || !curValue || _nonConvertibleUnits[unit] || _nonConvertibleUnits[curUnit]) {\n    return curValue;\n  }\n\n  curUnit !== \"px\" && !toPixels && (curValue = _convertToUnit(target, property, value, \"px\"));\n  isSVG = target.getCTM && _isSVG(target);\n\n  if ((toPercent || curUnit === \"%\") && (_transformProps[property] || ~property.indexOf(\"adius\"))) {\n    px = isSVG ? target.getBBox()[horizontal ? \"width\" : \"height\"] : target[measureProperty];\n    return _round(toPercent ? curValue / px * amount : curValue / 100 * px);\n  }\n\n  style[horizontal ? \"width\" : \"height\"] = amount + (toPixels ? curUnit : unit);\n  parent = ~property.indexOf(\"adius\") || unit === \"em\" && target.appendChild && !isRootSVG ? target : target.parentNode;\n\n  if (isSVG) {\n    parent = (target.ownerSVGElement || {}).parentNode;\n  }\n\n  if (!parent || parent === _doc || !parent.appendChild) {\n    parent = _doc.body;\n  }\n\n  cache = parent._gsap;\n\n  if (cache && toPercent && cache.width && horizontal && cache.time === _ticker.time && !cache.uncache) {\n    return _round(curValue / cache.width * amount);\n  } else {\n    if (toPercent && (property === \"height\" || property === \"width\")) {\n      // if we're dealing with width/height that's inside a container with padding and/or it's a flexbox/grid container, we must apply it to the target itself rather than the _tempDiv in order to ensure complete accuracy, factoring in the parent's padding.\n      var v = target.style[property];\n      target.style[property] = amount + unit;\n      px = target[measureProperty];\n      v ? target.style[property] = v : _removeProperty(target, property);\n    } else {\n      (toPercent || curUnit === \"%\") && !_nonStandardLayouts[_getComputedProperty(parent, \"display\")] && (style.position = _getComputedProperty(target, \"position\"));\n      parent === target && (style.position = \"static\"); // like for borderRadius, if it's a % we must have it relative to the target itself but that may not have position: relative or position: absolute in which case it'd go up the chain until it finds its offsetParent (bad). position: static protects against that.\n\n      parent.appendChild(_tempDiv);\n      px = _tempDiv[measureProperty];\n      parent.removeChild(_tempDiv);\n      style.position = \"absolute\";\n    }\n\n    if (horizontal && toPercent) {\n      cache = _getCache(parent);\n      cache.time = _ticker.time;\n      cache.width = parent[measureProperty];\n    }\n  }\n\n  return _round(toPixels ? px * curValue / amount : px && curValue ? amount / px * curValue : 0);\n},\n    _get = function _get(target, property, unit, uncache) {\n  var value;\n  _pluginInitted || _initCore();\n\n  if (property in _propertyAliases && property !== \"transform\") {\n    property = _propertyAliases[property];\n\n    if (~property.indexOf(\",\")) {\n      property = property.split(\",\")[0];\n    }\n  }\n\n  if (_transformProps[property] && property !== \"transform\") {\n    value = _parseTransform(target, uncache);\n    value = property !== \"transformOrigin\" ? value[property] : value.svg ? value.origin : _firstTwoOnly(_getComputedProperty(target, _transformOriginProp)) + \" \" + value.zOrigin + \"px\";\n  } else {\n    value = target.style[property];\n\n    if (!value || value === \"auto\" || uncache || ~(value + \"\").indexOf(\"calc(\")) {\n      value = _specialProps[property] && _specialProps[property](target, property, unit) || _getComputedProperty(target, property) || _getProperty(target, property) || (property === \"opacity\" ? 1 : 0); // note: some browsers, like Firefox, don't report borderRadius correctly! Instead, it only reports every corner like  borderTopLeftRadius\n    }\n  }\n\n  return unit && !~(value + \"\").trim().indexOf(\" \") ? _convertToUnit(target, property, value, unit) + unit : value;\n},\n    _tweenComplexCSSString = function _tweenComplexCSSString(target, prop, start, end) {\n  // note: we call _tweenComplexCSSString.call(pluginInstance...) to ensure that it's scoped properly. We may call it from within a plugin too, thus \"this\" would refer to the plugin.\n  if (!start || start === \"none\") {\n    // some browsers like Safari actually PREFER the prefixed property and mis-report the unprefixed value like clipPath (BUG). In other words, even though clipPath exists in the style (\"clipPath\" in target.style) and it's set in the CSS properly (along with -webkit-clip-path), Safari reports clipPath as \"none\" whereas WebkitClipPath reports accurately like \"ellipse(100% 0% at 50% 0%)\", so in this case we must SWITCH to using the prefixed property instead. See https://gsap.com/forums/topic/18310-clippath-doesnt-work-on-ios/\n    var p = _checkPropPrefix(prop, target, 1),\n        s = p && _getComputedProperty(target, p, 1);\n\n    if (s && s !== start) {\n      prop = p;\n      start = s;\n    } else if (prop === \"borderColor\") {\n      start = _getComputedProperty(target, \"borderTopColor\"); // Firefox bug: always reports \"borderColor\" as \"\", so we must fall back to borderTopColor. See https://gsap.com/forums/topic/24583-how-to-return-colors-that-i-had-after-reverse/\n    }\n  }\n\n  var pt = new PropTween(this._pt, target.style, prop, 0, 1, _renderComplexString),\n      index = 0,\n      matchIndex = 0,\n      a,\n      result,\n      startValues,\n      startNum,\n      color,\n      startValue,\n      endValue,\n      endNum,\n      chunk,\n      endUnit,\n      startUnit,\n      endValues;\n  pt.b = start;\n  pt.e = end;\n  start += \"\"; // ensure values are strings\n\n  end += \"\";\n\n  if (end === \"auto\") {\n    startValue = target.style[prop];\n    target.style[prop] = end;\n    end = _getComputedProperty(target, prop) || end;\n    startValue ? target.style[prop] = startValue : _removeProperty(target, prop);\n  }\n\n  a = [start, end];\n\n  _colorStringFilter(a); // pass an array with the starting and ending values and let the filter do whatever it needs to the values. If colors are found, it returns true and then we must match where the color shows up order-wise because for things like boxShadow, sometimes the browser provides the computed values with the color FIRST, but the user provides it with the color LAST, so flip them if necessary. Same for drop-shadow().\n\n\n  start = a[0];\n  end = a[1];\n  startValues = start.match(_numWithUnitExp) || [];\n  endValues = end.match(_numWithUnitExp) || [];\n\n  if (endValues.length) {\n    while (result = _numWithUnitExp.exec(end)) {\n      endValue = result[0];\n      chunk = end.substring(index, result.index);\n\n      if (color) {\n        color = (color + 1) % 5;\n      } else if (chunk.substr(-5) === \"rgba(\" || chunk.substr(-5) === \"hsla(\") {\n        color = 1;\n      }\n\n      if (endValue !== (startValue = startValues[matchIndex++] || \"\")) {\n        startNum = parseFloat(startValue) || 0;\n        startUnit = startValue.substr((startNum + \"\").length);\n        endValue.charAt(1) === \"=\" && (endValue = _parseRelative(startNum, endValue) + startUnit);\n        endNum = parseFloat(endValue);\n        endUnit = endValue.substr((endNum + \"\").length);\n        index = _numWithUnitExp.lastIndex - endUnit.length;\n\n        if (!endUnit) {\n          //if something like \"perspective:300\" is passed in and we must add a unit to the end\n          endUnit = endUnit || _config.units[prop] || startUnit;\n\n          if (index === end.length) {\n            end += endUnit;\n            pt.e += endUnit;\n          }\n        }\n\n        if (startUnit !== endUnit) {\n          startNum = _convertToUnit(target, prop, startValue, endUnit) || 0;\n        } // these nested PropTweens are handled in a special way - we'll never actually call a render or setter method on them. We'll just loop through them in the parent complex string PropTween's render method.\n\n\n        pt._pt = {\n          _next: pt._pt,\n          p: chunk || matchIndex === 1 ? chunk : \",\",\n          //note: SVG spec allows omission of comma/space when a negative sign is wedged between two numbers, like 2.5-5.3 instead of 2.5,-5.3 but when tweening, the negative value may switch to positive, so we insert the comma just in case.\n          s: startNum,\n          c: endNum - startNum,\n          m: color && color < 4 || prop === \"zIndex\" ? Math.round : 0\n        };\n      }\n    }\n\n    pt.c = index < end.length ? end.substring(index, end.length) : \"\"; //we use the \"c\" of the PropTween to store the final part of the string (after the last number)\n  } else {\n    pt.r = prop === \"display\" && end === \"none\" ? _renderNonTweeningValueOnlyAtEnd : _renderNonTweeningValue;\n  }\n\n  _relExp.test(end) && (pt.e = 0); //if the end string contains relative values or dynamic random(...) values, delete the end it so that on the final render we don't actually set it to the string with += or -= characters (forces it to use the calculated value).\n\n  this._pt = pt; //start the linked list with this new PropTween. Remember, we call _tweenComplexCSSString.call(pluginInstance...) to ensure that it's scoped properly. We may call it from within another plugin too, thus \"this\" would refer to the plugin.\n\n  return pt;\n},\n    _keywordToPercent = {\n  top: \"0%\",\n  bottom: \"100%\",\n  left: \"0%\",\n  right: \"100%\",\n  center: \"50%\"\n},\n    _convertKeywordsToPercentages = function _convertKeywordsToPercentages(value) {\n  var split = value.split(\" \"),\n      x = split[0],\n      y = split[1] || \"50%\";\n\n  if (x === \"top\" || x === \"bottom\" || y === \"left\" || y === \"right\") {\n    //the user provided them in the wrong order, so flip them\n    value = x;\n    x = y;\n    y = value;\n  }\n\n  split[0] = _keywordToPercent[x] || x;\n  split[1] = _keywordToPercent[y] || y;\n  return split.join(\" \");\n},\n    _renderClearProps = function _renderClearProps(ratio, data) {\n  if (data.tween && data.tween._time === data.tween._dur) {\n    var target = data.t,\n        style = target.style,\n        props = data.u,\n        cache = target._gsap,\n        prop,\n        clearTransforms,\n        i;\n\n    if (props === \"all\" || props === true) {\n      style.cssText = \"\";\n      clearTransforms = 1;\n    } else {\n      props = props.split(\",\");\n      i = props.length;\n\n      while (--i > -1) {\n        prop = props[i];\n\n        if (_transformProps[prop]) {\n          clearTransforms = 1;\n          prop = prop === \"transformOrigin\" ? _transformOriginProp : _transformProp;\n        }\n\n        _removeProperty(target, prop);\n      }\n    }\n\n    if (clearTransforms) {\n      _removeProperty(target, _transformProp);\n\n      if (cache) {\n        cache.svg && target.removeAttribute(\"transform\");\n\n        _parseTransform(target, 1); // force all the cached values back to \"normal\"/identity, otherwise if there's another tween that's already set to render transforms on this element, it could display the wrong values.\n\n\n        cache.uncache = 1;\n\n        _removeIndependentTransforms(style);\n      }\n    }\n  }\n},\n    // note: specialProps should return 1 if (and only if) they have a non-zero priority. It indicates we need to sort the linked list.\n_specialProps = {\n  clearProps: function clearProps(plugin, target, property, endValue, tween) {\n    if (tween.data !== \"isFromStart\") {\n      var pt = plugin._pt = new PropTween(plugin._pt, target, property, 0, 0, _renderClearProps);\n      pt.u = endValue;\n      pt.pr = -10;\n      pt.tween = tween;\n\n      plugin._props.push(property);\n\n      return 1;\n    }\n  }\n  /* className feature (about 0.4kb gzipped).\n  , className(plugin, target, property, endValue, tween) {\n  \tlet _renderClassName = (ratio, data) => {\n  \t\t\tdata.css.render(ratio, data.css);\n  \t\t\tif (!ratio || ratio === 1) {\n  \t\t\t\tlet inline = data.rmv,\n  \t\t\t\t\ttarget = data.t,\n  \t\t\t\t\tp;\n  \t\t\t\ttarget.setAttribute(\"class\", ratio ? data.e : data.b);\n  \t\t\t\tfor (p in inline) {\n  \t\t\t\t\t_removeProperty(target, p);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t},\n  \t\t_getAllStyles = (target) => {\n  \t\t\tlet styles = {},\n  \t\t\t\tcomputed = getComputedStyle(target),\n  \t\t\t\tp;\n  \t\t\tfor (p in computed) {\n  \t\t\t\tif (isNaN(p) && p !== \"cssText\" && p !== \"length\") {\n  \t\t\t\t\tstyles[p] = computed[p];\n  \t\t\t\t}\n  \t\t\t}\n  \t\t\t_setDefaults(styles, _parseTransform(target, 1));\n  \t\t\treturn styles;\n  \t\t},\n  \t\tstartClassList = target.getAttribute(\"class\"),\n  \t\tstyle = target.style,\n  \t\tcssText = style.cssText,\n  \t\tcache = target._gsap,\n  \t\tclassPT = cache.classPT,\n  \t\tinlineToRemoveAtEnd = {},\n  \t\tdata = {t:target, plugin:plugin, rmv:inlineToRemoveAtEnd, b:startClassList, e:(endValue.charAt(1) !== \"=\") ? endValue : startClassList.replace(new RegExp(\"(?:\\\\s|^)\" + endValue.substr(2) + \"(?![\\\\w-])\"), \"\") + ((endValue.charAt(0) === \"+\") ? \" \" + endValue.substr(2) : \"\")},\n  \t\tchangingVars = {},\n  \t\tstartVars = _getAllStyles(target),\n  \t\ttransformRelated = /(transform|perspective)/i,\n  \t\tendVars, p;\n  \tif (classPT) {\n  \t\tclassPT.r(1, classPT.d);\n  \t\t_removeLinkedListItem(classPT.d.plugin, classPT, \"_pt\");\n  \t}\n  \ttarget.setAttribute(\"class\", data.e);\n  \tendVars = _getAllStyles(target, true);\n  \ttarget.setAttribute(\"class\", startClassList);\n  \tfor (p in endVars) {\n  \t\tif (endVars[p] !== startVars[p] && !transformRelated.test(p)) {\n  \t\t\tchangingVars[p] = endVars[p];\n  \t\t\tif (!style[p] && style[p] !== \"0\") {\n  \t\t\t\tinlineToRemoveAtEnd[p] = 1;\n  \t\t\t}\n  \t\t}\n  \t}\n  \tcache.classPT = plugin._pt = new PropTween(plugin._pt, target, \"className\", 0, 0, _renderClassName, data, 0, -11);\n  \tif (style.cssText !== cssText) { //only apply if things change. Otherwise, in cases like a background-image that's pulled dynamically, it could cause a refresh. See https://gsap.com/forums/topic/20368-possible-gsap-bug-switching-classnames-in-chrome/.\n  \t\tstyle.cssText = cssText; //we recorded cssText before we swapped classes and ran _getAllStyles() because in cases when a className tween is overwritten, we remove all the related tweening properties from that class change (otherwise class-specific stuff can't override properties we've directly set on the target's style object due to specificity).\n  \t}\n  \t_parseTransform(target, true); //to clear the caching of transforms\n  \tdata.css = new gsap.plugins.css();\n  \tdata.css.init(target, changingVars, tween);\n  \tplugin._props.push(...data.css._props);\n  \treturn 1;\n  }\n  */\n\n},\n\n/*\n * --------------------------------------------------------------------------------------\n * TRANSFORMS\n * --------------------------------------------------------------------------------------\n */\n_identity2DMatrix = [1, 0, 0, 1, 0, 0],\n    _rotationalProperties = {},\n    _isNullTransform = function _isNullTransform(value) {\n  return value === \"matrix(1, 0, 0, 1, 0, 0)\" || value === \"none\" || !value;\n},\n    _getComputedTransformMatrixAsArray = function _getComputedTransformMatrixAsArray(target) {\n  var matrixString = _getComputedProperty(target, _transformProp);\n\n  return _isNullTransform(matrixString) ? _identity2DMatrix : matrixString.substr(7).match(_numExp).map(_round);\n},\n    _getMatrix = function _getMatrix(target, force2D) {\n  var cache = target._gsap || _getCache(target),\n      style = target.style,\n      matrix = _getComputedTransformMatrixAsArray(target),\n      parent,\n      nextSibling,\n      temp,\n      addedToDOM;\n\n  if (cache.svg && target.getAttribute(\"transform\")) {\n    temp = target.transform.baseVal.consolidate().matrix; //ensures that even complex values like \"translate(50,60) rotate(135,0,0)\" are parsed because it mashes it into a matrix.\n\n    matrix = [temp.a, temp.b, temp.c, temp.d, temp.e, temp.f];\n    return matrix.join(\",\") === \"1,0,0,1,0,0\" ? _identity2DMatrix : matrix;\n  } else if (matrix === _identity2DMatrix && !target.offsetParent && target !== _docElement && !cache.svg) {\n    //note: if offsetParent is null, that means the element isn't in the normal document flow, like if it has display:none or one of its ancestors has display:none). Firefox returns null for getComputedStyle() if the element is in an iframe that has display:none. https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n    //browsers don't report transforms accurately unless the element is in the DOM and has a display value that's not \"none\". Firefox and Microsoft browsers have a partial bug where they'll report transforms even if display:none BUT not any percentage-based values like translate(-50%, 8px) will be reported as if it's translate(0, 8px).\n    temp = style.display;\n    style.display = \"block\";\n    parent = target.parentNode;\n\n    if (!parent || !target.offsetParent) {\n      // note: in 3.3.0 we switched target.offsetParent to _doc.body.contains(target) to avoid [sometimes unnecessary] MutationObserver calls but that wasn't adequate because there are edge cases where nested position: fixed elements need to get reparented to accurately sense transforms. See https://github.com/greensock/GSAP/issues/388 and https://github.com/greensock/GSAP/issues/375\n      addedToDOM = 1; //flag\n\n      nextSibling = target.nextElementSibling;\n\n      _docElement.appendChild(target); //we must add it to the DOM in order to get values properly\n\n    }\n\n    matrix = _getComputedTransformMatrixAsArray(target);\n    temp ? style.display = temp : _removeProperty(target, \"display\");\n\n    if (addedToDOM) {\n      nextSibling ? parent.insertBefore(target, nextSibling) : parent ? parent.appendChild(target) : _docElement.removeChild(target);\n    }\n  }\n\n  return force2D && matrix.length > 6 ? [matrix[0], matrix[1], matrix[4], matrix[5], matrix[12], matrix[13]] : matrix;\n},\n    _applySVGOrigin = function _applySVGOrigin(target, origin, originIsAbsolute, smooth, matrixArray, pluginToAddPropTweensTo) {\n  var cache = target._gsap,\n      matrix = matrixArray || _getMatrix(target, true),\n      xOriginOld = cache.xOrigin || 0,\n      yOriginOld = cache.yOrigin || 0,\n      xOffsetOld = cache.xOffset || 0,\n      yOffsetOld = cache.yOffset || 0,\n      a = matrix[0],\n      b = matrix[1],\n      c = matrix[2],\n      d = matrix[3],\n      tx = matrix[4],\n      ty = matrix[5],\n      originSplit = origin.split(\" \"),\n      xOrigin = parseFloat(originSplit[0]) || 0,\n      yOrigin = parseFloat(originSplit[1]) || 0,\n      bounds,\n      determinant,\n      x,\n      y;\n\n  if (!originIsAbsolute) {\n    bounds = _getBBox(target);\n    xOrigin = bounds.x + (~originSplit[0].indexOf(\"%\") ? xOrigin / 100 * bounds.width : xOrigin);\n    yOrigin = bounds.y + (~(originSplit[1] || originSplit[0]).indexOf(\"%\") ? yOrigin / 100 * bounds.height : yOrigin); // if (!(\"xOrigin\" in cache) && (xOrigin || yOrigin)) { // added in 3.12.3, reverted in 3.12.4; requires more exploration\n    // \txOrigin -= bounds.x;\n    // \tyOrigin -= bounds.y;\n    // }\n  } else if (matrix !== _identity2DMatrix && (determinant = a * d - b * c)) {\n    //if it's zero (like if scaleX and scaleY are zero), skip it to avoid errors with dividing by zero.\n    x = xOrigin * (d / determinant) + yOrigin * (-c / determinant) + (c * ty - d * tx) / determinant;\n    y = xOrigin * (-b / determinant) + yOrigin * (a / determinant) - (a * ty - b * tx) / determinant;\n    xOrigin = x;\n    yOrigin = y; // theory: we only had to do this for smoothing and it assumes that the previous one was not originIsAbsolute.\n  }\n\n  if (smooth || smooth !== false && cache.smooth) {\n    tx = xOrigin - xOriginOld;\n    ty = yOrigin - yOriginOld;\n    cache.xOffset = xOffsetOld + (tx * a + ty * c) - tx;\n    cache.yOffset = yOffsetOld + (tx * b + ty * d) - ty;\n  } else {\n    cache.xOffset = cache.yOffset = 0;\n  }\n\n  cache.xOrigin = xOrigin;\n  cache.yOrigin = yOrigin;\n  cache.smooth = !!smooth;\n  cache.origin = origin;\n  cache.originIsAbsolute = !!originIsAbsolute;\n  target.style[_transformOriginProp] = \"0px 0px\"; //otherwise, if someone sets  an origin via CSS, it will likely interfere with the SVG transform attribute ones (because remember, we're baking the origin into the matrix() value).\n\n  if (pluginToAddPropTweensTo) {\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"xOrigin\", xOriginOld, xOrigin);\n\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"yOrigin\", yOriginOld, yOrigin);\n\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"xOffset\", xOffsetOld, cache.xOffset);\n\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"yOffset\", yOffsetOld, cache.yOffset);\n  }\n\n  target.setAttribute(\"data-svg-origin\", xOrigin + \" \" + yOrigin);\n},\n    _parseTransform = function _parseTransform(target, uncache) {\n  var cache = target._gsap || new GSCache(target);\n\n  if (\"x\" in cache && !uncache && !cache.uncache) {\n    return cache;\n  }\n\n  var style = target.style,\n      invertedScaleX = cache.scaleX < 0,\n      px = \"px\",\n      deg = \"deg\",\n      cs = getComputedStyle(target),\n      origin = _getComputedProperty(target, _transformOriginProp) || \"0\",\n      x,\n      y,\n      z,\n      scaleX,\n      scaleY,\n      rotation,\n      rotationX,\n      rotationY,\n      skewX,\n      skewY,\n      perspective,\n      xOrigin,\n      yOrigin,\n      matrix,\n      angle,\n      cos,\n      sin,\n      a,\n      b,\n      c,\n      d,\n      a12,\n      a22,\n      t1,\n      t2,\n      t3,\n      a13,\n      a23,\n      a33,\n      a42,\n      a43,\n      a32;\n  x = y = z = rotation = rotationX = rotationY = skewX = skewY = perspective = 0;\n  scaleX = scaleY = 1;\n  cache.svg = !!(target.getCTM && _isSVG(target));\n\n  if (cs.translate) {\n    // accommodate independent transforms by combining them into normal ones.\n    if (cs.translate !== \"none\" || cs.scale !== \"none\" || cs.rotate !== \"none\") {\n      style[_transformProp] = (cs.translate !== \"none\" ? \"translate3d(\" + (cs.translate + \" 0 0\").split(\" \").slice(0, 3).join(\", \") + \") \" : \"\") + (cs.rotate !== \"none\" ? \"rotate(\" + cs.rotate + \") \" : \"\") + (cs.scale !== \"none\" ? \"scale(\" + cs.scale.split(\" \").join(\",\") + \") \" : \"\") + (cs[_transformProp] !== \"none\" ? cs[_transformProp] : \"\");\n    }\n\n    style.scale = style.rotate = style.translate = \"none\";\n  }\n\n  matrix = _getMatrix(target, cache.svg);\n\n  if (cache.svg) {\n    if (cache.uncache) {\n      // if cache.uncache is true (and maybe if origin is 0,0), we need to set element.style.transformOrigin = (cache.xOrigin - bbox.x) + \"px \" + (cache.yOrigin - bbox.y) + \"px\". Previously we let the data-svg-origin stay instead, but when introducing revert(), it complicated things.\n      t2 = target.getBBox();\n      origin = cache.xOrigin - t2.x + \"px \" + (cache.yOrigin - t2.y) + \"px\";\n      t1 = \"\";\n    } else {\n      t1 = !uncache && target.getAttribute(\"data-svg-origin\"); //  Remember, to work around browser inconsistencies we always force SVG elements' transformOrigin to 0,0 and offset the translation accordingly.\n    }\n\n    _applySVGOrigin(target, t1 || origin, !!t1 || cache.originIsAbsolute, cache.smooth !== false, matrix);\n  }\n\n  xOrigin = cache.xOrigin || 0;\n  yOrigin = cache.yOrigin || 0;\n\n  if (matrix !== _identity2DMatrix) {\n    a = matrix[0]; //a11\n\n    b = matrix[1]; //a21\n\n    c = matrix[2]; //a31\n\n    d = matrix[3]; //a41\n\n    x = a12 = matrix[4];\n    y = a22 = matrix[5]; //2D matrix\n\n    if (matrix.length === 6) {\n      scaleX = Math.sqrt(a * a + b * b);\n      scaleY = Math.sqrt(d * d + c * c);\n      rotation = a || b ? _atan2(b, a) * _RAD2DEG : 0; //note: if scaleX is 0, we cannot accurately measure rotation. Same for skewX with a scaleY of 0. Therefore, we default to the previously recorded value (or zero if that doesn't exist).\n\n      skewX = c || d ? _atan2(c, d) * _RAD2DEG + rotation : 0;\n      skewX && (scaleY *= Math.abs(Math.cos(skewX * _DEG2RAD)));\n\n      if (cache.svg) {\n        x -= xOrigin - (xOrigin * a + yOrigin * c);\n        y -= yOrigin - (xOrigin * b + yOrigin * d);\n      } //3D matrix\n\n    } else {\n      a32 = matrix[6];\n      a42 = matrix[7];\n      a13 = matrix[8];\n      a23 = matrix[9];\n      a33 = matrix[10];\n      a43 = matrix[11];\n      x = matrix[12];\n      y = matrix[13];\n      z = matrix[14];\n      angle = _atan2(a32, a33);\n      rotationX = angle * _RAD2DEG; //rotationX\n\n      if (angle) {\n        cos = Math.cos(-angle);\n        sin = Math.sin(-angle);\n        t1 = a12 * cos + a13 * sin;\n        t2 = a22 * cos + a23 * sin;\n        t3 = a32 * cos + a33 * sin;\n        a13 = a12 * -sin + a13 * cos;\n        a23 = a22 * -sin + a23 * cos;\n        a33 = a32 * -sin + a33 * cos;\n        a43 = a42 * -sin + a43 * cos;\n        a12 = t1;\n        a22 = t2;\n        a32 = t3;\n      } //rotationY\n\n\n      angle = _atan2(-c, a33);\n      rotationY = angle * _RAD2DEG;\n\n      if (angle) {\n        cos = Math.cos(-angle);\n        sin = Math.sin(-angle);\n        t1 = a * cos - a13 * sin;\n        t2 = b * cos - a23 * sin;\n        t3 = c * cos - a33 * sin;\n        a43 = d * sin + a43 * cos;\n        a = t1;\n        b = t2;\n        c = t3;\n      } //rotationZ\n\n\n      angle = _atan2(b, a);\n      rotation = angle * _RAD2DEG;\n\n      if (angle) {\n        cos = Math.cos(angle);\n        sin = Math.sin(angle);\n        t1 = a * cos + b * sin;\n        t2 = a12 * cos + a22 * sin;\n        b = b * cos - a * sin;\n        a22 = a22 * cos - a12 * sin;\n        a = t1;\n        a12 = t2;\n      }\n\n      if (rotationX && Math.abs(rotationX) + Math.abs(rotation) > 359.9) {\n        //when rotationY is set, it will often be parsed as 180 degrees different than it should be, and rotationX and rotation both being 180 (it looks the same), so we adjust for that here.\n        rotationX = rotation = 0;\n        rotationY = 180 - rotationY;\n      }\n\n      scaleX = _round(Math.sqrt(a * a + b * b + c * c));\n      scaleY = _round(Math.sqrt(a22 * a22 + a32 * a32));\n      angle = _atan2(a12, a22);\n      skewX = Math.abs(angle) > 0.0002 ? angle * _RAD2DEG : 0;\n      perspective = a43 ? 1 / (a43 < 0 ? -a43 : a43) : 0;\n    }\n\n    if (cache.svg) {\n      //sense if there are CSS transforms applied on an SVG element in which case we must overwrite them when rendering. The transform attribute is more reliable cross-browser, but we can't just remove the CSS ones because they may be applied in a CSS rule somewhere (not just inline).\n      t1 = target.getAttribute(\"transform\");\n      cache.forceCSS = target.setAttribute(\"transform\", \"\") || !_isNullTransform(_getComputedProperty(target, _transformProp));\n      t1 && target.setAttribute(\"transform\", t1);\n    }\n  }\n\n  if (Math.abs(skewX) > 90 && Math.abs(skewX) < 270) {\n    if (invertedScaleX) {\n      scaleX *= -1;\n      skewX += rotation <= 0 ? 180 : -180;\n      rotation += rotation <= 0 ? 180 : -180;\n    } else {\n      scaleY *= -1;\n      skewX += skewX <= 0 ? 180 : -180;\n    }\n  }\n\n  uncache = uncache || cache.uncache;\n  cache.x = x - ((cache.xPercent = x && (!uncache && cache.xPercent || (Math.round(target.offsetWidth / 2) === Math.round(-x) ? -50 : 0))) ? target.offsetWidth * cache.xPercent / 100 : 0) + px;\n  cache.y = y - ((cache.yPercent = y && (!uncache && cache.yPercent || (Math.round(target.offsetHeight / 2) === Math.round(-y) ? -50 : 0))) ? target.offsetHeight * cache.yPercent / 100 : 0) + px;\n  cache.z = z + px;\n  cache.scaleX = _round(scaleX);\n  cache.scaleY = _round(scaleY);\n  cache.rotation = _round(rotation) + deg;\n  cache.rotationX = _round(rotationX) + deg;\n  cache.rotationY = _round(rotationY) + deg;\n  cache.skewX = skewX + deg;\n  cache.skewY = skewY + deg;\n  cache.transformPerspective = perspective + px;\n\n  if (cache.zOrigin = parseFloat(origin.split(\" \")[2]) || !uncache && cache.zOrigin || 0) {\n    style[_transformOriginProp] = _firstTwoOnly(origin);\n  }\n\n  cache.xOffset = cache.yOffset = 0;\n  cache.force3D = _config.force3D;\n  cache.renderTransform = cache.svg ? _renderSVGTransforms : _supports3D ? _renderCSSTransforms : _renderNon3DTransforms;\n  cache.uncache = 0;\n  return cache;\n},\n    _firstTwoOnly = function _firstTwoOnly(value) {\n  return (value = value.split(\" \"))[0] + \" \" + value[1];\n},\n    //for handling transformOrigin values, stripping out the 3rd dimension\n_addPxTranslate = function _addPxTranslate(target, start, value) {\n  var unit = getUnit(start);\n  return _round(parseFloat(start) + parseFloat(_convertToUnit(target, \"x\", value + \"px\", unit))) + unit;\n},\n    _renderNon3DTransforms = function _renderNon3DTransforms(ratio, cache) {\n  cache.z = \"0px\";\n  cache.rotationY = cache.rotationX = \"0deg\";\n  cache.force3D = 0;\n\n  _renderCSSTransforms(ratio, cache);\n},\n    _zeroDeg = \"0deg\",\n    _zeroPx = \"0px\",\n    _endParenthesis = \") \",\n    _renderCSSTransforms = function _renderCSSTransforms(ratio, cache) {\n  var _ref = cache || this,\n      xPercent = _ref.xPercent,\n      yPercent = _ref.yPercent,\n      x = _ref.x,\n      y = _ref.y,\n      z = _ref.z,\n      rotation = _ref.rotation,\n      rotationY = _ref.rotationY,\n      rotationX = _ref.rotationX,\n      skewX = _ref.skewX,\n      skewY = _ref.skewY,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      transformPerspective = _ref.transformPerspective,\n      force3D = _ref.force3D,\n      target = _ref.target,\n      zOrigin = _ref.zOrigin,\n      transforms = \"\",\n      use3D = force3D === \"auto\" && ratio && ratio !== 1 || force3D === true; // Safari has a bug that causes it not to render 3D transform-origin values properly, so we force the z origin to 0, record it in the cache, and then do the math here to offset the translate values accordingly (basically do the 3D transform-origin part manually)\n\n\n  if (zOrigin && (rotationX !== _zeroDeg || rotationY !== _zeroDeg)) {\n    var angle = parseFloat(rotationY) * _DEG2RAD,\n        a13 = Math.sin(angle),\n        a33 = Math.cos(angle),\n        cos;\n\n    angle = parseFloat(rotationX) * _DEG2RAD;\n    cos = Math.cos(angle);\n    x = _addPxTranslate(target, x, a13 * cos * -zOrigin);\n    y = _addPxTranslate(target, y, -Math.sin(angle) * -zOrigin);\n    z = _addPxTranslate(target, z, a33 * cos * -zOrigin + zOrigin);\n  }\n\n  if (transformPerspective !== _zeroPx) {\n    transforms += \"perspective(\" + transformPerspective + _endParenthesis;\n  }\n\n  if (xPercent || yPercent) {\n    transforms += \"translate(\" + xPercent + \"%, \" + yPercent + \"%) \";\n  }\n\n  if (use3D || x !== _zeroPx || y !== _zeroPx || z !== _zeroPx) {\n    transforms += z !== _zeroPx || use3D ? \"translate3d(\" + x + \", \" + y + \", \" + z + \") \" : \"translate(\" + x + \", \" + y + _endParenthesis;\n  }\n\n  if (rotation !== _zeroDeg) {\n    transforms += \"rotate(\" + rotation + _endParenthesis;\n  }\n\n  if (rotationY !== _zeroDeg) {\n    transforms += \"rotateY(\" + rotationY + _endParenthesis;\n  }\n\n  if (rotationX !== _zeroDeg) {\n    transforms += \"rotateX(\" + rotationX + _endParenthesis;\n  }\n\n  if (skewX !== _zeroDeg || skewY !== _zeroDeg) {\n    transforms += \"skew(\" + skewX + \", \" + skewY + _endParenthesis;\n  }\n\n  if (scaleX !== 1 || scaleY !== 1) {\n    transforms += \"scale(\" + scaleX + \", \" + scaleY + _endParenthesis;\n  }\n\n  target.style[_transformProp] = transforms || \"translate(0, 0)\";\n},\n    _renderSVGTransforms = function _renderSVGTransforms(ratio, cache) {\n  var _ref2 = cache || this,\n      xPercent = _ref2.xPercent,\n      yPercent = _ref2.yPercent,\n      x = _ref2.x,\n      y = _ref2.y,\n      rotation = _ref2.rotation,\n      skewX = _ref2.skewX,\n      skewY = _ref2.skewY,\n      scaleX = _ref2.scaleX,\n      scaleY = _ref2.scaleY,\n      target = _ref2.target,\n      xOrigin = _ref2.xOrigin,\n      yOrigin = _ref2.yOrigin,\n      xOffset = _ref2.xOffset,\n      yOffset = _ref2.yOffset,\n      forceCSS = _ref2.forceCSS,\n      tx = parseFloat(x),\n      ty = parseFloat(y),\n      a11,\n      a21,\n      a12,\n      a22,\n      temp;\n\n  rotation = parseFloat(rotation);\n  skewX = parseFloat(skewX);\n  skewY = parseFloat(skewY);\n\n  if (skewY) {\n    //for performance reasons, we combine all skewing into the skewX and rotation values. Remember, a skewY of 10 degrees looks the same as a rotation of 10 degrees plus a skewX of 10 degrees.\n    skewY = parseFloat(skewY);\n    skewX += skewY;\n    rotation += skewY;\n  }\n\n  if (rotation || skewX) {\n    rotation *= _DEG2RAD;\n    skewX *= _DEG2RAD;\n    a11 = Math.cos(rotation) * scaleX;\n    a21 = Math.sin(rotation) * scaleX;\n    a12 = Math.sin(rotation - skewX) * -scaleY;\n    a22 = Math.cos(rotation - skewX) * scaleY;\n\n    if (skewX) {\n      skewY *= _DEG2RAD;\n      temp = Math.tan(skewX - skewY);\n      temp = Math.sqrt(1 + temp * temp);\n      a12 *= temp;\n      a22 *= temp;\n\n      if (skewY) {\n        temp = Math.tan(skewY);\n        temp = Math.sqrt(1 + temp * temp);\n        a11 *= temp;\n        a21 *= temp;\n      }\n    }\n\n    a11 = _round(a11);\n    a21 = _round(a21);\n    a12 = _round(a12);\n    a22 = _round(a22);\n  } else {\n    a11 = scaleX;\n    a22 = scaleY;\n    a21 = a12 = 0;\n  }\n\n  if (tx && !~(x + \"\").indexOf(\"px\") || ty && !~(y + \"\").indexOf(\"px\")) {\n    tx = _convertToUnit(target, \"x\", x, \"px\");\n    ty = _convertToUnit(target, \"y\", y, \"px\");\n  }\n\n  if (xOrigin || yOrigin || xOffset || yOffset) {\n    tx = _round(tx + xOrigin - (xOrigin * a11 + yOrigin * a12) + xOffset);\n    ty = _round(ty + yOrigin - (xOrigin * a21 + yOrigin * a22) + yOffset);\n  }\n\n  if (xPercent || yPercent) {\n    //The SVG spec doesn't support percentage-based translation in the \"transform\" attribute, so we merge it into the translation to simulate it.\n    temp = target.getBBox();\n    tx = _round(tx + xPercent / 100 * temp.width);\n    ty = _round(ty + yPercent / 100 * temp.height);\n  }\n\n  temp = \"matrix(\" + a11 + \",\" + a21 + \",\" + a12 + \",\" + a22 + \",\" + tx + \",\" + ty + \")\";\n  target.setAttribute(\"transform\", temp);\n  forceCSS && (target.style[_transformProp] = temp); //some browsers prioritize CSS transforms over the transform attribute. When we sense that the user has CSS transforms applied, we must overwrite them this way (otherwise some browser simply won't render the transform attribute changes!)\n},\n    _addRotationalPropTween = function _addRotationalPropTween(plugin, target, property, startNum, endValue) {\n  var cap = 360,\n      isString = _isString(endValue),\n      endNum = parseFloat(endValue) * (isString && ~endValue.indexOf(\"rad\") ? _RAD2DEG : 1),\n      change = endNum - startNum,\n      finalValue = startNum + change + \"deg\",\n      direction,\n      pt;\n\n  if (isString) {\n    direction = endValue.split(\"_\")[1];\n\n    if (direction === \"short\") {\n      change %= cap;\n\n      if (change !== change % (cap / 2)) {\n        change += change < 0 ? cap : -cap;\n      }\n    }\n\n    if (direction === \"cw\" && change < 0) {\n      change = (change + cap * _bigNum) % cap - ~~(change / cap) * cap;\n    } else if (direction === \"ccw\" && change > 0) {\n      change = (change - cap * _bigNum) % cap - ~~(change / cap) * cap;\n    }\n  }\n\n  plugin._pt = pt = new PropTween(plugin._pt, target, property, startNum, change, _renderPropWithEnd);\n  pt.e = finalValue;\n  pt.u = \"deg\";\n\n  plugin._props.push(property);\n\n  return pt;\n},\n    _assign = function _assign(target, source) {\n  // Internet Explorer doesn't have Object.assign(), so we recreate it here.\n  for (var p in source) {\n    target[p] = source[p];\n  }\n\n  return target;\n},\n    _addRawTransformPTs = function _addRawTransformPTs(plugin, transforms, target) {\n  //for handling cases where someone passes in a whole transform string, like transform: \"scale(2, 3) rotate(20deg) translateY(30em)\"\n  var startCache = _assign({}, target._gsap),\n      exclude = \"perspective,force3D,transformOrigin,svgOrigin\",\n      style = target.style,\n      endCache,\n      p,\n      startValue,\n      endValue,\n      startNum,\n      endNum,\n      startUnit,\n      endUnit;\n\n  if (startCache.svg) {\n    startValue = target.getAttribute(\"transform\");\n    target.setAttribute(\"transform\", \"\");\n    style[_transformProp] = transforms;\n    endCache = _parseTransform(target, 1);\n\n    _removeProperty(target, _transformProp);\n\n    target.setAttribute(\"transform\", startValue);\n  } else {\n    startValue = getComputedStyle(target)[_transformProp];\n    style[_transformProp] = transforms;\n    endCache = _parseTransform(target, 1);\n    style[_transformProp] = startValue;\n  }\n\n  for (p in _transformProps) {\n    startValue = startCache[p];\n    endValue = endCache[p];\n\n    if (startValue !== endValue && exclude.indexOf(p) < 0) {\n      //tweening to no perspective gives very unintuitive results - just keep the same perspective in that case.\n      startUnit = getUnit(startValue);\n      endUnit = getUnit(endValue);\n      startNum = startUnit !== endUnit ? _convertToUnit(target, p, startValue, endUnit) : parseFloat(startValue);\n      endNum = parseFloat(endValue);\n      plugin._pt = new PropTween(plugin._pt, endCache, p, startNum, endNum - startNum, _renderCSSProp);\n      plugin._pt.u = endUnit || 0;\n\n      plugin._props.push(p);\n    }\n  }\n\n  _assign(endCache, startCache);\n}; // handle splitting apart padding, margin, borderWidth, and borderRadius into their 4 components. Firefox, for example, won't report borderRadius correctly - it will only do borderTopLeftRadius and the other corners. We also want to handle paddingTop, marginLeft, borderRightWidth, etc.\n\n\n_forEachName(\"padding,margin,Width,Radius\", function (name, index) {\n  var t = \"Top\",\n      r = \"Right\",\n      b = \"Bottom\",\n      l = \"Left\",\n      props = (index < 3 ? [t, r, b, l] : [t + l, t + r, b + r, b + l]).map(function (side) {\n    return index < 2 ? name + side : \"border\" + side + name;\n  });\n\n  _specialProps[index > 1 ? \"border\" + name : name] = function (plugin, target, property, endValue, tween) {\n    var a, vars;\n\n    if (arguments.length < 4) {\n      // getter, passed target, property, and unit (from _get())\n      a = props.map(function (prop) {\n        return _get(plugin, prop, property);\n      });\n      vars = a.join(\" \");\n      return vars.split(a[0]).length === 5 ? a[0] : vars;\n    }\n\n    a = (endValue + \"\").split(\" \");\n    vars = {};\n    props.forEach(function (prop, i) {\n      return vars[prop] = a[i] = a[i] || a[(i - 1) / 2 | 0];\n    });\n    plugin.init(target, vars, tween);\n  };\n});\n\nexport var CSSPlugin = {\n  name: \"css\",\n  register: _initCore,\n  targetTest: function targetTest(target) {\n    return target.style && target.nodeType;\n  },\n  init: function init(target, vars, tween, index, targets) {\n    var props = this._props,\n        style = target.style,\n        startAt = tween.vars.startAt,\n        startValue,\n        endValue,\n        endNum,\n        startNum,\n        type,\n        specialProp,\n        p,\n        startUnit,\n        endUnit,\n        relative,\n        isTransformRelated,\n        transformPropTween,\n        cache,\n        smooth,\n        hasPriority,\n        inlineProps;\n    _pluginInitted || _initCore(); // we may call init() multiple times on the same plugin instance, like when adding special properties, so make sure we don't overwrite the revert data or inlineProps\n\n    this.styles = this.styles || _getStyleSaver(target);\n    inlineProps = this.styles.props;\n    this.tween = tween;\n\n    for (p in vars) {\n      if (p === \"autoRound\") {\n        continue;\n      }\n\n      endValue = vars[p];\n\n      if (_plugins[p] && _checkPlugin(p, vars, tween, index, target, targets)) {\n        // plugins\n        continue;\n      }\n\n      type = typeof endValue;\n      specialProp = _specialProps[p];\n\n      if (type === \"function\") {\n        endValue = endValue.call(tween, index, target, targets);\n        type = typeof endValue;\n      }\n\n      if (type === \"string\" && ~endValue.indexOf(\"random(\")) {\n        endValue = _replaceRandom(endValue);\n      }\n\n      if (specialProp) {\n        specialProp(this, target, p, endValue, tween) && (hasPriority = 1);\n      } else if (p.substr(0, 2) === \"--\") {\n        //CSS variable\n        startValue = (getComputedStyle(target).getPropertyValue(p) + \"\").trim();\n        endValue += \"\";\n        _colorExp.lastIndex = 0;\n\n        if (!_colorExp.test(startValue)) {\n          // colors don't have units\n          startUnit = getUnit(startValue);\n          endUnit = getUnit(endValue);\n        }\n\n        endUnit ? startUnit !== endUnit && (startValue = _convertToUnit(target, p, startValue, endUnit) + endUnit) : startUnit && (endValue += startUnit);\n        this.add(style, \"setProperty\", startValue, endValue, index, targets, 0, 0, p);\n        props.push(p);\n        inlineProps.push(p, 0, style[p]);\n      } else if (type !== \"undefined\") {\n        if (startAt && p in startAt) {\n          // in case someone hard-codes a complex value as the start, like top: \"calc(2vh / 2)\". Without this, it'd use the computed value (always in px)\n          startValue = typeof startAt[p] === \"function\" ? startAt[p].call(tween, index, target, targets) : startAt[p];\n          _isString(startValue) && ~startValue.indexOf(\"random(\") && (startValue = _replaceRandom(startValue));\n          getUnit(startValue + \"\") || startValue === \"auto\" || (startValue += _config.units[p] || getUnit(_get(target, p)) || \"\"); // for cases when someone passes in a unitless value like {x: 100}; if we try setting translate(100, 0px) it won't work.\n\n          (startValue + \"\").charAt(1) === \"=\" && (startValue = _get(target, p)); // can't work with relative values\n        } else {\n          startValue = _get(target, p);\n        }\n\n        startNum = parseFloat(startValue);\n        relative = type === \"string\" && endValue.charAt(1) === \"=\" && endValue.substr(0, 2);\n        relative && (endValue = endValue.substr(2));\n        endNum = parseFloat(endValue);\n\n        if (p in _propertyAliases) {\n          if (p === \"autoAlpha\") {\n            //special case where we control the visibility along with opacity. We still allow the opacity value to pass through and get tweened.\n            if (startNum === 1 && _get(target, \"visibility\") === \"hidden\" && endNum) {\n              //if visibility is initially set to \"hidden\", we should interpret that as intent to make opacity 0 (a convenience)\n              startNum = 0;\n            }\n\n            inlineProps.push(\"visibility\", 0, style.visibility);\n\n            _addNonTweeningPT(this, style, \"visibility\", startNum ? \"inherit\" : \"hidden\", endNum ? \"inherit\" : \"hidden\", !endNum);\n          }\n\n          if (p !== \"scale\" && p !== \"transform\") {\n            p = _propertyAliases[p];\n            ~p.indexOf(\",\") && (p = p.split(\",\")[0]);\n          }\n        }\n\n        isTransformRelated = p in _transformProps; //--- TRANSFORM-RELATED ---\n\n        if (isTransformRelated) {\n          this.styles.save(p);\n\n          if (!transformPropTween) {\n            cache = target._gsap;\n            cache.renderTransform && !vars.parseTransform || _parseTransform(target, vars.parseTransform); // if, for example, gsap.set(... {transform:\"translateX(50vw)\"}), the _get() call doesn't parse the transform, thus cache.renderTransform won't be set yet so force the parsing of the transform here.\n\n            smooth = vars.smoothOrigin !== false && cache.smooth;\n            transformPropTween = this._pt = new PropTween(this._pt, style, _transformProp, 0, 1, cache.renderTransform, cache, 0, -1); //the first time through, create the rendering PropTween so that it runs LAST (in the linked list, we keep adding to the beginning)\n\n            transformPropTween.dep = 1; //flag it as dependent so that if things get killed/overwritten and this is the only PropTween left, we can safely kill the whole tween.\n          }\n\n          if (p === \"scale\") {\n            this._pt = new PropTween(this._pt, cache, \"scaleY\", cache.scaleY, (relative ? _parseRelative(cache.scaleY, relative + endNum) : endNum) - cache.scaleY || 0, _renderCSSProp);\n            this._pt.u = 0;\n            props.push(\"scaleY\", p);\n            p += \"X\";\n          } else if (p === \"transformOrigin\") {\n            inlineProps.push(_transformOriginProp, 0, style[_transformOriginProp]);\n            endValue = _convertKeywordsToPercentages(endValue); //in case something like \"left top\" or \"bottom right\" is passed in. Convert to percentages.\n\n            if (cache.svg) {\n              _applySVGOrigin(target, endValue, 0, smooth, 0, this);\n            } else {\n              endUnit = parseFloat(endValue.split(\" \")[2]) || 0; //handle the zOrigin separately!\n\n              endUnit !== cache.zOrigin && _addNonTweeningPT(this, cache, \"zOrigin\", cache.zOrigin, endUnit);\n\n              _addNonTweeningPT(this, style, p, _firstTwoOnly(startValue), _firstTwoOnly(endValue));\n            }\n\n            continue;\n          } else if (p === \"svgOrigin\") {\n            _applySVGOrigin(target, endValue, 1, smooth, 0, this);\n\n            continue;\n          } else if (p in _rotationalProperties) {\n            _addRotationalPropTween(this, cache, p, startNum, relative ? _parseRelative(startNum, relative + endValue) : endValue);\n\n            continue;\n          } else if (p === \"smoothOrigin\") {\n            _addNonTweeningPT(this, cache, \"smooth\", cache.smooth, endValue);\n\n            continue;\n          } else if (p === \"force3D\") {\n            cache[p] = endValue;\n            continue;\n          } else if (p === \"transform\") {\n            _addRawTransformPTs(this, endValue, target);\n\n            continue;\n          }\n        } else if (!(p in style)) {\n          p = _checkPropPrefix(p) || p;\n        }\n\n        if (isTransformRelated || (endNum || endNum === 0) && (startNum || startNum === 0) && !_complexExp.test(endValue) && p in style) {\n          startUnit = (startValue + \"\").substr((startNum + \"\").length);\n          endNum || (endNum = 0); // protect against NaN\n\n          endUnit = getUnit(endValue) || (p in _config.units ? _config.units[p] : startUnit);\n          startUnit !== endUnit && (startNum = _convertToUnit(target, p, startValue, endUnit));\n          this._pt = new PropTween(this._pt, isTransformRelated ? cache : style, p, startNum, (relative ? _parseRelative(startNum, relative + endNum) : endNum) - startNum, !isTransformRelated && (endUnit === \"px\" || p === \"zIndex\") && vars.autoRound !== false ? _renderRoundedCSSProp : _renderCSSProp);\n          this._pt.u = endUnit || 0;\n\n          if (startUnit !== endUnit && endUnit !== \"%\") {\n            //when the tween goes all the way back to the beginning, we need to revert it to the OLD/ORIGINAL value (with those units). We record that as a \"b\" (beginning) property and point to a render method that handles that. (performance optimization)\n            this._pt.b = startValue;\n            this._pt.r = _renderCSSPropWithBeginning;\n          }\n        } else if (!(p in style)) {\n          if (p in target) {\n            //maybe it's not a style - it could be a property added directly to an element in which case we'll try to animate that.\n            this.add(target, p, startValue || target[p], relative ? relative + endValue : endValue, index, targets);\n          } else if (p !== \"parseTransform\") {\n            _missingPlugin(p, endValue);\n\n            continue;\n          }\n        } else {\n          _tweenComplexCSSString.call(this, target, p, startValue, relative ? relative + endValue : endValue);\n        }\n\n        isTransformRelated || (p in style ? inlineProps.push(p, 0, style[p]) : inlineProps.push(p, 1, startValue || target[p]));\n        props.push(p);\n      }\n    }\n\n    hasPriority && _sortPropTweensByPriority(this);\n  },\n  render: function render(ratio, data) {\n    if (data.tween._time || !_reverting()) {\n      var pt = data._pt;\n\n      while (pt) {\n        pt.r(ratio, pt.d);\n        pt = pt._next;\n      }\n    } else {\n      data.styles.revert();\n    }\n  },\n  get: _get,\n  aliases: _propertyAliases,\n  getSetter: function getSetter(target, property, plugin) {\n    //returns a setter function that accepts target, property, value and applies it accordingly. Remember, properties like \"x\" aren't as simple as target.style.property = value because they've got to be applied to a proxy object and then merged into a transform string in a renderer.\n    var p = _propertyAliases[property];\n    p && p.indexOf(\",\") < 0 && (property = p);\n    return property in _transformProps && property !== _transformOriginProp && (target._gsap.x || _get(target, \"x\")) ? plugin && _recentSetterPlugin === plugin ? property === \"scale\" ? _setterScale : _setterTransform : (_recentSetterPlugin = plugin || {}) && (property === \"scale\" ? _setterScaleWithRender : _setterTransformWithRender) : target.style && !_isUndefined(target.style[property]) ? _setterCSSStyle : ~property.indexOf(\"-\") ? _setterCSSProp : _getSetter(target, property);\n  },\n  core: {\n    _removeProperty: _removeProperty,\n    _getMatrix: _getMatrix\n  }\n};\ngsap.utils.checkPrefix = _checkPropPrefix;\ngsap.core.getStyleSaver = _getStyleSaver;\n\n(function (positionAndScale, rotation, others, aliases) {\n  var all = _forEachName(positionAndScale + \",\" + rotation + \",\" + others, function (name) {\n    _transformProps[name] = 1;\n  });\n\n  _forEachName(rotation, function (name) {\n    _config.units[name] = \"deg\";\n    _rotationalProperties[name] = 1;\n  });\n\n  _propertyAliases[all[13]] = positionAndScale + \",\" + rotation;\n\n  _forEachName(aliases, function (name) {\n    var split = name.split(\":\");\n    _propertyAliases[split[1]] = all[split[0]];\n  });\n})(\"x,y,z,scale,scaleX,scaleY,xPercent,yPercent\", \"rotation,rotationX,rotationY,skewX,skewY\", \"transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective\", \"0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY\");\n\n_forEachName(\"x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective\", function (name) {\n  _config.units[name] = \"px\";\n});\n\ngsap.registerPlugin(CSSPlugin);\nexport { CSSPlugin as default, _getBBox, _createElement, _checkPropPrefix as checkPrefix };", "import { gsap, Power0, Power1, Power2, Power3, Power4, Linear, Quad, Cubic, Quart, Quint, Strong, Elastic, Back, SteppedEase, Bounce, Sine, Expo, Circ, TweenLite, TimelineLite, TimelineMax } from \"./gsap-core.js\";\nimport { CSSPlugin } from \"./CSSPlugin.js\";\nvar gsapWithCSS = gsap.registerPlugin(CSSPlugin) || gsap,\n    // to protect from tree shaking\nTweenMaxWithCSS = gsapWithCSS.core.Tween;\nexport { gsapWithCSS as gsap, gsapWithCSS as default, CSSPlugin, TweenMaxWithCSS as TweenMax, TweenLite, TimelineMax, TimelineLite, Power0, Power1, Power2, Power3, Power4, Linear, Quad, Cubic, Quart, Quint, Strong, Elastic, Back, SteppedEase, Bounce, Sine, Expo, Circ };", "export const env = process.env.NODE_ENV;\nexport const isDev = env === 'development';\nexport const isProduction = env === 'production';\n", "export function capitalize(str: string): string {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport function capitalizeWords(str: string): string {\n  return str.split(' ').map(capitalize).join(' ');\n}\n", "import { isDev } from '../env';\nimport { capitalize } from '../string';\n\nconst colors = {\n  log: 'background: #74b64c; color: black;',\n  warn: 'background: yellow; color: black;',\n  error: 'background: orange; color: black;',\n};\n\nexport type LoggerMode = 'development' | 'default' | 'disabled';\n\nexport class Logger {\n  private static _instance: Logger | null = null;\n\n  private constructor(mode?: LoggerMode) {\n    Logger._instance = this;\n    Logger.mode = mode !== undefined ? mode : isDev ? 'development' : 'default';\n    // check if mode is one of the valid modes\n    if (!['development', 'default', 'disabled'].includes(Logger.mode)) {\n      Logger.mode = 'default';\n    }\n  }\n\n  private static _mode: LoggerMode = 'disabled';\n\n  static get mode(): LoggerMode {\n    return Logger._mode;\n  }\n\n  static set mode(mode: LoggerMode) {\n    Logger._mode = mode;\n  }\n\n  public static initialize(mode?: LoggerMode) {\n    if (Logger._instance) {\n      throw new Error('Logger has already been instantiated.');\n    }\n    Logger._instance = new Logger(mode);\n  }\n\n  public static log(...args: any) {\n    Logger.trace('log', ...args);\n  }\n\n  public static warn(...args: any) {\n    Logger.trace('warn', ...args);\n  }\n\n  public static error(...args: any) {\n    Logger.trace('error', ...args);\n  }\n\n  public static trace(type: 'log' | 'warn' | 'error' = 'log', ...args: any[]) {\n    if (Logger.mode === 'disabled') {\n      return;\n    }\n    if (Logger.mode === 'default') {\n      return console.log(`%c ${capitalize(type)} `, colors[type], ...args);\n    }\n    console.groupCollapsed(`%c ${capitalize(type)} `, colors[type], ...args);\n    console.trace(`%c Stack `, colors[type]);\n    console.groupEnd();\n  }\n}\n", "/**\n * Delays the execution of the subsequent code.\n * @param {number} seconds The delay time in seconds. Default is 0.\n * @returns {Promise<void>} A promise that resolves after the specified delay.\n */\nexport const delay = (seconds: number = 0): Promise<void> =>\n  new Promise((resolve) => setTimeout(resolve, seconds * 1000));\n\nexport const wait = (seconds: number = 0): Promise<void> => delay(seconds);\n\n/**\n * Checks if the given value is a promise.\n * @param {any} value The value to check.\n * @returns {boolean} True if the value is a promise, false otherwise.\n */\nexport const isPromise = (value: any): value is Promise<any> => value && typeof value.then === 'function';\n", "import {Logger} from '../console';\n\n/**\n * Creates a new Queue with the given promises.\n * @param {...(Promise<any> | (() => Promise<any | void>))[]} promises The promises to add to the queue.\n * @returns {Queue} The created Queue.\n */\nexport function createQueue(...promises: (Promise<any> | (() => Promise<any | void>))[]): Queue {\n  return new Queue(promises);\n}\n\n/**\n * A class representing a queue of promises.\n * @template T The type of the values that the promises in the queue resolve to.\n */\nexport class Queue<T = any | void> {\n  private _promises: (Promise<any> | (() => Promise<T>))[];\n  private _currentIndex: number = 0;\n  private _isPaused: boolean = false;\n  private _isCanceled: boolean = false;\n\n  /**\n   * Creates a new Queue.\n   * @param {(Promise<any> | (() => Promise<T>))[]} promises The promises to add to the queue.\n   */\n  constructor(promises: (Promise<any> | (() => Promise<T>))[] = []) {\n    this._promises = promises;\n  }\n\n  private _results: T[];\n\n  /**\n   * Gets the results of the promises that have been resolved so far.\n   * @returns {T[]} The results.\n   */\n  public get results(): T[] {\n    return this._results;\n  }\n\n  /**\n   * Adds promises to the queue.\n   * @param {...(Promise<any> | (() => Promise<T>))[]} args The promises to add.\n   */\n  public add(...args: (Promise<any> | (() => Promise<T>))[]) {\n    this._promises.push(...args);\n  }\n\n  /**\n   * Starts the execution of the promises in the queue.\n   */\n  public start(): void {\n    if (this._currentIndex === 0) {\n      // don't start if already started\n      this._results = [];\n      void this._next();\n    }\n  }\n\n  /**\n   * Pauses the execution of the promises in the queue.\n   */\n  public pause(): void {\n    this._isPaused = true;\n  }\n\n  /**\n   * Resumes the execution of the promises in the queue.\n   */\n  public resume(): void {\n    if (this._isPaused) {\n      this._isPaused = false;\n      void this._next();\n    }\n  }\n\n  /**\n   * Cancels the execution of the promises in the queue.\n   */\n  public cancel(): void {\n    this._isCanceled = true;\n    this._promises = [];\n  }\n\n  /**\n   * Executes the next promise in the queue.\n   * @private\n   * @returns {Promise<void>} A promise that resolves when the next promise in the queue has been executed.\n   */\n  private async _next(): Promise<void> {\n    if (this._isPaused || this._isCanceled || this._currentIndex >= this._promises.length) {\n      return;\n    }\n\n    const currentFunction = this._promises[this._currentIndex];\n\n    try {\n      const result = typeof currentFunction === 'function' ? await currentFunction() : await currentFunction;\n      this._results.push(result);\n      this._currentIndex++;\n      void this._next();\n    } catch (error) {\n      Logger.error(\"Queue didn't complete due to an error:\", error, 'Cancelling Queue');\n      this._isCanceled = true;\n    }\n  }\n}\n", "import {isPromise} from './promise';\nimport {Constructor, ImportListItem, ImportListItemModule} from './types';\n\n/**\n * Checks if the given value is a class.\n * @param {any} value The value to check.\n * @returns {boolean} True if the value is a class, false otherwise.\n */\nfunction isClass(value: any): boolean {\n  return typeof value === 'function' && /^class\\s/.test(Function.prototype.toString.call(value));\n}\n\n/**\n * Retrieves the constructor of the module from the given import list item.\n * If the module is a promise, it waits for it to resolve.\n * If the module is a class, it returns it directly.\n * If the module has a named export specified in the item, it returns that.\n * Otherwise, it returns the default export of the module.\n * @param {ImportListItem<T>} item The import list item to get the module from.\n * @returns {Promise<Constructor<T>>} A promise that resolves to the constructor of the module.\n */\nexport async function getDynamicModuleFromImportListItem<T = any>(\n  item: ImportListItem<T>,\n): Promise<ImportListItemModule<T>> {\n  let module;\n  let ctor: ImportListItemModule<T>;\n\n  if (isPromise(item.module)) {\n    module = await item.module;\n    ctor = item?.namedExport ? module[item.namedExport] : module.default;\n  } else if (typeof item.module === 'function') {\n    if (isClass(item.module)) {\n      module = item.module;\n      ctor = module as Constructor<T>;\n    } else {\n      module = await (item.module as () => Promise<any>)();\n      ctor = item?.namedExport ? module[item.namedExport] : module.default;\n    }\n  } else {\n    module = item.module;\n    ctor = module;\n  }\n\n  return ctor;\n}\n", "import { Point } from 'pixi.js';\nimport type { Size, SizeLike } from './types';\n\nexport function resolveSizeLike(size?: SizeLike): Size {\n  if (size === undefined) {\n    return { width: 0, height: 0 };\n  }\n  if (Array.isArray(size)) {\n    return { width: size[0], height: size[1] === undefined ? size[0] : size[1] };\n  } else if (size instanceof Point) {\n    return { width: size.x, height: size.y };\n  } else if (typeof size === 'object') {\n    // cast as an object\n    const obj = size as { width: number; height: number };\n    return { width: obj.width || 0, height: obj.height || 0 };\n  } else {\n    return { width: size ?? 0, height: size ?? 0 };\n  }\n}\n\ntype DebouncedFunction<T extends (...args: any[]) => any> = (...args: Parameters<T>) => void;\n\n/**\n * Debounce a function\n * @param func - function to debounce\n * @param wait - time in milliseconds\n * @example const debounced = debounce(() => console.log('debounced'), 1000);\n * @example window.addEventListener('resize', debounced);\n */\nexport function debounce<T extends (...args: any[]) => any>(func: T, wait: number): DebouncedFunction<T> {\n  let timeoutId: any;\n  return function (...args: Parameters<T>) {\n    if (timeoutId !== undefined) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n      func(...args);\n    }, wait);\n  };\n}\n", "/**\n * Returns the map entry that comes before the entry with the provided key.\n * If the provided key is the first entry in the map or doesn't exist in the map, the function returns undefined.\n * @param {Map<K, V>} map The map to search in.\n * @param {any} currentKey The key of the map entry that comes after the desired entry.\n * @returns {[K, V] | undefined} The map entry that comes before the entry with the provided key, or undefined if such an entry doesn't exist.\n */\nexport function getPreviousMapEntry<K = any, V = any>(map: Map<K, V>, currentKey: any): [K, V] | undefined {\n  let previous: [any, any] | undefined;\n\n  for (const entry of map) {\n    if (entry[0] === currentKey) {\n      return previous;\n    }\n    previous = entry;\n  }\n  return undefined;\n}\n\n/**\n * Returns the map entry that comes after the entry with the provided key.\n * If the provided key is the first entry in the map or doesn't exist in the map, the function returns undefined.\n * @param {Map<K, V>} map The map to search in.\n * @param {any} currentKey The key of the map entry that comes after the desired entry.\n * @returns {[K, V] | undefined} The map entry that comes before the entry with the provided key, or undefined if such an entry doesn't exist.\n */\nexport function getNextMapEntry<K = any, V = any>(map: Map<K, V>, currentKey: any): [K, V] | undefined {\n  let next: [any, any] | undefined;\n  // go in reverse\n  const entries = Array.from(map.entries());\n  for (let i = entries.length - 1; i >= 0; i--) {\n    const entry = entries[i];\n    if (entry[0] === currentKey) {\n      return next;\n    }\n    next = entry;\n  }\n  return undefined;\n}\n\n/**\n * Returns the last entry in the provided map.\n * If the map is empty, the function returns undefined.\n * @param {Map<K, V>} map The map to get the last entry from.\n * @returns {[K, V] | undefined} The last entry in the map, or undefined if the map is empty.\n */\nexport function getLastMapEntry<K = any, V = any>(map: Map<K, V>): [K, V] | undefined {\n  return Array.from(map.entries()).pop() as [K, V];\n}\n\n/**\n * Returns the first entry in the provided map.\n * If the map is empty, the function returns undefined.\n * @param {Map<K, V>} map The map to get the last entry from.\n * @returns {[K, V] | undefined} The last entry in the map, or undefined if the map is empty.\n */\nexport function getFirstMapEntry<K = any, V = any>(map: Map<K, V>): [K, V] | undefined {\n  return Array.from(map.entries()).shift() as [K, V];\n}\n", "/**\n * Clamp a number\n * @param pValue\n * @param pMin\n * @param pMax\n */\nexport function clamp(pValue: number, pMin: number, pMax: number): number {\n  return Math.max(pMin, Math.min(pMax, pValue));\n}\n\n/**\n * lerp\n * @param pMin\n * @param pMax\n * @param pPerc\n */\nexport function lerp(pMin: number, pMax: number, pPerc: number): number {\n  return pMin + (pMax - pMin) * pPerc;\n}\n", "/**\n * Plucks the specified keys from an object and returns a new object with only those keys.\n * @template T The type of the original object.\n * @template K The keys to pluck from the original object.\n * @param {T} obj The original object.\n * @param {K[]} keys The keys to pluck from the original object.\n * @returns {Pick<T, K>} A new object with only the plucked keys.\n */\nexport function pluck<T extends object, K extends keyof T>(obj: T, keys: K[]): Pick<T, K> {\n  return keys.reduce((acc, key) => (key in obj ? { ...acc, [key]: obj[key] } : acc), {} as Pick<T, K>);\n}\n\n/**\n * Omits the specified keys from an object and returns a new object without those keys.\n * @template T The type of the original object.\n * @template K The keys to omit from the original object.\n * @param {K[]} keysToOmit The keys to omit from the original object.\n * @param {Partial<T>} obj The original object.\n * @returns {Omit<T, K>} A new object without the omitted keys.\n */\nexport function omitKeys<T extends object, K extends keyof T>(keysToOmit: K[], obj: Partial<T>): Omit<T, K> {\n  return Object.entries(obj)\n    .filter(([key]) => !keysToOmit.includes(key as K))\n    .reduce((acc, [key, value]) => ({ ...acc, [key]: value }), {} as Omit<T, K>);\n}\n", "import {Point, PointLike} from 'pixi.js';\nimport {PointLike as DillPixelPointLike} from './types';\nimport {lerp} from './math';\n\n/**\n * Add the x and the y values of two Points together and return a new point.\n * @returns Point\n * @aram a\n * @aram b\n */\nexport function add(a: PointLike, b: PointLike): Point {\n  return new Point(a.x + b.x, a.y + b.y);\n}\n\n/**\n * Increase the x,y of point A by the x,y of point B.\n * @aram a\n * @aram b\n */\nexport function addToPoint(a: PointLike, b: PointLike): void {\n  a.x += b.x;\n  a.y += b.y;\n}\n\n/**\n * Subtract the x and the y values of point B from Point A and return a new point.\n * @aram a\n * @aram b\n */\nexport function subtract(a: PointLike, b: PointLike): Point {\n  return new Point(a.x - b.x, a.y - b.y);\n}\n\n/**\n * Decrease the x,y of point A by the x,y of point B.\n * @aram a\n * @aram b\n */\nexport function subtractFromPoint(a: PointLike, b: PointLike): void {\n  a.x -= b.x;\n  a.y -= b.y;\n}\n\n/**\n * Multply the x,y values of a point by the provided value.\n * @aram a\n * @aram pMult\n */\nexport function multiply(a: PointLike, pMult: number): Point {\n  const point: Point = new Point(a.x, a.y);\n  point.x *= pMult;\n  point.y *= pMult;\n  return point;\n}\n\n/**\n *\n * @aram pt\n * @aram percent\n */\nexport function lerpPoint(pt: PointLike, percent: number): number {\n  return lerp(pt.x, pt.y, percent);\n}\n\n/**\n * Get the distance between two points.\n * @aram a\n * @aram b\n */\nexport function distance(a: PointLike, b: Point): number {\n  return Math.sqrt(distanceSq(a, b));\n}\n\n/**\n * Get the squared distance between two points.\n * @aram a\n * @aram b\n */\nexport function distanceSq(a: PointLike, b: Point): number {\n  return (b.x - a.x) * (b.x - a.x) + (b.y - a.y) * (b.y - a.y);\n}\n\n/**\n * Gets the magnitude of a point.\n * @aram pt\n */\nexport function magnitude(pt: PointLike): number {\n  return Math.sqrt(pt.x * pt.x + pt.y * pt.y);\n}\n\nexport type PointLikeResult = { x: number; y: number } | Point;\n\nexport function resolvePointLike(\n  position?: DillPixelPointLike,\n  asPoint?: false,\n  x?: number,\n  y?: number,\n): { x: number; y: number };\nexport function resolvePointLike(position?: DillPixelPointLike, asPoint?: true, x?: number, y?: number): Point;\nexport function resolvePointLike(\n  position?: DillPixelPointLike,\n  asPoint: boolean = false,\n  x: number = 0,\n  y: number = 0,\n): PointLikeResult {\n  if (position instanceof Point) {\n    x = position.x;\n    y = position.y;\n  } else if (Array.isArray(position)) {\n    x = position[0];\n    y = position[1] === undefined ? position[0] : position[1];\n  } else if (typeof position === 'object') {\n    // cast as an object\n    const obj = position as { x: number; y: number };\n    x = obj.x || 0;\n    y = obj.y || 0;\n  } else {\n    x = position ?? x;\n    y = position ?? y;\n  }\n\n  return asPoint ? new Point(x, y) : { x, y };\n}\n", "import {Point, PointLike, Rectangle} from 'pixi.js';\n\n/**\n *\n * @param rect\n * @param delta\n */\nexport function offset(rect: Rectangle, delta: Point): Rectangle {\n  rect.x += delta.x;\n  rect.y += delta.y;\n  return rect;\n}\n\n/**\n *\n * @param rect\n * @param output\n */\nexport function center(rect: Rectangle, output?: Point): Point {\n  if (output === undefined) {\n    output = new Point();\n  }\n  output.set(rect.x + rect.width * 0.5, rect.y + rect.height * 0.5);\n  return output;\n}\n\n/**\n * Scale a rectangle by a provided value\n * @param rect\n * @param scale\n */\nexport function scale(rect: Rectangle, scale: number): Rectangle {\n  rect.x *= scale;\n  rect.y *= scale;\n  rect.width *= scale;\n  rect.height *= scale;\n  return rect;\n}\n\n/**\n * Returns a `Point` representing the width and height of the input Rectangle\n * @param rect\n * @param output\n */\nexport function size(rect: Rectangle, output?: Point): PointLike {\n  if (output === undefined) {\n    output = new Point();\n  }\n  output.set(rect.width, rect.height);\n  return output;\n}\n", "type MethodNames = {\n  [key: string]: any;\n};\n\n/**\n * Binds the provided methods to the provided instance.\n * @param instance - The instance to which the methods should be bound.\n * @param methodNames - The names of the methods to bind.\n */\nexport function bindMethods(instance: unknown, ...methodNames: string[]) {\n  methodNames.forEach((methodName) => {\n    const method = (instance as MethodNames)[methodName];\n    if (typeof method === 'function') {\n      (instance as MethodNames)[methodName] = method.bind(instance);\n    }\n  });\n}\n\n/**\n * Retrieves the names of all methods in an instance's prototype chain.\n * @param instance - The instance from which to retrieve method names.\n * @param excludePrefixes - An array of prefixes to exclude from the method names.\n * @param excludeMethodNames - An array of method names to exclude.\n * @returns An array of method names.\n */\nfunction getInstanceMethodNames(\n  instance: any,\n  excludePrefixes: string[] = [],\n  excludeMethodNames: string[] = [],\n): string[] {\n  let prototype = Object.getPrototypeOf(instance);\n  const methodNames: string[] = [];\n\n  while (prototype) {\n    const filteredMethodNames = Object.getOwnPropertyNames(prototype).filter((propertyName) => {\n      const ownDescriptor = Object.getOwnPropertyDescriptor(prototype, propertyName);\n      return (\n        typeof ownDescriptor?.value === 'function' &&\n        propertyName !== 'constructor' &&\n        !excludePrefixes.some((prefix) => propertyName.startsWith(prefix)) &&\n        !excludeMethodNames.includes(propertyName)\n      );\n    });\n\n    methodNames.push(...filteredMethodNames);\n\n    if (prototype === Object.prototype || Object.prototype.hasOwnProperty.call(prototype.constructor, '__dill_pixel_method_binding_root')) {\n      break;\n    }\n\n    prototype = Object.getPrototypeOf(prototype);\n  }\n\n  return methodNames;\n}\n\n/**\n * Binds all methods of an instance to the instance.\n * @param instance - The instance to which the methods should be bound.\n * @param excludePrefixes - An array of prefixes to exclude from the method names.\n * @param excludeMethodNames - An array of method names to exclude.\n */\nexport function bindAllMethods(instance: any, excludePrefixes: string[] = [], excludeMethodNames: string[] = []) {\n  getInstanceMethodNames(instance, excludePrefixes, excludeMethodNames).forEach((methodName) => {\n    instance[methodName] = instance[methodName].bind(instance);\n  });\n}\n\n/**\n * Checks if a method exists on an object and, if it does, invokes it with the provided arguments.\n * @param obj - The object on which to check for the method.\n * @param methodName - The name of the method to check for and invoke.\n * @param methodArgs - The arguments to pass to the method.\n */\nexport function checkAndInvokeMethod(obj: any, methodName: string, ...methodArgs: any[]): void {\n  if (typeof obj[methodName] === 'function') {\n    obj[methodName](...methodArgs);\n  }\n}\n", "import {Point} from 'pixi.js';\n\n/**\n * Find a float between two numbers, inclusive of {@param min} and exclusive of {@param max}.\n * @param min\n * @param max\n * @returns number\n */\nexport function floatBetween(min: number, max: number): number {\n  return min + Math.random() * (max - min);\n}\n\n/**\n * Find a float between the x,y of a Point\n * @param pt\n * @returns number\n */\nexport function floatBetweenPoint(pt: Point): number {\n  return floatBetween(pt.x, pt.y);\n}\n\n/**\n * Find an integer between two numbers, inclusive of {@param min} and exclusive of {@param max}.\n * @param min\n * @param max\n * @returns number\n */\nexport function intBetween(min: number, max: number): number {\n  return Math.floor(floatBetween(min, max));\n}\n\n/**\n * Find an int between the x,y of a Point\n * @param pt\n * @returns number\n */\nexport function intBetweenPoint(pt: Point): number {\n  return intBetween(pt.x, pt.y);\n}\n\n/**\n * Get a random boolean value\n * @returns boolean\n */\nexport function bool(): boolean {\n  return Math.random() < 0.5;\n}\n", "import {intBetween} from './random';\n\n/**\n * Shuffle an array.\n * @param array\n */\nexport function shuffle<T>(array: T[]): void {\n  let temp: T;\n  let index: number;\n  for (let i = 0; i < array.length; ++i) {\n    index = intBetween(0, array.length);\n    temp = array[i];\n    array[i] = array[index];\n    array[index] = temp;\n  }\n}\n\n/**\n * Get a random array element.\n * @param array\n */\nexport function getRandomElement<T>(array: T[]): T {\n  return array[intBetween(0, array.length)];\n}\n", "import type { Padding, PointLike } from './types';\n\nexport function resolvePadding(paddingNum: number, size: number) {\n  // check of the paddingNum is a decimal between 0 and 1\n  // if it is, return a number that is the percentage of the size\n  if (paddingNum >= 0 && paddingNum <= 1) {\n    return paddingNum * size;\n  }\n  return paddingNum;\n}\n\nexport function ensurePadding(padding: Partial<Padding> | PointLike): Padding {\n  if (Array.isArray(padding)) {\n    return {\n      top: padding[0],\n      right: padding?.[1] ?? padding[0],\n      bottom: padding?.[2] ?? padding[0],\n      left: padding?.[3] ?? padding?.[1] ?? padding[0] ?? 0,\n    };\n  }\n  if (typeof padding === 'number') {\n    return { top: padding, right: padding, bottom: padding, left: padding };\n  } else if (typeof padding === 'object') {\n    const paddingAsPointLike = padding as { x?: number; y?: number };\n    if (paddingAsPointLike.x !== undefined && paddingAsPointLike.y !== undefined) {\n      return {\n        top: paddingAsPointLike.y,\n        right: paddingAsPointLike.x,\n        bottom: paddingAsPointLike.y,\n        left: paddingAsPointLike.x,\n      };\n    } else {\n      return {\n        top: (padding as Padding).top ?? 0,\n        right: (padding as Padding).right ?? 0,\n        bottom: (padding as Padding).bottom ?? 0,\n        left: (padding as Padding).left ?? 0,\n      };\n    }\n  } else {\n    return { top: 0, right: 0, bottom: 0, left: 0 };\n  }\n}\n", "import { isMobile as PIXIUtilsIsMobile } from 'pixi.js';\n\n/**\n * Checks if the device has a retina display.\n * A device is considered to have a retina display if its device pixel ratio is greater than 1,\n * or if it matches the media query for high resolution displays.\n * @type {boolean}\n */\nexport const isRetina =\n  window.devicePixelRatio > 1 ||\n  (window.matchMedia &&\n    window.matchMedia(\n      '(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)',\n    ).matches);\n\n/**\n * Check if we're on a touch device\n */\nexport const isTouch: boolean =\n  'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator?.maxTouchPoints > 0;\n\n/**\n * Checks if the device is a mobile device.\n * This uses the `isMobile` function from the `@pixi/utils` package.\n * @type {boolean}\n */\nexport const isMobile = PIXIUtilsIsMobile.any;\n\nexport const isAndroid = PIXIUtilsIsMobile.android.device;\nexport const isIos = PIXIUtilsIsMobile.apple.device;\n", "export function getZeroPaddedNumber(num: number, zeroPad: number = 0): string {\n  return num.toString().padStart(zeroPad, '0');\n}\n", "import { CanvasTextMetrics, FederatedEvent, Point, Text } from 'pixi.js';\n\nexport function getNearestCharacterIndex(text: Text, e: FederatedEvent): number {\n  const metrics = CanvasTextMetrics.measureText(text.text, text.style);\n  const lines = metrics.lines;\n  const lineHeight = metrics.lineHeight;\n  const position = text.toLocal(new Point(e.pageX, e.pageY));\n\n  let closestIndex = 0;\n  let minDistance = Infinity;\n\n  let currentIndex = 0;\n  for (let i = 0; i < lines.length; i++) {\n    const lineText = lines[i];\n    for (let j = 0; j <= lineText.length; j++) {\n      const subText = lineText.substring(0, j);\n      const lineMetrics = CanvasTextMetrics.measureText(subText, text.style);\n      const charX = lineMetrics.width;\n      const charY = i * lineHeight;\n      const distance = Math.hypot(charX - position.x, charY - position.y);\n      if (distance < minDistance) {\n        minDistance = distance;\n        closestIndex = currentIndex + j;\n      }\n    }\n    currentIndex += lineText.length;\n  }\n\n  return closestIndex;\n}\n", "export function toHex(color: number): string {\n  return `#${color.toString(16)}`;\n}\n\n// return a uint color from a hex string\nexport function toRgb(hex: string): number {\n  return parseInt(hex.replace(/^#/, ''), 16);\n}\n\nexport class Color {\n  public static readonly WHITE: Color = new Color(255, 255, 255);\n  public static readonly BLACK: Color = new Color(0, 0, 0);\n  public static readonly GREY: Color = new Color(127, 127, 127);\n  public static readonly RED: Color = new Color(255, 0, 0);\n  public static readonly GREEN: Color = new Color(0, 255, 0);\n  public static readonly BLUE: Color = new Color(0, 0, 255);\n  public static readonly YELLOW: Color = new Color(255, 255, 0);\n  public static readonly MAGENTA: Color = new Color(255, 0, 255);\n  public static readonly CYAN: Color = new Color(0, 255, 255);\n\n  public r: number;\n  public g: number;\n  public b: number;\n\n  /**\n   * A Color reresented by a red, green and blue component.\n   * @param r The red component of the Color OR the full Color in HEX.\n   * @param g The green component of the Color.\n   * @param b The blue component of the Color.\n   */\n  constructor(r?: number, g?: number, b?: number) {\n    if (r !== undefined && g === undefined) {\n      // tslint:disable-next-line no-bitwise\n      this.r = (r & (255 << 16)) >> 16;\n      // tslint:disable-next-line no-bitwise\n      this.g = (r & (255 << 8)) >> 8;\n      // tslint:disable-next-line no-bitwise\n      this.b = r & 255;\n    } else {\n      this.r = r || 0;\n      this.g = g || 0;\n      this.b = b || 0;\n    }\n  }\n\n  /**\n   * Creates a random Color.\n   * @returns The new Color.\n   */\n  public static random(): Color {\n    return new Color(Math.random() * 255, Math.random() * 255, Math.random() * 255);\n  }\n\n  /**\n   * Converts the rgb values passed in to hex.\n   * @param r The red component to convert.\n   * @param g The green component to convert.\n   * @param b The blue component to convert.\n   * @returns The hex value.\n   */\n  public static rgbToHex(r: number, g: number, b: number): number {\n    // tslint:disable-next-line no-bitwise\n    return (r << 16) | (g << 8) | b;\n  }\n\n  public static rgbToHexString(pNumber: number): string {\n    let hex = Number(pNumber).toString(16);\n    if (hex.length < 2) {\n      hex = '0' + hex;\n    }\n\n    return hex;\n  }\n\n  public static rgbToFullHexString(r: number, g: number, b: number): string {\n    const rStr: string = Color.rgbToHexString(r);\n    const gStr: string = Color.rgbToHexString(g);\n    const bStr: string = Color.rgbToHexString(b);\n\n    return rStr + gStr + bStr;\n  }\n\n  /**\n   * Creates a new Color that is linearly interpolated from @var pA to @var b .\n   * @param pA The start Color.\n   * @param b The end Color.\n   * @param pPerc The percentage on the path from @var pA to @var b .\n   * @returns The new Color.\n   */\n  public static lerp(pA: Color, b: Color, pPerc: number): Color {\n    return new Color(pA.r + pPerc * (b.r - pA.r), pA.g + pPerc * (b.g - pA.g), pA.b + pPerc * (b.b - pA.b));\n  }\n\n  /**\n   * Creates a new hex Color that is linearly interpolated from @var pA to @var b .\n   * @param pA The first Color hex.\n   * @param b The second Color hex.\n   * @param pPerc The percentage along the path from @var pA to @var b .\n   * @returns The new hex Color.\n   */\n  public static lerpHex(pA: number, b: number, pPerc: number): number {\n    const colorA: Color = new Color(pA);\n    const colorB: Color = new Color(b);\n    return Color.lerp(colorA, colorB, pPerc).toHex();\n  }\n\n  /**\n   * Convert this Color to hex.\n   * @returns The Color in hex format.\n   */\n  public toHex(): number {\n    return Color.rgbToHex(this.r, this.g, this.b);\n  }\n\n  public toHexString(): string {\n    return Color.rgbToFullHexString(this.r, this.g, this.b);\n  }\n\n  /**\n   * Converts the Color components to the 0...1 range.\n   * @returns The new Color.\n   */\n  public toWebGL(): number[] {\n    return [this.r / 255, this.g / 255, this.b / 255];\n  }\n}\n", "import { Circle, Container, ContainerChild, Ellipse, Point, Polygon, Rectangle, RoundedRectangle } from 'pixi.js';\nimport { PointLike, Size } from './types';\nimport { resolvePointLike } from './point';\n\nexport type PixiSimpleShape = Rectangle | Circle | Ellipse | RoundedRectangle;\nexport type PixiShape = PixiSimpleShape | Polygon;\n\n/**\n * Reassigns the displays object parent while maintaing it's world position\n * @param pChild\n * @param pParent\n */\nexport function reParent(pChild: ContainerChild, pParent: Container): void {\n  pChild.parent.worldTransform.apply(pChild.position as Point, pChild.position as Point);\n  pParent.worldTransform.applyInverse(pChild.position as Point, pChild.position as Point);\n  pChild.parent.removeChild(pChild);\n  pParent.addChild(pChild);\n}\n\n/**\n *\n * @param pObject\n */\nexport function objectDiagonal(pObject: Container): number {\n  return Math.sqrt(pObject.width * pObject.width + pObject.height * pObject.height);\n}\n\n/**\n * Removes provided object from its parent and re-adds it.\n * @param pObject The object to send to the back.\n */\nexport function sendToFront(pObject: Container): void {\n  const parent: Container = pObject.parent;\n  parent.removeChild(pObject);\n  parent.addChild(pObject);\n}\n\n/**\n * Removes provided object from its parent and re-adds it at index 0.\n * @param pObject The object to send to the back.\n */\nexport function sendToBack(pObject: Container): void {\n  const parent: Container = pObject.parent;\n  parent.removeChild(pObject);\n  parent.addChildAt(pObject, 0);\n}\n\n/**\n *\n * @param pShape\n * @param pDelta\n */\nexport function offsetShape(pShape: PixiShape, pDelta: Point): PixiShape {\n  if (pShape instanceof Polygon) {\n    for (let i = 0; i < pShape.points.length; i += 2) {\n      pShape.points[i] += pDelta.x;\n      pShape.points[i + 1] += pDelta.y;\n    }\n    return pShape;\n  } else {\n    pShape.x += pDelta.x;\n    pShape.y += pDelta.y;\n    return pShape;\n  }\n}\n\n/**\n *\n * @param pShape\n * @param pDelta\n */\nexport function offsetSimpleShape(pShape: PixiSimpleShape, pDelta: Point): PixiSimpleShape {\n  pShape.x += pDelta.x;\n  pShape.y += pDelta.y;\n  return pShape;\n}\n\nexport function scaleUniform(obj: any, scaleNum: number, scaleProp: 'width' | 'height' = 'width') {\n  const scaleVal: 'x' | 'y' = scaleProp === 'width' ? 'y' : 'x';\n  const otherScaleVal: 'x' | 'y' = scaleProp === 'width' ? 'x' : 'y';\n  obj[scaleProp] = scaleNum;\n  obj.scale[scaleVal] = obj.scale[otherScaleVal];\n}\n\nexport function scaleToWidth(obj: Container, width: number) {\n  scaleUniform(obj, width, 'width');\n}\n\nexport function scaleToHeight(obj: Container, height: number) {\n  scaleUniform(obj, height, 'height');\n}\n\nexport function scaleToSize(obj: Container, size: PointLike | Size, firstProp: 'width' | 'height' = 'width') {\n  let resolvedSize;\n  if ((size as Size)?.width && (size as Size)?.height) {\n    resolvedSize = { x: (size as Size).width, y: (size as Size).height };\n  } else {\n    resolvedSize = resolvePointLike(size as PointLike);\n  }\n\n  if (firstProp === 'width') {\n    scaleToWidth(obj, resolvedSize.x);\n    if (obj.height < resolvedSize.y) {\n      scaleToHeight(obj, resolvedSize.y);\n    }\n  } else {\n    scaleToHeight(obj, resolvedSize.y);\n    if (obj.width < resolvedSize.x) {\n      scaleToWidth(obj, resolvedSize.x);\n    }\n  }\n}\n", "export function destroyCanvas(canvas: HTMLCanvasElement | OffscreenCanvas) {\n  const gl = canvas.getContext('webgl');\n  if (gl) {\n    const extension = gl.getExtension('WEBGL_lose_context');\n    if (extension) {\n      extension.loseContext();\n    }\n  }\n  // If you are using a 2D context, there's no direct resource release method,\n  // but you should ensure all operations are complete before nullifying the canvas\n  const ctx = canvas.getContext('2d');\n  if (ctx) {\n    // Perform any necessary cleanup tasks for 2D context\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  }\n  if (!(canvas instanceof OffscreenCanvas)) {\n    if (canvas.parentNode) {\n      canvas.parentNode.removeChild(canvas);\n    }\n  }\n  canvas.width = 0;\n  canvas.height = 0;\n\n  // @ts-expect-error canvas can't be null;\n  canvas = null;\n}\n", "/**\n * Filters a Set based on the provided filter function.\n * @param set The original Set to filter.\n * @param filterFunction The function used to filter the Set.\n * @returns A new Set containing only the elements that satisfy the filter function.\n */\nexport function filterSet<T>(set: Set<T>, filterFunction: (item: T) => boolean): Set<T> {\n  const filteredSet = new Set<T>();\n  for (const item of set) {\n    if (filterFunction(item)) {\n      filteredSet.add(item);\n    }\n  }\n  return filteredSet;\n}\n\nexport function firstFromSet<T = any>(set: Set<T>): T | undefined {\n  return set?.values().next().value;\n}\n\n/**\n * Gets the last element of a Set.\n * @param set The Set from which to retrieve the last element.\n * @returns The last element of the Set, or undefined if the Set is empty.\n */\nexport function lastFromSet<T>(set: Set<T>): T | undefined {\n  let lastElement: T | undefined = undefined;\n  for (const item of set) {\n    lastElement = item;\n  }\n  return lastElement;\n}\n", "import { AssetsManifest } from 'pixi.js';\nimport { IPlugin, PluginListItem } from '../plugins/Plugin';\nimport { DataSchema, IStorageAdapter, StorageAdapterListItem } from '../store';\nimport { ImportList, Logger } from '../utils';\nimport { AppConfig } from './types';\n\nexport type PluginOrAdapterConfig = string | [string, { autoLoad?: boolean; options?: any }];\n\nexport async function generatePluginList<T extends IPlugin = IPlugin>(\n  plugins: PluginOrAdapterConfig[],\n): Promise<ImportList<T>> {\n  const globalThisAsAny = globalThis as any;\n  const pluginsList: PluginListItem[] = globalThisAsAny.getDillPixel('pluginsList') || [];\n\n  return plugins\n    .map((plugin) => {\n      const p = pluginsList.find((p) => p.id === plugin || p.id === plugin[0]);\n      if (!p) {\n        Logger.warn(`Plugin ${plugin} not found`);\n        return null;\n      }\n      const pluginAsArray = plugin as [string, { autoLoad?: boolean; options?: any }];\n      console.log({ p });\n      return {\n        id: p.id,\n        path: p.path,\n        module: p.module,\n        options: pluginAsArray[1]?.options,\n        autoLoad: pluginAsArray[1]?.autoLoad === false ? false : true,\n      };\n    })\n    .filter(Boolean) as ImportList<T>;\n}\n\nexport async function generateAdapterList<T extends IStorageAdapter = IStorageAdapter>(\n  adapters: PluginOrAdapterConfig[],\n): Promise<ImportList<T>> {\n  const globalThisAsAny = globalThis as any;\n  const storageAdaptersList: StorageAdapterListItem[] = globalThisAsAny.getDillPixel('storageAdaptersList') || [];\n\n  return adapters\n    .map((adapter) => {\n      const a = storageAdaptersList.find((a) => a.id === adapter || a.id === adapter[0]);\n      if (!a) {\n        Logger.warn(`Storage Adapter ${adapter} not found`);\n        return null;\n      }\n      const adapterAsArray = adapter as [string, { autoLoad?: boolean; options?: any }];\n      return {\n        id: a.id,\n        path: a.path,\n        module: a.module,\n        options: adapterAsArray[1]?.options,\n        autoLoad: adapterAsArray[1]?.autoLoad === false ? false : true,\n      };\n    })\n    .filter(Boolean) as ImportList<T>;\n}\n\nexport function defineConfig<D extends DataSchema = DataSchema>(config: Partial<AppConfig<D>>): AppConfig<D> {\n  // Provide sensible defaults\n  return {\n    id: 'DillPixelApplication',\n    showStats: false,\n    showSceneDebugMenu: false,\n    useHash: false,\n    useSpine: false,\n    useVoiceover: false,\n    defaultSceneLoadMethod: 'immediate',\n    data: {\n      initial: {} as D,\n      backupAll: false,\n    },\n    assets: {\n      manifest: {} as unknown as string | AssetsManifest | Promise<AssetsManifest> | undefined,\n      preload: {\n        bundles: ['required'],\n      },\n      background: {\n        bundles: [],\n      },\n    },\n    plugins: [],\n    scenes: [],\n    ...config,\n  };\n}\n", "// This file is auto-generated during the build process.\nexport const version: string = '8.18.2';\nexport const pixiVersion: string = '8.6.6';\n", "import { pixiVersion, version } from './version';\n\nexport function sayHello() {\n  const hello = `%c Dill Pixel Game Framework v${version} | %cPixi.js v${pixiVersion} %c| %chttps://dillpixel.io `;\n  console.log(\n    hello,\n    'background: rgba(31, 41, 55, 1);color: #74b64c',\n    'background: rgba(31, 41, 55, 1);color: #e91e63',\n    'background: rgba(31, 41, 55, 1);color: #74b64c',\n    'background: rgba(31, 41, 55, 1);color: #74b64c; font-weight: bold',\n  );\n}\n", "import { Application } from '../Application';\nimport { sayHello } from '../hello';\nimport { DataSchema } from '../store';\nimport { delay } from '../utils';\nimport { IApplication } from './interfaces';\nimport { AppConfig } from './types';\n\nexport const DEFAULT_GAME_CONTAINER_ID = 'dill-pixel-game-container';\n\nexport function createContainer(id: string) {\n  const container = document.createElement('div');\n  container.setAttribute('id', id);\n  document.body.appendChild(container);\n  return container;\n}\n\nexport async function create<T extends IApplication = Application, D extends DataSchema = DataSchema>(\n  config: AppConfig<D> = { id: 'DillPixelApplication' },\n  ApplicationClass: new () => IApplication = Application,\n  domElement: string | Window | HTMLElement = DEFAULT_GAME_CONTAINER_ID,\n  speak: boolean = true,\n): Promise<T> {\n  if (speak) {\n    sayHello();\n  }\n  let el: HTMLElement | null = null;\n  if (typeof domElement === 'string') {\n    el = document.getElementById(domElement);\n    if (!el) {\n      el = createContainer(domElement);\n    }\n  } else if (domElement instanceof HTMLElement) {\n    el = domElement;\n  } else if (domElement === window) {\n    el = document.body;\n  }\n  if (!el) {\n    // no element to use\n    throw new Error(\n      'You passed in a DOM Element, but none was found. If you instead pass in a string, a container will be created for you, using the string for its id.',\n    );\n  }\n  if (config.resizeToContainer) {\n    config.resizeTo = el;\n  }\n  config.container = el;\n  const instance = new ApplicationClass();\n  await instance.initialize(config as AppConfig<DataSchema>);\n  if (el) {\n    el.appendChild(instance.canvas as HTMLCanvasElement);\n    instance.setContainer(el);\n  } else {\n    throw new Error('No element found to append the view to.');\n  }\n  // ensure all plugins are initialized\n  await delay(0.01);\n\n  // call postInitialize on the instance\n  await instance.postInitialize();\n\n  // return the app instance\n  return instance as T;\n}\n", "import type { ICoreFunctions, ICoreSignals } from './interfaces';\n\n// @ts-expect-error - we don't know what the keys are, so we can't type them\nexport const coreSignalRegistry: { [K in keyof ICoreSignals]: ICoreSignals[K] } = {};\n\n// @ts-expect-error - we don't know what the keys are, so we can't type them\nexport const coreFunctionRegistry: { [K in keyof ICoreFunctions]: ICoreFunctions[K] } = {};\n", "import type {IApplication} from '../core';\nimport {Logger} from '../utils';\nimport type {IStorageAdapter} from './adapters';\n\n/**\n * Configuration for saving data with an adapter.\n */\ntype AdapterSaveConfig = {\n  adapterId: string;\n  awaitSave: boolean;\n};\n\n/**\n * Interface for the Store class.\n */\nexport interface IStore {\n  initialize(app: IApplication): IStore;\n\n  destroy(): void;\n\n  registerAdapter(adapter: IStorageAdapter, adapterOptions: any): void;\n\n  getAdapter<T extends IStorageAdapter = IStorageAdapter>(adapterId: string): T;\n\n  hasAdapter(adapterId: string): boolean;\n\n  save(\n    adapterId: string | string[] | Partial<AdapterSaveConfig>[],\n    key: string,\n    data: any,\n    awaitSave?: boolean,\n  ): Promise<any>;\n\n  load(adapterId: string, key: string): Promise<any>;\n}\n\n/**\n * A class representing a store of data, with multiple storage adapters.\n */\nexport class Store implements IStore {\n  private _app: IApplication;\n  private _adapters: Map<string, IStorageAdapter> = new Map<string, IStorageAdapter>();\n\n  /**\n   * Registers a new storage adapter with the store.\n   * @param {IStorageAdapter} adapter The adapter to register.\n   * @param {any} adapterOptions The options to initialize the adapter with.\n   * @returns {Promise<void>} A promise that resolves when the adapter has been registered and initialized.\n   */\n  async registerAdapter(adapter: IStorageAdapter, adapterOptions: any): Promise<void> {\n    if (this._adapters.has(adapter.id)) {\n      Logger.error(`Storage Adapter with id \"${adapter.id}\" already registered. Not registering.`);\n      return Promise.resolve();\n    }\n    this._adapters.set(adapter.id, adapter);\n    await adapter.initialize(this._app, adapterOptions);\n  }\n\n  /**\n   * Retrieves a registered storage adapter.\n   * @template T The type of the adapter.\n   * @param {string} adapterId The ID of the adapter.\n   * @returns {T} The adapter.\n   */\n  getAdapter<T extends IStorageAdapter = IStorageAdapter>(adapterId: string): T {\n    const adapter = this._adapters.get(adapterId);\n    if (!adapter) {\n      throw new Error(`Adapter ${adapterId} not found`);\n    }\n    return adapter as T;\n  }\n\n  /**\n   * Checks if a storage adapter is registered.\n   * @param {string} adapterId The ID of the adapter.\n   * @returns {boolean} True if the adapter is registered, false otherwise.\n   */\n  hasAdapter(adapterId: string): boolean {\n    return this._adapters.has(adapterId);\n  }\n\n  /**\n   * Destroys the store and all its adapters.\n   */\n  destroy(): void {\n    this._adapters.forEach((adapter) => {\n      adapter.destroy();\n    });\n    this._adapters.clear();\n  }\n\n  /**\n   * Saves data with a storage adapter.\n   * @param {string | string[] | Partial<AdapterSaveConfig> | Partial<AdapterSaveConfig>[]} adapterId The ID of the adapter, or an array of IDs, or an array of save configurations.\n   * @param {string} key The key to save the data under.\n   * @param {any} data The data to save.\n   * @param {boolean} [awaitSave] Whether to wait for the save operation to complete before returning.\n   * @returns {Promise<any>} A promise that resolves with the result of the save operation.\n   */\n  async save(\n    adapterId: string | string[] | Partial<AdapterSaveConfig> | Partial<AdapterSaveConfig>[],\n    key: string,\n    data: any,\n    awaitSave = true,\n  ): Promise<any> {\n    let keys: string[] | Partial<AdapterSaveConfig>[] = [];\n    const result = [];\n\n    if (!Array.isArray(adapterId)) {\n      if (typeof adapterId === 'object') {\n        keys = [adapterId];\n      } else {\n        keys = [adapterId as string];\n      }\n    }\n\n    if ((keys[0] as string) === '*' || (keys[0] as Partial<AdapterSaveConfig>)?.adapterId === '*') {\n      // use all adapter\n      keys = Array.from(this._adapters.keys());\n    }\n    for (let i = 0; i < keys.length; i++) {\n      let aKey: string;\n      let shouldAwait: boolean = false;\n      if (typeof keys[i] === 'object') {\n        const obj = keys[i] as Partial<AdapterSaveConfig>;\n        aKey = obj.adapterId as string;\n        shouldAwait = obj.awaitSave ?? false;\n      } else {\n        aKey = keys[i] as unknown as string;\n        shouldAwait = awaitSave;\n      }\n      const adapter = this._adapters.get(aKey);\n      if (!adapter) {\n        throw new Error(`Adapter ${keys[i]} not found`);\n      }\n\n      if (shouldAwait) {\n        result.push(await adapter.save(key, data));\n      } else {\n        result.push(void adapter.save(key, data));\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Loads data from a storage adapter.\n   * @param {string} adapterId The ID of the adapter.\n   * @param {string} key The key to load the data from.\n   * @returns {Promise<any>} A promise that resolves with the loaded data.\n   */\n  public async load(adapterId: string, key: string): Promise<any> {\n    const adapter = this._adapters.get(adapterId);\n    if (!adapter) {\n      throw new Error(`Adapter ${adapterId} not found`);\n    }\n    return await adapter.load(key);\n  }\n\n  public initialize(app: IApplication): IStore {\n    this._app = app;\n    return this;\n  }\n}\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Collector = void 0;\n/**\n * Base class for collectors.\n *\n * @typeparam THandler The function signature to be implemented by handlers.\n */\nclass Collector {\n    /**\n     * Create a new collector.\n     *\n     * @param signal The signal to emit.\n     */\n    constructor(signal) {\n        // eslint-disable-next-line dot-notation\n        this.emit = (...args) => {\n            // eslint-disable-next-line dot-notation\n            signal[\"emitCollecting\"](this, args);\n        };\n    }\n}\nexports.Collector = Collector;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CollectorArray = void 0;\nconst Collector_1 = require(\"./Collector\");\n/**\n * Returns the result of the all signal handlers from a signal emission in an array.\n *\n * @typeparam THandler The function signature to be implemented by handlers.\n */\nclass CollectorArray extends Collector_1.Collector {\n    constructor() {\n        super(...arguments);\n        this.result = [];\n    }\n    handleResult(result) {\n        this.result.push(result);\n        return true;\n    }\n    /**\n     * Get the list of results from the signal handlers.\n     */\n    getResult() {\n        return this.result;\n    }\n    /**\n     * Reset the result\n     */\n    reset() {\n        this.result.length = 0;\n    }\n}\nexports.CollectorArray = CollectorArray;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CollectorLast = void 0;\nconst Collector_1 = require(\"./Collector\");\n/**\n * Returns the result of the last signal handler from a signal emission.\n *\n * @typeparam THandler The function signature to be implemented by handlers.\n */\nclass CollectorLast extends Collector_1.Collector {\n    handleResult(result) {\n        this.result = result;\n        return true;\n    }\n    /**\n     * Get the result of the last signal handler.\n     */\n    getResult() {\n        return this.result;\n    }\n    /**\n     * Reset the result\n     */\n    reset() {\n        delete this.result;\n    }\n}\nexports.CollectorLast = CollectorLast;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CollectorUntil0 = void 0;\nconst Collector_1 = require(\"./Collector\");\n/**\n * Keep signal emissions going while all handlers return true.\n *\n * @typeparam THandler The function signature to be implemented by handlers.\n */\nclass CollectorUntil0 extends Collector_1.Collector {\n    constructor() {\n        super(...arguments);\n        this.result = false;\n    }\n    handleResult(result) {\n        this.result = result;\n        return this.result;\n    }\n    /**\n     * Get the result of the last signal handler.\n     */\n    getResult() {\n        return this.result;\n    }\n    /**\n     * Reset the result\n     */\n    reset() {\n        this.result = false;\n    }\n}\nexports.CollectorUntil0 = CollectorUntil0;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CollectorWhile0 = void 0;\nconst Collector_1 = require(\"./Collector\");\n/**\n * Keep signal emissions going while all handlers return false.\n *\n * @typeparam THandler The function signature to be implemented by handlers.\n */\nclass CollectorWhile0 extends Collector_1.Collector {\n    constructor() {\n        super(...arguments);\n        this.result = false;\n    }\n    handleResult(result) {\n        this.result = result;\n        return !this.result;\n    }\n    /**\n     * Get the result of the last signal handler.\n     */\n    getResult() {\n        return this.result;\n    }\n    /**\n     * Reset the result\n     */\n    reset() {\n        this.result = false;\n    }\n}\nexports.CollectorWhile0 = CollectorWhile0;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SignalConnectionImpl = void 0;\n/**\n * Implementation of SignalConnection, for internal use only.\n * @private\n */\nclass SignalConnectionImpl {\n    /**\n     * @param link The actual link of the connection.\n     * @param parentCleanup Callback to cleanup the parent signal when a connection is disconnected\n     */\n    constructor(link, parentCleanup) {\n        this.link = link;\n        this.parentCleanup = parentCleanup;\n    }\n    disconnect() {\n        if (this.link !== null) {\n            this.link.unlink();\n            this.link = null;\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this.parentCleanup();\n            this.parentCleanup = null;\n            return true;\n        }\n        return false;\n    }\n    set enabled(enable) {\n        if (this.link)\n            this.link.setEnabled(enable);\n    }\n    get enabled() {\n        // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n        return this.link !== null && this.link.isEnabled();\n    }\n}\nexports.SignalConnectionImpl = SignalConnectionImpl;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SignalLink = void 0;\n/**\n * SignalLink implements a doubly-linked ring with nodes containing the signal handlers.\n * @private\n */\nclass SignalLink {\n    constructor(prev = null, next = null, order = 0) {\n        this.enabled = true;\n        this.newLink = false;\n        this.callback = null;\n        this.prev = prev !== null && prev !== void 0 ? prev : this;\n        this.next = next !== null && next !== void 0 ? next : this;\n        this.order = order;\n    }\n    isEnabled() {\n        return this.enabled && !this.newLink;\n    }\n    setEnabled(flag) {\n        this.enabled = flag;\n    }\n    unlink() {\n        this.callback = null;\n        this.next.prev = this.prev;\n        this.prev.next = this.next;\n    }\n    insert(callback, order) {\n        let after = this.prev;\n        while (after !== this) {\n            if (after.order <= order)\n                break;\n            after = after.prev;\n        }\n        const link = new SignalLink(after, after.next, order);\n        link.callback = callback;\n        after.next = link;\n        link.next.prev = link;\n        return link;\n    }\n}\nexports.SignalLink = SignalLink;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Signal = void 0;\nconst SignalConnection_1 = require(\"./SignalConnection\");\nconst SignalLink_1 = require(\"./SignalLink\");\n/**\n * A signal is a way to publish and subscribe to events.\n *\n * @typeparam THandler The function signature to be implemented by handlers.\n */\nclass Signal {\n    constructor() {\n        this.head = new SignalLink_1.SignalLink();\n        this.hasNewLinks = false;\n        this.emitDepth = 0;\n        this.connectionsCount = 0;\n    }\n    /**\n     * @returns The number of connections on this signal.\n     */\n    getConnectionsCount() {\n        return this.connectionsCount;\n    }\n    /**\n     * @returns true if this signal has connections.\n     */\n    hasConnections() {\n        return this.connectionsCount > 0;\n    }\n    /**\n     * Subscribe to this signal.\n     *\n     * @param callback This callback will be run when emit() is called.\n     * @param order Handlers with a higher order value will be called later.\n     */\n    connect(callback, order = 0) {\n        this.connectionsCount++;\n        const link = this.head.insert(callback, order);\n        if (this.emitDepth > 0) {\n            this.hasNewLinks = true;\n            link.newLink = true;\n        }\n        return new SignalConnection_1.SignalConnectionImpl(link, () => this.decrementConnectionCount());\n    }\n    decrementConnectionCount() {\n        this.connectionsCount--;\n    }\n    /**\n     * Unsubscribe from this signal with the original callback instance.\n     * While you can use this method, the SignalConnection returned by connect() will not be updated!\n     *\n     * @param callback The callback you passed to connect().\n     */\n    disconnect(callback) {\n        for (let link = this.head.next; link !== this.head; link = link.next) {\n            if (link.callback === callback) {\n                this.decrementConnectionCount();\n                link.unlink();\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Disconnect all handlers from this signal event.\n     */\n    disconnectAll() {\n        while (this.head.next !== this.head) {\n            this.head.next.unlink();\n        }\n        this.connectionsCount = 0;\n    }\n    /**\n     * Publish this signal event (call all handlers).\n     */\n    emit(...args) {\n        this.emitDepth++;\n        for (let link = this.head.next; link !== this.head; link = link.next) {\n            if (link.isEnabled() && link.callback)\n                link.callback.apply(null, args);\n        }\n        this.emitDepth--;\n        this.unsetNewLink();\n    }\n    emitCollecting(collector, args) {\n        this.emitDepth++;\n        for (let link = this.head.next; link !== this.head; link = link.next) {\n            if (link.isEnabled() && link.callback) {\n                const result = link.callback.apply(null, args);\n                if (!collector.handleResult(result))\n                    break;\n            }\n        }\n        this.emitDepth--;\n        this.unsetNewLink();\n    }\n    unsetNewLink() {\n        if (this.hasNewLinks && this.emitDepth === 0) {\n            for (let link = this.head.next; link !== this.head; link = link.next)\n                link.newLink = false;\n            this.hasNewLinks = false;\n        }\n    }\n}\nexports.Signal = Signal;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SignalConnections = void 0;\n/**\n * Represents a list of connections to a signal for easy disconnect.\n */\nclass SignalConnections {\n    constructor() {\n        this.list = [];\n    }\n    /**\n     * Add a connection to the list.\n     * @param connection\n     */\n    add(connection) {\n        this.list.push(connection);\n    }\n    /**\n     * Disconnect all connections in the list and empty the list.\n     */\n    disconnectAll() {\n        for (const connection of this.list) {\n            connection.disconnect();\n        }\n        this.list = [];\n    }\n    /**\n     * @returns The number of connections in this list.\n     */\n    getCount() {\n        return this.list.length;\n    }\n    /**\n     * @returns true if this list is empty.\n     */\n    isEmpty() {\n        return this.list.length === 0;\n    }\n}\nexports.SignalConnections = SignalConnections;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SignalConnections = exports.Signal = exports.CollectorWhile0 = exports.CollectorUntil0 = exports.CollectorLast = exports.CollectorArray = exports.Collector = void 0;\nvar Collector_1 = require(\"./Collector\");\nObject.defineProperty(exports, \"Collector\", { enumerable: true, get: function () { return Collector_1.Collector; } });\nvar CollectorArray_1 = require(\"./CollectorArray\");\nObject.defineProperty(exports, \"CollectorArray\", { enumerable: true, get: function () { return CollectorArray_1.CollectorArray; } });\nvar CollectorLast_1 = require(\"./CollectorLast\");\nObject.defineProperty(exports, \"CollectorLast\", { enumerable: true, get: function () { return CollectorLast_1.CollectorLast; } });\nvar CollectorUntil0_1 = require(\"./CollectorUntil0\");\nObject.defineProperty(exports, \"CollectorUntil0\", { enumerable: true, get: function () { return CollectorUntil0_1.CollectorUntil0; } });\nvar CollectorWhile0_1 = require(\"./CollectorWhile0\");\nObject.defineProperty(exports, \"CollectorWhile0\", { enumerable: true, get: function () { return CollectorWhile0_1.CollectorWhile0; } });\nvar Signal_1 = require(\"./Signal\");\nObject.defineProperty(exports, \"Signal\", { enumerable: true, get: function () { return Signal_1.Signal; } });\nvar SignalConnections_1 = require(\"./SignalConnections\");\nObject.defineProperty(exports, \"SignalConnections\", { enumerable: true, get: function () { return SignalConnections_1.SignalConnections; } });\n", "import {\n  Collector,\n  CollectorArray,\n  CollectorLast,\n  CollectorUntil0,\n  CollectorWhile0,\n  SignalConnection,\n  SignalConnections,\n  Signal as TsSignal,\n} from 'typed-signals';\n\nconst signalPriorities = {\n  highest: Number.MIN_SAFE_INTEGER,\n  higher: -1000,\n  high: -100,\n  normal: 0,\n  low: 100,\n  lower: 1000,\n  lowest: Number.MAX_SAFE_INTEGER,\n} as const;\n\nexport type SignalOrder = 'highest' | 'high' | 'normal' | 'low' | 'lower' | 'lowest' | number;\n\nclass Signal<THandler extends (...args: any[]) => any> extends TsSignal<THandler> {\n  // add a connectOnce method to the Signal class, that will connect a listener to the signal, and then remove it after the first time it is called\n  public connectOnce(callback: THandler, order?: SignalOrder): SignalConnection {\n    // Wrapper function to include logic for disconnecting\n    const wrapper: THandler = ((...args: any[]) => {\n      callback(...args);\n      // Assuming you have a method to remove the connection, using it here to disconnect\n      wrapperConnection.disconnect();\n    }) as THandler;\n\n    // Connect the wrapper with the same order, store the connection\n    const wrapperConnection = this.connect(wrapper, order);\n    return wrapperConnection;\n  }\n\n  public connectNTimes(callback: THandler, times: number, order?: SignalOrder): SignalConnection {\n    let numTimes = 0;\n    // Wrapper function to include logic for disconnecting\n    const wrapper: THandler = ((...args: any[]) => {\n      callback(...args);\n      numTimes++;\n      if (numTimes >= times) {\n        wrapperConnection.disconnect();\n      }\n    }) as THandler;\n    // Connect the wrapper with the same order, store the connection\n    const wrapperConnection = this.connect(wrapper, order);\n    return wrapperConnection;\n  }\n\n  /**\n   * Subscribe to this signal.\n   *\n   * @param callback This callback will be run when emit() is called.\n   * @param order Handlers with a higher order value will be called later.\n   */\n  public connect(callback: THandler, order: SignalOrder = 'normal'): SignalConnection {\n    const priority = signalPriorities[order as keyof typeof signalPriorities] ?? order;\n    return super.connect(callback, priority);\n  }\n}\n\n// export anything useful from ts-signals, as well as the new Signal class\nexport { Collector, CollectorArray, CollectorLast, CollectorUntil0, CollectorWhile0, Signal, SignalConnections };\nexport type { SignalConnection };\n", "import { Application } from '../Application';\nimport type { IApplication, ICoreFunctions, ICoreSignals } from '../core';\nimport { coreFunctionRegistry, coreSignalRegistry } from '../core';\nimport { SignalConnection, SignalConnections } from '../signals';\nimport { bindAllMethods } from '../utils';\n\nexport interface IPlugin {\n  id: string;\n\n  app: IApplication;\n\n  initialize(_app: IApplication, options?: any): Promise<void> | void;\n\n  postInitialize(_app: IApplication): Promise<void> | void;\n\n  destroy(): void;\n\n  addSignalConnection(...args: SignalConnection[]): void;\n\n  clearSignalConnections(): void;\n\n  registerCoreFunctions(): void;\n\n  registerCoreSignals(): void;\n}\n\nexport interface PluginListItem {\n  id: string;\n  path: string;\n  module: () => Promise<new () => IPlugin>;\n  assets?: string[];\n  plugins?: string[];\n}\n\nexport class Plugin<T extends Application = Application> implements IPlugin {\n  // A collection of signal connections.\n  __dill_pixel_method_binding_root: boolean;\n  protected _signalConnections: SignalConnections = new SignalConnections();\n\n  constructor(public id: string = 'Plugin') {\n    bindAllMethods(this);\n    this.__dill_pixel_method_binding_root = true;\n  }\n\n  public get app(): T {\n    return Application.getInstance<T>();\n  }\n\n  public destroy(): void {\n    this._signalConnections.disconnectAll();\n  }\n\n  public initialize(_app: IApplication, options?: any): Promise<void> | void;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async initialize(_app: IApplication, _options?: any): Promise<void> {\n    return Promise.resolve(undefined);\n  }\n\n  public postInitialize(_app: IApplication): Promise<void> | void;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async postInitialize(_app: IApplication): Promise<void> {\n    return Promise.resolve(undefined);\n  }\n\n  /**\n   * Add signal connections to the container.\n   * @param args - The signal connections to add.\n   */\n  public addSignalConnection(...args: SignalConnection[]) {\n    for (const connection of args) {\n      this._signalConnections.add(connection);\n    }\n  }\n\n  public clearSignalConnections() {\n    this._signalConnections.disconnectAll();\n  }\n\n  /**\n   * @override\n   * @protected\n   */\n  public registerCoreFunctions(): void {\n    const functions = this.getCoreFunctions();\n    functions.forEach((f) => {\n      const fName = f as keyof ICoreFunctions;\n      // @ts-expect-error implicit any\n      coreFunctionRegistry[fName] = this[f];\n    });\n  }\n\n  /**\n   * @override\n   * @protected\n   */\n  public registerCoreSignals(): void {\n    const signals = this.getCoreSignals();\n    signals.forEach((s) => {\n      const sName = s as keyof ICoreSignals;\n      // @ts-expect-error implicit any\n      coreSignalRegistry[sName] = this[s];\n    });\n  }\n\n  protected getCoreFunctions(): string[] {\n    return [];\n  }\n\n  protected getCoreSignals(): string[] {\n    return [];\n  }\n}\n", "import { Action, ActionContext, ActionDetail, ActionMap, ActionSignal } from '.';\nimport { IApplication } from '../../core';\nimport { Signal } from '../../signals';\nimport { Logger } from '../../utils';\nimport { IPlugin, Plugin } from '../Plugin';\n\nexport interface IActionsPlugin<C extends ActionContext = ActionContext> extends IPlugin {\n  context: C;\n  onActionContextChanged: Signal<(context: C) => void>;\n  initialize(app: IApplication): void;\n  getAction<TActionData = any>(action: Action | string): ActionSignal<TActionData>;\n  getActions(): ActionMap;\n  sendAction<TActionData = any>(actionId: Action | string, data?: TActionData): void;\n  setActionContext(context: C): string;\n  debug: boolean;\n}\n\nexport interface IActionsPluginOptions {\n  actions: Partial<ActionMap>;\n}\n\nexport class ActionsPlugin extends Plugin implements IActionsPlugin {\n  public readonly id = 'actions';\n  // signals\n  public onActionContextChanged: Signal<(context: string | ActionContext) => void> = new Signal<\n    (context: string | ActionContext) => void\n  >();\n\n  // private properties\n  private _context: ActionContext = 'default';\n  private _signals: Map<string | number, ActionSignal> = new Map();\n  private _actions: Partial<ActionMap> = {};\n  private _debug: boolean = false;\n  set debug(debug: boolean) {\n    this._debug = debug;\n  }\n  get debug(): boolean {\n    return this._debug;\n  }\n\n  // getter / setter\n  get context(): string | ActionContext {\n    return this._context;\n  }\n\n  set context(context: string | ActionContext) {\n    if (this._context === context) {\n      return;\n    }\n    this._context = context;\n    this.onActionContextChanged.emit(context);\n  }\n\n  initialize(app: IApplication): void {\n    this._actions = app?.config?.actions ? app.config.actions || {} : {};\n    console.log('ActionsPlugin initialized');\n  }\n\n  getAction<TActionData = any>(action: Action | string): ActionSignal<TActionData> {\n    if (!this._signals.has(action)) {\n      this._signals.set(action, new Signal<(actionDetail: ActionDetail<TActionData>) => void>());\n    }\n    return this._signals.get(action)!;\n  }\n\n  getActions(): ActionMap {\n    return this._actions as ActionMap;\n  }\n\n  sendAction<TActionData = any>(actionId: Action | string, data?: TActionData): void {\n    // check if action is defined\n    if (!this._actions[actionId]) {\n      if (this._debug) {\n        Logger.warn(`Action ${actionId} is not defined`);\n      }\n      return;\n    }\n\n    // check if action is allowed for current context\n    // send action if allowed\n    if (\n      this._actions[actionId]?.context === '*' ||\n      this._actions[actionId]?.context === this.context ||\n      this._actions[actionId]?.context?.includes(this.context)\n    ) {\n      return this.getAction<TActionData>(actionId).emit({ id: actionId, context: this.context, data });\n    }\n\n    // the action wasn't allowed\n    if (this._debug) {\n      Logger.warn(`Action ${actionId} is not allowed for context ${this.context}`);\n    }\n  }\n\n  setActionContext(context: string | ActionContext): string {\n    this.context = context;\n    return this.context;\n  }\n\n  protected getCoreFunctions(): string[] {\n    return ['getAction', 'sendAction', 'setActionContext', 'getActions'];\n  }\n\n  protected getCoreSignals(): string[] {\n    return ['onActionContextChanged'];\n  }\n}\n", "import { Action } from '../..';\n\nexport const DefaultActionContexts = {\n  default: 'default',\n  menu: 'menu',\n  pause: 'pause',\n  popup: 'popup',\n  game: 'game',\n};\n\nexport const DefaultActionContextsArray = ['default', 'menu', 'pause', 'popup', 'game'];\n\nexport const DefaultActions: Action[] = [\n  'up',\n  'down',\n  'left',\n  'right',\n  'action',\n  'pause',\n  'unpause',\n  'start',\n  'select',\n  'menu',\n  'back',\n  'next',\n];\n\nexport const defaultActionsList = {\n  action: { context: '*' },\n  back: { context: ['menu', 'default', 'popup'] },\n  next: { context: ['menu', 'default', 'popup'] },\n  select: { context: ['menu', 'default', 'popup'] },\n  menu: { context: ['default'] },\n  down: { context: ['menu', 'default', 'popup'] },\n  up: { context: ['menu', 'default', 'popup'] },\n  left: { context: ['menu', 'default', 'popup'] },\n  right: { context: '*' },\n  pause: { context: '*' },\n  unpause: { context: '*' },\n  start: { context: '*' },\n};\n\nexport const DefaultButtonIds = {\n  __default_do_not_use__: '__default_do_not_use__',\n};\n", "import { DefaultActionContextsArray, defaultActionsList } from './constants';\nimport { type UserActions, type UserButtons, type UserContexts } from './types';\n\n/**\n * Define the contexts for the actions.\n * @param contexts - The contexts to define.\n * @default ['default', 'game', 'menu', 'pause', 'popup', 'default']\n * @returns {ActionContext[]}\n */\n\nexport function defineContexts<C extends UserContexts = UserContexts>(contexts?: C): C {\n  return contexts ?? (DefaultActionContextsArray as unknown as C);\n}\n\nexport function defineActions<C extends UserContexts = UserContexts, U extends UserActions = UserActions<C>>(\n  contexts: C,\n  actions: U,\n  useDefaultActions: boolean = true,\n): U {\n  if (useDefaultActions) {\n    actions = { ...defaultActionsList, ...actions };\n  }\n  return actions;\n}\n\nexport function defineButtons<B extends UserButtons = UserButtons>(buttons?: B): B {\n  return buttons || ([] as unknown as B);\n}\n", "import type { AssetsPreferences, ResolvedAsset, UnresolvedAsset } from 'pixi.js';\nimport { Assets } from 'pixi.js';\nimport { IApplication } from '../core';\nimport type { IScene } from '../display';\nimport { Signal } from '../signals';\nimport { AssetLike, AssetLoadingOptions, AssetTypes, BundleTypes, isDev, Logger, SceneImportListItem } from '../utils';\nimport type { IPlugin } from './Plugin';\nimport { Plugin } from './Plugin';\n\nexport interface IAssetsPlugin extends IPlugin {\n  onLoadStart: Signal<() => void>;\n  onLoadProgress: Signal<(progress: number) => void>;\n  onLoadComplete: Signal<() => void>;\n\n  loadAssets(assets: string | string[] | UnresolvedAsset | UnresolvedAsset[] | AssetLike | AssetLike[]): Promise<void>;\n\n  loadBundles(bundle: string | string[]): Promise<void>;\n\n  loadSceneAssets(scene: IScene | SceneImportListItem<any>, background?: boolean): Promise<void>;\n\n  unloadSceneAssets(scene: IScene | SceneImportListItem<any>): Promise<void>;\n\n  loadRequired(): Promise<void>;\n\n  loadBackground(): void;\n}\n\nconst detaultAssetPreferences: Partial<AssetsPreferences> = {\n  preferWorkers: !isDev,\n  crossOrigin: 'anonymous',\n};\n\nconst imageExtensions = ['png', 'jpg', 'jpeg', 'webp', 'gif', 'avif', 'svg'];\n\nfunction addParseAsGraphicsContext(asset: string | UnresolvedAsset): string | UnresolvedAsset {\n  if (typeof asset === 'string') {\n    if (!asset?.includes('.svg')) {\n      return asset;\n    }\n    asset = { src: asset };\n  } else {\n    if (Array.isArray(asset.src) || !asset.src?.includes('.svg')) {\n      return asset;\n    }\n  }\n  if (!asset.data) {\n    asset.data = {};\n  }\n  asset.data.parseAsGraphicsContext = true;\n  return asset;\n}\n\nfunction getAssetList(assets: AssetTypes): UnresolvedAsset[] | string[] {\n  if (!Array.isArray(assets)) {\n    assets = [assets];\n  }\n  return assets.map((asset: string | UnresolvedAsset | AssetLike) => {\n    if (typeof asset === 'string') {\n      return addParseAsGraphicsContext(asset);\n    } else if (typeof asset === 'object') {\n      let alias: string | string[] = (asset?.src as string | string[]) || [];\n      if (!Array.isArray(alias)) {\n        alias = [alias];\n      }\n      if (asset.ext) {\n        if (asset.src && !Array.isArray(asset.src)) {\n          alias.push(asset.src as string);\n          asset.src = [asset.src];\n        }\n        asset.src = (asset.src as string[]).map((src: string) => {\n          return `${src}.${asset.ext}`;\n        });\n        asset.alias = [...alias, ...(asset.src as string[])].filter(Boolean);\n      } else {\n        addParseAsGraphicsContext(asset);\n      }\n      return asset;\n    }\n  });\n}\n\nexport class AssetsPlugin extends Plugin implements IAssetsPlugin {\n  public readonly id: string = 'assets';\n  public onLoadStart: Signal<() => void> = new Signal();\n  public onLoadProgress: Signal<(progress: number) => void> = new Signal();\n  public onLoadComplete: Signal<() => void> = new Signal();\n\n  public onBackgroundLoadStart: Signal<() => void> = new Signal();\n  public onBackgroundAssetLoaded: Signal<(asset: string) => void> = new Signal();\n  public onBackgroundBundlesLoaded: Signal<() => void> = new Signal();\n\n  private _loadedBundles: Set<string> = new Set();\n  private _loadedAssets: Set<string | UnresolvedAsset> = new Set();\n\n  private _required: { assets?: AssetTypes; bundles?: BundleTypes } = {};\n  private _background: { assets?: AssetTypes; bundles?: BundleTypes } = {};\n\n  public initialize(_app: IApplication, options?: AssetLoadingOptions): Promise<void> | void {\n    if (options?.preload) {\n      this._required = options.preload;\n    }\n    if (options?.background) {\n      this._background = options.background;\n    }\n    Assets.setPreferences({ ...detaultAssetPreferences, ...options?.assetPreferences });\n  }\n\n  public async loadRequired() {\n    this._handleLoadStart();\n    this._handleLoadProgress(0);\n    if (this._required) {\n      if (this._required.assets) {\n        await Assets.load(getAssetList(this._required.assets), this._handleLoadProgress);\n      }\n      if (this._required.bundles) {\n        await Assets.loadBundle(this._required.bundles, this._handleLoadProgress);\n      }\n    }\n    this._handleLoadComplete();\n    return Promise.resolve();\n  }\n\n  public loadBackground() {\n    this.onBackgroundLoadStart.emit();\n    if (this._background) {\n      if (this._background.assets) {\n        const list = getAssetList(this._background.assets);\n        list.forEach((asset) => {\n          if ((asset as UnresolvedAsset)?.src) {\n            const src = (asset as UnresolvedAsset).src as string[];\n            if (src) {\n              return Assets.backgroundLoad(src);\n            }\n          }\n          return Assets.backgroundLoad(asset as string).then(() => {\n            this.onBackgroundAssetLoaded.emit(asset as string);\n          });\n        });\n      }\n      if (this._background.bundles) {\n        void Assets.backgroundLoadBundle(this._background.bundles).then(() => {\n          this.onBackgroundBundlesLoaded.emit();\n        });\n      }\n    }\n  }\n\n  public async loadAssets(assets: AssetTypes) {\n    assets = getAssetList(assets);\n\n    await Assets.load(assets, this._handleLoadProgress);\n    this._markAssetsLoaded(assets as UnresolvedAsset[] | string[]);\n    return Promise.resolve();\n  }\n\n  public async loadBundles(bundles: string | string[]) {\n    await Assets.loadBundle(bundles, this._handleLoadProgress);\n    this._markBundlesLoaded(bundles);\n    return Promise.resolve();\n  }\n\n  public async unloadSceneAssets(scene: IScene | SceneImportListItem<any>) {\n    if (scene.assets?.preload?.assets) {\n      const assets = getAssetList(scene.assets.preload.assets);\n      Assets.unload(assets as ResolvedAsset[] | string[]).then(() => {\n        // Logger.log('assets unloaded');\n        this._markAssetsUnloaded(assets);\n      });\n    }\n    if (scene.assets?.preload?.bundles) {\n      const bundles = scene.assets.preload.bundles;\n      void Assets.unloadBundle(bundles).then(() => {\n        this._markBundlesUnloaded(bundles);\n      });\n    }\n    return Promise.resolve();\n  }\n\n  public async loadSceneAssets(scene: IScene | SceneImportListItem<any>, background = false) {\n    if (background) {\n      if (scene.assets?.background) {\n        if (scene.assets.background.assets) {\n          const assets = getAssetList(scene.assets.background.assets);\n          const filteredAssets = assets.filter((asset: string | UnresolvedAsset) => !this._isAssetLoaded(asset));\n          if (filteredAssets.length) {\n            filteredAssets.forEach((asset) => {\n              if ((asset as UnresolvedAsset)?.src) {\n                const src = (asset as UnresolvedAsset).src as string[];\n                if (src) {\n                  return Assets.backgroundLoad(src);\n                }\n              }\n              return Assets.backgroundLoad(asset as string);\n            });\n          }\n        }\n        if (scene.assets.background.bundles) {\n          let bundles = Array.isArray(scene.assets.background.bundles)\n            ? scene.assets.background.bundles\n            : [scene.assets.background.bundles];\n          bundles = bundles.filter((bundle) => !this._isBundleLoaded(bundle));\n          if (bundles.length) {\n            void Assets.backgroundLoadBundle(bundles);\n          }\n        }\n      }\n    } else {\n      this._handleLoadStart();\n      this._handleLoadProgress(0);\n      if (scene.assets?.preload?.assets) {\n        const assets = getAssetList(scene.assets.preload.assets);\n        const filteredAssets = assets.filter((asset) => !this._isAssetLoaded(asset));\n        if (filteredAssets.length) {\n          await Assets.load(filteredAssets, this._handleLoadProgress);\n          this._markAssetsLoaded(assets);\n        }\n      }\n      if (scene.assets?.preload?.bundles) {\n        let bundles: string[] = Array.isArray(scene.assets.preload.bundles)\n          ? scene.assets.preload.bundles\n          : [scene.assets.preload.bundles];\n        bundles = bundles.filter((bundle) => !this._isBundleLoaded(bundle));\n        if (bundles.length) {\n          Logger.log('loading bundles', bundles);\n          await Assets.loadBundle(bundles, this._handleLoadProgress);\n          this._markBundlesLoaded(bundles);\n        }\n      }\n      this._handleLoadComplete();\n    }\n  }\n\n  protected getCoreFunctions(): string[] {\n    return ['loadSceneAssets', 'unloadSceneAssets', 'loadAssets', 'loadBundles', 'loadRequired'];\n  }\n\n  protected getCoreSignals(): string[] {\n    return [\n      'onLoadStart',\n      'onLoadProgress',\n      'onLoadComplete',\n      'onBackgroundLoadStart',\n      'onBackgroundAssetLoaded',\n      'onBackgroundBundlesLoaded',\n    ];\n  }\n\n  private _isAssetLoaded(alias: string | UnresolvedAsset) {\n    return this._loadedAssets.has(alias);\n  }\n\n  private _isBundleLoaded(alias: string) {\n    return this._loadedBundles.has(alias);\n  }\n\n  private _markAssetsLoaded(urls: UnresolvedAsset[] | string[]) {\n    urls.forEach((url) => {\n      this._loadedAssets.add(url);\n    });\n  }\n\n  private _markBundlesLoaded(aliases: string[] | string) {\n    if (!Array.isArray(aliases)) {\n      aliases = [aliases];\n    }\n    aliases.forEach((alias) => {\n      this._loadedBundles.add(alias);\n    });\n  }\n\n  private _markAssetsUnloaded(urls: string[] | string | UnresolvedAsset | UnresolvedAsset[]) {\n    if (!Array.isArray(urls)) {\n      urls = [urls];\n    }\n    urls.forEach((url: string | UnresolvedAsset) => {\n      this._loadedAssets.delete(url);\n    });\n  }\n\n  private _markBundlesUnloaded(aliases: string[] | string) {\n    if (!Array.isArray(aliases)) {\n      aliases = [aliases];\n    }\n    aliases.forEach((alias) => {\n      this._loadedBundles.delete(alias);\n    });\n  }\n\n  private _handleLoadStart() {\n    this.onLoadStart.emit();\n  }\n\n  private _handleLoadProgress(progress: number) {\n    this.onLoadProgress.emit(progress);\n  }\n\n  private _handleLoadComplete() {\n    this._handleLoadProgress(1);\n    this.onLoadComplete.emit();\n  }\n}\n", "import { IAudioInstance } from './AudioInstance';\nimport { ChannelName, IAudioManagerPlugin } from './AudioManagerPlugin';\n\nexport interface IAudioChannel {\n  name: string;\n  muted: boolean;\n  volume: number;\n  instances: IAudioInstance[];\n\n  add(id: string, instance: IAudioInstance): IAudioInstance;\n\n  get(id: string): IAudioInstance | undefined;\n\n  remove(id: string): IAudioInstance | undefined;\n\n  updateVolume(): void;\n\n  destroy(): void;\n}\n\nexport class AudioChannel<C extends ChannelName = ChannelName> {\n  private _sounds: Map<string, IAudioInstance> = new Map<string, IAudioInstance>();\n\n  constructor(\n    public name: C,\n    public manager: IAudioManagerPlugin<C>,\n  ) {\n    this.muted = this.manager.muted;\n  }\n\n  get instances(): IAudioInstance[] {\n    return Array.from(this._sounds.values());\n  }\n\n  private _muted: boolean = false;\n\n  get muted(): boolean {\n    return this._muted;\n  }\n\n  set muted(value: boolean) {\n    this._muted = value;\n    this._setMuted();\n  }\n\n  private _volume: number = 1.0;\n\n  get volume(): number {\n    return this._volume;\n  }\n\n  set volume(value: number) {\n    this._volume = value;\n    this.updateVolume();\n  }\n\n  add(id: string, instance: IAudioInstance): IAudioInstance {\n    this._sounds.set(id, instance);\n    return instance;\n  }\n\n  get(id: string): IAudioInstance | undefined {\n    return this._sounds.get(id);\n  }\n\n  remove(id: string): IAudioInstance | undefined {\n    const instance = this._sounds.get(id);\n    if (instance) {\n      instance.destroy();\n      this._sounds.delete(id);\n    }\n    return instance;\n  }\n\n  _setMuted(): void {\n    this._sounds.forEach((sound) => {\n      sound.muted = this._muted;\n    });\n  }\n\n  updateVolume() {\n    this._sounds.forEach((sound) => {\n      sound.updateVolume();\n    });\n    this.manager.onChannelVolumeChanged.emit({ channel: this, volume: this._volume });\n  }\n\n  destroy() {}\n}\n", "import { IMediaInstance } from '@pixi/sound';\nimport { gsap } from 'gsap';\nimport { Signal } from '../../signals';\nimport { bindAllMethods } from '../../utils';\nimport { IAudioChannel } from './AudioChannel';\nimport { ChannelName, IAudioManagerPlugin } from './AudioManagerPlugin';\n\nexport interface IAudioInstance<C extends ChannelName = ChannelName> {\n  volume: number;\n  storedVolume: number;\n  media: IMediaInstance;\n  channel: IAudioChannel;\n  muted: boolean;\n  id: string;\n  manager: IAudioManagerPlugin<C>;\n  onStart: Signal<(instance: IAudioInstance) => void>;\n  onStop: Signal<(instance: IAudioInstance) => void>;\n  onEnd: Signal<(instance: IAudioInstance) => void>;\n  onPaused: Signal<(instance: IAudioInstance) => void>;\n  onResumed: Signal<(instance: IAudioInstance) => void>;\n  isPlaying: boolean;\n\n  fadeTo(volume: number, duration: number): gsap.core.Tween;\n\n  stop(): void;\n\n  destroy(): void;\n\n  remove(): void;\n\n  updateVolume(): void;\n\n  addListeners(): void;\n\n  removeListeners(): void;\n\n  pause(): void;\n\n  play(): void;\n\n  resume(): void;\n}\n\nexport class AudioInstance<C extends ChannelName = ChannelName> implements IAudioInstance {\n  public storedVolume: number;\n  public onStart: Signal<(instance: IAudioInstance) => void> = new Signal<(instance: IAudioInstance) => void>();\n  public onStop: Signal<(instance: IAudioInstance) => void> = new Signal<(instance: IAudioInstance) => void>();\n  public onEnd: Signal<(instance: IAudioInstance) => void> = new Signal<(instance: IAudioInstance) => void>();\n  public onPaused: Signal<(instance: IAudioInstance) => void> = new Signal<(instance: IAudioInstance) => void>();\n  public onResumed: Signal<(instance: IAudioInstance) => void> = new Signal<(instance: IAudioInstance) => void>();\n  public onProgress: Signal<(instance: IAudioInstance) => void> = new Signal<(instance: IAudioInstance) => void>();\n\n  constructor(\n    public id: string,\n    public channel: IAudioChannel,\n    public manager: IAudioManagerPlugin,\n  ) {\n    bindAllMethods(this);\n    this.muted = this.channel.muted;\n  }\n\n  private _media: IMediaInstance;\n\n  get media(): IMediaInstance {\n    return this._media;\n  }\n\n  set media(value: IMediaInstance) {\n    this._media = value;\n    if (value) {\n      this._media.volume = this._volume * this.channel.volume * this.manager.masterVolume;\n      if (this.muted) {\n        this._media.muted = this.muted;\n      }\n      this.addListeners();\n    }\n  }\n\n  private _volume: number = 1;\n\n  public get volume(): number {\n    return this._volume;\n  }\n\n  public set volume(value: number) {\n    this._volume = value;\n    if (this._media) {\n      this._media.volume = this._volume * this.channel.volume * this.manager.masterVolume;\n    }\n  }\n\n  private _muted: boolean = false;\n\n  get muted(): boolean {\n    return this._muted;\n  }\n\n  set muted(value: boolean) {\n    this._muted = value;\n    if (this._media) {\n      this._media.muted = this._muted;\n    }\n  }\n\n  private _isPlaying: boolean = false;\n\n  get isPlaying() {\n    return this._isPlaying;\n  }\n\n  set isPlaying(value: boolean) {\n    this._isPlaying = value;\n  }\n\n  pause(): void {\n    this._isPlaying = false;\n    if (this._media) {\n      this._media.paused = true;\n    }\n  }\n\n  resume(): void {\n    this._isPlaying = true;\n    if (this._media) {\n      this._media.paused = false;\n    }\n  }\n\n  remove(): void {\n    this._isPlaying = false;\n    this.channel.remove(this.id);\n  }\n\n  stop() {\n    if (this._media) {\n      this._media.stop();\n    }\n    this._isPlaying = false;\n    this.onEnd.emit(this);\n  }\n\n  updateVolume(): void {\n    this.volume = this._volume;\n  }\n\n  addListeners() {\n    this.removeListeners();\n    this._media.on('end', this._handleMediaEnded);\n    this._media.on('start', this._handleMediaStarted);\n    this._media.on('stop', this._handleMediaStopped);\n    this._media.on('pause', this._handleMediaPaused);\n    this._media.on('progress', this._handleMediaProgress);\n    this._media.on('resumed', this._handleMediaResumed);\n  }\n\n  removeListeners() {\n    if (!this.media) {\n      return;\n    }\n\n    this._media.off('end', this._handleMediaEnded);\n    this._media.off('start', this._handleMediaStarted);\n    this._media.off('stop', this._handleMediaStopped);\n    this._media.off('pause', this._handleMediaPaused);\n    this._media.off('progress', this._handleMediaProgress);\n    this._media.off('resumed', this._handleMediaResumed);\n  }\n\n  public destroy() {\n    this.stop();\n    this.removeListeners();\n  }\n\n  public fadeTo(volume: number, duration: number): gsap.core.Tween {\n    return gsap.to(this.media, { volume, duration });\n  }\n\n  public play(time?: number): void {\n    this._isPlaying = true;\n    if (time) {\n      this.media.play({ start: time });\n    } else {\n      this.media.play({});\n    }\n  }\n\n  private _handleMediaEnded() {\n    this._isPlaying = false;\n    this.onEnd.emit(this);\n  }\n\n  private _handleMediaStarted() {\n    this._isPlaying = true;\n    this.onStart.emit(this);\n  }\n\n  private _handleMediaStopped() {\n    this._isPlaying = false;\n    this.onStop.emit(this);\n  }\n\n  private _handleMediaPaused() {\n    this._isPlaying = false;\n    this.onPaused.emit(this);\n  }\n\n  private _handleMediaProgress() {\n    this.onProgress.emit(this);\n  }\n\n  private _handleMediaResumed() {\n    this._isPlaying = true;\n    this.onResumed.emit(this);\n  }\n}\n", "let instance;\nfunction setInstance(sound) {\n  instance = sound;\n  return sound;\n}\nfunction getInstance() {\n  return instance;\n}\n\nexport { getInstance, instance, setInstance };\n//# sourceMappingURL=instance.mjs.map\n", "import { getInstance } from '../instance.mjs';\n\nclass WebAudioUtils {\n  /**\n   * Dezippering is removed in the future Web Audio API, instead\n   * we use the `setValueAtTime` method, however, this is not available\n   * in all environments (e.g., Android webview), so we fallback to the `value` setter.\n   * @param param - AudioNode parameter object\n   * @param value - Value to set\n   * @return The value set\n   */\n  static setParamValue(param, value) {\n    if (param.setValueAtTime) {\n      const context = getInstance().context;\n      param.setValueAtTime(value, context.audioContext.currentTime);\n    } else {\n      param.value = value;\n    }\n    return value;\n  }\n}\n\nexport { WebAudioUtils };\n//# sourceMappingURL=WebAudioUtils.mjs.map\n", "import { EventEmitter } from 'pixi.js';\n\nclass HTMLAudioContext extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    /** Current global speed from 0 to 1 */\n    this.speed = 1;\n    /** Current muted status of the context */\n    this.muted = false;\n    /** Current volume from 0 to 1  */\n    this.volume = 1;\n    /** Current paused status */\n    this.paused = false;\n  }\n  /** Internal trigger when volume, mute or speed changes */\n  refresh() {\n    this.emit(\"refresh\");\n  }\n  /** Internal trigger paused changes */\n  refreshPaused() {\n    this.emit(\"refreshPaused\");\n  }\n  /**\n   * HTML Audio does not support filters, this is non-functional API.\n   */\n  get filters() {\n    console.warn(\"HTML Audio does not support filters\");\n    return null;\n  }\n  set filters(_filters) {\n    console.warn(\"HTML Audio does not support filters\");\n  }\n  /**\n   * HTML Audio does not support `audioContext`\n   * @readonly\n   * @type {AudioContext}\n   */\n  get audioContext() {\n    console.warn(\"HTML Audio does not support audioContext\");\n    return null;\n  }\n  /**\n   * Toggles the muted state.\n   * @return The current muted state.\n   */\n  toggleMute() {\n    this.muted = !this.muted;\n    this.refresh();\n    return this.muted;\n  }\n  /**\n   * Toggles the paused state.\n   * @return The current paused state.\n   */\n  togglePause() {\n    this.paused = !this.paused;\n    this.refreshPaused();\n    return this.paused;\n  }\n  /** Destroy and don't use after this */\n  destroy() {\n    this.removeAllListeners();\n  }\n}\n\nexport { HTMLAudioContext };\n//# sourceMappingURL=HTMLAudioContext.mjs.map\n", "import { EventEmitter, Ticker } from 'pixi.js';\n\nlet id = 0;\nconst _HTMLAudioInstance = class extends EventEmitter {\n  /** @param parent - Parent element */\n  constructor(parent) {\n    super();\n    this.id = id++;\n    this.init(parent);\n  }\n  /**\n   * Set a property by name, this makes it easy to chain values\n   * @param name - Name of the property to set\n   * @param value - Value to set property to\n   */\n  set(name, value) {\n    if (this[name] === void 0) {\n      throw new Error(`Property with name ${name} does not exist.`);\n    } else {\n      switch (name) {\n        case \"speed\":\n          this.speed = value;\n          break;\n        case \"volume\":\n          this.volume = value;\n          break;\n        case \"paused\":\n          this.paused = value;\n          break;\n        case \"loop\":\n          this.loop = value;\n          break;\n        case \"muted\":\n          this.muted = value;\n          break;\n      }\n    }\n    return this;\n  }\n  /** The current playback progress from 0 to 1. */\n  get progress() {\n    const { currentTime } = this._source;\n    return currentTime / this._duration;\n  }\n  /** Pauses the sound. */\n  get paused() {\n    return this._paused;\n  }\n  set paused(paused) {\n    this._paused = paused;\n    this.refreshPaused();\n  }\n  /**\n   * Reference: http://stackoverflow.com/a/40370077\n   * @private\n   */\n  _onPlay() {\n    this._playing = true;\n  }\n  /**\n   * Reference: http://stackoverflow.com/a/40370077\n   * @private\n   */\n  _onPause() {\n    this._playing = false;\n  }\n  /**\n   * Initialize the instance.\n   * @param {htmlaudio.HTMLAudioMedia} media - Same as constructor\n   */\n  init(media) {\n    this._playing = false;\n    this._duration = media.source.duration;\n    const source = this._source = media.source.cloneNode(false);\n    source.src = media.parent.url;\n    source.onplay = this._onPlay.bind(this);\n    source.onpause = this._onPause.bind(this);\n    media.context.on(\"refresh\", this.refresh, this);\n    media.context.on(\"refreshPaused\", this.refreshPaused, this);\n    this._media = media;\n  }\n  /**\n   * Stop the sound playing\n   * @private\n   */\n  _internalStop() {\n    if (this._source && this._playing) {\n      this._source.onended = null;\n      this._source.pause();\n    }\n  }\n  /** Stop the sound playing */\n  stop() {\n    this._internalStop();\n    if (this._source) {\n      this.emit(\"stop\");\n    }\n  }\n  /** Set the instance speed from 0 to 1 */\n  get speed() {\n    return this._speed;\n  }\n  set speed(speed) {\n    this._speed = speed;\n    this.refresh();\n  }\n  /** Get the set the volume for this instance from 0 to 1 */\n  get volume() {\n    return this._volume;\n  }\n  set volume(volume) {\n    this._volume = volume;\n    this.refresh();\n  }\n  /** If the sound instance should loop playback */\n  get loop() {\n    return this._loop;\n  }\n  set loop(loop) {\n    this._loop = loop;\n    this.refresh();\n  }\n  /** `true` if the sound is muted */\n  get muted() {\n    return this._muted;\n  }\n  set muted(muted) {\n    this._muted = muted;\n    this.refresh();\n  }\n  /**\n   * HTML Audio does not support filters, this is non-functional API.\n   */\n  get filters() {\n    console.warn(\"HTML Audio does not support filters\");\n    return null;\n  }\n  set filters(_filters) {\n    console.warn(\"HTML Audio does not support filters\");\n  }\n  /** Call whenever the loop, speed or volume changes */\n  refresh() {\n    const global = this._media.context;\n    const sound = this._media.parent;\n    this._source.loop = this._loop || sound.loop;\n    const globalVolume = global.volume * (global.muted ? 0 : 1);\n    const soundVolume = sound.volume * (sound.muted ? 0 : 1);\n    const instanceVolume = this._volume * (this._muted ? 0 : 1);\n    this._source.volume = instanceVolume * globalVolume * soundVolume;\n    this._source.playbackRate = this._speed * global.speed * sound.speed;\n  }\n  /** Handle changes in paused state, either globally or sound or instance */\n  refreshPaused() {\n    const global = this._media.context;\n    const sound = this._media.parent;\n    const pausedReal = this._paused || sound.paused || global.paused;\n    if (pausedReal !== this._pausedReal) {\n      this._pausedReal = pausedReal;\n      if (pausedReal) {\n        this._internalStop();\n        this.emit(\"paused\");\n      } else {\n        this.emit(\"resumed\");\n        this.play({\n          start: this._source.currentTime,\n          end: this._end,\n          volume: this._volume,\n          speed: this._speed,\n          loop: this._loop\n        });\n      }\n      this.emit(\"pause\", pausedReal);\n    }\n  }\n  /** Start playing the sound/ */\n  play(options) {\n    const { start, end, speed, loop, volume, muted } = options;\n    if (end) {\n      console.assert(end > start, \"End time is before start time\");\n    }\n    this._speed = speed;\n    this._volume = volume;\n    this._loop = !!loop;\n    this._muted = muted;\n    this.refresh();\n    if (this.loop && end !== null) {\n      console.warn('Looping not support when specifying an \"end\" time');\n      this.loop = false;\n    }\n    this._start = start;\n    this._end = end || this._duration;\n    this._start = Math.max(0, this._start - _HTMLAudioInstance.PADDING);\n    this._end = Math.min(this._end + _HTMLAudioInstance.PADDING, this._duration);\n    this._source.onloadedmetadata = () => {\n      if (this._source) {\n        this._source.currentTime = start;\n        this._source.onloadedmetadata = null;\n        this.emit(\"progress\", start / this._duration, this._duration);\n        Ticker.shared.add(this._onUpdate, this);\n      }\n    };\n    this._source.onended = this._onComplete.bind(this);\n    this._source.play();\n    this.emit(\"start\");\n  }\n  /**\n   * Handle time update on sound.\n   * @private\n   */\n  _onUpdate() {\n    this.emit(\"progress\", this.progress, this._duration);\n    if (this._source.currentTime >= this._end && !this._source.loop) {\n      this._onComplete();\n    }\n  }\n  /**\n   * Callback when completed.\n   * @private\n   */\n  _onComplete() {\n    Ticker.shared.remove(this._onUpdate, this);\n    this._internalStop();\n    this.emit(\"progress\", 1, this._duration);\n    this.emit(\"end\", this);\n  }\n  /** Don't use after this. */\n  destroy() {\n    Ticker.shared.remove(this._onUpdate, this);\n    this.removeAllListeners();\n    const source = this._source;\n    if (source) {\n      source.onended = null;\n      source.onplay = null;\n      source.onpause = null;\n      this._internalStop();\n    }\n    this._source = null;\n    this._speed = 1;\n    this._volume = 1;\n    this._loop = false;\n    this._end = null;\n    this._start = 0;\n    this._duration = 0;\n    this._playing = false;\n    this._pausedReal = false;\n    this._paused = false;\n    this._muted = false;\n    if (this._media) {\n      this._media.context.off(\"refresh\", this.refresh, this);\n      this._media.context.off(\"refreshPaused\", this.refreshPaused, this);\n      this._media = null;\n    }\n  }\n  /**\n   * To string method for instance.\n   * @return The string representation of instance.\n   */\n  toString() {\n    return `[HTMLAudioInstance id=${this.id}]`;\n  }\n};\nlet HTMLAudioInstance = _HTMLAudioInstance;\n/** Extra padding, in seconds, to deal with low-latecy of HTMLAudio. */\nHTMLAudioInstance.PADDING = 0.1;\n\nexport { HTMLAudioInstance };\n//# sourceMappingURL=HTMLAudioInstance.mjs.map\n", "import { EventEmitter } from 'pixi.js';\nimport { HTMLAudioInstance } from './HTMLAudioInstance.mjs';\n\nclass HTMLAudioMedia extends EventEmitter {\n  init(parent) {\n    this.parent = parent;\n    this._source = parent.options.source || new Audio();\n    if (parent.url) {\n      this._source.src = parent.url;\n    }\n  }\n  // Implement create\n  create() {\n    return new HTMLAudioInstance(this);\n  }\n  /**\n   * If the audio media is playable (ready).\n   * @readonly\n   */\n  get isPlayable() {\n    return !!this._source && this._source.readyState === 4;\n  }\n  /**\n   * THe duration of the media in seconds.\n   * @readonly\n   */\n  get duration() {\n    return this._source.duration;\n  }\n  /**\n   * Reference to the context.\n   * @readonly\n   */\n  get context() {\n    return this.parent.context;\n  }\n  /** The collection of filters, does not apply to HTML Audio. */\n  get filters() {\n    return null;\n  }\n  set filters(_filters) {\n    console.warn(\"HTML Audio does not support filters\");\n  }\n  // Override the destroy\n  destroy() {\n    this.removeAllListeners();\n    this.parent = null;\n    if (this._source) {\n      this._source.src = \"\";\n      this._source.load();\n      this._source = null;\n    }\n  }\n  /**\n   * Get the audio source element.\n   * @type {HTMLAudioElement}\n   * @readonly\n   */\n  get source() {\n    return this._source;\n  }\n  // Implement the method to being preloading\n  load(callback) {\n    const source = this._source;\n    const sound = this.parent;\n    if (source.readyState === 4) {\n      sound.isLoaded = true;\n      const instance = sound.autoPlayStart();\n      if (callback) {\n        setTimeout(() => {\n          callback(null, sound, instance);\n        }, 0);\n      }\n      return;\n    }\n    if (!sound.url) {\n      callback(new Error(\"sound.url or sound.source must be set\"));\n      return;\n    }\n    source.src = sound.url;\n    const onLoad = () => {\n      removeListeners();\n      sound.isLoaded = true;\n      const instance = sound.autoPlayStart();\n      if (callback) {\n        callback(null, sound, instance);\n      }\n    };\n    const onAbort = () => {\n      removeListeners();\n      if (callback) {\n        callback(new Error(\"Sound loading has been aborted\"));\n      }\n    };\n    const onError = () => {\n      removeListeners();\n      const message = `Failed to load audio element (code: ${source.error.code})`;\n      if (callback) {\n        callback(new Error(message));\n      } else {\n        console.error(message);\n      }\n    };\n    const removeListeners = () => {\n      source.removeEventListener(\"canplaythrough\", onLoad);\n      source.removeEventListener(\"load\", onLoad);\n      source.removeEventListener(\"abort\", onAbort);\n      source.removeEventListener(\"error\", onError);\n    };\n    source.addEventListener(\"canplaythrough\", onLoad, false);\n    source.addEventListener(\"load\", onLoad, false);\n    source.addEventListener(\"abort\", onAbort, false);\n    source.addEventListener(\"error\", onError, false);\n    source.load();\n  }\n}\n\nexport { HTMLAudioMedia };\n//# sourceMappingURL=HTMLAudioMedia.mjs.map\n", "class SoundSprite {\n  /**\n   * @param parent - The parent sound\n   * @param options - Data associated with object.\n   */\n  constructor(parent, options) {\n    this.parent = parent;\n    Object.assign(this, options);\n    this.duration = this.end - this.start;\n    console.assert(this.duration > 0, \"End time must be after start time\");\n  }\n  /**\n   * Play the sound sprite.\n   * @param {Function} [complete] - Function call when complete\n   * @return Sound instance being played.\n   */\n  play(complete) {\n    return this.parent.play({\n      complete,\n      speed: this.speed || this.parent.speed,\n      end: this.end,\n      start: this.start,\n      loop: this.loop\n    });\n  }\n  /** Destroy and don't use after this */\n  destroy() {\n    this.parent = null;\n  }\n}\n\nexport { SoundSprite };\n//# sourceMappingURL=SoundSprite.mjs.map\n", "const extensions = [\n  \"ogg\",\n  \"oga\",\n  \"opus\",\n  \"m4a\",\n  \"mp3\",\n  \"mpeg\",\n  \"wav\",\n  \"aiff\",\n  \"wma\",\n  \"mid\",\n  \"caf\"\n];\nconst mimes = [\n  \"audio/mpeg\",\n  \"audio/ogg\"\n];\nconst supported = {};\nfunction validateFormats(typeOverrides) {\n  const overrides = {\n    m4a: \"audio/mp4\",\n    oga: \"audio/ogg\",\n    opus: 'audio/ogg; codecs=\"opus\"',\n    caf: 'audio/x-caf; codecs=\"opus\"',\n    ...typeOverrides || {}\n  };\n  const audio = document.createElement(\"audio\");\n  const formats = {};\n  const no = /^no$/;\n  extensions.forEach((ext) => {\n    const canByExt = audio.canPlayType(`audio/${ext}`).replace(no, \"\");\n    const canByType = overrides[ext] ? audio.canPlayType(overrides[ext]).replace(no, \"\") : \"\";\n    formats[ext] = !!canByExt || !!canByType;\n  });\n  Object.assign(supported, formats);\n}\nvalidateFormats();\n\nexport { extensions, mimes, supported, validateFormats };\n//# sourceMappingURL=supported.mjs.map\n", "import { EventEmitter, Ticker } from 'pixi.js';\nimport { WebAudioUtils } from './WebAudioUtils.mjs';\n\nlet id = 0;\nclass WebAudioInstance extends EventEmitter {\n  constructor(media) {\n    super();\n    this.id = id++;\n    this._media = null;\n    this._paused = false;\n    this._muted = false;\n    this._elapsed = 0;\n    this.init(media);\n  }\n  /**\n   * Set a property by name, this makes it easy to chain values\n   * @param name - Name of the property to set.\n   * @param value - Value to set property to.\n   */\n  set(name, value) {\n    if (this[name] === void 0) {\n      throw new Error(`Property with name ${name} does not exist.`);\n    } else {\n      switch (name) {\n        case \"speed\":\n          this.speed = value;\n          break;\n        case \"volume\":\n          this.volume = value;\n          break;\n        case \"muted\":\n          this.muted = value;\n          break;\n        case \"loop\":\n          this.loop = value;\n          break;\n        case \"paused\":\n          this.paused = value;\n          break;\n      }\n    }\n    return this;\n  }\n  /** Stops the instance, don't use after this. */\n  stop() {\n    if (this._source) {\n      this._internalStop();\n      this.emit(\"stop\");\n    }\n  }\n  /** Set the instance speed from 0 to 1 */\n  get speed() {\n    return this._speed;\n  }\n  set speed(speed) {\n    this._speed = speed;\n    this.refresh();\n    this._update(true);\n  }\n  /** Get the set the volume for this instance from 0 to 1 */\n  get volume() {\n    return this._volume;\n  }\n  set volume(volume) {\n    this._volume = volume;\n    this.refresh();\n  }\n  /** `true` if the sound is muted */\n  get muted() {\n    return this._muted;\n  }\n  set muted(muted) {\n    this._muted = muted;\n    this.refresh();\n  }\n  /** If the sound instance should loop playback */\n  get loop() {\n    return this._loop;\n  }\n  set loop(loop) {\n    this._loop = loop;\n    this.refresh();\n  }\n  /** The collection of filters. */\n  get filters() {\n    return this._filters;\n  }\n  set filters(filters) {\n    if (this._filters) {\n      this._filters?.filter((filter) => filter).forEach((filter) => filter.disconnect());\n      this._filters = null;\n      this._source.connect(this._gain);\n    }\n    this._filters = filters?.length ? filters.slice(0) : null;\n    this.refresh();\n  }\n  /** Refresh loop, volume and speed based on changes to parent */\n  refresh() {\n    if (!this._source) {\n      return;\n    }\n    const global = this._media.context;\n    const sound = this._media.parent;\n    this._source.loop = this._loop || sound.loop;\n    const globalVolume = global.volume * (global.muted ? 0 : 1);\n    const soundVolume = sound.volume * (sound.muted ? 0 : 1);\n    const instanceVolume = this._volume * (this._muted ? 0 : 1);\n    WebAudioUtils.setParamValue(this._gain.gain, instanceVolume * soundVolume * globalVolume);\n    WebAudioUtils.setParamValue(this._source.playbackRate, this._speed * sound.speed * global.speed);\n    this.applyFilters();\n  }\n  /** Connect filters nodes to audio context */\n  applyFilters() {\n    if (this._filters?.length) {\n      this._source.disconnect();\n      let source = this._source;\n      this._filters.forEach((filter) => {\n        source.connect(filter.destination);\n        source = filter;\n      });\n      source.connect(this._gain);\n    }\n  }\n  /** Handle changes in paused state, either globally or sound or instance */\n  refreshPaused() {\n    const global = this._media.context;\n    const sound = this._media.parent;\n    const pausedReal = this._paused || sound.paused || global.paused;\n    if (pausedReal !== this._pausedReal) {\n      this._pausedReal = pausedReal;\n      if (pausedReal) {\n        this._internalStop();\n        this.emit(\"paused\");\n      } else {\n        this.emit(\"resumed\");\n        this.play({\n          start: this._elapsed % this._duration,\n          end: this._end,\n          speed: this._speed,\n          loop: this._loop,\n          volume: this._volume\n        });\n      }\n      this.emit(\"pause\", pausedReal);\n    }\n  }\n  /**\n   * Plays the sound.\n   * @param options - Play options.\n   */\n  play(options) {\n    const { start, end, speed, loop, volume, muted, filters } = options;\n    if (end) {\n      console.assert(end > start, \"End time is before start time\");\n    }\n    this._paused = false;\n    const { source, gain } = this._media.nodes.cloneBufferSource();\n    this._source = source;\n    this._gain = gain;\n    this._speed = speed;\n    this._volume = volume;\n    this._loop = !!loop;\n    this._muted = muted;\n    this._filters = filters;\n    this.refresh();\n    const duration = this._source.buffer.duration;\n    this._duration = duration;\n    this._end = end;\n    this._lastUpdate = this._now();\n    this._elapsed = start;\n    this._source.onended = this._onComplete.bind(this);\n    if (this._loop) {\n      this._source.loopEnd = end;\n      this._source.loopStart = start;\n      this._source.start(0, start);\n    } else if (end) {\n      this._source.start(0, start, end - start);\n    } else {\n      this._source.start(0, start);\n    }\n    this.emit(\"start\");\n    this._update(true);\n    this.enableTicker(true);\n  }\n  /** Start the update progress. */\n  enableTicker(enabled) {\n    Ticker.shared.remove(this._updateListener, this);\n    if (enabled) {\n      Ticker.shared.add(this._updateListener, this);\n    }\n  }\n  /** The current playback progress from 0 to 1. */\n  get progress() {\n    return this._progress;\n  }\n  /** Pauses the sound. */\n  get paused() {\n    return this._paused;\n  }\n  set paused(paused) {\n    this._paused = paused;\n    this.refreshPaused();\n  }\n  /** Don't use after this. */\n  destroy() {\n    this.removeAllListeners();\n    this._internalStop();\n    if (this._gain) {\n      this._gain.disconnect();\n      this._gain = null;\n    }\n    if (this._media) {\n      this._media.context.events.off(\"refresh\", this.refresh, this);\n      this._media.context.events.off(\"refreshPaused\", this.refreshPaused, this);\n      this._media = null;\n    }\n    this._filters?.forEach((filter) => filter.disconnect());\n    this._filters = null;\n    this._end = null;\n    this._speed = 1;\n    this._volume = 1;\n    this._loop = false;\n    this._elapsed = 0;\n    this._duration = 0;\n    this._paused = false;\n    this._muted = false;\n    this._pausedReal = false;\n  }\n  /**\n   * To string method for instance.\n   * @return The string representation of instance.\n   */\n  toString() {\n    return `[WebAudioInstance id=${this.id}]`;\n  }\n  /**\n   * Get the current time in seconds.\n   * @return Seconds since start of context\n   */\n  _now() {\n    return this._media.context.audioContext.currentTime;\n  }\n  /** Callback for update listener */\n  _updateListener() {\n    this._update();\n  }\n  /** Internal update the progress. */\n  _update(force = false) {\n    if (this._source) {\n      const now = this._now();\n      const delta = now - this._lastUpdate;\n      if (delta > 0 || force) {\n        const speed = this._source.playbackRate.value;\n        this._elapsed += delta * speed;\n        this._lastUpdate = now;\n        const duration = this._duration;\n        let progress;\n        if (this._source.loopStart) {\n          const soundLength = this._source.loopEnd - this._source.loopStart;\n          progress = (this._source.loopStart + this._elapsed % soundLength) / duration;\n        } else {\n          progress = this._elapsed % duration / duration;\n        }\n        this._progress = progress;\n        this.emit(\"progress\", this._progress, duration);\n      }\n    }\n  }\n  /** Initializes the instance. */\n  init(media) {\n    this._media = media;\n    media.context.events.on(\"refresh\", this.refresh, this);\n    media.context.events.on(\"refreshPaused\", this.refreshPaused, this);\n  }\n  /** Stops the instance. */\n  _internalStop() {\n    if (this._source) {\n      this.enableTicker(false);\n      this._source.onended = null;\n      this._source.stop(0);\n      this._source.disconnect();\n      try {\n        this._source.buffer = null;\n      } catch (err) {\n        console.warn(\"Failed to set AudioBufferSourceNode.buffer to null:\", err);\n      }\n      this._source = null;\n    }\n  }\n  /** Callback when completed. */\n  _onComplete() {\n    if (this._source) {\n      this.enableTicker(false);\n      this._source.onended = null;\n      this._source.disconnect();\n      try {\n        this._source.buffer = null;\n      } catch (err) {\n        console.warn(\"Failed to set AudioBufferSourceNode.buffer to null:\", err);\n      }\n    }\n    this._source = null;\n    this._progress = 1;\n    this.emit(\"progress\", 1, this._duration);\n    this.emit(\"end\", this);\n  }\n}\n\nexport { WebAudioInstance };\n//# sourceMappingURL=WebAudioInstance.mjs.map\n", "class Filterable {\n  /**\n   * @param input - The source audio node\n   * @param output - The output audio node\n   */\n  constructor(input, output) {\n    this._output = output;\n    this._input = input;\n  }\n  /** The destination output audio node */\n  get destination() {\n    return this._input;\n  }\n  /** The collection of filters. */\n  get filters() {\n    return this._filters;\n  }\n  set filters(filters) {\n    if (this._filters) {\n      this._filters.forEach((filter) => {\n        if (filter) {\n          filter.disconnect();\n        }\n      });\n      this._filters = null;\n      this._input.connect(this._output);\n    }\n    if (filters && filters.length) {\n      this._filters = filters.slice(0);\n      this._input.disconnect();\n      let prevFilter = null;\n      filters.forEach((filter) => {\n        if (prevFilter === null) {\n          this._input.connect(filter.destination);\n        } else {\n          prevFilter.connect(filter.destination);\n        }\n        prevFilter = filter;\n      });\n      prevFilter.connect(this._output);\n    }\n  }\n  /** Cleans up. */\n  destroy() {\n    this.filters = null;\n    this._input = null;\n    this._output = null;\n  }\n}\n\nexport { Filterable };\n//# sourceMappingURL=Filterable.mjs.map\n", "import { Filterable } from '../Filterable.mjs';\nimport { WebAudioUtils } from './WebAudioUtils.mjs';\n\nconst _WebAudioNodes = class extends Filterable {\n  /**\n   * @param context - The audio context.\n   */\n  constructor(context) {\n    const audioContext = context.audioContext;\n    const bufferSource = audioContext.createBufferSource();\n    const gain = audioContext.createGain();\n    const analyser = audioContext.createAnalyser();\n    bufferSource.connect(analyser);\n    analyser.connect(gain);\n    gain.connect(context.destination);\n    super(analyser, gain);\n    this.context = context;\n    this.bufferSource = bufferSource;\n    this.gain = gain;\n    this.analyser = analyser;\n  }\n  /**\n   * Get the script processor node.\n   * @readonly\n   */\n  get script() {\n    if (!this._script) {\n      this._script = this.context.audioContext.createScriptProcessor(_WebAudioNodes.BUFFER_SIZE);\n      this._script.connect(this.context.destination);\n    }\n    return this._script;\n  }\n  /** Cleans up. */\n  destroy() {\n    super.destroy();\n    this.bufferSource.disconnect();\n    if (this._script) {\n      this._script.disconnect();\n    }\n    this.gain.disconnect();\n    this.analyser.disconnect();\n    this.bufferSource = null;\n    this._script = null;\n    this.gain = null;\n    this.analyser = null;\n    this.context = null;\n  }\n  /**\n   * Clones the bufferSource. Used just before playing a sound.\n   * @returns {SourceClone} The clone AudioBufferSourceNode.\n   */\n  cloneBufferSource() {\n    const orig = this.bufferSource;\n    const source = this.context.audioContext.createBufferSource();\n    source.buffer = orig.buffer;\n    WebAudioUtils.setParamValue(source.playbackRate, orig.playbackRate.value);\n    source.loop = orig.loop;\n    const gain = this.context.audioContext.createGain();\n    source.connect(gain);\n    gain.connect(this.destination);\n    return { source, gain };\n  }\n  /**\n   * Get buffer size of `ScriptProcessorNode`.\n   * @readonly\n   */\n  get bufferSize() {\n    return this.script.bufferSize;\n  }\n};\nlet WebAudioNodes = _WebAudioNodes;\n/**\n * The buffer size for script processor, default is `0` which auto-detects. If you plan to use\n * script node on iOS, you'll need to provide a non-zero amount.\n * @default 0\n */\nWebAudioNodes.BUFFER_SIZE = 0;\n\nexport { WebAudioNodes };\n//# sourceMappingURL=WebAudioNodes.mjs.map\n", "import { DOMAdapter } from 'pixi.js';\nimport { WebAudioInstance } from './WebAudioInstance.mjs';\nimport { WebAudioNodes } from './WebAudioNodes.mjs';\n\nclass WebAudioMedia {\n  /**\n   * Re-initialize without constructing.\n   * @param parent - - Instance of parent Sound container\n   */\n  init(parent) {\n    this.parent = parent;\n    this._nodes = new WebAudioNodes(this.context);\n    this._source = this._nodes.bufferSource;\n    this.source = parent.options.source;\n  }\n  /** Destructor, safer to use `SoundLibrary.remove(alias)` to remove this sound. */\n  destroy() {\n    this.parent = null;\n    this._nodes.destroy();\n    this._nodes = null;\n    try {\n      this._source.buffer = null;\n    } catch (err) {\n      console.warn(\"Failed to set AudioBufferSourceNode.buffer to null:\", err);\n    }\n    this._source = null;\n    this.source = null;\n  }\n  // Implement create\n  create() {\n    return new WebAudioInstance(this);\n  }\n  // Implement context\n  get context() {\n    return this.parent.context;\n  }\n  // Implement isPlayable\n  get isPlayable() {\n    return !!this._source && !!this._source.buffer;\n  }\n  // Implement filters\n  get filters() {\n    return this._nodes.filters;\n  }\n  set filters(filters) {\n    this._nodes.filters = filters;\n  }\n  // Implements duration\n  get duration() {\n    console.assert(this.isPlayable, \"Sound not yet playable, no duration\");\n    return this._source.buffer.duration;\n  }\n  /** Gets and sets the buffer. */\n  get buffer() {\n    return this._source.buffer;\n  }\n  set buffer(buffer) {\n    this._source.buffer = buffer;\n  }\n  /** Get the current chained nodes object */\n  get nodes() {\n    return this._nodes;\n  }\n  // Implements load\n  load(callback) {\n    if (this.source) {\n      this._decode(this.source, callback);\n    } else if (this.parent.url) {\n      this._loadUrl(callback);\n    } else if (callback) {\n      callback(new Error(\"sound.url or sound.source must be set\"));\n    } else {\n      console.error(\"sound.url or sound.source must be set\");\n    }\n  }\n  /** Loads a sound using XHMLHttpRequest object. */\n  async _loadUrl(callback) {\n    const url = this.parent.url;\n    const response = await DOMAdapter.get().fetch(url);\n    this._decode(await response.arrayBuffer(), callback);\n  }\n  /**\n   * Decodes the array buffer.\n   * @param arrayBuffer - From load.\n   * @param {Function} callback - Callback optional\n   */\n  _decode(arrayBuffer, callback) {\n    const audioBufferReadyFn = (err, buffer) => {\n      if (err) {\n        if (callback) {\n          callback(err);\n        }\n      } else {\n        this.parent.isLoaded = true;\n        this.buffer = buffer;\n        const instance = this.parent.autoPlayStart();\n        if (callback) {\n          callback(null, this.parent, instance);\n        }\n      }\n    };\n    if (arrayBuffer instanceof AudioBuffer) {\n      audioBufferReadyFn(null, arrayBuffer);\n    } else {\n      const context = this.parent.context;\n      context.decode(arrayBuffer, audioBufferReadyFn);\n    }\n  }\n}\n\nexport { WebAudioMedia };\n//# sourceMappingURL=WebAudioMedia.mjs.map\n", "import { path } from 'pixi.js';\nimport { HTMLAudioMedia } from './htmlaudio/HTMLAudioMedia.mjs';\nimport { getInstance } from './instance.mjs';\nimport { SoundSprite } from './SoundSprite.mjs';\nimport { supported, extensions } from './utils/supported.mjs';\nimport { WebAudioMedia } from './webaudio/WebAudioMedia.mjs';\n\nconst _Sound = class {\n  /**\n   * Create a new sound instance from source.\n   * @param source - Either the path or url to the source file.\n   *        or the object of options to use.\n   * @return Created sound instance.\n   */\n  static from(source) {\n    let options = {};\n    if (typeof source === \"string\") {\n      options.url = source;\n    } else if (source instanceof ArrayBuffer || source instanceof AudioBuffer || source instanceof HTMLAudioElement) {\n      options.source = source;\n    } else if (Array.isArray(source)) {\n      options.url = source;\n    } else {\n      options = source;\n    }\n    options = {\n      autoPlay: false,\n      singleInstance: false,\n      url: null,\n      source: null,\n      preload: false,\n      volume: 1,\n      speed: 1,\n      complete: null,\n      loaded: null,\n      loop: false,\n      ...options\n    };\n    Object.freeze(options);\n    const media = getInstance().useLegacy ? new HTMLAudioMedia() : new WebAudioMedia();\n    return new _Sound(media, options);\n  }\n  /**\n   * Use `Sound.from`\n   * @ignore\n   */\n  constructor(media, options) {\n    this.media = media;\n    this.options = options;\n    this._instances = [];\n    this._sprites = {};\n    this.media.init(this);\n    const complete = options.complete;\n    this._autoPlayOptions = complete ? { complete } : null;\n    this.isLoaded = false;\n    this._preloadQueue = null;\n    this.isPlaying = false;\n    this.autoPlay = options.autoPlay;\n    this.singleInstance = options.singleInstance;\n    this.preload = options.preload || this.autoPlay;\n    this.url = Array.isArray(options.url) ? this.preferUrl(options.url) : options.url;\n    this.speed = options.speed;\n    this.volume = options.volume;\n    this.loop = options.loop;\n    if (options.sprites) {\n      this.addSprites(options.sprites);\n    }\n    if (this.preload) {\n      this._preload(options.loaded);\n    }\n  }\n  /**\n   * Internal help for resolving which file to use if there are multiple provide\n   * this is especially helpful for working with bundlers (non Assets loading).\n   */\n  preferUrl(urls) {\n    const [file] = urls.map((url) => ({ url, ext: path.extname(url).slice(1) })).filter(({ ext }) => supported[ext]).sort((a, b) => extensions.indexOf(a.ext) - extensions.indexOf(b.ext));\n    if (!file) {\n      throw new Error(\"No supported file type found\");\n    }\n    return file.url;\n  }\n  /** Instance of the media context. */\n  get context() {\n    return getInstance().context;\n  }\n  /** Stops all the instances of this sound from playing. */\n  pause() {\n    this.isPlaying = false;\n    this.paused = true;\n    return this;\n  }\n  /** Resuming all the instances of this sound from playing */\n  resume() {\n    this.isPlaying = this._instances.length > 0;\n    this.paused = false;\n    return this;\n  }\n  /** Stops all the instances of this sound from playing. */\n  get paused() {\n    return this._paused;\n  }\n  set paused(paused) {\n    this._paused = paused;\n    this.refreshPaused();\n  }\n  /** The playback rate. */\n  get speed() {\n    return this._speed;\n  }\n  set speed(speed) {\n    this._speed = speed;\n    this.refresh();\n  }\n  /** Set the filters. Only supported with WebAudio. */\n  get filters() {\n    return this.media.filters;\n  }\n  set filters(filters) {\n    this.media.filters = filters;\n  }\n  /**\n   * @ignore\n   */\n  addSprites(source, data) {\n    if (typeof source === \"object\") {\n      const results = {};\n      for (const alias in source) {\n        results[alias] = this.addSprites(alias, source[alias]);\n      }\n      return results;\n    }\n    console.assert(!this._sprites[source], `Alias ${source} is already taken`);\n    const sprite = new SoundSprite(this, data);\n    this._sprites[source] = sprite;\n    return sprite;\n  }\n  /** Destructor, safer to use `SoundLibrary.remove(alias)` to remove this sound. */\n  destroy() {\n    this._removeInstances();\n    this.removeSprites();\n    this.media.destroy();\n    this.media = null;\n    this._sprites = null;\n    this._instances = null;\n  }\n  /**\n   * Remove a sound sprite.\n   * @param alias - The unique name of the sound sprite, if alias is omitted, removes all sprites.\n   */\n  removeSprites(alias) {\n    if (!alias) {\n      for (const name in this._sprites) {\n        this.removeSprites(name);\n      }\n    } else {\n      const sprite = this._sprites[alias];\n      if (sprite !== void 0) {\n        sprite.destroy();\n        delete this._sprites[alias];\n      }\n    }\n    return this;\n  }\n  /** If the current sound is playable (loaded). */\n  get isPlayable() {\n    return this.isLoaded && this.media && this.media.isPlayable;\n  }\n  /** Stops all the instances of this sound from playing. */\n  stop() {\n    if (!this.isPlayable) {\n      this.autoPlay = false;\n      this._autoPlayOptions = null;\n      return this;\n    }\n    this.isPlaying = false;\n    for (let i = this._instances.length - 1; i >= 0; i--) {\n      this._instances[i].stop();\n    }\n    return this;\n  }\n  // Overloaded function\n  play(source, complete) {\n    let options;\n    if (typeof source === \"string\") {\n      const sprite = source;\n      options = { sprite, loop: this.loop, complete };\n    } else if (typeof source === \"function\") {\n      options = {};\n      options.complete = source;\n    } else {\n      options = source;\n    }\n    options = {\n      complete: null,\n      loaded: null,\n      sprite: null,\n      end: null,\n      start: 0,\n      volume: 1,\n      speed: 1,\n      muted: false,\n      loop: false,\n      ...options || {}\n    };\n    if (options.sprite) {\n      const alias = options.sprite;\n      console.assert(!!this._sprites[alias], `Alias ${alias} is not available`);\n      const sprite = this._sprites[alias];\n      options.start = sprite.start + (options.start || 0);\n      options.end = sprite.end;\n      options.speed = sprite.speed || 1;\n      options.loop = sprite.loop || options.loop;\n      delete options.sprite;\n    }\n    if (options.offset) {\n      options.start = options.offset;\n    }\n    if (!this.isLoaded) {\n      if (this._preloadQueue) {\n        return new Promise((resolve) => {\n          this._preloadQueue.push(() => {\n            resolve(this.play(options));\n          });\n        });\n      }\n      this._preloadQueue = [];\n      this.autoPlay = true;\n      this._autoPlayOptions = options;\n      return new Promise((resolve, reject) => {\n        this._preload((err, sound, media) => {\n          this._preloadQueue.forEach((resolve2) => resolve2());\n          this._preloadQueue = null;\n          if (err) {\n            reject(err);\n          } else {\n            if (options.loaded) {\n              options.loaded(err, sound, media);\n            }\n            resolve(media);\n          }\n        });\n      });\n    }\n    if (this.singleInstance || options.singleInstance) {\n      this._removeInstances();\n    }\n    const instance = this._createInstance();\n    this._instances.push(instance);\n    this.isPlaying = true;\n    instance.once(\"end\", () => {\n      if (options.complete) {\n        options.complete(this);\n      }\n      this._onComplete(instance);\n    });\n    instance.once(\"stop\", () => {\n      this._onComplete(instance);\n    });\n    instance.play(options);\n    return instance;\n  }\n  /** Internal only, speed, loop, volume change occured. */\n  refresh() {\n    const len = this._instances.length;\n    for (let i = 0; i < len; i++) {\n      this._instances[i].refresh();\n    }\n  }\n  /** Handle changes in paused state. Internal only. */\n  refreshPaused() {\n    const len = this._instances.length;\n    for (let i = 0; i < len; i++) {\n      this._instances[i].refreshPaused();\n    }\n  }\n  /** Gets and sets the volume. */\n  get volume() {\n    return this._volume;\n  }\n  set volume(volume) {\n    this._volume = volume;\n    this.refresh();\n  }\n  /** Gets and sets the muted flag. */\n  get muted() {\n    return this._muted;\n  }\n  set muted(muted) {\n    this._muted = muted;\n    this.refresh();\n  }\n  /** Gets and sets the looping. */\n  get loop() {\n    return this._loop;\n  }\n  set loop(loop) {\n    this._loop = loop;\n    this.refresh();\n  }\n  /** Starts the preloading of sound. */\n  _preload(callback) {\n    this.media.load(callback);\n  }\n  /** Gets the list of instances that are currently being played of this sound. */\n  get instances() {\n    return this._instances;\n  }\n  /** Get the map of sprites. */\n  get sprites() {\n    return this._sprites;\n  }\n  /** Get the duration of the audio in seconds. */\n  get duration() {\n    return this.media.duration;\n  }\n  /** Auto play the first instance. */\n  autoPlayStart() {\n    let instance;\n    if (this.autoPlay) {\n      instance = this.play(this._autoPlayOptions);\n    }\n    return instance;\n  }\n  /** Removes all instances. */\n  _removeInstances() {\n    for (let i = this._instances.length - 1; i >= 0; i--) {\n      this._poolInstance(this._instances[i]);\n    }\n    this._instances.length = 0;\n  }\n  /**\n   * Sound instance completed.\n   * @param instance\n   */\n  _onComplete(instance) {\n    if (this._instances) {\n      const index = this._instances.indexOf(instance);\n      if (index > -1) {\n        this._instances.splice(index, 1);\n      }\n      this.isPlaying = this._instances.length > 0;\n    }\n    this._poolInstance(instance);\n  }\n  /** Create a new instance. */\n  _createInstance() {\n    if (_Sound._pool.length > 0) {\n      const instance = _Sound._pool.pop();\n      instance.init(this.media);\n      return instance;\n    }\n    return this.media.create();\n  }\n  /**\n   * Destroy/recycling the instance object.\n   * @param instance - Instance to recycle\n   */\n  _poolInstance(instance) {\n    instance.destroy();\n    if (_Sound._pool.indexOf(instance) < 0) {\n      _Sound._pool.push(instance);\n    }\n  }\n};\nlet Sound = _Sound;\n/** Pool of instances */\nSound._pool = [];\n\nexport { Sound };\n//# sourceMappingURL=Sound.mjs.map\n", "import { EventEmitter } from 'pixi.js';\nimport { Filterable } from '../Filterable.mjs';\n\nclass WebAudioContext extends Filterable {\n  constructor() {\n    const win = window;\n    const ctx = new WebAudioContext.AudioContext();\n    const compressor = ctx.createDynamicsCompressor();\n    const analyser = ctx.createAnalyser();\n    analyser.connect(compressor);\n    compressor.connect(ctx.destination);\n    super(analyser, compressor);\n    /** Set to false ignore suspending when window is blurred */\n    this.autoPause = true;\n    this._ctx = ctx;\n    this._offlineCtx = new WebAudioContext.OfflineAudioContext(\n      1,\n      2,\n      win.OfflineAudioContext ? Math.max(8e3, Math.min(96e3, ctx.sampleRate)) : 44100\n    );\n    this.compressor = compressor;\n    this.analyser = analyser;\n    this.events = new EventEmitter();\n    this.volume = 1;\n    this.speed = 1;\n    this.muted = false;\n    this.paused = false;\n    this._locked = ctx.state === \"suspended\" && (\"ontouchstart\" in globalThis || \"onclick\" in globalThis);\n    if (this._locked) {\n      this._unlock();\n      this._unlock = this._unlock.bind(this);\n      document.addEventListener(\"mousedown\", this._unlock, true);\n      document.addEventListener(\"touchstart\", this._unlock, true);\n      document.addEventListener(\"touchend\", this._unlock, true);\n    }\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    globalThis.addEventListener(\"focus\", this.onFocus);\n    globalThis.addEventListener(\"blur\", this.onBlur);\n  }\n  /** Handle mobile WebAudio context resume */\n  onFocus() {\n    if (!this.autoPause) {\n      return;\n    }\n    const state = this._ctx.state;\n    if (state === \"suspended\" || state === \"interrupted\" || !this._locked) {\n      this.paused = this._pausedOnBlur;\n      this.refreshPaused();\n    }\n  }\n  /** Handle mobile WebAudio context suspend */\n  onBlur() {\n    if (!this.autoPause) {\n      return;\n    }\n    if (!this._locked) {\n      this._pausedOnBlur = this._paused;\n      this.paused = true;\n      this.refreshPaused();\n    }\n  }\n  /**\n   * Try to unlock audio on iOS. This is triggered from either WebAudio plugin setup (which will work if inside of\n   * a `mousedown` or `touchend` event stack), or the first document touchend/mousedown event. If it fails (touchend\n   * will fail if the user presses for too long, indicating a scroll event instead of a click event.\n   *\n   * Note that earlier versions of iOS supported `touchstart` for this, but iOS9 removed this functionality. Adding\n   * a `touchstart` event to support older platforms may preclude a `mousedown` even from getting fired on iOS9, so we\n   * stick with `mousedown` and `touchend`.\n   */\n  _unlock() {\n    if (!this._locked) {\n      return;\n    }\n    this.playEmptySound();\n    if (this._ctx.state === \"running\") {\n      document.removeEventListener(\"mousedown\", this._unlock, true);\n      document.removeEventListener(\"touchend\", this._unlock, true);\n      document.removeEventListener(\"touchstart\", this._unlock, true);\n      this._locked = false;\n    }\n  }\n  /**\n   * Plays an empty sound in the web audio context.  This is used to enable web audio on iOS devices, as they\n   * require the first sound to be played inside of a user initiated event (touch/click).\n   */\n  playEmptySound() {\n    const source = this._ctx.createBufferSource();\n    source.buffer = this._ctx.createBuffer(1, 1, 22050);\n    source.connect(this._ctx.destination);\n    source.start(0, 0, 0);\n    if (source.context.state === \"suspended\") {\n      source.context.resume();\n    }\n  }\n  /**\n   * Get AudioContext class, if not supported returns `null`\n   * @type {AudioContext}\n   * @readonly\n   */\n  static get AudioContext() {\n    const win = window;\n    return win.AudioContext || win.webkitAudioContext || null;\n  }\n  /**\n   * Get OfflineAudioContext class, if not supported returns `null`\n   * @type {OfflineAudioContext}\n   * @readonly\n   */\n  static get OfflineAudioContext() {\n    const win = window;\n    return win.OfflineAudioContext || win.webkitOfflineAudioContext || null;\n  }\n  /** Destroy this context. */\n  destroy() {\n    super.destroy();\n    const ctx = this._ctx;\n    if (typeof ctx.close !== \"undefined\") {\n      ctx.close();\n    }\n    globalThis.removeEventListener(\"focus\", this.onFocus);\n    globalThis.removeEventListener(\"blur\", this.onBlur);\n    this.events.removeAllListeners();\n    this.analyser.disconnect();\n    this.compressor.disconnect();\n    this.analyser = null;\n    this.compressor = null;\n    this.events = null;\n    this._offlineCtx = null;\n    this._ctx = null;\n  }\n  /**\n   * The WebAudio API AudioContext object.\n   * @readonly\n   * @type {AudioContext}\n   */\n  get audioContext() {\n    return this._ctx;\n  }\n  /**\n   * The WebAudio API OfflineAudioContext object.\n   * @readonly\n   * @type {OfflineAudioContext}\n   */\n  get offlineContext() {\n    return this._offlineCtx;\n  }\n  /**\n   * Pauses all sounds, even though we handle this at the instance\n   * level, we'll also pause the audioContext so that the\n   * time used to compute progress isn't messed up.\n   * @default false\n   */\n  set paused(paused) {\n    if (paused && this._ctx.state === \"running\") {\n      this._ctx.suspend();\n    } else if (!paused && this._ctx.state === \"suspended\") {\n      this._ctx.resume();\n    }\n    this._paused = paused;\n  }\n  get paused() {\n    return this._paused;\n  }\n  /** Emit event when muted, volume or speed changes */\n  refresh() {\n    this.events.emit(\"refresh\");\n  }\n  /** Emit event when muted, volume or speed changes */\n  refreshPaused() {\n    this.events.emit(\"refreshPaused\");\n  }\n  /**\n   * Toggles the muted state.\n   * @return The current muted state.\n   */\n  toggleMute() {\n    this.muted = !this.muted;\n    this.refresh();\n    return this.muted;\n  }\n  /**\n   * Toggles the paused state.\n   * @return The current muted state.\n   */\n  togglePause() {\n    this.paused = !this.paused;\n    this.refreshPaused();\n    return this._paused;\n  }\n  /**\n   * Decode the audio data\n   * @param arrayBuffer - Buffer from loader\n   * @param callback - When completed, error and audioBuffer are parameters.\n   */\n  decode(arrayBuffer, callback) {\n    const handleError = (err) => {\n      callback(new Error(err?.message || \"Unable to decode file\"));\n    };\n    const result = this._offlineCtx.decodeAudioData(\n      arrayBuffer,\n      (buffer) => {\n        callback(null, buffer);\n      },\n      handleError\n    );\n    if (result) {\n      result.catch(handleError);\n    }\n  }\n}\n\nexport { WebAudioContext };\n//# sourceMappingURL=WebAudioContext.mjs.map\n", "import { HTMLAudioContext } from './htmlaudio/HTMLAudioContext.mjs';\nimport { Sound } from './Sound.mjs';\nimport { WebAudioContext } from './webaudio/WebAudioContext.mjs';\n\nclass SoundLibrary {\n  constructor() {\n    this.init();\n  }\n  /**\n   * Re-initialize the sound library, this will\n   * recreate the AudioContext. If there's a hardware-failure\n   * call `close` and then `init`.\n   * @return Sound instance\n   */\n  init() {\n    if (this.supported) {\n      this._webAudioContext = new WebAudioContext();\n    }\n    this._htmlAudioContext = new HTMLAudioContext();\n    this._sounds = {};\n    this.useLegacy = !this.supported;\n    return this;\n  }\n  /**\n   * The global context to use.\n   * @readonly\n   */\n  get context() {\n    return this._context;\n  }\n  /**\n   * Apply filters to all sounds. Can be useful\n   * for setting global planning or global effects.\n   * **Only supported with WebAudio.**\n   * @example\n   * import { sound, filters } from '@pixi/sound';\n   * // Adds a filter to pan all output left\n   * sound.filtersAll = [\n   *     new filters.StereoFilter(-1)\n   * ];\n   */\n  get filtersAll() {\n    if (!this.useLegacy) {\n      return this._context.filters;\n    }\n    return [];\n  }\n  set filtersAll(filtersAll) {\n    if (!this.useLegacy) {\n      this._context.filters = filtersAll;\n    }\n  }\n  /**\n   * `true` if WebAudio is supported on the current browser.\n   */\n  get supported() {\n    return WebAudioContext.AudioContext !== null;\n  }\n  /**\n   * @ignore\n   */\n  add(source, sourceOptions) {\n    if (typeof source === \"object\") {\n      const results = {};\n      for (const alias in source) {\n        const options2 = this._getOptions(\n          source[alias],\n          sourceOptions\n        );\n        results[alias] = this.add(alias, options2);\n      }\n      return results;\n    }\n    console.assert(!this._sounds[source], `Sound with alias ${source} already exists.`);\n    if (sourceOptions instanceof Sound) {\n      this._sounds[source] = sourceOptions;\n      return sourceOptions;\n    }\n    const options = this._getOptions(sourceOptions);\n    const sound = Sound.from(options);\n    this._sounds[source] = sound;\n    return sound;\n  }\n  /**\n   * Internal methods for getting the options object\n   * @private\n   * @param source - The source options\n   * @param overrides - Override default options\n   * @return The construction options\n   */\n  _getOptions(source, overrides) {\n    let options;\n    if (typeof source === \"string\") {\n      options = { url: source };\n    } else if (Array.isArray(source)) {\n      options = { url: source };\n    } else if (source instanceof ArrayBuffer || source instanceof AudioBuffer || source instanceof HTMLAudioElement) {\n      options = { source };\n    } else {\n      options = source;\n    }\n    options = { ...options, ...overrides || {} };\n    return options;\n  }\n  /**\n   * Do not use WebAudio, force the use of legacy. This **must** be called before loading any files.\n   */\n  get useLegacy() {\n    return this._useLegacy;\n  }\n  set useLegacy(legacy) {\n    this._useLegacy = legacy;\n    this._context = !legacy && this.supported ? this._webAudioContext : this._htmlAudioContext;\n  }\n  /**\n   * This disables auto-pause all playback when the window blurs (WebAudio only).\n   * This is helpful to keep from playing sounds when the user switches tabs.\n   * However, if you're running content within an iframe, this may be undesirable\n   * and you should disable (set to `true`) this behavior.\n   * @default false\n   */\n  get disableAutoPause() {\n    return !this._webAudioContext.autoPause;\n  }\n  set disableAutoPause(autoPause) {\n    this._webAudioContext.autoPause = !autoPause;\n  }\n  /**\n   * Removes a sound by alias.\n   * @param alias - The sound alias reference.\n   * @return Instance for chaining.\n   */\n  remove(alias) {\n    this.exists(alias, true);\n    this._sounds[alias].destroy();\n    delete this._sounds[alias];\n    return this;\n  }\n  /**\n   * Set the global volume for all sounds. To set per-sound volume see {@link SoundLibrary#volume}.\n   */\n  get volumeAll() {\n    return this._context.volume;\n  }\n  set volumeAll(volume) {\n    this._context.volume = volume;\n    this._context.refresh();\n  }\n  /**\n   * Set the global speed for all sounds. To set per-sound speed see {@link SoundLibrary#speed}.\n   */\n  get speedAll() {\n    return this._context.speed;\n  }\n  set speedAll(speed) {\n    this._context.speed = speed;\n    this._context.refresh();\n  }\n  /**\n   * Toggle paused property for all sounds.\n   * @return `true` if all sounds are paused.\n   */\n  togglePauseAll() {\n    return this._context.togglePause();\n  }\n  /**\n   * Pauses any playing sounds.\n   * @return Instance for chaining.\n   */\n  pauseAll() {\n    this._context.paused = true;\n    this._context.refreshPaused();\n    return this;\n  }\n  /**\n   * Resumes any sounds.\n   * @return Instance for chaining.\n   */\n  resumeAll() {\n    this._context.paused = false;\n    this._context.refreshPaused();\n    return this;\n  }\n  /**\n   * Toggle muted property for all sounds.\n   * @return `true` if all sounds are muted.\n   */\n  toggleMuteAll() {\n    return this._context.toggleMute();\n  }\n  /**\n   * Mutes all playing sounds.\n   * @return Instance for chaining.\n   */\n  muteAll() {\n    this._context.muted = true;\n    this._context.refresh();\n    return this;\n  }\n  /**\n   * Unmutes all playing sounds.\n   * @return Instance for chaining.\n   */\n  unmuteAll() {\n    this._context.muted = false;\n    this._context.refresh();\n    return this;\n  }\n  /**\n   * Stops and removes all sounds. They cannot be used after this.\n   * @return Instance for chaining.\n   */\n  removeAll() {\n    for (const alias in this._sounds) {\n      this._sounds[alias].destroy();\n      delete this._sounds[alias];\n    }\n    return this;\n  }\n  /**\n   * Stops all sounds.\n   * @return Instance for chaining.\n   */\n  stopAll() {\n    for (const alias in this._sounds) {\n      this._sounds[alias].stop();\n    }\n    return this;\n  }\n  /**\n   * Checks if a sound by alias exists.\n   * @param alias - Check for alias.\n   * @param assert - Whether enable console.assert.\n   * @return true if the sound exists.\n   */\n  exists(alias, assert = false) {\n    const exists = !!this._sounds[alias];\n    if (assert) {\n      console.assert(exists, `No sound matching alias '${alias}'.`);\n    }\n    return exists;\n  }\n  /**\n   * Convenience function to check to see if any sound is playing.\n   * @returns `true` if any sound is currently playing.\n   */\n  isPlaying() {\n    for (const alias in this._sounds) {\n      if (this._sounds[alias].isPlaying) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Find a sound by alias.\n   * @param alias - The sound alias reference.\n   * @return Sound object.\n   */\n  find(alias) {\n    this.exists(alias, true);\n    return this._sounds[alias];\n  }\n  /**\n   * Plays a sound.\n   * @method play\n   * @instance\n   * @param {string} alias - The sound alias reference.\n   * @param {string} sprite - The alias of the sprite to play.\n   * @return {IMediaInstance|null} The sound instance, this cannot be reused\n   *         after it is done playing. Returns `null` if the sound has not yet loaded.\n   */\n  /**\n   * Plays a sound.\n   * @param alias - The sound alias reference.\n   * @param {PlayOptions|Function} options - The options or callback when done.\n   * @return The sound instance,\n   *        this cannot be reused after it is done playing. Returns a Promise if the sound\n   *        has not yet loaded.\n   */\n  play(alias, options) {\n    return this.find(alias).play(options);\n  }\n  /**\n   * Stops a sound.\n   * @param alias - The sound alias reference.\n   * @return Sound object.\n   */\n  stop(alias) {\n    return this.find(alias).stop();\n  }\n  /**\n   * Pauses a sound.\n   * @param alias - The sound alias reference.\n   * @return Sound object.\n   */\n  pause(alias) {\n    return this.find(alias).pause();\n  }\n  /**\n   * Resumes a sound.\n   * @param alias - The sound alias reference.\n   * @return Instance for chaining.\n   */\n  resume(alias) {\n    return this.find(alias).resume();\n  }\n  /**\n   * Get or set the volume for a sound.\n   * @param alias - The sound alias reference.\n   * @param volume - Optional current volume to set.\n   * @return The current volume.\n   */\n  volume(alias, volume) {\n    const sound = this.find(alias);\n    if (volume !== void 0) {\n      sound.volume = volume;\n    }\n    return sound.volume;\n  }\n  /**\n   * Get or set the speed for a sound.\n   * @param alias - The sound alias reference.\n   * @param speed - Optional current speed to set.\n   * @return The current speed.\n   */\n  speed(alias, speed) {\n    const sound = this.find(alias);\n    if (speed !== void 0) {\n      sound.speed = speed;\n    }\n    return sound.speed;\n  }\n  /**\n   * Get the length of a sound in seconds.\n   * @param alias - The sound alias reference.\n   * @return The current duration in seconds.\n   */\n  duration(alias) {\n    return this.find(alias).duration;\n  }\n  /**\n   * Closes the sound library. This will release/destroy\n   * the AudioContext(s). Can be used safely if you want to\n   * initialize the sound library later. Use `init` method.\n   */\n  close() {\n    this.removeAll();\n    this._sounds = null;\n    if (this._webAudioContext) {\n      this._webAudioContext.destroy();\n      this._webAudioContext = null;\n    }\n    if (this._htmlAudioContext) {\n      this._htmlAudioContext.destroy();\n      this._htmlAudioContext = null;\n    }\n    this._context = null;\n    return this;\n  }\n}\n\nexport { SoundLibrary };\n//# sourceMappingURL=SoundLibrary.mjs.map\n", "import { ExtensionType, LoaderParserPriority, path, extensions as extensions$1 } from 'pixi.js';\nimport { getInstance } from './instance.mjs';\nimport { Sound } from './Sound.mjs';\nimport { extensions, supported, mimes } from './utils/supported.mjs';\n\nconst getAlias = (asset) => {\n  const src = asset.src;\n  let alias = asset?.alias?.[0];\n  if (!alias || asset.src === alias) {\n    alias = path.basename(src, path.extname(src));\n  }\n  return alias;\n};\nconst soundAsset = {\n  extension: ExtensionType.Asset,\n  detection: {\n    test: async () => true,\n    add: async (formats) => [...formats, ...extensions.filter((ext) => supported[ext])],\n    remove: async (formats) => formats.filter((ext) => formats.includes(ext))\n  },\n  loader: {\n    name: \"sound\",\n    extension: {\n      type: [ExtensionType.LoadParser],\n      priority: LoaderParserPriority.High\n    },\n    /** Should we attempt to load this file? */\n    test(url) {\n      const ext = path.extname(url).slice(1);\n      return !!supported[ext] || mimes.some((mime) => url.startsWith(`data:${mime}`));\n    },\n    /** Load the sound file, this is mostly handled by Sound.from() */\n    async load(url, asset) {\n      const sound = await new Promise((resolve, reject) => Sound.from({\n        ...asset.data,\n        url,\n        preload: true,\n        loaded(err, sound2) {\n          if (err) {\n            reject(err);\n          } else {\n            resolve(sound2);\n          }\n          asset.data?.loaded?.(err, sound2);\n        }\n      }));\n      getInstance().add(getAlias(asset), sound);\n      return sound;\n    },\n    /** Remove the sound from the library */\n    async unload(_sound, asset) {\n      getInstance().remove(getAlias(asset));\n    }\n  }\n};\nextensions$1.add(soundAsset);\n\nexport { soundAsset };\n//# sourceMappingURL=soundAsset.mjs.map\n", "import * as index from './filters/index.mjs';\nexport { index as filters };\nimport * as index$1 from './htmlaudio/index.mjs';\nexport { index$1 as htmlaudio };\nimport { setInstance } from './instance.mjs';\nimport { SoundLibrary } from './SoundLibrary.mjs';\nimport * as index$2 from './utils/index.mjs';\nexport { index$2 as utils };\nimport * as index$3 from './webaudio/index.mjs';\nexport { index$3 as webaudio };\nexport { Filterable } from './Filterable.mjs';\nexport { Filter } from './filters/Filter.mjs';\nexport { Sound } from './Sound.mjs';\nexport { soundAsset } from './soundAsset.mjs';\nexport { SoundSprite } from './SoundSprite.mjs';\n\nconst sound = setInstance(new SoundLibrary());\n\nexport { SoundLibrary, sound };\n//# sourceMappingURL=index.mjs.map\n", "import { PlayOptions, Sound, sound, SoundSourceMap } from '@pixi/sound';\nimport { gsap } from 'gsap';\nimport { Assets, AssetsManifest, UnresolvedAsset } from 'pixi.js';\nimport { Signal } from '../../signals';\nimport { Logger } from '../../utils';\nimport type { IPlugin } from '../Plugin';\nimport { Plugin } from '../Plugin';\n\nimport { IApplication } from '../../core';\nimport { AudioChannel, IAudioChannel } from './AudioChannel';\nimport { AudioInstance, IAudioInstance } from './AudioInstance';\nimport TweenVars = gsap.TweenVars;\n\nexport type SoundDetail = { id: string; instance: IAudioInstance; channelName: string };\nexport type ChannelVolumeDetail = { channel: IAudioChannel; volume: number };\nexport type ChannelName = 'music' | 'sfx' | 'voiceover' | (string & {});\n\nexport interface IAudioManagerPlugin<C extends ChannelName = ChannelName> extends IPlugin {\n  onSoundStarted: Signal<(detail: SoundDetail) => void>;\n  onSoundEnded: Signal<(detail: SoundDetail) => void>;\n  onMasterVolumeChanged: Signal<(volume: number) => void>;\n  onChannelVolumeChanged: Signal<(detail: ChannelVolumeDetail) => void>;\n  onMuted: Signal<(muted: boolean) => void>;\n\n  masterVolume: number;\n  muted: boolean;\n  channels: Map<string, IAudioChannel>;\n  music: IAudioChannel;\n  sfx: IAudioChannel;\n  voiceover: IAudioChannel;\n  vo: IAudioChannel;\n\n  createChannel(name: string): void;\n\n  play(soundId: string, channelName: C, options?: PlayOptions): Promise<IAudioInstance>;\n\n  isPlaying(soundId: string, channelName: C): boolean;\n\n  load(soundId: string | string[], channelName: C, options?: PlayOptions): void;\n\n  stop(soundId: string, channelName: C): IAudioInstance | undefined;\n\n  setChannelVolume(channelName: C | C[], volume: number): void;\n\n  getChannel(name: C): IAudioChannel | undefined;\n\n  addAllFromManifest(manifest: AssetsManifest): void;\n\n  addAllFromBundle(bundleName: string, manifest?: AssetsManifest | string | undefined): void;\n\n  add(soundAsset: UnresolvedAsset): void;\n\n  fade(soundId: string, channelName: C, props?: gsap.TweenVars): Promise<gsap.core.Tween | null>;\n\n  fadeIn(soundId: string, channelName: C, props?: gsap.TweenVars): Promise<gsap.core.Tween | null>;\n\n  fadeOut(soundId: string, channelName: C, props?: gsap.TweenVars): Promise<gsap.core.Tween | null>;\n\n  crossFade(outSoundId: string, inSoundId: string, channelName: C, duration?: number): Promise<gsap.core.Tween | null>;\n\n  mute(): void;\n\n  unmute(): void;\n\n  pause(): void;\n\n  resume(): void;\n\n  suspend(): void;\n\n  restore(): Promise<void>;\n\n  getAudioInstance(soundId: string, channelName: C): IAudioInstance | undefined;\n\n  stopAll(fade?: boolean, duration?: number, props?: TweenVars): void;\n}\n\n/**\n * AudioManager is a class that manages audio playback in the application.\n * It provides methods to play, stop, fade in/out, and crossfade sounds.\n * It also allows you to create and manage audio channels.\n *\n * @example\n * const audioManager = new AudioManager();\n * audioManager.play('soundId', 'music');\n */\nexport class AudioManagerPlugin<C extends ChannelName = ChannelName> extends Plugin implements IAudioManagerPlugin<C> {\n  // signals\n  /**\n   * Signal that is emitted when a sound starts playing.\n   * The callback function receives a SoundDetail object.\n   */\n  public onSoundStarted: Signal<(detail: SoundDetail) => void> = new Signal<(detail: SoundDetail) => void>();\n  /**\n   * Signal that is emitted when a sound ends.\n   * The callback function receives a SoundDetail object.\n   */\n  public onSoundEnded: Signal<(detail: SoundDetail) => void> = new Signal<(detail: SoundDetail) => void>();\n  /**\n   * Signal that is emitted when the system is muted or unmuted.\n   */\n  public onMuted: Signal<(muted: boolean) => void> = new Signal<(muted: boolean) => void>();\n  /**\n   * Signal that is emitted when the master volume changes.\n   * The callback function receives the new volume as a number.\n   */\n  public onMasterVolumeChanged: Signal<(volume: number) => void> = new Signal<(volume: number) => void>();\n  /**\n   * Signal that is emitted when a channel's volume changes.\n   * The callback function receives a ChannelVolumeDetail object.\n   */\n  public onChannelVolumeChanged: Signal<(detail: ChannelVolumeDetail) => void> = new Signal<\n    (detail: ChannelVolumeDetail) => void\n  >();\n  private _storedVolume: number | undefined = undefined;\n  private _paused: boolean = false;\n  private _idMap: Map<string, string> = new Map();\n\n  /**\n   * Creates a new AudioManager instance.\n   * @param {string} id - The ID of the AudioManager. Default is 'AudioManager'.\n   */\n  public constructor(id: string = 'audio') {\n    super(id);\n\n    this.createChannel('music');\n    this.createChannel('sfx');\n    this.createChannel('voiceover');\n  }\n\n  private _masterVolume: number = 1;\n\n  /**\n   * Gets the master volume.\n   * @returns {number} The master volume.\n   */\n  get masterVolume(): number {\n    return this._masterVolume;\n  }\n\n  /**\n   * Sets the master volume.\n   * @param {number} value - The new master volume.\n   */\n  set masterVolume(value: number) {\n    this._masterVolume = value;\n    this._channels.forEach((channel) => channel.updateVolume());\n  }\n\n  private _muted: boolean = false;\n\n  /**\n   * Gets whether the audio is muted.\n   * @returns {boolean} True if the audio is muted, false otherwise.\n   */\n  get muted(): boolean {\n    return this._muted;\n  }\n\n  /**\n   * Sets whether the audio is muted.\n   * @param {boolean} value - True to mute the audio, false to unmute.\n   */\n  set muted(value: boolean) {\n    this._muted = value;\n    this._setMuted();\n  }\n\n  private _channels: Map<C, IAudioChannel> = new Map();\n\n  /**\n   * Gets the map of audio channels.\n   * @returns {Map<string, IAudioChannel>} The map of audio channels.\n   */\n  get channels(): Map<string, IAudioChannel> {\n    return this._channels;\n  }\n\n  get music(): IAudioChannel {\n    return this._channels.get('music' as C)!;\n  }\n\n  get sfx(): IAudioChannel {\n    return this._channels.get('sfx' as C)!;\n  }\n\n  get voiceover(): IAudioChannel {\n    return this._channels.get('voiceover' as C)!;\n  }\n\n  get vo(): IAudioChannel {\n    return this._channels.get('voiceover' as C)!;\n  }\n\n  public destroy(): void {\n    this._channels.forEach((channel) => {\n      channel.destroy();\n    });\n    this._channels.clear();\n    this.onSoundStarted.disconnectAll();\n    this.onSoundEnded.disconnectAll();\n    this.onMuted.disconnectAll();\n    this.onMasterVolumeChanged.disconnectAll();\n    this.onChannelVolumeChanged.disconnectAll();\n\n    super.destroy();\n  }\n\n  /**\n   * Initializes the AudioManager.\n   * @param {IApplication} app\n   * @returns {Promise<void>}\n   */\n  public initialize(app: IApplication): Promise<void> {\n    if (typeof app?.manifest === 'object') {\n      this.addAllFromManifest(app.manifest);\n    }\n    return Promise.resolve(undefined);\n  }\n\n  /**\n   * Creates a new audio channel.\n   * @param {string} name\n   */\n  public createChannel(name: string): void {\n    if (this._channels.has(name as C)) {\n      throw new Error(`Channel with name ${name} already exists.`);\n    }\n    const channel = new AudioChannel<C>(name as C, this);\n    this._channels.set(name as C, channel);\n  }\n\n  /**\n   * Sets the volume of the specified channel.\n   * @param {ChannelName|ChannelName[]} channelName\n   * @param {number} volume\n   */\n  public setChannelVolume(channelName: C | C[], volume: number): void {\n    if (!Array.isArray(channelName)) {\n      channelName = [channelName];\n    }\n    channelName.forEach((name) => this._setChannelVolume(name as C, volume));\n  }\n\n  /**\n   * Gets the audio channel with the specified name.\n   * @param {C} name\n   * @returns {IAudioChannel | undefined}\n   */\n  public getChannel(name: C): IAudioChannel | undefined {\n    return this._channels.get(name);\n  }\n\n  /**\n   * Mutes the audio.\n   */\n  public mute() {\n    this._muted = true;\n    this._setMuted();\n  }\n\n  /**\n   * Unmutes the audio.\n   */\n  public unmute() {\n    this._muted = false;\n    this._setMuted();\n  }\n\n  /**\n   * Pauses the audio.\n   */\n  public pause(): void {\n    this._paused = true;\n    this._setPaused();\n  }\n\n  /**\n   * Resumes the audio.\n   */\n  public resume(): void {\n    this._paused = false;\n    this._setPaused();\n  }\n\n  /**\n   * Adds all sound assets from the specified manifest.\n   * @param {AssetsManifest} manifest\n   */\n  public addAllFromManifest(manifest: AssetsManifest) {\n    manifest.bundles.forEach((bundle) => {\n      this.addAllFromBundle(bundle.name, manifest);\n    });\n  }\n\n  /**\n   * Adds all sound assets from the specified bundle.\n   * @param {string} bundleName\n   * @param {AssetsManifest | string | undefined} manifest\n   */\n  public addAllFromBundle(bundleName: string, manifest?: AssetsManifest | string | undefined) {\n    if (!manifest) {\n      manifest = this.app.manifest;\n    }\n    if (manifest === undefined || typeof manifest === 'string') {\n      throw new Error('Manifest is not available');\n    }\n    const bundle = manifest.bundles.find((b) => b.name === bundleName);\n    if (bundle === undefined) {\n      throw new Error(`Bundle with name ${bundleName} does not exist.`);\n    }\n    if (!Array.isArray(bundle?.assets)) {\n      bundle.assets = [bundle.assets];\n    }\n    bundle.assets.forEach((asset) => {\n      // detect sound assets by asset.src extension\n      let src = asset.src;\n      if (Array.isArray(src)) {\n        src = src[0];\n      }\n      const ext = (src as string).split('.').pop();\n      if (ext === 'mp3' || ext === 'ogg' || ext === 'wav' || ext === 'webm') {\n        this.add(asset);\n      }\n    });\n  }\n\n  /**\n   * Adds a sound asset to the AudioManager.\n   * @param {UnresolvedAsset} soundAsset\n   */\n  public add(soundAsset: UnresolvedAsset): void {\n    let alias = soundAsset.alias;\n    if (!Array.isArray(soundAsset.alias)) {\n      alias = [soundAsset.alias as string];\n    }\n    if (alias) {\n      const obj: SoundSourceMap = {};\n      (alias as string[]).forEach((a: string) => {\n        if (a === undefined) {\n          return;\n        }\n        // @ts-expect-error soundAsset is not a string error\n        obj[a] = soundAsset.src;\n      });\n      sound.add(obj);\n    }\n  }\n\n  isPlaying(soundId: string, channelName: C): boolean {\n    const channel = this._channels.get(channelName);\n    if (channel) {\n      return channel.get(soundId)?.isPlaying === true;\n    }\n    return false;\n  }\n\n  /**\n   * Plays a sound with the specified ID in the specified channel.\n   * @param {string} soundId\n   * @param {C} channelName\n   * @param {PlayOptions} options\n   * @returns {Promise<IAudioInstance>}\n   */\n  public async play(soundId: string, channelName: C = 'sfx' as C, options?: PlayOptions): Promise<IAudioInstance> {\n    if (this._idMap.has(soundId)) {\n      soundId = this._idMap.get(soundId) as string;\n    }\n    const channel = this._channels.get(channelName);\n    if (channel) {\n      soundId = this._verifySoundId(soundId);\n      const audioInstance = channel.add(\n        soundId,\n        new AudioInstance<C>(soundId, channel, this as IAudioManagerPlugin<C>),\n      );\n      const mediaInstance = await sound.play(soundId, options);\n      audioInstance.media = mediaInstance;\n      if (options?.volume !== undefined) {\n        mediaInstance.volume = options.volume;\n\n        audioInstance.onStart.connect(() => {\n          () => this._soundStarted(soundId, audioInstance, channelName);\n        });\n        audioInstance.onEnd.connect(() => {\n          () => this._soundEnded(soundId, audioInstance, channelName);\n        });\n      }\n      audioInstance.isPlaying = true;\n      return audioInstance;\n    } else {\n      throw new Error(`Channel ${channelName} does not exist.`);\n    }\n  }\n\n  /**\n   * Stops a sound with the specified ID in the specified channel.\n   * @param {string} soundId\n   * @param {C} channelName\n   * @returns {IAudioInstance | undefined}\n   */\n  public stop(soundId: string, channelName: C = 'sfx' as C): IAudioInstance | undefined {\n    const channel = this._channels.get(channelName);\n    if (channel) {\n      return channel.remove(soundId);\n    } else {\n      throw new Error(`Channel ${channelName} does not exist.`);\n    }\n  }\n\n  /**\n   * Fades in a sound with the specified ID in the specified channel.\n   * @param {string} soundId\n   * @param {C} channelName\n   * @param {gsap.TweenVars} props\n   * @returns {Promise<gsap.core.Tween | null>}\n   */\n  public async fadeIn(\n    soundId: string,\n    channelName: C = 'music' as C,\n    props: gsap.TweenVars,\n  ): Promise<gsap.core.Tween | null> {\n    const channel = this._channels.get(channelName);\n    if (channel) {\n      soundId = this._verifySoundId(soundId);\n    }\n    if (!channel?.get(soundId)) {\n      await this.play(soundId, channelName, { volume: 0 });\n    }\n    if (props?.volume === 0) {\n      Logger.warn('fadeIn volume is 0', soundId, channelName, props);\n    }\n    const fadeProps = Object.assign({ volume: props?.volume ?? 1, duration: 1, ease: 'linear.easeNone' }, props);\n    return this.fade(soundId, channelName, fadeProps);\n  }\n\n  /**\n   * Fades out a sound with the specified ID in the specified channel.\n   * @param {string} soundId\n   * @param {C} channelName\n   * @param {Partial<gsap.TweenVars>} props\n   * @returns {Promise<gsap.core.Tween | null>}\n   */\n  public async fadeOut(\n    soundId: string,\n    channelName: C = 'music' as C,\n    props: Partial<gsap.TweenVars> = { volume: 0 },\n  ): Promise<gsap.core.Tween | null> {\n    if (!props) {\n      props = {};\n    }\n    if (props?.volume === undefined) {\n      props.volume = 0;\n    }\n    if (props?.volume > 0) {\n      Logger.warn('fadeOut volume should probably be 0', soundId, channelName, props);\n    }\n    const fadeProps = Object.assign({ volume: 0, duration: 1, ease: 'linear.easeNone' }, props);\n    return this.fade(soundId, channelName, fadeProps, true);\n  }\n\n  /**\n   * Crossfades between two sounds in the specified channel.\n   * @param {string} outSoundId\n   * @param {string} inSoundId\n   * @param {ChannelName} channelName\n   * @param {number} duration\n   * @returns {Promise<gsap.core.Tween | null>}\n   */\n  public async crossFade(\n    outSoundId: string,\n    inSoundId: string,\n    channelName: ChannelName = 'music',\n    duration: number = 2,\n  ): Promise<gsap.core.Tween | null> {\n    const crossFadeProps = { duration, ease: 'linear.easeNone' };\n    void this.fadeOut(outSoundId, channelName as C, crossFadeProps);\n    return this.fadeIn(inSoundId, channelName as C, crossFadeProps);\n  }\n\n  /**\n   * Fades a sound with the specified ID in the specified channel.\n   * @param {string} soundId\n   * @param {ChannelName} channelName\n   * @param {gsap.TweenVars} props\n   * @param {boolean} stopOnComplete\n   * @returns {Promise<gsap.core.Tween | null>}\n   */\n  public async fade(\n    soundId: string,\n    channelName: ChannelName = 'music',\n    props: gsap.TweenVars,\n    stopOnComplete: boolean = false,\n  ): Promise<gsap.core.Tween | null> {\n    const channel = this._channels.get(channelName as C);\n    if (channel) {\n      soundId = this._verifySoundId(soundId);\n    }\n    const soundInstance = channel?.get(soundId);\n    if (soundInstance) {\n      const tween = gsap.to(soundInstance, props);\n      tween.eventCallback('onComplete', () => {\n        if (stopOnComplete) {\n          this.stop(soundId, channelName as C);\n        }\n      });\n      return tween;\n    }\n    return null;\n  }\n\n  /**\n   * Restores the audio state after it has been suspended.\n   */\n  public async restore() {\n    const ctx = sound?.context?.audioContext;\n    if (ctx) {\n      await ctx.resume();\n    }\n    if (this._storedVolume !== undefined) {\n      this.masterVolume = this._storedVolume;\n    }\n    this.muted = this._muted;\n    this.resume();\n  }\n\n  /**\n   * Suspends the audio by setting the master volume to 0 and pausing all sounds.\n   */\n  public suspend() {\n    this._storedVolume = this._masterVolume;\n    this.masterVolume = 0;\n    this.pause();\n  }\n\n  public getAudioInstance(soundId: string, channelName: C = 'sfx' as C): IAudioInstance | undefined {\n    const channel = this._channels.get(channelName);\n    soundId = this._verifySoundId(soundId);\n    if (channel) {\n      return channel.get(soundId);\n    } else {\n      throw new Error(`Channel ${channelName} does not exist.`);\n    }\n  }\n\n  public load(soundId: string | string[], channelName: C = 'sfx' as C, options?: PlayOptions): void {\n    if (!Array.isArray(soundId)) {\n      soundId = [soundId];\n    }\n    for (let id of soundId) {\n      if (this._idMap.has(id)) {\n        soundId = this._idMap.get(id) as string;\n      }\n      const channel = this._channels.get(channelName);\n      if (channel) {\n        id = this._verifySoundId(id);\n        // const audioInstance = new AudioInstance(id, channel, this);\n        const soundInstance = sound.find(id);\n        soundInstance.options = { ...options, autoPlay: false };\n        const audioInstance = channel.add(id, new AudioInstance<C>(id, channel, this as IAudioManagerPlugin<C>));\n        audioInstance.media = soundInstance.instances[0];\n        audioInstance.pause();\n      } else {\n        throw new Error(`Channel ${channelName} does not exist.`);\n      }\n    }\n  }\n\n  public stopAll(fade: boolean = false, duration: number = 1, props: TweenVars = {}) {\n    if (fade) {\n      // get all playing sounds\n      const playingSounds: IAudioInstance[] = [];\n      this._channels.forEach((channel) => {\n        channel.instances.forEach((instance) => {\n          if (instance.isPlaying) {\n            instance.storedVolume = instance.volume;\n            playingSounds.push(instance);\n          }\n        });\n      });\n      gsap.to(playingSounds, {\n        volume: 0,\n        duration,\n        ...props,\n        onComplete: () => {\n          playingSounds.forEach((instance) => {\n            instance.stop();\n            instance.volume = instance.storedVolume;\n          });\n        },\n      });\n    } else {\n      sound.stopAll();\n    }\n  }\n\n  protected getCoreSignals(): string[] {\n    return ['onSoundStarted', 'onSoundEnded', 'onMuted', 'onMasterVolumeChanged', 'onChannelVolumeChanged'];\n  }\n\n  private _verifySoundId(soundId: string): string {\n    const originalSoundId = soundId;\n    if (this._idMap.has(soundId)) {\n      return this._idMap.get(soundId) as string;\n    }\n    // try appending .mp3 or .ogg\n    if (!sound.exists(soundId)) {\n      // Logger.log(`Sound with ID ${soundId} does not exist. Trying different extensions.`);\n      if (sound.exists(soundId + '.mp3')) {\n        soundId += '.mp3';\n      } else if (sound.exists(soundId + '.ogg')) {\n        soundId += '.ogg';\n      } else if (sound.exists(soundId + '.wav')) {\n        soundId += '.wav';\n      } else {\n        soundId = originalSoundId;\n        let sound = Assets.get(soundId);\n        if (!sound) {\n          soundId = originalSoundId + '.mp3';\n          sound = Assets.get(soundId);\n        }\n        if (!sound) {\n          soundId = originalSoundId + '.ogg';\n          sound = Assets.get(soundId);\n        }\n        if (!sound) {\n          soundId = originalSoundId + '.wav';\n          sound = Assets.get(soundId);\n        }\n        if (sound) {\n          this._findAndAddFromManifest(soundId, sound);\n        } else {\n          throw new Error(`Sound with ID ${soundId} does not exist.`);\n        }\n      }\n    }\n    this._idMap.set(soundId, soundId);\n    return soundId;\n  }\n\n  private _findAndAddFromManifest(soundId: string, sound: Sound) {\n    const manifest = this.app.manifest;\n    if (manifest === undefined || typeof manifest === 'string') {\n      throw new Error('Manifest is not available');\n    }\n    for (let i = 0; i < manifest.bundles.length; i++) {\n      const bundle = manifest.bundles[i];\n      if (!Array.isArray(bundle?.assets)) {\n        bundle.assets = [bundle.assets];\n      }\n      for (let j = 0; j < bundle.assets.length; j++) {\n        const asset = bundle.assets[j];\n        // detect sound assets by asset.src extension\n        const src = asset.src;\n        const filename = sound.url.split('/').pop() ?? '';\n        if (Array.isArray(src)) {\n          for (let s = 0; s < src.length; s++) {\n            const urlOrResolvedSrc = src[s];\n            let url: string;\n            if (typeof urlOrResolvedSrc !== 'string') {\n              url = urlOrResolvedSrc.src!;\n            } else {\n              url = urlOrResolvedSrc as string;\n            }\n            if (url.includes(filename)) {\n              this.add(asset);\n              return;\n            }\n          }\n        } else {\n          if (src?.includes(filename)) {\n            this.add(asset);\n            return;\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  private _setMuted(): void {\n    this._channels.forEach((channel) => {\n      channel.muted = this._muted;\n    });\n    if (this._muted) {\n      sound.muteAll();\n    } else {\n      sound.unmuteAll();\n    }\n    this.onMuted.emit(this._muted);\n  }\n\n  /**\n   * @private\n   */\n  private _setPaused(): void {\n    if (this._paused) {\n      sound.pauseAll();\n    } else {\n      sound.resumeAll();\n    }\n  }\n\n  /**\n   * Sets the volume of the specified channel.\n   * @param {C} channelName\n   * @param {number} volume\n   * @private\n   */\n  private _setChannelVolume(channelName: C, volume: number): void {\n    const channel = this._channels.get(channelName);\n    if (channel) {\n      channel.volume = volume;\n    } else {\n      throw new Error(`Channel ${channelName} does not exist.`);\n    }\n  }\n\n  /**\n   * Sound started event handler. Emit the onSoundStarted signal.\n   * @param {string} id\n   * @param {IAudioInstance} instance\n   * @param {C} channelName\n   * @private\n   */\n  private _soundStarted(id: string, instance: IAudioInstance, channelName: C): void {\n    // Logger.log(`${id} started in ${channelName} channel`);\n    this.onSoundStarted.emit({ id, instance, channelName });\n  }\n\n  /**\n   * Sound ended event handler. Emit the onSoundEnded signal.\n   * @param {string} id\n   * @param {IAudioInstance} instance\n   * @param {C} channelName\n   * @private\n   */\n  private _soundEnded(id: string, instance: IAudioInstance, channelName: C): void {\n    // Logger.log(`${id} ended in ${channelName} channel`);\n    this.onSoundEnded.emit({ id, instance, channelName });\n  }\n}\n", "import { Bounds, Container, DestroyOptions, Graphics, PointLike } from 'pixi.js';\nimport { Application } from '../../Application';\nimport { bindAllMethods, resolvePointLike } from '../../utils';\nimport type { IFocusable } from './FocusManagerPlugin';\n\nexport type FocusOutlinerConfig = {\n  color: number;\n  shape: 'rectangle' | 'rounded rectangle';\n  lineWidth?: number;\n  radius?: number;\n};\n\nexport interface IFocusOutliner {\n  position: PointLike;\n  focusBounds: Bounds;\n\n  draw(focusTarget: IFocusable): void;\n\n  clear(): void;\n\n  destroy(args?: DestroyOptions): void;\n\n  setFocusTarget(focusTarget: IFocusable): void;\n\n  clearFocusTarget(): void;\n\n  updatePosition(): void;\n}\n\nexport class FocusOutliner extends Container implements IFocusOutliner {\n  focusBounds: Bounds;\n  focusTarget: IFocusable | null;\n  protected _config: FocusOutlinerConfig;\n  protected _graphics: Graphics;\n\n  constructor(config?: Partial<FocusOutlinerConfig>) {\n    super();\n    bindAllMethods(this);\n    this._config = {\n      color: 0x00ffff,\n      shape: 'rounded rectangle',\n      radius: 8,\n      lineWidth: 2,\n      ...config,\n    };\n    this._graphics = new Graphics();\n    this.addChild(this._graphics);\n  }\n\n  public draw(focusTarget: IFocusable): void {\n    this.clear();\n    this.setFocusTarget(focusTarget);\n    if (!this.focusTarget) {\n      return;\n    }\n    this._graphics.strokeStyle = { width: this._config.lineWidth, color: this._config.color, alpha: 1 };\n    if (this._config.shape === 'rectangle') {\n      this._graphics.rect(0, 0, this.focusBounds.width, this.focusBounds.height);\n    } else {\n      this._graphics.roundRect(0, 0, this.focusBounds.width, this.focusBounds.height, this._config.radius);\n    }\n    this._graphics.stroke();\n  }\n\n  public clear(): void {\n    this.clearFocusTarget();\n  }\n\n  public destroy(options?: DestroyOptions) {\n    this.clear();\n    this._graphics.destroy();\n    super.destroy(options);\n  }\n\n  public setFocusTarget(focusTarget: IFocusable) {\n    if (focusTarget) {\n      this.focusTarget = focusTarget;\n      this.focusBounds = this.focusTarget.getFocusArea().clone();\n      Application.getInstance().ticker.add(this.updatePosition);\n    }\n  }\n\n  public clearFocusTarget() {\n    this.focusTarget = null;\n    Application.getInstance().ticker.remove(this.updatePosition);\n  }\n\n  public updatePosition() {\n    if (!this.focusTarget) {\n      return;\n    }\n    const pos = this.focusTarget.getGlobalPosition();\n    const focusPos = this.focusTarget.getFocusPosition();\n    if (focusPos) {\n      const fp = resolvePointLike(focusPos);\n      pos.x += fp.x;\n      pos.y += fp.y;\n    }\n\n    this.position.set(pos.x, pos.y);\n  }\n}\n", "import { Bounds, Container, Point, PointerEvents } from 'pixi.js';\nimport { IApplication } from '../../core';\nimport { Signal } from '../../signals';\nimport type { Constructor, PointLike as DillPixelPointLike } from '../../utils';\nimport { bindMethods, getLastMapEntry, getPreviousMapEntry, Logger } from '../../utils';\nimport type { IPlugin } from '../Plugin';\nimport { Plugin } from '../Plugin';\nimport type { IFocusOutliner } from './FocusOutliner';\nimport { FocusOutliner, FocusOutlinerConfig } from './FocusOutliner';\n\nexport type FocusManagerPluginOptions = {\n  outliner: IFocusOutliner | Partial<FocusOutlinerConfig> | typeof FocusOutliner;\n  usePixiAccessibility: boolean;\n};\n\nexport interface IFocusable extends Container {\n  isFocused: boolean;\n  isKeyDown: boolean;\n  focusEnabled: boolean;\n  tabIndex: number;\n  _accessibleDiv?: HTMLElement;\n\n  // pixi accessibility features\n  accessible: boolean;\n  accessibleType: string;\n  accessibleTitle: string;\n  accessibleHint: string;\n  accessiblePointerEvents?: PointerEvents;\n  accessibleChildren: boolean;\n\n  // signals\n  onFocusIn: Signal<(focusable: IFocusable) => void>;\n  onFocusOut: Signal<(focusable: IFocusable) => void>;\n  onFocus: Signal<(focusable: IFocusable) => void>;\n  onBlur: Signal<(focusable: IFocusable) => void>;\n\n  focusIn(): void;\n\n  focusOut(): void;\n\n  click(): void;\n\n  blur(): void;\n\n  getGlobalPosition(): Point;\n\n  getFocusArea(): Bounds;\n\n  getFocusPosition(): DillPixelPointLike | null;\n\n  getFocusSize(): DillPixelPointLike | null;\n}\n\nexport interface IFocusLayer {\n  currentFocusable: IFocusable | null;\n  defaultFocusable: IFocusable | null;\n  lastFocusable: IFocusable | null;\n  current: boolean;\n  availableFocusables: IFocusable[];\n\n  setCurrentFocusable(focusable: IFocusable | null): IFocusable | null;\n\n  hasFocusable(focusable: IFocusable | null): boolean;\n\n  setCurrent(): void;\n\n  addFocusable(focusable: IFocusable, isDefault?: boolean): void;\n\n  removeFocusable(focusable: IFocusable): void;\n\n  sortFocusables(): void;\n\n  sortFocusablesByPosition(): void;\n\n  next(): IFocusable | null;\n\n  prev(): IFocusable | null;\n}\n\nclass FocusLayer implements IFocusLayer {\n  public currentFocusable: IFocusable | null = null;\n  public lastFocusable: IFocusable | null = null;\n  public defaultFocusable: IFocusable | null = null;\n\n  private _focusables: IFocusable[] = [];\n  private _currentIndex: number = 0;\n\n  constructor(public id: string | number) {}\n\n  private _current: boolean = false;\n\n  set current(value: boolean) {\n    this._current = value;\n    this.setCurrent();\n  }\n\n  public get availableFocusables(): IFocusable[] {\n    return this._focusables.filter((f) => f.focusEnabled);\n  }\n\n  public setCurrent() {\n    if (this._current) {\n      if (!this.defaultFocusable) {\n        this.defaultFocusable = this._focusables[0];\n      }\n      this.sortFocusables();\n    } else {\n      for (let i = 0; i < this._focusables.length; i++) {\n        this._focusables[i].accessible = false;\n      }\n    }\n  }\n\n  public hasFocusable(focusable: IFocusable | null) {\n    if (!focusable) {\n      return false;\n    }\n    return this._focusables.indexOf(focusable) > -1;\n  }\n\n  public addFocusable(focusable: IFocusable, isDefault: boolean = false): void {\n    this._focusables.push(focusable);\n    if (isDefault) {\n      this.defaultFocusable = focusable;\n    }\n    if (this._current) {\n      this.sortFocusables();\n    }\n  }\n\n  public removeFocusable(focusable: IFocusable) {\n    const index = this._focusables.indexOf(focusable);\n    if (index !== -1) {\n      this._focusables.splice(index, 1);\n\n      if (this.currentFocusable === focusable) {\n        this.currentFocusable = null;\n      }\n\n      if (this.lastFocusable === focusable) {\n        this.lastFocusable = null;\n      }\n\n      if (this.defaultFocusable === focusable) {\n        this.defaultFocusable = null;\n      }\n    }\n    if (this._current) {\n      this.sortFocusables();\n    }\n  }\n\n  public sortFocusables() {\n    for (let i = 0; i < this._focusables.length; i++) {\n      this._focusables[i].accessible = this._current;\n      this._focusables[i].tabIndex = this._current ? Math.max(i, 1) + 1 : -1;\n      if (this._focusables[i] === this.defaultFocusable) {\n        this._focusables[i].tabIndex = this._current ? 1 : -1;\n      }\n    }\n    if (this._current) {\n      this._focusables.sort((a, b) => a.tabIndex - b.tabIndex);\n    }\n  }\n\n  public sortFocusablesByPosition() {\n    if (this._current) {\n      this._focusables.sort((a: IFocusable, b: IFocusable) => {\n        if (a.position.y !== b.position.y) {\n          return a.position.y - b.position.y;\n        }\n        return a.position.x - b.position.x;\n      });\n    }\n  }\n\n  setCurrentFocusable(focusable: IFocusable | null) {\n    if (focusable) {\n      this._currentIndex = this._focusables.indexOf(focusable);\n      this.currentFocusable = focusable;\n    } else {\n      this._currentIndex = -1;\n      this.currentFocusable = null;\n    }\n    return this.currentFocusable;\n  }\n\n  public next() {\n    this._currentIndex = this._currentIndex + 1;\n    if (this._currentIndex >= this._focusables.length) {\n      this._currentIndex = 0;\n    }\n    this.currentFocusable = this._focusables[this._currentIndex];\n    return this.currentFocusable;\n  }\n\n  public prev() {\n    this._currentIndex = this._currentIndex - 1;\n    if (this._currentIndex < 0) {\n      this._currentIndex = this._focusables.length - 1;\n    }\n    this.currentFocusable = this._focusables[this._currentIndex];\n    return this.currentFocusable;\n  }\n}\n\nexport type FocusChangeDetail = { layer: string | number | null; focusable: IFocusable | null };\n\nexport interface IFocusManagerPlugin extends IPlugin {\n  readonly view: Container;\n  readonly layerCount: number;\n  readonly currentLayer: IFocusLayer | undefined;\n  readonly currentLayerId: string | number | null;\n  readonly active: boolean;\n  readonly layers: Map<string | number, IFocusLayer>;\n\n  onFocusManagerActivated: Signal<() => void>;\n  onFocusManagerDeactivated: Signal<() => void>;\n  onFocusLayerChange: Signal<(currentLayerId: string | number) => void>;\n  onFocusChange: Signal<(detail: FocusChangeDetail) => void>;\n\n  enabled: boolean;\n\n  restart(): void;\n\n  focus(focusable: IFocusable): void;\n\n  forceFocus(focusable: IFocusable): void;\n\n  setFocus(focusable: IFocusable): void;\n\n  addFocusLayer(layerId?: string | number, setAsCurrent?: boolean, focusables?: IFocusable | IFocusable[]): IFocusLayer;\n\n  removeFocusLayer(layerId?: string | number): void;\n\n  setFocusLayer(layerId: string | number): void;\n\n  setLayerOrder(layerIds: (string | number)[]): void;\n\n  add(focusable: IFocusable | IFocusable[], layerId?: string | number, isDefault?: boolean): void;\n\n  addFocusable(focusable: IFocusable | IFocusable[], layerId?: string | number, isDefault?: boolean): void;\n\n  remove(focusable: IFocusable | IFocusable[]): void;\n\n  removeFocusable(focusable: IFocusable | IFocusable[]): void;\n\n  deactivate(): void;\n\n  clearFocus(): void;\n\n  removeAllFocusLayers(): void;\n\n  sortFocusablesByPosition(): void;\n}\n\nexport class FocusManagerPlugin extends Plugin implements IFocusManagerPlugin {\n  public override readonly id: string = 'focus';\n  public readonly view = new Container();\n  // signals\n  public onFocusManagerActivated: Signal<() => void> = new Signal<() => void>();\n  public onFocusManagerDeactivated: Signal<() => void> = new Signal<() => void>();\n  public onFocusLayerChange: Signal<(currentLayerId: string | number) => void> = new Signal<\n    (currentLayerId: string | number) => void\n  >();\n  public onFocusChange: Signal<(detail: FocusChangeDetail) => void> = new Signal<(detail: FocusChangeDetail) => void>();\n  //\n  private _focusOutliner: IFocusOutliner;\n  private _focusTarget: IFocusable | null = null;\n  private _keyboardActive: boolean = false;\n  private _options: FocusManagerPluginOptions;\n\n  private _layers: Map<string | number, IFocusLayer> = new Map();\n\n  public get layers(): Map<string | number, IFocusLayer> {\n    return this._layers;\n  }\n\n  private _currentLayerId: string | number | null = null;\n\n  get currentLayerId(): string | number | null {\n    return this._currentLayerId;\n  }\n\n  get currentLayer(): IFocusLayer | undefined {\n    if (!this._currentLayerId) {\n      return undefined;\n    }\n    return this._layers.get(this._currentLayerId);\n  }\n\n  private _active: boolean = false;\n\n  get active(): boolean {\n    return this._active;\n  }\n\n  private _enabled: boolean = true;\n\n  get enabled() {\n    return this._enabled;\n  }\n\n  set enabled(value: boolean) {\n    this._enabled = value;\n  }\n\n  public get layerCount(): number {\n    return this._layers.size;\n  }\n\n  public sortFocusablesByPosition() {\n    this._getCurrentLayer()?.sortFocusablesByPosition();\n  }\n\n  public initialize(app: IApplication): void {\n    bindMethods(this, 'removeAllFocusLayers', '_handleGlobalMouseMove', '_handleGlobalPointerDown');\n    const options: Partial<FocusManagerPluginOptions> = app.config?.focus || {};\n    options.usePixiAccessibility = options.usePixiAccessibility ?? false;\n    this._focusOutliner =\n      typeof options?.outliner === 'function'\n        ? new (options.outliner as Constructor<IFocusOutliner>)()\n        : new FocusOutliner(options.outliner as Partial<FocusOutlinerConfig>);\n\n    this._options = options as FocusManagerPluginOptions;\n\n    this.view.addChild(this._focusOutliner as unknown as Container);\n\n    this._updatePixiAccessibility();\n\n    this._setupKeyboardListeners();\n    this._setupAppListeners();\n  }\n\n  public destroy(): void {\n    this._removeGlobalListeners();\n    this.deactivate();\n    this._focusOutliner.destroy();\n    this._layers.clear();\n    super.destroy();\n  }\n\n  public deactivate(): void {\n    this._setTarget(null);\n    this._updateOutliner();\n    this._active = false;\n  }\n\n  public add(focusable: IFocusable | IFocusable[], layerId?: string | number, isDefault: boolean = false): void {\n    this.addFocusable(focusable, layerId, isDefault);\n  }\n\n  public addFocusable(\n    focusable: IFocusable | IFocusable[],\n    layerId?: string | number | null | undefined,\n    isDefault: boolean = false,\n  ): void {\n    if (layerId === undefined || layerId == null) {\n      layerId = this._currentLayerId ?? null;\n    }\n    const layer = this._layers.get(layerId!);\n    if (!layer) {\n      Logger.error(`Layer with ID ${layerId} does not exist.`);\n      return;\n    }\n    if (!Array.isArray(focusable)) {\n      focusable = [focusable];\n    }\n    (focusable as IFocusable[]).forEach((f, idx) => {\n      layer.addFocusable(f, idx === 0 && isDefault);\n    });\n\n    if (this._active && isDefault) {\n      this._setTarget(layer.currentFocusable || layer.defaultFocusable || null, !this._active);\n    }\n  }\n\n  public remove(focusable: IFocusable | IFocusable[]) {\n    this.removeFocusable(focusable);\n  }\n\n  public removeFocusable(focusable: IFocusable | IFocusable[]) {\n    if (!Array.isArray(focusable)) {\n      focusable = [focusable];\n    }\n    this._layers.forEach((layer) => {\n      (focusable as IFocusable[]).forEach((f) => {\n        layer.removeFocusable(f);\n      });\n    });\n    if (this._focusTarget && focusable.includes(this._focusTarget)) {\n      this._setTarget(null);\n    }\n  }\n\n  public setLayerOrder(layerIds: (string | number)[]): void {\n    const newLayers: Map<string | number, IFocusLayer> = new Map();\n    layerIds.forEach((layerId) => {\n      if (!this._layers.has(layerId)) {\n        throw new Error(`Layer with ID ${layerId} does not exist.`);\n      }\n      newLayers.set(layerId, this._layers.get(layerId)!);\n    });\n    this._layers = newLayers;\n  }\n\n  public addFocusLayer(\n    layerId?: string | number,\n    setAsCurrent: boolean = true,\n    focusables?: IFocusable | IFocusable[],\n  ): IFocusLayer {\n    if (layerId === undefined) {\n      layerId = this._layers.size;\n    }\n    let newLayer;\n    if (this._layers.has(layerId)) {\n      Logger.error(`Layer with ID ${layerId} already exists.`);\n      newLayer = this._layers.get(layerId)!;\n    } else {\n      newLayer = new FocusLayer(layerId);\n      this._layers.set(layerId, newLayer);\n    }\n\n    if (setAsCurrent || this._currentLayerId === null) {\n      this.setFocusLayer(layerId);\n    }\n    if (focusables) {\n      this.addFocusable(focusables, layerId);\n    }\n    return newLayer;\n  }\n\n  public removeFocusLayer(layerId?: string | number, removeTopLayerIfUndefined = true): void {\n    if (layerId === undefined && removeTopLayerIfUndefined) {\n      return this._removeTopLayer();\n    }\n    if (!this._layers.has(layerId!)) {\n      throw new Error(`Layer with ID ${layerId} does not exist.`);\n    }\n    const nextLayerId = getPreviousMapEntry(this._layers, layerId)?.[0];\n    this._layers.delete(layerId!);\n    this._postDelete(nextLayerId);\n  }\n\n  public restart(reverse: boolean = false) {\n    const layer = this._getCurrentLayer();\n    this._setTarget(\n      reverse\n        ? layer?.availableFocusables?.[layer?.availableFocusables?.length - 1] || null\n        : layer?.availableFocusables?.[0] || null,\n    );\n  }\n\n  public forceFocus(focusable: IFocusable) {\n    this.focus(focusable);\n  }\n\n  public setFocus(focusable: IFocusable) {\n    this.focus(focusable);\n  }\n\n  public focus(focusable: IFocusable) {\n    this._setTarget(focusable);\n  }\n\n  public setFocusLayer(layerId: string | number): void {\n    if (!this._layers.has(layerId)) {\n      throw new Error(`Layer with ID ${layerId} does not exist.`);\n    }\n    this._currentLayerId = layerId;\n    const currentLayer = this._getCurrentLayer();\n    if (currentLayer) {\n      currentLayer.current = true;\n      this._layers.forEach((layer, key) => {\n        layer.current = key === layerId;\n      });\n      currentLayer.sortFocusables();\n      this._setTarget(currentLayer.currentFocusable || currentLayer.defaultFocusable || null, !this._active);\n    }\n    this.onFocusLayerChange.emit(this._currentLayerId);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public postInitialize(_app: IApplication): Promise<void> | void {}\n\n  public clearFocus() {\n    this._setTarget(null);\n  }\n\n  public removeAllFocusLayers(): void {\n    this._layers.clear();\n    this._setTarget(null);\n  }\n\n  _onKeyDown(e: KeyboardEvent) {\n    if (!this._enabled || (e.key !== 'Tab' && e.key !== 'Enter' && e.key !== ' ' && e.key !== 'Space')) {\n      return;\n    }\n    if (!this._options.usePixiAccessibility) {\n      // e.preventDefault();\n      if (e.key === 'Tab') {\n        e.preventDefault();\n        const layer = this._getCurrentLayer();\n        const focusables = layer?.availableFocusables;\n        if (!focusables) {\n          return;\n        }\n        if (!this._keyboardActive) {\n          this._activate();\n          this._setTarget(this._focusTarget || layer.currentFocusable || layer.defaultFocusable || null);\n        } else {\n          // check if we're on the last focusable\n          if (e.shiftKey) {\n            this._prev();\n          } else {\n            this._next();\n          }\n        }\n      } else if (e.key === 'Enter' || e.key === ' ' || e.key === 'Space') {\n        if (this._focusTarget && this._focusTarget.isFocused) {\n          // @ts-expect-error event assignment\n          this._focusTarget.emit('pointerdown', { type: 'pointerdown' });\n        }\n      }\n    }\n  }\n\n  _onKeyUp(e: any) {\n    if (!this._enabled || (e.key !== 'Enter' && e.key !== ' ' && e.key !== 'Space')) {\n      return;\n    }\n    if (!this._options.usePixiAccessibility) {\n      // e.preventDefault();\n      if (this._focusTarget && this._focusTarget.isFocused) {\n        // @ts-expect-error event assignment\n        this._focusTarget?.emit('click', { type: 'click', originalEvent: e });\n        // @ts-expect-error event assignment\n        this._focusTarget?.emit('pointerup', { type: 'pointerup', originalEvent: e });\n      }\n    }\n  }\n\n  _onMouseMove(e: MouseEvent) {\n    if (e.movementX === 0 && e.movementY === 0) {\n      return;\n    }\n    this._deactivate();\n  }\n\n  protected getCoreFunctions(): string[] {\n    return [\n      'addFocusable',\n      'removeFocusable',\n      'setLayerOrder',\n      'addFocusLayer',\n      'removeFocusLayer',\n      'setFocusLayer',\n      'setFocus',\n      'focus',\n      'clearFocus',\n      'removeAllFocusLayers',\n    ];\n  }\n\n  protected getCoreSignals(): string[] {\n    return ['onFocusManagerActivated', 'onFocusManagerDeactivated', 'onFocusLayerChange', 'onFocusChange'];\n  }\n\n  private _next() {\n    const nextTarget = this._getCurrentLayer()?.next();\n    if (!nextTarget) {\n      Logger.error('FocusManager:: _next():: No focusable found in the current layer.');\n      return;\n    }\n    this._setTarget(nextTarget);\n  }\n\n  private _prev() {\n    const nextTarget = this._getCurrentLayer()?.prev();\n    if (!nextTarget) {\n      Logger.error('FocusManager:: _prev():: No focusable found in the current layer.');\n      return;\n    }\n    this._setTarget(nextTarget);\n  }\n\n  private _deactivate() {\n    if (!this._keyboardActive) {\n      return;\n    }\n    this._keyboardActive = false;\n  }\n\n  private _activate() {\n    if (this._keyboardActive) {\n      return;\n    }\n    this._keyboardActive = true;\n    globalThis.document.addEventListener('mousemove', this._onMouseMove, true);\n  }\n\n  private _updatePixiAccessibility() {\n    // @ts-expect-error _div is protected\n    this.app.renderer.accessibility._div.setAttribute('id', 'pixi-accessibility');\n    if (!this._options.usePixiAccessibility) {\n      // @ts-expect-error _div is protected\n      this.app.renderer.accessibility._div.setAttribute('disabled', 'disabled');\n      this.app.renderer.accessibility.destroy();\n      globalThis.addEventListener('keydown', this._onKeyDown, false);\n      globalThis.addEventListener('keyup', this._onKeyUp, false);\n    }\n  }\n\n  private _getCurrentLayer(): IFocusLayer | null {\n    return this._currentLayerId != null ? this._layers.get(this._currentLayerId) || null : null;\n  }\n\n  private _removeTopLayer() {\n    const layerId = getLastMapEntry(this._layers)?.[0];\n    const nextLayerId = getPreviousMapEntry(this._layers, layerId)?.[0];\n    if (layerId === undefined) {\n      return;\n    }\n    this._layers.delete(layerId);\n    this._postDelete(nextLayerId);\n  }\n\n  private _postDelete(nextLayerId: string | number | undefined) {\n    if (this._layers.size === 0) {\n      this._currentLayerId = null;\n    } else if (nextLayerId !== undefined) {\n      this.setFocusLayer(nextLayerId);\n    }\n  }\n\n  private _setTarget(focusTarget: IFocusable | null, setInactiveOnNull: boolean = true) {\n    const layer = this._getCurrentLayer();\n    const oldFocusTarget = this._focusTarget;\n    this._focusTarget = focusTarget;\n    // call the focus out methods on the current focusable, which is changing\n    if (oldFocusTarget && this._active) {\n      this._clearFocusTarget(oldFocusTarget);\n    }\n    if (this.app.renderer.accessibility.isActive || this._keyboardActive) {\n      if (this._focusTarget) {\n        if (!this._active) {\n          this._active = true;\n        }\n        if (this._options.usePixiAccessibility && !this._focusTarget._accessibleDiv) {\n          this.app.renderer.accessibility.postrender();\n        }\n\n        if (this._options.usePixiAccessibility) {\n          this.app.ticker.addOnce(() => {\n            this._focusTarget?._accessibleDiv?.focus();\n          });\n        }\n\n        if (layer?.hasFocusable(focusTarget)) {\n          // call focusIn on the focusable\n          if (this._focusTarget) {\n            this._focusTarget.focusIn();\n            this._focusTarget.isFocused = true;\n            this._focusTarget.onFocusIn.emit(this._focusTarget);\n            layer.setCurrentFocusable(this._focusTarget);\n            this._updateOutliner();\n          }\n        } else {\n          Logger.warn(\n            `The focusable`,\n            focusTarget,\n            `does not exist on the current focus layer: ${this._currentLayerId}`,\n          );\n        }\n      } else {\n        this._focusOutliner.clear();\n      }\n    } else {\n      this._focusOutliner.clear();\n      if (this._active && setInactiveOnNull) {\n        this._active = false;\n        this.onFocusManagerDeactivated.emit();\n        return;\n      }\n    }\n\n    if (oldFocusTarget !== focusTarget && this._active) {\n      this.onFocusChange.emit({ focusable: this._focusTarget, layer: this._currentLayerId });\n    }\n  }\n\n  private _clearFocusTarget(focusTarget: IFocusable | null) {\n    if (!focusTarget) {\n      return;\n    }\n    focusTarget.focusOut();\n    focusTarget.isFocused = false;\n    focusTarget.onFocusOut.emit(focusTarget);\n    focusTarget.blur();\n    focusTarget.onBlur.emit(focusTarget);\n  }\n\n  private _setupKeyboardListeners(): void {\n    window.addEventListener('keydown', this._onKeyDown, false);\n    this._addGlobalListeners();\n  }\n\n  private _addGlobalListeners() {\n    globalThis.document.addEventListener('mousemove', this._handleGlobalMouseMove);\n    globalThis.document.addEventListener('pointerdown', this._handleGlobalPointerDown);\n  }\n\n  private _removeGlobalListeners() {\n    globalThis.document.removeEventListener('mousemove', this._handleGlobalMouseMove);\n    globalThis.document.removeEventListener('pointerdown', this._handleGlobalPointerDown);\n  }\n\n  private _handleGlobalMouseMove() {\n    if (!this._enabled) {\n      return;\n    }\n    if (this._active) {\n      this.deactivate();\n    }\n  }\n\n  private _handleGlobalPointerDown() {\n    if (!this._enabled) {\n      return;\n    }\n    if (this._active) {\n      this.deactivate();\n    }\n    if (this.app.renderer.accessibility.isActive || this._keyboardActive) {\n      // @ts-expect-error _deactivate is protected\n      this.app.renderer.accessibility._deactivate();\n      this._deactivate();\n    }\n  }\n\n  private _setupAppListeners(): void {\n    this.app.scenes.onSceneChangeStart.connect(this.removeAllFocusLayers);\n  }\n\n  private _updateOutliner() {\n    if (this._focusTarget) {\n      this._focusOutliner.position.set(this._focusTarget.position.x, this._focusTarget.position.y);\n      this._focusOutliner.draw(this._focusTarget);\n    } else {\n      this._focusOutliner.clear();\n    }\n  }\n}\n", "import {Assets} from 'pixi.js';\nimport {IApplication} from '../core';\nimport {Signal} from '../signals';\nimport type {ImportListItem, ImportListItemModule} from '../utils';\nimport {getDynamicModuleFromImportListItem, Logger} from '../utils';\nimport type {IPlugin} from './Plugin';\nimport {Plugin} from './Plugin';\n\n/**\n * Type definition for i18n dictionary.\n */\nexport type i18nDict = Record<string, any>;\n\n/**\n * Type definition for i18n translation parameters.\n */\nexport type i18nTParams = { variant?: number | 'random' } & Record<string, any>;\n\n/**\n * Type definition for i18n import list item.\n */\ntype i18nImportListItem<T> = {\n  id: string;\n  namedExport?: string;\n  options?: any;\n  module?: ImportListItemModule<T>;\n} & {\n  json?: string;\n};\n\n/**\n * Type definition for i18n options.\n */\nexport type i18nOptions = {\n  defaultLocale: string;\n  locales: string[];\n  loadAll: boolean;\n  files: i18nImportListItem<i18nDict>[];\n};\n\n/**\n * Default options for i18n module.\n */\nconst defaultOptions: i18nOptions = {\n  defaultLocale: 'en',\n  locales: ['en'],\n  loadAll: false,\n  files: [],\n};\n\n/**\n * Interface for i18n module.\n */\nexport interface Ii18nPlugin extends IPlugin {\n  readonly locale: string;\n  readonly locales: string[];\n  onLocaleChanged: Signal<(locale: string) => void>;\n\n  setLocale(localeId: string): Promise<string>;\n\n  loadLocale(localeId: string): Promise<void>;\n\n  t(key: string, params?: i18nTParams, locale?: string): string;\n\n  parse(input: string, locale?: string): string;\n}\n\n/**\n * i18n module class.\n */\nexport class i18nPlugin extends Plugin implements Ii18nPlugin {\n  public readonly id = 'i18n';\n  public onLocaleChanged: Signal<(locale: string) => void> = new Signal<(locale: string) => void>();\n\n  private _dicts: Record<string, i18nDict> = {};\n  private _options: i18nOptions;\n\n  private _locale: string;\n\n  /**\n   * Getter for locale.\n   */\n  get locale(): string {\n    return this._locale;\n  }\n\n  get locales(): string[] {\n    return this._options.locales;\n  }\n\n  /**\n   * Initializes the i18n module.\n   * sets the default locale and loads the locale files.\n   * @param app The application instance.\n   * @param options The i18n options.\n   * @returns Promise<void>\n   */\n  public async initialize(app: IApplication, options: Partial<i18nOptions>): Promise<void> {\n    super.initialize(app);\n    this._options = { ...defaultOptions, ...options };\n    this._locale = this._options.defaultLocale;\n    if (this._options.loadAll && this._options.files.length > 0) {\n      const files = this._options.files.filter((file) => this._options.locales.includes(file.id));\n      for (const file of files) {\n        await this.loadLocale(file.id);\n      }\n    } else if (this._options.files.length > 0) {\n      await this.loadLocale(this._locale);\n    }\n  }\n\n  /**\n   * Sets the locale.\n   * If the locale is not loaded, it will load it first.\n   * @param localeId The locale id to set.\n   * @returns Promise<string>\n   */\n\n  async setLocale(localeId: string) {\n    this._locale = localeId;\n    await this._loadAndSetLocale(localeId);\n    return this._locale;\n  }\n\n  /**\n   * Translates a key into a string.\n   * If the key is not found, it will return an empty string.\n   * If the key is found, it will replace any placeholders in the string with the values from the params object.\n   * If the key contains a variant, it will select a random variant if the variant param is set to 'random'.\n   * If the key contains a number variant, it will select the variant based on the variant param.\n   * @param key The key to translate.\n   * @param params The parameters to replace in the string.\n   * @param locale The locale to use for translation.\n   * @returns The translated string.\n   */\n\n  t(key: string, params?: i18nTParams, locale: string = this._locale): string {\n    const dict = this._dicts[locale];\n    if (!dict) {\n      Logger.error(`i18n:: No dictionary loaded for current locale: ${locale}`);\n      return '';\n    }\n    let str = dict[key];\n\n    if (!str) {\n      Logger.error(`i18n:: No result found for the key ${key} in the locale: ${this._locale}`);\n      return '';\n    }\n\n    if (params) {\n      if (typeof params.variant === 'number' || params.variant === 'random') {\n        const match = /\\[(.*?)\\]/.exec(str);\n        if (match) {\n          // Split the string by the \"|\" character to get an array of variations.\n          const items = match[1].split('|');\n\n          // Get the selected variant based on the \"variation\" param.\n          const num = params.variant === 'random' ? Math.floor(Math.random() * items.length) : params.variant;\n\n          // Replace the original string with the selected variant\n          str = str.replace(match[0], items[num]);\n        }\n      }\n\n      // Iterate over all params to replace placeholders in the string.\n      for (const f in params) {\n        // Create a regular expression to match the placeholder for the current param.\n        const re = new RegExp(`{${f}}`, 'g');\n\n        //Replace all occurences of the placeholder with the value of the param.\n        str = str.replace(re, String(params[f]));\n      }\n    }\n\n    /**\n     * Return the final translated string.\n     */\n    return str;\n  }\n\n  /**\n   * Parses the input string and replaces anything in between {} braces, assuming it is a key in the dictionary.\n   * @param {string} input\n   * @param locale\n   * @returns {string}\n   */\n  parse(input: string, locale: string = this._locale): string {\n    const dict = this._dicts[locale];\n    if (!dict) {\n      Logger.error(`i18n:: No dictionary loaded for current locale: ${this._locale}`);\n      return '';\n    }\n    let str = input;\n    const matches = str.match(/{(.*?)}/g);\n    if (matches) {\n      matches.forEach((match) => {\n        const key = match.slice(1, -1);\n        if (dict[key]) {\n          str = str.replace(match, dict[key]);\n        }\n      });\n    }\n    return str;\n  }\n\n  /**\n   * Loads a locale.\n   * @param localeId The locale id to load.\n   * @returns Promise<void>\n   */\n  async loadLocale(localeId: string) {\n    const file = this._options.files.find((file) => localeId === file.id);\n    if (!file) {\n      Logger.error(`i18n:: Could not find locale file for ${localeId}`);\n      return;\n    }\n    this._dicts[localeId] = file.json\n      ? await Assets.load(file.json)\n      : await getDynamicModuleFromImportListItem(file as ImportListItem<i18nDict>);\n  }\n\n  protected getCoreFunctions(): string[] {\n    return ['t', 'setLocale'];\n  }\n\n  protected getCoreSignals(): string[] {\n    return ['onLocaleChanged'];\n  }\n\n  /**\n   * Loads and sets a locale.\n   * If the locale is not loaded, it will load it first.\n   * @param localeId The locale id to load and set.\n   */\n  private async _loadAndSetLocale(localeId: string) {\n    if (!this._dicts[localeId]) {\n      await this.loadLocale(localeId);\n    }\n    this.onLocaleChanged.emit(localeId);\n  }\n}\n", "export enum InputControllerTypes {\n  Keyboard = 'keyboard',\n  GamePad = 'gamepad',\n  Mouse = 'mouse',\n  Touch = 'touch',\n}\n\nexport type InputController =\n  | InputControllerTypes.Keyboard\n  | InputControllerTypes.GamePad\n  | InputControllerTypes.Mouse\n  | InputControllerTypes.Touch;\n", "import { DestroyOptions } from 'pixi.js';\nimport { SignalConnection, SignalConnections } from '../signals';\nimport type { Constructor } from '../utils';\n\n/**\n * Interface for animated entities.\n */\nexport interface ISignalContainer {\n  signalConnections: SignalConnections;\n\n  destroy(options?: DestroyOptions): void;\n\n  addSignalConnection(...args: SignalConnection[]): void;\n  connectSignal(...args: SignalConnection[]): void;\n  connectAction(...args: SignalConnection[]): void;\n}\n\nexport function WithSignals<TBase extends Constructor<any>>(Base: TBase): TBase & Constructor<ISignalContainer> {\n  return class extends Base implements ISignalContainer {\n    signalConnections: SignalConnections = new SignalConnections();\n\n    /**\n     * Add signal connections to the container.\n     * @param args - The signal connections to add.\n     */\n    public addSignalConnection(...args: SignalConnection[]) {\n      for (const connection of args) {\n        this.signalConnections.add(connection);\n      }\n    }\n\n    public connectSignal(...args: SignalConnection[]) {\n      for (const connection of args) {\n        this.signalConnections.add(connection);\n      }\n    }\n\n    public connectAction(...args: SignalConnection[]) {\n      for (const connection of args) {\n        this.signalConnections.add(connection);\n      }\n    }\n\n    destroy(options?: DestroyOptions): void {\n      this.signalConnections.disconnectAll();\n      super.destroy(options);\n    }\n  } as unknown as TBase & Constructor<ISignalContainer>;\n}\n", "import {gsap} from 'gsap';\nimport {Signal} from '../signals';\nimport type {Constructor} from '../utils';\n\n/**\n * Extended GSAP animation configuration interface.\n */\nexport interface GSAPAnimationConfigExtended extends gsap.TweenVars {}\n\n/**\n * Type for GSAP entity.\n */\ntype GSAPEntity = gsap.core.Tween | gsap.core.Timeline;\n\n/**\n * Interface for animated entities.\n */\nexport interface IAnimated {\n  onAnimationStart: Signal<(entity: GSAPEntity) => void>;\n  onAnimationUpdate: Signal<(entity: GSAPEntity) => void>;\n  onAnimationComplete: Signal<(entity: GSAPEntity) => void>;\n\n  animate(animationProps: GSAPAnimationConfigExtended, instance?: any): gsap.core.Tween;\n\n  animateFrom(animationProps: GSAPAnimationConfigExtended, instance?: any): gsap.core.Tween;\n\n  animateFromTo(\n    fromProps: GSAPAnimationConfigExtended,\n    toProps: GSAPAnimationConfigExtended,\n    instance?: any,\n  ): gsap.core.Tween;\n\n  animateSequence(sequences: GSAPAnimationConfigExtended[], instance?: any): gsap.core.Timeline;\n\n  pauseAnimations(): void;\n\n  resumeAnimations(): void;\n\n  destroyAnimations(): void;\n\n  reverseAnimation(): void;\n\n  isAnimationPlaying(): boolean;\n\n  //utility\n  shake(config?: { duration?: number; intensity?: number; times?: number }, instance?: any): gsap.core.Tween;\n\n  pulse(config?: { duration?: number; intensity?: number; times?: number }, instance?: any): gsap.core.Tween;\n\n  bob(config?: { duration?: number; intensity?: number }, instance?: any): gsap.core.Tween;\n}\n\n/**\n * Animated mixin function.\n * @param Base - Base class to extend.\n * @returns Class that extends the base class and implements IAnimated.\n */\nexport function Animated<TBase extends Constructor>(Base: TBase): TBase & Constructor<IAnimated> {\n  return class extends Base implements IAnimated {\n    // signals for animation events\n    onAnimationStart = new Signal<(entity: GSAPEntity) => void>();\n    onAnimationUpdate = new Signal<(entity: GSAPEntity) => void>();\n    onAnimationComplete = new Signal<(entity: GSAPEntity) => void>();\n\n    // store active tweens / timelines\n    _activeTweens: gsap.core.Tween[] = [];\n    _activeTimeline?: gsap.core.Timeline;\n\n    /**\n     * Animate method.\n     * @param animationProps - Animation properties.\n     * @param instance - Instance to animate.\n     * @returns GSAP Tween instance.\n     */\n    public animate(animationProps: GSAPAnimationConfigExtended, instance: any = this) {\n      const tween = gsap.to(instance, {\n        ...animationProps,\n        onStart: () => {\n          this._onAnimationStart(tween);\n        },\n        onUpdate: () => {\n          this._onAnimationUpdate(tween);\n        },\n        onComplete: () => {\n          this._onAnimationComplete(tween);\n          this._activeTweens = this._activeTweens.filter((t) => t !== tween);\n        },\n      });\n      this._activeTweens.push(tween);\n      return tween;\n    }\n\n    /**\n     * Animate from method.\n     * @param animationProps - Animation properties.\n     * @param instance - Instance to animate.\n     * @returns GSAP Tween instance.\n     */\n    public animateFrom(animationProps: GSAPAnimationConfigExtended, instance: any = this) {\n      const tween = gsap.from(instance, {\n        ...animationProps,\n        onStart: () => {\n          this._onAnimationStart(tween);\n        },\n        onUpdate: () => {\n          this._onAnimationUpdate(tween);\n        },\n        onComplete: () => {\n          this._onAnimationComplete(tween);\n          this._activeTweens = this._activeTweens.filter((t) => t !== tween);\n        },\n      });\n      this._activeTweens.push(tween);\n      return tween;\n    }\n\n    /**\n     * Animate sequence method.\n     * @param sequences - Array of animation sequences.\n     * @param instance - Instance to animate.\n     * @returns GSAP Timeline instance.\n     */\n    public animateSequence(sequences: GSAPAnimationConfigExtended[], instance: any = this): gsap.core.Timeline {\n      if (!this._activeTimeline) {\n        this._activeTimeline = gsap.timeline({\n          onStart: () => this._onAnimationStart(this._activeTimeline),\n          onUpdate: () => this._onAnimationUpdate(this._activeTimeline),\n          onComplete: () => {\n            this._onAnimationComplete(this._activeTimeline);\n            this._activeTimeline = undefined;\n          },\n        });\n      }\n\n      sequences.forEach((sequence) => {\n        this._activeTimeline?.to(instance, sequence);\n      });\n\n      return this._activeTimeline;\n    }\n\n    /**\n     * Clear animations method.\n     */\n    public destroyAnimations() {\n      this._activeTweens.forEach((tween) => tween.kill());\n      this._activeTweens = [];\n      this._activeTimeline?.clear();\n      this._activeTimeline = undefined;\n    }\n\n    /**\n     * Pause animations method.\n     */\n    public pauseAnimations() {\n      this._activeTweens.forEach((tween) => tween.pause());\n      this._activeTimeline?.pause();\n    }\n\n    /**\n     * Resume animations method.\n     */\n    public resumeAnimations() {\n      this._activeTweens.forEach((tween) => tween.play());\n      this._activeTimeline?.play();\n    }\n\n    /**\n     * Animate from-to method.\n     * @param fromProps - Animation properties for the start state.\n     * @param toProps - Animation properties for the end state.\n     * @param instance - Instance to animate.\n     * @returns GSAP Tween instance.\n     */\n    public animateFromTo(\n      fromProps: GSAPAnimationConfigExtended,\n      toProps: GSAPAnimationConfigExtended,\n      instance: any = this,\n    ) {\n      const tween = gsap.fromTo(\n        instance,\n        {\n          ...fromProps,\n        },\n        {\n          ...toProps,\n        },\n      );\n      tween.eventCallback('onStart', () => {\n        this._onAnimationStart(tween);\n      });\n      tween.eventCallback('onUpdate', () => {\n        this._onAnimationUpdate(tween);\n      });\n      tween.eventCallback('onComplete', () => {\n        this._onAnimationComplete(tween);\n        this._activeTweens = this._activeTweens.filter((t) => t !== tween);\n      });\n\n      this._activeTweens.push(tween);\n      return tween;\n    }\n\n    /**\n     * Reverses animations.\n     */\n    public reverseAnimation(): void {\n      this._activeTweens.forEach((tween) => tween.reverse());\n      this._activeTimeline?.reverse();\n    }\n\n    public isAnimationPlaying(): boolean {\n      return (\n        this._activeTweens?.some((tween) => !tween.paused()) ||\n        (this._activeTimeline && !this._activeTimeline.paused()) ||\n        false\n      );\n    }\n\n    // utility animations\n    /**\n     * Shake animation.\n     * @param config - Configuration object.\n     * @param instance\n     * @returns GSAP Tween instance.\n     */\n    public shake(\n      config: {\n        duration?: number;\n        intensity?: number;\n        times?: number;\n      } = {},\n      instance: any = this,\n    ): gsap.core.Tween {\n      const { duration = 0.05, intensity = 12, times = 41 } = config;\n      const obj = { x: instance.x, y: instance.y };\n      const origX = obj.x;\n\n      const repeat = times % 2 === 0 ? times + 1 : times;\n\n      const tween = gsap.to(instance, {\n        x: origX + gsap.utils.random(-Math.max(intensity, 2), Math.max(intensity, 2)),\n        repeat,\n        yoyo: true,\n        duration: duration,\n      });\n      this._activeTweens.push(tween);\n      return tween;\n    }\n\n    /**\n     * Pulse animation.\n     * @param config - Configuration object.\n     * @param instance\n     * @returns GSAP Tween instance.\n     */\n    public pulse(\n      config: {\n        duration?: number;\n        intensity?: number;\n        times?: number;\n      } = {},\n      instance: any = this,\n    ): gsap.core.Tween {\n      const { duration = 0.5, intensity = 1.2, times = 1 } = config;\n      const repeat = times * 2 - 1;\n      const tween = gsap.to(instance?.scale, {\n        x: intensity,\n        y: intensity,\n        repeat,\n        yoyo: true,\n        duration: duration,\n      });\n      this._activeTweens.push(tween);\n      return tween;\n    }\n\n    /**\n     * Bob animation.\n     * @param config - Configuration object.\n     * @param instance\n     * @returns GSAP Tween instance.\n     */\n    public bob(\n      config: {\n        duration?: number;\n        intensity?: number;\n      } = {},\n      instance: any = this,\n    ): gsap.core.Tween {\n      const { duration = 0.5, intensity = 10 } = config;\n      const tween = gsap.to(instance, {\n        y: `-=${intensity}`,\n        repeat: -1,\n        yoyo: true,\n        duration: duration,\n      });\n      this._activeTweens.push(tween);\n      return tween;\n    }\n\n    /**\n     * Private method for handling animation start event.\n     * @param animationEntity - Animation entity.\n     */\n    private _onAnimationStart(animationEntity: GSAPEntity | undefined) {\n      this.onAnimationStart.emit(animationEntity as GSAPEntity);\n    }\n\n    /**\n     * Private method for handling animation update event.\n     * @param animationEntity - Animation entity.\n     */\n    private _onAnimationUpdate(animationEntity: GSAPEntity | undefined) {\n      this.onAnimationUpdate.emit(animationEntity as GSAPEntity);\n    }\n\n    /**\n     * Private method for handling animation complete event.\n     * @param animationEntity - Animation entity.\n     */\n    private _onAnimationComplete(animationEntity: GSAPEntity | undefined) {\n      this.onAnimationComplete.emit(animationEntity as GSAPEntity);\n    }\n  } as unknown as TBase & Constructor<IAnimated>;\n}\n", "import type {Constructor, PointLike} from '../utils';\nimport type {DestroyOptions, PointerEvents} from 'pixi.js';\nimport {Container, FederatedEvent} from 'pixi.js';\n\nimport {Application} from '../Application';\nimport type {IFocusable} from '../plugins';\nimport {Signal} from '../signals';\n\n/**\n * The Focusable function is a higher-order function that adds focus-related functionality to a given class.\n *\n * @param {TBase extends Constructor<Container>} Base - The base class to add focus functionality to.\n *\n * @returns {TBase & Constructor<IFocusable>} The modified class with focus functionality.\n */\nexport function Focusable<TBase extends Constructor<Container>>(Base: TBase): TBase & Constructor<IFocusable> {\n  return class extends Base implements IFocusable {\n    _accessibleDiv: HTMLElement;\n    isFocused = false;\n    isKeyDown = false;\n    focusEnabled = true;\n    tabIndex = 0;\n    // pixi accessibility options\n    accessible = false;\n    accessibleType: 'button' | 'div' | 'heading' = 'button';\n    accessibleTitle = 'Focusable';\n    accessibleHint = 'Press enter to focus';\n    accessiblePointerEvents: PointerEvents = 'auto';\n    accessibleChildren = true;\n    // signals\n    onFocus = new Signal<(focusable: IFocusable) => void>();\n    onFocusIn = new Signal<(focusable: IFocusable) => void>();\n    onFocusOut = new Signal<(focusable: IFocusable) => void>();\n    onBlur = new Signal<(focusable: IFocusable) => void>();\n\n    private _eventsDisabled: boolean = false;\n\n    constructor(...args: any[]) {\n      super(...args);\n      this.eventMode = 'static';\n      this.on('mouseover', this._onMouseOver);\n      this.on('mousedown', this._onMouseDown);\n      this.on('click', this._handleClick);\n      this.on('tap', this._handleClick);\n    }\n\n    get app() {\n      return Application.getInstance();\n    }\n\n    public destroy(options?: DestroyOptions): void {\n      this.off('mouseover', this._onMouseOver);\n      this.off('mousedown', this._onMouseDown);\n      this.off('click', this._handleClick);\n      this.off('tap', this._handleClick);\n      super.destroy(options);\n    }\n\n    public focusIn() {\n      if (this.app.focus.active) {\n        // @ts-expect-error Argument of type { type: string; } is not assignable to parameter of type FederatedPointerEvent\n        this.emit('pointerover', { type: 'pointerover' });\n      }\n    }\n\n    public blur() {\n      if (!this.isKeyDown) {\n        window.removeEventListener('keyup', this._handleKeyUp.bind(this));\n      }\n    }\n\n    public focusOut() {\n      if (!this.isKeyDown) {\n        window.removeEventListener('keyup', this._handleKeyUp.bind(this));\n      }\n      if (this.app.focus.active) {\n        // @ts-expect-error Argument of type { type: string; } is not assignable to parameter of type FederatedPointerEvent\n        this.emit('pointerout', { type: 'pointerout' });\n      }\n    }\n\n    public click() {}\n\n    public getFocusPosition() {\n      return null;\n    }\n\n    public getFocusArea() {\n      return this.getBounds();\n    }\n\n    public getFocusSize(): PointLike | null {\n      return [this.getFocusArea().width, this.getFocusArea().height];\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    protected _onMouseOver(_e: MouseEvent) {\n      this.app.focus.setFocus(this);\n    }\n\n    protected _onMouseDown(e: FederatedEvent) {\n      this._maybeEmit('pointerdown', e);\n    }\n\n    protected _handleClick(e: FederatedEvent) {\n      this._maybeEmit('click', e);\n      this.click();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    protected _handleKeyUp(_e: KeyboardEvent) {}\n\n    private _maybeEmit(type: string, e: FederatedEvent) {\n      if (this._eventsDisabled || e.type) {\n        return;\n      }\n      this._eventsDisabled = true;\n      this.emit(type, { type });\n      this._eventsDisabled = false;\n    }\n  } as unknown as TBase & Constructor<IFocusable>;\n}\n\nFocusable.INITTED = false;\n", "import type { AllFederatedEventMap, DestroyOptions } from 'pixi.js';\nimport { Container, FederatedEvent } from 'pixi.js';\nimport { Signal } from '../signals';\n\nimport { type Constructor } from '../utils';\n\n// gets all the event names from the PIXI event map\ntype InteractionEventName = keyof AllFederatedEventMap;\n\nexport type InteractionSignal = Signal<(event: FederatedEvent) => void>;\n\n/**\n * Represents an interactive element.\n */\nexport interface IInteractive {\n  onInteraction: (eventName: InteractionEventName) => InteractionSignal;\n}\n\n/**\n * Adds interactive functionality to a container.\n *\n * @param {Constructor<Container>} Base - The base container class.\n * @returns {Constructor<IInteractive>} - The extended container class with interactive functionality.\n */\nexport function Interactive<TBase extends Constructor<Container>>(Base: TBase): TBase & Constructor<IInteractive> {\n  return class extends Base implements IInteractive {\n    private _signals: Map<InteractionEventName, InteractionSignal> = new Map();\n\n    constructor(...args: any[]) {\n      super(...args);\n      this._emitSignal = this._emitSignal.bind(this);\n      this.eventMode = 'static';\n    }\n\n    /**\n     * Handles interaction events and returns the corresponding signal.\n     *\n     * @param {InteractionEventName} eventName - The name of the interaction event.\n     * @return {InteractionSignal} The signal associated with the interaction event.\n     */\n    public onInteraction(eventName: InteractionEventName) {\n      if (!this._signals.has(eventName)) {\n        const signal = new Signal<(event: FederatedEvent) => void>();\n        this._signals.set(eventName, signal);\n        this.on(eventName, this._emitSignal);\n      }\n      return this._signals.get(eventName) as InteractionSignal;\n    }\n\n    public destroy(options: DestroyOptions): void {\n      for (const eventName of this._signals.keys()) {\n        this.off(eventName, this._emitSignal);\n      }\n      this._signals.clear();\n      super.destroy(options);\n    }\n\n    /**\n     * Emits a signal with the given event.\n     *\n     * @param {FederatedEvent} event - The event to emit.\n     *\n     * @return {void}\n     */\n    private _emitSignal(event: FederatedEvent) {\n      const signalName = event.type as InteractionEventName;\n      const signal = this._signals.get(signalName);\n\n      if (signal) {\n        signal.emit(event);\n      }\n    }\n  } as unknown as TBase & Constructor<IInteractive>;\n}\n", "import { defaultFactoryMethods } from './index';\n\nexport function createFactoryMethods<T extends typeof defaultFactoryMethods = typeof defaultFactoryMethods>(\n  methods: Partial<T>,\n  instance: any,\n  addToStage: boolean,\n): T {\n  const factoryMethods: any = {};\n  for (const key in methods) {\n    factoryMethods[key] = (...args: any[]) => {\n      // @ts-expect-error - this is fine\n      const obj = methods[key](...args);\n      if (addToStage) {\n        instance.addChild(obj);\n        // instance.addChild(obj);\n      }\n      return obj;\n    };\n  }\n  return factoryMethods as T;\n}\n", "import { DestroyOptions, Sprite, Texture, Ticker } from 'pixi.js';\nimport { Animated, Factory, WithSignals } from '../mixins';\n\nimport { Application } from '../Application';\nimport type { IApplication } from '../core';\nimport { Signal } from '../signals';\nimport { SignalOrder } from '../signals/Signal';\nimport type { PointLike, Size } from '../utils';\nimport { bindAllMethods } from '../utils';\n\n/**\n * Configuration for the Container class.\n */\nexport type ContainerConfig = {\n  autoResize: boolean;\n  autoUpdate: boolean;\n  priority: SignalOrder;\n};\n\nexport const ContainerConfigKeys: (keyof ContainerConfig)[] = ['autoResize', 'autoUpdate', 'priority'];\n\nconst defaultConfig: ContainerConfig = { autoResize: true, autoUpdate: false, priority: 0 };\n\nexport type BackgroundConfig = {\n  color: number;\n  alpha: number;\n  width: number;\n  height: number;\n  anchor: PointLike;\n  autoResize: boolean;\n};\n\n/**\n * Interface for the Container class.\n */\nexport interface IContainer {\n  app: IApplication;\n\n  onDestroy: Signal<() => void>;\n\n  destroy(options?: DestroyOptions): void;\n\n  added(): Promise<void> | void;\n\n  resize(size?: Size): void;\n\n  update(ticker?: Ticker | number): void;\n\n  addColoredBackground(colorOrConfig?: number | Partial<BackgroundConfig>, alpha?: number): Sprite;\n}\n\n/**\n * The Container class extends the _Container class (which includes the Animated and Factory mixins) and implements the IContainer interface.\n * It represents a container for PIXI.js display objects.\n */\nexport class Container<A extends Application = Application>\n  extends Animated(WithSignals(Factory()))\n  implements IContainer\n{\n  onDestroy: Signal<() => void> = new Signal();\n  __dill_pixel_method_binding_root = true;\n  protected __background: Sprite;\n  private __config: ContainerConfig;\n\n  /**\n   * The constructor for the Container class.\n   * @param config - The configuration for the container.\n   */\n  constructor(config: Partial<ContainerConfig> = {}) {\n    super();\n    this.__config = { ...defaultConfig, ...config };\n    // Bind all methods of this class to the current instance.\n    bindAllMethods(this);\n    // Add an event listener for the 'added' event.\n    this.on('added', this._added);\n    this.on('removed', this._removed);\n  }\n\n  /**\n   * Get the application instance.\n   */\n  public get app(): A {\n    return Application.getInstance() as A;\n  }\n\n  addColoredBackground(color?: number, alpha?: number): Sprite;\n  addColoredBackground(colorOrConfig: number | Partial<BackgroundConfig> = 0x0, alpha: number = 1): Sprite {\n    const defaultConfig = {\n      color: 0x0,\n      width: this.app.size.width,\n      height: this.app.size.height,\n      anchor: 0.5,\n      alpha: 1,\n      autoResize: true,\n    };\n\n    const opts: BackgroundConfig = Object.assign(\n      defaultConfig,\n      typeof colorOrConfig === 'number'\n        ? {\n            color: colorOrConfig,\n            alpha: alpha,\n          }\n        : colorOrConfig,\n    );\n\n    this.__background = this.add.sprite({\n      asset: Texture.WHITE,\n      width: opts.width,\n      height: opts.height,\n      anchor: opts.anchor,\n      tint: opts.color,\n      alpha: opts.alpha,\n      resolution: 2,\n    });\n\n    this.setChildIndex(this.__background, 0);\n\n    if (opts.autoResize) {\n      this.addSignalConnection(this.app.signal.onResize.connect(this.__resizeBackground));\n    }\n\n    return this.__background;\n  }\n\n  /**\n   * Update the container. This method is meant to be overridden by subclasses.\n   * @param ticker\n   */\n  public update(ticker?: Ticker | number) {\n    void ticker;\n  }\n\n  /**\n   * Resize the container. This method is meant to be overridden by subclasses.\n   * @param size\n   */\n  public resize(size?: Size) {\n    void size;\n  }\n\n  /**\n   * This method is called when the container is added to the stage. It is meant to be overridden by subclasses.\n   */\n  public added() {}\n\n  destroy(options?: DestroyOptions): void {\n    if (this.__config.autoUpdate) {\n      this.app.ticker.remove(this.update, this);\n    }\n    this.onDestroy.emit();\n    super.destroy(options);\n  }\n\n  public removed() {}\n\n  protected __resizeBackground() {\n    this.__background.width = this.app.size.width;\n    this.__background.height = this.app.size.height;\n  }\n\n  /**\n   * This method is called when the container is added to the stage. It sets up auto-resizing and auto-updating if enabled.\n   */\n  private _added() {\n    if (this.__config.autoResize) {\n      this.addSignalConnection(this.app.onResize.connect( this.resize,this.__config.priority ?? 'highest'));\n    }\n\n    if (this.__config.autoUpdate) {\n      this.app.ticker.add(this.update, this, -999999);\n    }\n    this.added();\n  }\n\n  private _removed() {\n    if (this.__config.autoResize) {\n      this.app.onResize.disconnect(this.resize);\n    }\n\n    if (this.__config.autoUpdate) {\n      this.app.ticker.remove(this.update, this);\n    }\n\n    this.removed();\n  }\n}\n", "import { DestroyOptions, ParticleContainerOptions, ParticleContainer as PIXIParticleContainer, Ticker } from 'pixi.js';\n\nimport { Application } from '../Application';\nimport { IApplication } from '../core';\nimport { Signal } from '../signals';\nimport type { Size } from '../utils';\nimport { bindAllMethods } from '../utils';\n\n/**\n * Configuration for the Container class.\n */\nexport interface ParticleContainerConfig extends ParticleContainerOptions {\n  autoUpdate: boolean;\n  priority: number;\n}\n\nexport const ParticleContainerConfigKeys: (keyof ParticleContainerConfig)[] = ['autoUpdate', 'priority'];\n\nconst defaultConfig: ParticleContainerConfig = { autoUpdate: true, priority: 0 };\n\nexport interface IParticleContainer {\n  app: IApplication;\n\n  onDestroy: Signal<() => void>;\n\n  destroy(options?: DestroyOptions): void;\n\n  added(): Promise<void> | void;\n\n  update(ticker?: Ticker | number): void;\n}\n\n/**\n * The Container class extends the _Container class (which includes the Animated and Factory mixins) and implements the IContainer interface.\n * It represents a container for PIXI.js display objects.\n */\nexport class ParticleContainer<A extends Application = Application>\n  extends PIXIParticleContainer\n  implements IParticleContainer\n{\n  onDestroy: Signal<() => void> = new Signal();\n  __dill_pixel_method_binding_root = true;\n  private __config: ParticleContainerConfig;\n\n  /**\n   * The constructor for the Container class.\n   * @param config - The configuration for the container.\n   */\n  constructor(config: Partial<ParticleContainerConfig> = {}) {\n    super(config);\n    this.__config = { ...defaultConfig, ...config };\n    // Bind all methods of this class to the current instance.\n    bindAllMethods(this);\n    // Add an event listener for the 'added' event.\n    this.on('added', this._added);\n    this.on('removed', this._removed);\n  }\n\n  /**\n   * Get the application instance.\n   */\n  public get app(): A {\n    return Application.getInstance() as A;\n  }\n  /**\n   * Update the container. This method is meant to be overridden by subclasses.\n   * @param ticker\n   */\n  public update(ticker?: Ticker | number) {\n    void ticker;\n  }\n\n  /**\n   * Resize the container. This method is meant to be overridden by subclasses.\n   * @param size\n   */\n  public resize(size?: Size) {\n    void size;\n  }\n\n  /**\n   * This method is called when the container is added to the stage. It is meant to be overridden by subclasses.\n   */\n  public added() {}\n\n  destroy(options?: DestroyOptions): void {\n    if (this.__config.autoUpdate) {\n      this.app.ticker.remove(this.update, this);\n    }\n    this.onDestroy.emit();\n    super.destroy(options);\n  }\n\n  public removed() {}\n  /**\n   * This method is called when the container is added to the stage. It sets up auto-resizing and auto-updating if enabled.\n   */\n  private _added() {\n    if (this.__config.autoUpdate) {\n      this.app.ticker.add(this.update, this, this.__config.priority);\n    }\n    this.added();\n  }\n\n  private _removed() {\n    if (this.__config.autoUpdate) {\n      this.app.ticker.remove(this.update, this);\n    }\n    this.removed();\n  }\n}\n", "import { Ticker } from 'pixi.js';\nimport { Application } from '../Application';\nimport { AssetLoadingOptions, Logger, Size } from '../utils';\nimport type { IContainer } from './Container';\nimport { Container } from './Container';\n\nexport type SceneAssets = Omit<AssetLoadingOptions, 'manifest' | 'initOptions' | 'assetPreferences'>;\n\nexport interface IScene extends IContainer {\n  id: string;\n  assets?: SceneAssets;\n  autoUnloadAssets?: boolean;\n\n  enter(): Promise<any>;\n\n  exit(): Promise<any>;\n\n  initialize(): Promise<void> | void;\n\n  start(): Promise<void> | void;\n}\n\nexport interface SceneListItem {\n  id: string;\n  path: string;\n  scene: () => Promise<new () => IScene> | IScene;\n  debug?: {\n    label?: string;\n    group?: string;\n  };\n  assets?: string[];\n  plugins?: string[];\n  autoUnloadAssets: boolean;\n}\n\nexport class Scene<T extends Application = Application> extends Container<T> implements IScene {\n  public readonly id: string;\n  public autoUnloadAssets: boolean = false;\n\n  constructor() {\n    super({ autoResize: true, autoUpdate: true, priority: 'highest' });\n  }\n\n  /**\n   * The assets to load for the scene\n   * @private\n   * @type {AssetLoadingOptions}\n   * @example\n   * ```ts\n   * assets: {\n   *  preload: {\n   *  assets: ['path/to/asset.png'],\n   *  bundles: ['bundle1', 'bundle2'],\n   *  },\n   *  background: {\n   *   assets: ['path/to/asset.png'],\n   *   bundles: ['bundle1', 'bundle2'],\n   *   },\n   * }\n   * ```\n   */\n  private _assets: AssetLoadingOptions;\n\n  get assets(): AssetLoadingOptions {\n    return this._assets;\n  }\n\n  set assets(value: AssetLoadingOptions) {\n    this._assets = value;\n  }\n\n  /**\n   * Called to initialize the scene\n   * Called before the scene is added to the stage\n   * and before the scene is animated in\n   * @returns {Promise<void> | void}\n   */\n  public initialize(): Promise<void> | void;\n\n  public async initialize(): Promise<void> {}\n\n  /**\n   * Called to animate the scene in\n   * @returns {Promise<void>}\n   */\n  public enter(): Promise<any> {\n    return Promise.resolve();\n  }\n\n  /**\n   * Called to animate the scene out\n   * @returns {Promise<void>}\n   */\n  public exit(): Promise<any> {\n    return Promise.resolve();\n  }\n\n  /**\n   * Called after the enter resolves\n   * If enter doesn't return a promise, this is called immediately after enter\n   * @returns {Promise<void> | void}\n   */\n  public start(): Promise<void> | void;\n\n  public async start(): Promise<void> {}\n\n  /**\n   * Called every frame\n   * @param {Ticker} ticker\n   */\n  public update(ticker?: Ticker) {\n    void ticker;\n  }\n\n  /**\n   * Called when the window is resized\n   * @param {Size} size\n   * @override\n   */\n  public resize(size?: Size): void {\n    void size;\n    Logger.log('Scene.resize', this, size);\n  }\n\n  public destroy() {\n    this.app.ticker.remove(this.update);\n    super.destroy({ children: true });\n  }\n}\n", "import { Container } from './Container';\nimport { Sprite } from 'pixi.js';\n\nexport interface ISceneTransition extends Container {\n  progress: number;\n  active: boolean;\n\n  enter(): Promise<any>;\n\n  exit(): Promise<any>;\n}\n\nexport class SceneTransition extends Container {\n  protected __background: Sprite;\n\n  constructor(autoUpdate: boolean = false) {\n    super({ autoResize: true, autoUpdate, priority: -9999 });\n    this.addSignalConnection(\n      this.app.assets.onLoadStart.connect(this.handleLoadStart),\n      this.app.assets.onLoadProgress.connect(this.handleLoadProgress),\n      this.app.assets.onLoadProgress.connect(this.handleLoadComplete),\n    );\n  }\n\n  private _active: boolean = false;\n\n  get active(): boolean {\n    return this._active;\n  }\n\n  set active(value: boolean) {\n    this._active = value;\n  }\n\n  private _progress: number;\n\n  get progress(): number {\n    return this._progress;\n  }\n\n  set progress(value: number) {\n    this._progress = value;\n  }\n\n  /**\n   * Called to animate the scene in\n   * @returns {Promise<void>}\n   */\n  public enter(): Promise<any> {\n    return Promise.resolve();\n  }\n\n  /**\n   * Called to animate the scene out\n   * @returns {Promise<void>}\n   */\n  public exit(): Promise<any> {\n    return Promise.resolve();\n  }\n\n  protected handleLoadStart() {\n    // signifies the preloading phase has started for the new scene\n  }\n\n  protected handleLoadProgress(progress: number) {\n    // the preloading progress for the loading scene\n    this._progress = progress;\n  }\n\n  protected handleLoadComplete() {\n    // signifies the preloading phase is complete for the new scene\n  }\n}\n", "import { Assets, Graphics, GraphicsContext } from 'pixi.js';\n\nexport class Svg extends Graphics {\n  constructor(ctx: string | GraphicsContext) {\n    super(typeof ctx === 'string' ? Assets.get(ctx) : ctx);\n    const bounds = this.getLocalBounds();\n    this.pivot.set((bounds.x + bounds.width) / 2, (bounds.y + bounds.height) / 2);\n  }\n}\n", "import { AnimatedSprite as PIXIAnimatedSprite, Texture, Ticker } from 'pixi.js';\nimport {\n  bindAllMethods,\n  getFirstMapEntry,\n  getLastMapEntry,\n  getNextMapEntry,\n  getPreviousMapEntry,\n  getZeroPaddedNumber,\n  Logger,\n  SpriteSheetLike,\n} from '../utils';\nimport { Signal } from '../signals';\nimport { AnimatedSpriteProps, resolveTexture } from '../mixins';\n\nexport class AnimatedSprite extends PIXIAnimatedSprite {\n  onAnimationChange: Signal<(currentAnimation: string) => void> = new Signal();\n  onAnimationStart: Signal<() => void> = new Signal();\n  onAnimationStop: Signal<() => void> = new Signal();\n  onAnimationLoop: Signal<() => void> = new Signal();\n  onAnimationComplete: Signal<() => void> = new Signal();\n  onAnimationFrameChange: Signal<() => void> = new Signal();\n  public defaultTexturePrefix: string = '';\n  public defaultSheet: string | undefined;\n  public defaultAnimation: string;\n  public defaultAnimationSpeed: number;\n  public defaultZeroPad: number | undefined;\n  public autoPlay: boolean;\n  public currentAnimation: string;\n  protected _animations: Map<string, Texture[]>;\n\n  constructor(protected config?: Partial<AnimatedSpriteProps>) {\n    // get default animation\n    const animations = config?.animations ?? {};\n    const defaultAnimationName = config?.animation ?? Object.keys(animations)[0];\n    const defaultAnimation = animations[defaultAnimationName as string];\n    const defaultSheet = config?.sheet;\n    const defaultTexturePrefix = config?.texturePrefix || '';\n    const defaultZeroPad = config?.zeroPad;\n\n    super(\n      AnimatedSprite.generateTexturesFromProps(\n        defaultAnimationName,\n        defaultAnimation,\n        defaultTexturePrefix,\n        defaultSheet,\n        defaultZeroPad,\n      ),\n      config?.autoUpdate !== false,\n    );\n    bindAllMethods(this);\n    this.defaultSheet = defaultSheet;\n    this.defaultTexturePrefix = defaultTexturePrefix;\n    this.defaultZeroPad = defaultZeroPad;\n    this._generateAnimations();\n    this.currentAnimation = this.defaultAnimation = defaultAnimationName;\n    this.autoPlay = config?.autoPlay ?? true;\n    this.loop = config?.loop ?? true;\n    this.updateAnchor = config?.updateAnchor ?? false;\n    this.animationSpeed = this.defaultAnimationSpeed = config?.animationSpeed ?? 1;\n    this.on('added', this._added);\n  }\n\n  protected _paused: boolean = false;\n\n  get paused(): boolean {\n    return this._paused;\n  }\n\n  set paused(value: boolean) {\n    this._paused = value;\n  }\n\n  get speed(): number {\n    return this.animationSpeed;\n  }\n\n  set speed(value: number) {\n    this.animationSpeed = this.defaultAnimationSpeed = value;\n  }\n\n  protected _isReversed: boolean = false;\n\n  get isReversed(): boolean {\n    return this._isReversed;\n  }\n\n  static generateTexturesFromProps(\n    animationName: string,\n    props?: Partial<AnimatedSpriteProps>,\n    defaultTexturePrefix = '',\n    defaultSheet: SpriteSheetLike | undefined = undefined,\n    defaultZeroPad?: number,\n  ): Texture[] {\n    const textures: Texture[] = [];\n    let asset = '';\n    const sheet = props?.sheet ?? defaultSheet;\n    if (props?.numFrames > 1) {\n      const idx = props?.startIndex ?? 0;\n      for (let i = idx; i < idx + props?.numFrames; i++) {\n        asset = `${defaultTexturePrefix}${props?.texturePrefix ?? animationName}${getZeroPaddedNumber(i, props?.zeroPad ?? defaultZeroPad)}`;\n        textures.push(\n          resolveTexture({\n            asset,\n            sheet,\n          }),\n        );\n      }\n    } else {\n      asset = `${defaultTexturePrefix}${props?.texturePrefix ?? animationName}`;\n      textures.push(\n        resolveTexture({\n          asset,\n          sheet,\n        }),\n      );\n    }\n    return textures;\n  }\n\n  reverse() {\n    this._isReversed = !this._isReversed;\n    if (this._isReversed) {\n      this.setAnimation(`${this.currentAnimation}_reverse`);\n    } else {\n      this.setAnimation(this.currentAnimation.split('_reverse')[0]);\n    }\n  }\n\n  setAnimation(animationName: string, autoPlay: boolean = true) {\n    if (!this._animations.has(animationName)) {\n      Logger.error(`Animation ${animationName} does not exist`);\n      return;\n    }\n    this.textures = this._animations.get(animationName) as Texture[];\n    this.currentAnimation = animationName;\n    const animSpeed = this.config?.animations?.[animationName.split('_reverse')[0]]?.animationSpeed;\n    if (animSpeed) {\n      this.animationSpeed = animSpeed;\n    } else {\n      this.animationSpeed = this.defaultAnimationSpeed;\n    }\n    this.onAnimationChange.emit(animationName);\n    if (autoPlay) {\n      this.play();\n    }\n  }\n\n  play() {\n    super.play();\n    this.onAnimationStart?.emit();\n  }\n\n  stop() {\n    super.stop();\n    this.onAnimationStop?.emit();\n  }\n\n  nextAnimation() {\n    const entry = getNextMapEntry(this._animations, this.currentAnimation) ?? getFirstMapEntry(this._animations);\n    if (entry) {\n      this.setAnimation(entry[0]);\n    }\n  }\n\n  previousAnimation() {\n    const entry = getPreviousMapEntry(this._animations, this.currentAnimation) ?? getLastMapEntry(this._animations);\n    if (entry) {\n      this.setAnimation(entry[0]);\n    }\n  }\n\n  update(ticker: Ticker) {\n    if (this._paused) {\n      return;\n    }\n    super.update(ticker);\n  }\n\n  private _generateAnimations() {\n    this._animations = new Map();\n    const animations = this.config?.animations ?? {};\n    if (animations) {\n      for (const [key, value] of Object.entries(animations)) {\n        this._animations.set(\n          key,\n          AnimatedSprite.generateTexturesFromProps(\n            key,\n            value,\n            this.defaultTexturePrefix,\n            this.defaultSheet,\n            this.defaultZeroPad,\n          ),\n        );\n      }\n      if (this.config?.reversible) {\n        for (const [key, value] of Object.entries(animations)) {\n          const textures = AnimatedSprite.generateTexturesFromProps(\n            key,\n            value,\n            this.defaultTexturePrefix,\n            this.defaultSheet,\n            this.defaultZeroPad,\n          );\n          textures.reverse();\n          this._animations.set(`${key}_reverse`, textures);\n        }\n      }\n    }\n  }\n\n  private _added() {\n    this.onLoop = () => {\n      this.onAnimationLoop.emit();\n    };\n    this.onComplete = () => {\n      this.onAnimationComplete.emit();\n    };\n    this.onFrameChange = () => {\n      this.onAnimationFrameChange.emit();\n    };\n\n    if (this.autoPlay) {\n      this.play();\n    }\n  }\n}\n", "import { Container, Point } from 'pixi.js';\nimport type { ContainerLike, PointLike } from '../utils';\nimport { bindAllMethods, Logger, resolvePointLike } from '../utils';\nimport { Signal } from '../signals';\nimport { IApplication } from '../core';\nimport type { KeyboardEventDetail } from '../plugins';\nimport { Application } from '../Application';\n\ntype CameraConfig = {\n  container: Container;\n  minX: number;\n  maxX: number;\n  minY: number;\n  maxY: number;\n  viewportWidth: number;\n  viewportHeight: number;\n  worldWidth: number;\n  worldHeight: number;\n  target: ContainerLike | null;\n  targetPivot: Point;\n  lerp: number;\n};\n\n// require container to be set\ntype OptionalCameraConfig = Partial<CameraConfig>;\ntype RequiredCameraConfig = Required<Pick<CameraConfig, 'container'>>;\ntype CustomCameraConfig = OptionalCameraConfig & RequiredCameraConfig;\n\nexport interface ICamera {\n  onZoom: Signal<(camera?: ICamera) => void>;\n  onZoomComplete: Signal<(camera?: ICamera) => void>;\n  container: Container;\n  minX: number;\n  minY: number;\n  maxX: number;\n  maxY: number;\n  viewportWidth: number;\n  viewportHeight: number;\n  worldWidth: number;\n  worldHeight: number;\n  readonly targetPivot: Point;\n  readonly targetScale: Point;\n  readonly zooming: boolean;\n  readonly zoomLerp: number;\n  readonly lerp: number;\n  readonly target: ContainerLike | null;\n  readonly followOffset: Point;\n  app: IApplication;\n\n  follow(target: ContainerLike, offset: PointLike): void;\n\n  pan(deltaX: number, deltaY: number): void;\n\n  zoom(scale: number, lerp?: number): void;\n\n  update(): void;\n}\n\nexport class Camera extends Container implements ICamera {\n  public onZoom = new Signal<(camera?: ICamera) => void>();\n  public onZoomComplete = new Signal<(camera?: ICamera) => void>();\n  public container: Container;\n  public minX: number = 0;\n  public minY: number = 0;\n  public maxX: number;\n  public maxY: number;\n  public viewportWidth: number;\n  public viewportHeight: number;\n  public worldWidth: number;\n  public worldHeight: number;\n\n  constructor(public config: CustomCameraConfig) {\n    super({ isRenderGroup: true });\n    bindAllMethods(this);\n    if (config) {\n      this.container = config.container;\n      this.addChild(this.container);\n      if (config.minX) {\n        this.minX = config.minX;\n      }\n      if (config.maxX) {\n        this.maxX = config.maxX;\n      }\n      if (config.minY) {\n        this.minY = config.minY;\n      }\n      this.viewportWidth = config.viewportWidth ?? this.app.size.width;\n      this.viewportHeight = config.viewportHeight ?? this.app.size.width;\n      this.worldWidth = config.worldWidth ?? this.viewportWidth;\n      this.worldHeight = config.worldHeight ?? this.viewportHeight;\n      this.maxX = config.maxX ?? this.worldWidth - this.viewportWidth;\n      this.maxY = config.maxY ?? this.worldHeight - this.viewportHeight;\n    }\n\n    this._targetPivot.set(this.viewportWidth * 0.5, this.viewportHeight * 0.5);\n    if (config.target) {\n      this.target = config.target;\n    }\n    this._lerp = 1;\n    this.update();\n    if (config.lerp) {\n      this.lerp = config.lerp;\n    }\n    return this;\n  }\n\n  protected _zooming: boolean = false;\n\n  get zooming(): boolean {\n    return this._zooming;\n  }\n\n  protected _zoomLerp: number = 0.1;\n\n  get zoomLerp(): number {\n    return this._zoomLerp;\n  }\n\n  protected _targetPivot: Point = new Point(0, 0);\n\n  get targetPivot(): Point {\n    return this._targetPivot;\n  }\n\n  protected _targetScale: Point = new Point(1, 1);\n\n  get targetScale(): Point {\n    return this._targetPivot;\n  }\n\n  private _lerp: number = 0;\n\n  get lerp(): number {\n    return this._lerp;\n  }\n\n  set lerp(value: number) {\n    // if the value is less than 0 or greater than 1, clamp it to the range [0, 1], and log an error\n    if (value < 0 || value > 1) {\n      Logger.error('Camera lerp value must be in the range [0, 1]');\n    }\n    this._lerp = Math.max(0, Math.min(value, 1));\n  }\n\n  protected _target: ContainerLike | null = null;\n\n  get target(): ContainerLike | null {\n    return this._target;\n  }\n\n  set target(value: ContainerLike | null) {\n    this._target = value;\n    if (this._target) {\n      this.focusOn(this._target);\n    }\n  }\n\n  protected _followOffset: Point = new Point(0, 0);\n  get followOffset(): Point {\n    return this._followOffset;\n  }\n\n  set followOffset(value: PointLike) {\n    this._followOffset = resolvePointLike(value, true);\n  }\n\n  get app(): IApplication {\n    return Application.getInstance();\n  }\n\n  follow(target: ContainerLike, offset?: PointLike) {\n    if (!offset) {\n      offset = { x: 0, y: 0 };\n    }\n    this.followOffset = offset;\n    this.target = target;\n  }\n\n  pan(deltaX: number, deltaY: number) {\n    let newPivotX = this.pivot.x + deltaX;\n    let newPivotY = this.pivot.y + deltaY;\n\n    // Clamp pivot to min and max values\n    newPivotX = Math.max(this.minX, Math.min(newPivotX, this.maxX));\n    newPivotY = Math.max(this.minY, Math.min(newPivotY, this.maxY));\n\n    this._targetPivot.set(newPivotX, newPivotY);\n  }\n\n  zoom(scale: number, lerp: number = 0.1) {\n    this._zoomLerp = lerp;\n    this._zooming = true;\n    this._targetScale.set(scale, scale);\n  }\n\n  update() {\n    this.updateZoom();\n    if (this._target) {\n      this.focusOn(this._target);\n    }\n    this.updatePosition(this._zooming);\n    if (\n      this._zooming &&\n      Math.abs(this.scale.x - this._targetScale.x) < 0.001 &&\n      Math.abs(this.scale.y - this._targetScale.y) < 0.001\n    ) {\n      this.onZoom.emit(this);\n      this._zooming = false;\n      this.scale.set(this._targetScale.x, this._targetScale.y);\n      this.onZoomComplete.emit(this);\n    } else if (this._zooming) {\n      this.onZoom.emit(this);\n    }\n  }\n\n  private focusOn(entity: ContainerLike) {\n    // Get the global position of the entity and convert it to the local position within the container.\n    const globalPosition = entity.getGlobalPosition();\n    const spritePosition = this.toLocal(globalPosition);\n\n    const posXModifier = this.position.x / this.scale.x - this.viewportWidth / 2;\n    const posYModifier = this.position.y / this.scale.y - this.viewportHeight / 2;\n\n    const offsetX = this.followOffset.x / this.scale.x;\n    const offsetY = this.followOffset.y / this.scale.y;\n\n    this._targetPivot.x = (spritePosition.x * this.scale.x + this.viewportWidth / 2) * (1 / this.scale.x) + offsetX;\n\n    const tMinX = this.viewportWidth / this.scale.x / 2 + posXModifier + this.minX - offsetX;\n    const tMaxX = this.worldWidth - this.viewportWidth / this.scale.x / 2 + posXModifier + this.maxX + offsetX;\n\n    if (this._targetPivot.x < tMinX) {\n      this._targetPivot.x = tMinX;\n    } else if (this._targetPivot.x > tMaxX) {\n      this._targetPivot.x = tMaxX;\n    }\n\n    this._targetPivot.y = (spritePosition.y * this.scale.y + this.viewportHeight / 2) * (1 / this.scale.y) + offsetY;\n\n    const tMinY = this.viewportHeight / this.scale.y / 2 + posYModifier + this.minY - offsetY;\n    const tMaxY = this.worldHeight - this.viewportHeight / this.scale.y / 2 + posYModifier + this.maxY - offsetY;\n\n    if (this._targetPivot.y < tMinY) {\n      this._targetPivot.y = tMinY;\n    } else if (this._targetPivot.y > tMaxY) {\n      this._targetPivot.y = tMaxY;\n    }\n  }\n\n  private updateZoom() {\n    const currentScaleX = this.scale.x;\n    const currentScaleY = this.scale.y;\n\n    const interpolatedScaleX = currentScaleX + this._zoomLerp * (this._targetScale.x - currentScaleX);\n    const interpolatedScaleY = currentScaleY + this._zoomLerp * (this._targetScale.y - currentScaleY);\n\n    this.scale.set(Math.max(0, interpolatedScaleX), Math.max(0, interpolatedScaleY));\n  }\n\n  private updatePosition(skipLerp: boolean = false) {\n    if (this.lerp > 0 && !skipLerp) {\n      // Current pivot positions\n      const currentPivotX = this.pivot.x;\n      const currentPivotY = this.pivot.y;\n\n      // Calculate interpolated pivot positions\n      const interpolatedPivotX = currentPivotX + this.lerp * (this._targetPivot.x - currentPivotX);\n      const interpolatedPivotY = currentPivotY + this.lerp * (this._targetPivot.y - currentPivotY);\n\n      // Set the pivot to the interpolated position to smooth out the camera movement\n      this.pivot.set(interpolatedPivotX, interpolatedPivotY);\n    } else {\n      this.pivot.set(this._targetPivot.x, this._targetPivot.y);\n    }\n\n    this.position.set(this.viewportWidth / 2, this.viewportHeight / 2);\n  }\n}\n\nexport class CameraController {\n  private dragging: boolean = false;\n  private previousPointerPosition: Point | null = null;\n\n  constructor(\n    public camera: Camera,\n    public interactiveArea: Container,\n  ) {\n    bindAllMethods(this);\n    this.camera = camera;\n    this.interactiveArea = interactiveArea;\n    this.app.keyboard.onKeyDown().connect(this.handleKeyDown);\n    // Keyboard events\n\n    // Mouse and touch events\n    this.interactiveArea.on('pointerdown', this.onPointerDown.bind(this));\n    this.interactiveArea.on('pointermove', this.onPointerMove.bind(this));\n    this.app.stage.on('pointerup', this.onPointerUp.bind(this));\n    this.app.stage.on('pointerupoutside', this.onPointerUp.bind(this));\n\n    // Touch events equivalent\n    this.interactiveArea.on('touchstart', this.onPointerDown.bind(this));\n    this.interactiveArea.on('touchmove', this.onPointerMove.bind(this));\n    this.interactiveArea.on('touchend', this.onPointerUp.bind(this));\n  }\n\n  get app(): IApplication {\n    return Application.getInstance();\n  }\n\n  destroy() {\n    // Mouse and touch events\n    this.interactiveArea.removeAllListeners();\n    this.app.stage.off('pointerup', this.onPointerUp.bind(this));\n    this.app.stage.off('pointerupoutside', this.onPointerUp.bind(this));\n  }\n\n  private handleKeyDown(detail: KeyboardEventDetail) {\n    const panSpeed = 10; // Adjust pan speed as necessary\n    const zoomFactor = 1.1; // Adjust zoom factor as necessary\n\n    switch (detail.event.key) {\n      case 'ArrowUp':\n        this.camera.pan(0, -panSpeed);\n        break;\n      case 'ArrowDown':\n        this.camera.pan(0, panSpeed);\n        break;\n      case 'ArrowLeft':\n        this.camera.pan(-panSpeed, 0);\n        break;\n      case 'ArrowRight':\n        this.camera.pan(panSpeed, 0);\n        break;\n      case '+':\n        this.camera.zoom(zoomFactor);\n        break;\n      case '-':\n        this.camera.zoom(1 / zoomFactor);\n        break;\n    }\n  }\n\n  private onPointerDown(event: MouseEvent | TouchEvent) {\n    this.dragging = true;\n    this.previousPointerPosition = this.getEventPosition(event);\n  }\n\n  private onPointerMove(event: MouseEvent | TouchEvent) {\n    if (!this.dragging || !this.previousPointerPosition) return;\n\n    const currentPosition = this.getEventPosition(event);\n    const deltaX = currentPosition.x - this.previousPointerPosition.x;\n    const deltaY = currentPosition.y - this.previousPointerPosition.y;\n\n    this.camera.pan(deltaX, deltaY);\n    this.previousPointerPosition = currentPosition;\n  }\n\n  private onPointerUp() {\n    this.dragging = false;\n    this.previousPointerPosition = null;\n  }\n\n  private getEventPosition(event: MouseEvent | TouchEvent): Point {\n    if (event instanceof TouchEvent) {\n      return new Point(event.touches[0].clientX, event.touches[0].clientY);\n    } else {\n      return new Point(event.clientX, event.clientY);\n    }\n  }\n}\n", "import type { SpineProps } from '../mixins';\nimport { Factory, WithSignals } from '../mixins';\nimport { bindAllMethods, Spine } from '../utils';\nimport { Application } from '../Application';\nimport { IApplication } from '../core';\n\nconst _SpineAnimation = WithSignals(Factory());\n\nexport interface ISpineAnimation extends InstanceType<typeof _SpineAnimation> {\n  spine: Spine;\n  animationNames: string[];\n\n  setAnimation(name: string, loop?: boolean, tracklndex?: number): void;\n\n  getCurrentAnimation(tracklndex?: number): string;\n}\n\nexport class SpineAnimation extends _SpineAnimation {\n  spine: Spine;\n  paused: boolean;\n\n  public constructor(props?: Partial<SpineProps>) {\n    super();\n    bindAllMethods(this);\n    let data = props?.data;\n    this.paused = props?.paused === true;\n    if (typeof data === 'string') {\n      // get the spine data from cache\n      // check if '.json' is the last part of the asset string, and add it if not\n      let ext = data.slice(-5);\n      if (ext !== '.json' && ext !== '.skel') {\n        ext = '.json';\n      } else {\n        data = data.substring(0, data.length - 5);\n      }\n      data = { skeleton: data + ext, atlas: data + '.atlas' };\n    }\n    this.spine = (window as any).Spine.from(data);\n    this.add.existing(this.spine);\n    if (props) {\n      if (props.autoUpdate !== undefined) this.spine.autoUpdate = props.autoUpdate;\n      if (props.animationName) this.setAnimation(props.animationName, props.loop, props.trackIndex ?? 0);\n    }\n\n    this.addSignalConnection(this.app.actions('toggle_pause').connect(this.togglePause));\n  }\n\n  get app(): IApplication {\n    return Application.getInstance();\n  }\n\n  get animationNames() {\n    return this.spine.state.data.skeletonData.animations.map((a) => a.name);\n  }\n\n  getCurrentAnimation(trackIndex: number = 0): string {\n    return this.spine.state.getCurrent(trackIndex)?.animation?.name || '';\n  }\n\n  setAnimation(name: string, loop = false, tracklndex: number = 0) {\n    this.spine.state.setAnimation(tracklndex, name, loop);\n  }\n\n  protected togglePause() {\n    this.paused = !this.paused;\n    this.spine.autoUpdate = !this.paused;\n  }\n}\n", "import { Cursor, DestroyOptions, FederatedEvent, FederatedPointerEvent, Sprite } from 'pixi.js';\n\nimport { Application } from '../Application';\nimport type { IApplication } from '../core';\nimport { Factory, Focusable, Interactive, WithSignals } from '../mixins';\nimport { Signal } from '../signals';\nimport { bindAllMethods, SpriteSheetLike, TextureLike } from '../utils';\n\nexport type ButtonCallback = (() => void) | (() => Promise<void>);\nexport type ButtonAction = { id: string | number; data?: any };\n\nexport type ButtonActionOrCallback = ButtonAction | ButtonCallback;\n\ntype ButtonTextureId = 'default' | 'hover' | 'active' | 'disabled';\n\nexport interface IButton {\n  // signals\n  onDown: Signal<() => void>;\n  onUp: Signal<() => void>;\n  onUpOutside: Signal<() => void>;\n  onOut: Signal<() => void>;\n  onOver: Signal<() => void>;\n  onClick: Signal<() => void>;\n  onEnabled: Signal<() => void>;\n  onDisabled: Signal<() => void>;\n  onDestroy: Signal<() => void>;\n  onKeyboardEvent: Signal<(key: string) => void>;\n  // visual\n  view: Sprite;\n  // whether the button is down\n  isDown: boolean;\n  isOver: boolean;\n  //\n  id: string;\n}\n\nexport type ButtonConfig = {\n  id: string;\n  textures: {\n    default: TextureLike;\n    hover?: TextureLike;\n    active?: TextureLike;\n    disabled?: TextureLike;\n  };\n  sounds?: {\n    hover?: string;\n    out?: string;\n    up?: string;\n    down?: string;\n    click?: string;\n  };\n  actions?: {\n    hover?: ButtonActionOrCallback;\n    out?: ButtonActionOrCallback;\n    up?: ButtonActionOrCallback;\n    down?: ButtonActionOrCallback;\n    click?: ButtonActionOrCallback;\n  };\n  cursor: Cursor;\n  disabledCursor: Cursor;\n  sheet: SpriteSheetLike;\n  enabled: boolean;\n};\n\nexport const ButtonConfigKeys: (keyof ButtonConfig)[] = [\n  'textures',\n  'sounds',\n  'actions',\n  'cursor',\n  'disabledCursor',\n  'sheet',\n  'enabled',\n];\n\n// Create a new class that extends Container and includes the Interactive and Focusable mixins.\nconst _Button = Focusable(Interactive(WithSignals(Factory())));\n\n/**\n * @class\n * @extends {Container}\n * @implements {IFocusable, IButton}\n * @description A class representing a button.\n */\nexport class Button extends _Button implements IButton {\n  // signals\n  public onDown = new Signal<() => void>();\n  public onUp = new Signal<() => void>();\n  public onUpOutside = new Signal<() => void>();\n  public onOut = new Signal<() => void>();\n  public onOver = new Signal<() => void>();\n  public onClick = new Signal<() => void>();\n  public onEnabled = new Signal<() => void>();\n  public onDisabled = new Signal<() => void>();\n  public onKeyboardEvent = new Signal<(key: string) => void>();\n  public onDestroy = new Signal<() => void>();\n  public id: string;\n  // visual\n  public view: Sprite;\n  // whether the button is down\n  public isDown: boolean;\n  public isOver: boolean;\n  // config\n  protected config: ButtonConfig;\n  // a set of unique callbacks for when the button is down\n  protected _isDownCallbacks: Map<string, () => void> = new Map();\n  private _isDownListenerAdded: boolean = false;\n  private _pointerId?: number;\n\n  /**\n   * @constructor\n   * @param {Partial<ButtonConfig>} config - The configuration for the button.\n   */\n  constructor(config: Partial<ButtonConfig>) {\n    super();\n\n    bindAllMethods(this);\n\n    this.config = Object.assign(\n      {\n        id: 'button',\n        textures: { default: '' },\n        sheet: undefined,\n        enabled: true,\n        cursor: 'default',\n        disabledCursor: 'not-allowed',\n      },\n      config,\n    );\n\n    this.id = this.config.id;\n\n    // Create a sprite with the default texture and add it to the container.\n    this.view = this.add.sprite({ asset: this.config.textures.default, sheet: this.config.sheet, anchor: 0.5 });\n\n    this.cursor = this.config.cursor;\n    this.enabled = config.enabled !== false;\n\n    // Set up interaction handlers.\n    // make them high priority so they run before any other interaction handlers\n    this.addSignalConnection(\n      this.onInteraction('pointerover').connect(this.handlePointerOver, -1),\n      this.onInteraction('pointerout').connect(this.handlePointerOut, -1),\n      this.onInteraction('pointerup').connect(this.handlePointerUp, -1),\n      this.onInteraction('click').connect(this.handleClick, -1),\n      this.onInteraction('tap').connect(this.handleClick, -1),\n      this.onInteraction('pointerdown').connect(this.handlePointerDown, -1),\n    );\n  }\n\n  // enabled state\n  protected _enabled: boolean;\n\n  /**\n   * @description Sets the enabled state of the button.\n   * @param {boolean} enabled - Whether the button is enabled.\n   */\n  public set enabled(enabled: boolean) {\n    if (this._enabled === enabled) {\n      return;\n    }\n    this._enabled = enabled;\n    this.cursor = this._enabled ? this.config.cursor : this.config.disabledCursor;\n    this.focusEnabled = enabled;\n    if (this._enabled) {\n      this.view.texture = this.make.texture({\n        asset: this.config.textures.default,\n        sheet: this.config.sheet,\n      });\n      this.onEnabled.emit();\n    } else {\n      this.view.texture = this.make.texture({\n        asset: this.config.textures.disabled || this.config.textures.default,\n        sheet: this.config.sheet,\n      });\n      this.onDisabled.emit();\n    }\n  }\n\n  get app(): IApplication {\n    return Application.getInstance();\n  }\n\n  destroy(options?: DestroyOptions) {\n    this.onDestroy.emit();\n    super.destroy(options);\n  }\n\n  focusOut() {\n    super.focusOut();\n    this.isDown = false;\n    this.isOver = false;\n  }\n\n  blur() {\n    super.blur();\n    this.isDown = false;\n    this.isOver = false;\n  }\n\n  public getFocusArea() {\n    return this.view.getBounds().clone();\n  }\n\n  public getFocusPosition() {\n    return [-this.width * 0.5, -this.height * 0.5];\n  }\n\n  addIsDownCallback(callbackId: string, callback: () => void) {\n    this._isDownCallbacks.set(callbackId, callback);\n    this._checkIsDownCallbacks();\n  }\n\n  removeIsDownCallback(callbackId: string) {\n    this._isDownCallbacks.delete(callbackId);\n  }\n\n  setTexture(textureId: ButtonTextureId, texture: TextureLike) {\n    this.config.textures[textureId] = texture;\n    if (textureId === 'default') {\n      this.view.texture = this.make.texture({\n        asset: this.config.textures.default,\n        sheet: this.config.sheet,\n      });\n    }\n  }\n\n  /**\n   * @description Handles the pointer over event.\n   * Sets the texture of the button to the hover texture and emits the onOver event.\n   */\n  protected handlePointerOver() {\n    if (!this._enabled) {\n      return;\n    }\n    if (!this.isOver) {\n      this.isOver = true;\n    }\n    if (this.isDown) {\n      return;\n    }\n    this.view.texture = this.make.texture({\n      asset: this.config.textures.hover || this.config.textures.default,\n      sheet: this.config.sheet,\n    });\n    this.onOver.emit();\n    if (this.config.sounds?.hover) {\n      void this.app.audio.play(this.config.sounds.hover, 'sfx');\n    }\n    if (this.config.actions?.hover) {\n      this._doAction(this.config.actions.hover);\n    }\n  }\n\n  /**\n   * @description Handles the pointer out event.\n   * Sets the texture of the button to the default texture and emits the onOut event.\n   */\n  protected handlePointerOut(e: FederatedEvent) {\n    this.isOver = false;\n    if (!this._enabled) {\n      return;\n    }\n    if (this.isDown) {\n      return;\n    }\n    this.view.texture = this.make.texture({ asset: this.config.textures.default, sheet: this.config.sheet });\n    this.onOut.emit();\n  }\n\n  /**\n   * @description Handles the pointer down event.\n   * Sets the isDown property to true and changes the texture of the button.\n   */\n  protected handlePointerDown(e: FederatedEvent) {\n    if (!this._enabled && !this.isKeyDown) {\n      return;\n    }\n    if (!this.isDown && this._pointerId === undefined) {\n      this._pointerId = (e as FederatedPointerEvent).pointerId;\n\n      window.removeEventListener('pointerup', this.handlePointerUpOutside);\n      this.off('pointerupoutside', this.handlePointerUpOutside);\n\n      window.addEventListener('pointerup', this.handlePointerUpOutside);\n      this.on('pointerupoutside', this.handlePointerUpOutside);\n\n      this.isDown = true;\n      this.view.texture = this.make.texture({\n        asset: this.config.textures.active || this.config.textures.hover || this.config.textures.default,\n        sheet: this.config.sheet,\n      });\n      this.onDown.emit();\n      if (this.config.sounds?.down) {\n        void this.app.audio.play(this.config.sounds.down, 'sfx');\n      }\n      if (this.config.actions?.down) {\n        if (this.config.actions?.down) {\n          this._doAction(this.config.actions.down);\n        }\n      }\n    }\n  }\n\n  /**\n   * @description Handles the pointer up event.\n   * Removes the keyup event listener and emits the onPress and onUp events.\n   */\n  protected handlePointerUp(e: FederatedEvent) {\n    if (!this._enabled || !this.isOver || (e as FederatedPointerEvent).pointerId !== this._pointerId) {\n      return;\n    }\n    window.removeEventListener('pointerup', this.handlePointerUpOutside);\n\n    this.view.texture = this.make.texture({ asset: this.config.textures.default, sheet: this.config.sheet });\n    this.onUp.emit();\n    if (this.config.sounds?.up) {\n      void this.app.audio.play(this.config.sounds.up, 'sfx');\n    }\n    if (this.config.actions?.up) {\n      this._doAction(this.config.actions.up);\n    }\n    this._pointerId = undefined;\n  }\n\n  protected handleClick() {\n    this.isDown = false;\n    this.onClick.emit();\n    if (this.config.sounds?.click) {\n      void this.app.audio.play(this.config.sounds.click, 'sfx');\n    }\n    if (this.config.actions?.click) {\n      this._doAction(this.config.actions.click);\n    }\n  }\n\n  /**\n   * @description Handles the pointer up event.\n   */\n  protected handlePointerUpOutside(e: PointerEvent) {\n    if (!this._enabled || e.pointerId !== this._pointerId) {\n      return;\n    }\n    window.removeEventListener('pointerup', this.handlePointerUpOutside);\n    this.off('pointerupoutside', this.handlePointerUpOutside);\n    this.view.texture = this.make.texture({ asset: this.config.textures.default, sheet: this.config.sheet });\n    this.isDown = false;\n    this.isOver = false;\n    this.onUpOutside.emit();\n\n    if (this.config.sounds?.up) {\n      void this.app.audio.play(this.config.sounds.up, 'sfx');\n    }\n    if (this.config.actions?.up) {\n      this._doAction(this.config.actions.up);\n    }\n    this._pointerId = undefined;\n  }\n\n  private _doAction(action: ButtonActionOrCallback) {\n    if (typeof action === 'function') {\n      void action();\n    } else {\n      if (!action.data.button) {\n        action.data.button = this;\n      }\n      this.app.action(action.id, action.data);\n    }\n  }\n\n  private _checkIsDownCallbacks() {\n    // check if there are any callbacks, if there are, add the ticker listener\n    if (!this._isDownListenerAdded && this._isDownCallbacks.size > 0) {\n      this._isDownListenerAdded = true;\n      this.app.ticker.add(this._handleIsDownCallbacks);\n    } else {\n      this.app.ticker.remove(this._handleIsDownCallbacks);\n      this._isDownListenerAdded = false;\n    }\n  }\n\n  private _handleIsDownCallbacks() {\n    if (this.isDown) {\n      this._isDownCallbacks.forEach((callback) => {\n        callback();\n      });\n    }\n  }\n}\n", "import type { ContainerLike, PointLike } from '../utils';\nimport { bindAllMethods, Logger, resolvePointLike } from '../utils';\n\nimport { Application } from '../Application';\nimport { Container } from '../display/Container';\nimport type { DestroyOptions } from 'pixi.js';\nimport { Container as PIXIContainer } from 'pixi.js';\nimport { Factory, WithSignals } from '../mixins';\nimport { Signal } from '../signals';\n\nconst _FlexContainer = WithSignals(Factory());\n\nexport interface FlexContainerConfig {\n  width: number;\n  height: number;\n  bindTo: ContainerLike;\n  bindToAppSize: boolean;\n  gap: number;\n  flexWrap: 'wrap' | 'nowrap';\n  flexDirection: 'row' | 'column';\n  alignItems: 'center' | 'flex-start' | 'flex-end';\n  justifyContent: 'center' | 'space-between' | 'space-around' | 'space-evenly' | 'flex-start' | 'flex-end';\n}\n\nexport const FlexContainerConfigKeys: (keyof FlexContainerConfig)[] = [\n  'width',\n  'height',\n  'bindTo',\n  'bindToAppSize',\n  'gap',\n  'flexWrap',\n  'flexDirection',\n  'alignItems',\n  'justifyContent',\n];\n\nconst defaultConfig = {\n  bindTo: null,\n  width: 0,\n  height: 0,\n  gap: 0,\n  flexWrap: 'nowrap',\n  flexDirection: 'row',\n  alignItems: 'flex-start',\n  justifyContent: 'flex-start',\n  padding: 0,\n};\n\nexport interface IFlexContainer {\n  onLayoutComplete: Signal<() => void>;\n  debug: boolean;\n  config: FlexContainerConfig;\n\n  containerWidth: number;\n  containerHeight: number;\n\n  removeChildren<U extends PIXIContainer>(): U[];\n\n  removeChildAt<U extends PIXIContainer>(index: number): U;\n\n  addChildAt<U extends PIXIContainer>(child: U, index: number): U;\n\n  setChildIndex<U extends PIXIContainer>(child: U, index: number): void;\n\n  getChildIndex<U extends PIXIContainer>(child: U): number;\n\n  getChildAt<U extends PIXIContainer>(index: number): U;\n\n  setFlexChildren(): void;\n\n  cleanup(): void;\n\n  handleChildAdded(child: any): void;\n\n  deleteChild(child: PIXIContainer): boolean;\n\n  layout(): void;\n\n  added(): void;\n}\n\nexport type FlexWrap = 'wrap' | 'nowrap';\nexport type FlexDirection = 'row' | 'column';\nexport type AlignItems = 'center' | 'flex-start' | 'flex-end';\nexport type JustifyContent = 'center' | 'space-between' | 'space-around' | 'space-evenly' | 'flex-start' | 'flex-end';\n\nexport class FlexContainer<T extends Application = Application> extends _FlexContainer {\n  public onLayoutComplete: Signal<() => void> = new Signal<() => void>();\n  public debug: boolean = false;\n  public config: FlexContainerConfig;\n  protected paddingLeft: number = 0;\n  protected paddingRight: number = 0;\n  protected paddingTop: number = 0;\n  protected paddingBottom: number = 0;\n  protected _childMap = new Map<PIXIContainer, PIXIContainer>();\n  private _reparentAddedChild: boolean = true;\n\n  constructor(config: Partial<FlexContainerConfig> = {}) {\n    super();\n\n    // Bind all methods of this class to the current instance.\n    bindAllMethods(this);\n    this.config = Object.assign({ ...defaultConfig }, config);\n\n    // Add an event listener for the 'added' event.\n    this.on('added', this._added);\n    this.on('childAdded', this.handleChildAdded);\n    this.on('childRemoved', this.handleChildRemoved);\n\n    this.layout();\n  }\n\n  protected _flexChildren: PIXIContainer[] = [];\n\n  get flexChildren() {\n    return this._flexChildren;\n  }\n\n  get gap(): number {\n    return this.config.gap!;\n  }\n\n  set gap(value: number) {\n    this.config.gap = value;\n    this.layout();\n  }\n\n  get flexWrap(): FlexWrap {\n    return this.config.flexWrap!;\n  }\n\n  set flexWrap(value: FlexWrap) {\n    this.config.flexWrap = value;\n    this.layout();\n  }\n\n  get flexDirection(): FlexDirection {\n    return this.config.flexDirection!;\n  }\n\n  set flexDirection(value: FlexDirection) {\n    this.config.flexDirection = value;\n    this.layout();\n  }\n\n  get alignItems(): AlignItems {\n    return this.config.alignItems!;\n  }\n\n  set alignItems(value: AlignItems) {\n    this.config.alignItems = value;\n    this.layout();\n  }\n\n  get justifyContent(): JustifyContent {\n    return this.config.justifyContent!;\n  }\n\n  set justifyContent(value: JustifyContent) {\n    this.config.justifyContent = value;\n    this.layout();\n  }\n\n  get containerHeight(): number {\n    return this.config.height;\n  }\n\n  set containerHeight(value: number) {\n    this.config.height = value;\n    this.layout();\n  }\n\n  get containerWidth(): number {\n    return this.config.width;\n  }\n\n  set containerWidth(value: number) {\n    this.config.width = value;\n    this.layout();\n  }\n\n  get size(): { width: number; height: number } {\n    return { width: this.config.width, height: this.config.height };\n  }\n\n  set size(size: PointLike) {\n    const { x, y } = resolvePointLike(size);\n    this.config.width = x;\n    this.config.height = y;\n\n    this.layout();\n  }\n\n  /**\n   * Get the application instance.\n   */\n  public get app(): T {\n    return Application.getInstance() as T;\n  }\n\n  /**\n   * Removes all the children from the container\n   * Override because we need to ensure it returns the proper re-parented children\n   */\n  public removeChildren = <U extends PIXIContainer>() => {\n    const children = this.flexChildren;\n    this.removeChild(...children);\n    return children as U[];\n  };\n\n  /**\n   * Removes a child from the container at the specified index\n   * Override because we need to remove from the inner container\n   */\n  public removeChildAt = <U extends PIXIContainer>(index: number): U => {\n    return this.removeChild(this.flexChildren[index]) as U;\n  };\n\n  /**\n   * Adds a child to the container at the specified index\n   * Override because we need to ensure it sets the child index properly\n   */\n  public addChildAt = <U extends PIXIContainer>(child: U, index: number) => {\n    const newChild = this.add.existing(child);\n    this.setChildIndex(newChild, index);\n    return newChild;\n  };\n\n  /**\n   * Sets the index of the child in the container\n   * Override because we need to ensure it targets the parent container that we added\n   */\n  public setChildIndex = <U extends PIXIContainer>(child: U, index: number) => {\n    const actualChild = this._childMap.get(child as PIXIContainer);\n    if (actualChild) {\n      super.setChildIndex(actualChild, index);\n      this.setFlexChildren();\n      this.layout();\n    }\n  };\n\n  /**\n   * Gets the index of a child in the container\n   * Override because we need to ensure it targets the parent container that we added\n   * @param {DisplayObject} child\n   * @param {number} index\n   * @returns {U}\n   */\n  public getChildIndex = <U extends PIXIContainer>(child: U) => {\n    if (this._childMap.has(child as PIXIContainer)) {\n      return super.getChildIndex(child.parent);\n    }\n    return super.getChildIndex(child);\n  };\n\n  /**\n   * Gets the child at the specified index\n   * Override due to re-parenting\n   */\n  public getChildAt = <U extends PIXIContainer>(index: number) => {\n    return super.getChildAt(index)?.getChildAt(0) as U;\n  };\n\n  destroy(_options?: DestroyOptions | boolean) {\n    this.off('childAdded', this.handleChildAdded);\n    this.off('childRemoved', this.handleChildRemoved);\n\n    super.destroy(_options);\n  }\n\n  /**\n   * Removes one or more children from the container\n   * Override because we need to ensure it returns the proper re-parented children\n   * @param children\n   */\n  public removeChild(...children: PIXIContainer[]): PIXIContainer {\n    if (this._reparentAddedChild) {\n      children.forEach((child) => {\n        const actualChild = this._childMap.get(child);\n        if (actualChild) {\n          return super.removeChild(actualChild);\n        }\n        return;\n      });\n    } else {\n      return super.removeChild(...children);\n    }\n    return children[0];\n  }\n\n  public getChildByLabel(label: RegExp | string, deep: boolean = true): PIXIContainer | null {\n    for (let i = 0; i < this.flexChildren.length; i++) {\n      const child = this.flexChildren[i];\n      if (child.label) {\n        if (label instanceof RegExp) {\n          if (label.test(child.label)) {\n            return child;\n          }\n        } else {\n          if (child.label === label) {\n            return child;\n          }\n        }\n      }\n      if (deep) {\n        const foundChild = child.getChildByLabel(label, deep);\n        if (foundChild) {\n          return foundChild;\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Public method to manually trigger a layout\n   */\n  public layout() {\n    this.app.ticker.addOnce(this._layout, this);\n  }\n\n  resize() {\n    this.layout();\n  }\n\n  update() {}\n\n  added() {}\n\n  /**\n   * Ensures we delete the child from the map when it's removed\n   * @protected\n   */\n  protected handleChildRemoved(child: PIXIContainer) {\n    if (this._reparentAddedChild) {\n      if (!this.deleteChild(child)) {\n        child = (child as Container).getChildAt(0);\n        this.deleteChild(child);\n      }\n    }\n  }\n\n  /**\n   * Deletes a child from the map\n   * @param {Container} child\n   * @returns {boolean}\n   * @protected\n   */\n  protected deleteChild(child: PIXIContainer): boolean {\n    const isInMap = this._childMap.has(child as Container);\n    if (isInMap) {\n      // disconnect signal\n      if (child instanceof FlexContainer) {\n        try {\n          child.onLayoutComplete.disconnect(this.layout);\n        } catch (e) {\n          Logger.warn(`FlexContainer:: Error disconnecting signal from removed child`);\n          console.warn(e);\n        }\n      }\n      this._childMap.delete(child as Container);\n      this.setFlexChildren();\n      this.layout();\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Sorts the children in the container\n   * Needed because we need to ensure re-parented children are sorted by their actual index in the container\n   * @protected\n   */\n  protected setFlexChildren() {\n    this._flexChildren = Array.from(this._childMap.keys());\n    // order by the actual index in the container\n    this._flexChildren.sort((a, b) => this.getChildIndex(a) - this.getChildIndex(b));\n    this.cleanup();\n  }\n\n  /**\n   * Ensure we don't leave empty containers after setting child indices or adding / removing children\n   * @protected\n   */\n  protected cleanup() {\n    if (this.flexChildren.length === this.children.length) return;\n    // remove any children that are not in the flex children list\n    this.children.forEach((child) => {\n      if (!(child as Container)?.children?.length) {\n        super.removeChild(child);\n      }\n    });\n  }\n\n  /**\n   * Re-parent a child to account for e.g. sprite that are added with anchors\n   * @param child\n   * @protected\n   */\n  protected handleChildAdded(child: any) {\n    // avoid maximum call stack error b/c we're about to add a container\n    if (!this._reparentAddedChild) return;\n    this._reparentAddedChild = false;\n    // add an inner container so we can account for e.g. sprite that are added with anchors\n    // re-parent the added child to the inner container\n    const container = this.add.container();\n    container.add.existing(child);\n    // figure out the bounds of the inner container\n    // then, offset its pivot so that it's top-left corner is always at 0,0\n    const bounds = container.getLocalBounds();\n    if (bounds.x < 0) {\n      container.pivot.x = bounds.x;\n    }\n    if (bounds.y < 0) {\n      container.pivot.y = bounds.y;\n    }\n\n    if (child instanceof FlexContainer) {\n      this.addSignalConnection(child.onLayoutComplete.connect(this.layout));\n    }\n\n    this._childMap.set(child, container);\n    this.setFlexChildren();\n    this._reparentAddedChild = true;\n    this.app.render();\n    this.layout();\n  }\n\n  /**\n   * Lay out the children according to the settings\n   * Tries to follow the CSS Flexbox model as closely as possible\n   * @private\n   */\n  private _layout() {\n    if (this.config.bindTo) {\n      this.config.width = this.config.bindTo?.width ?? 0;\n      this.config.height = this.config.bindTo?.height ?? 0;\n    }\n\n    if (this.config.bindToAppSize) {\n      this.config.width = this.app.size.width;\n      this.config.height = this.app.size.height;\n    }\n\n    const canHaveEndlessWidthOrHeight = ['flex-start'];\n\n    let { width, height } = this.config;\n    const { gap, flexDirection, flexWrap, alignItems, justifyContent } = this.config;\n\n    if (\n      this.config.flexDirection === 'row' &&\n      this.config.flexWrap === 'nowrap' &&\n      canHaveEndlessWidthOrHeight.includes(this.config.justifyContent)\n    ) {\n      width = Infinity;\n    } else if (\n      this.config.flexDirection === 'column' &&\n      this.config.flexWrap === 'nowrap' &&\n      canHaveEndlessWidthOrHeight.includes(this.config.justifyContent)\n    ) {\n      height = Infinity;\n    }\n\n    let layoutProps: { x: number; y: number }[] = [];\n\n    let x = 0;\n    let y = 0;\n    let rowHeight = 0;\n    let columnWidth = 0;\n    let nextRowY = 0; // y-coordinate of the next row\n    let nextColumnX = 0; // x-coordinate of the next column\n    const newLayoutProps: { x: number; y: number }[] = [];\n    const items = this.children.filter(Boolean);\n    let lineItems: { index: number; width: number; height: number }[] = [];\n    let lineStart = 0;\n\n    const shouldWrap = (childRef: PIXIContainer, x: number, y: number) =>\n      (flexDirection === 'row' && x + childRef.width + gap! > width!) ||\n      (flexDirection === 'column' && y + childRef.height + gap! > height!);\n\n    const handleWrap = () => {\n      if (flexDirection === 'row') {\n        nextRowY += rowHeight + gap!;\n      } else {\n        nextColumnX += columnWidth + gap!;\n      }\n      x = 0;\n      y = 0;\n      rowHeight = 0;\n      columnWidth = 0;\n    };\n\n    const updateLayoutVariables = (childRef: PIXIContainer) => {\n      if (flexDirection === 'row') {\n        x += childRef.width + gap!;\n        rowHeight = Math.max(rowHeight, childRef.height);\n      } else {\n        y += childRef.height + gap!;\n        columnWidth = Math.max(columnWidth, childRef.width);\n      }\n    };\n\n    const getNextX = (currentX: number) => (flexDirection === 'row' ? currentX : nextColumnX);\n    const getNextY = (currentY: number) => (flexDirection === 'column' ? currentY : nextRowY);\n\n    const handleJustification = (\n      lineItems: { index: number; width: number; height: number }[],\n      lineStart: number,\n      lineEnd: number,\n      direction: 'row' | 'column',\n    ) => {\n      const extraSpace = (direction === 'row' ? width! : height!) - (lineEnd - lineStart);\n      lineItems.forEach(({ index }, i) => {\n        let offset = 0;\n        switch (justifyContent) {\n          case 'flex-start':\n            break; // Do nothing\n          case 'flex-end':\n            offset = extraSpace;\n            break;\n          case 'center':\n            offset = extraSpace / 2;\n            break;\n          case 'space-between':\n            offset = lineItems.length > 1 ? i * (extraSpace / (lineItems.length - 1)) : 0;\n            break;\n          case 'space-around':\n            offset = (extraSpace / lineItems.length) * i + extraSpace / (2 * lineItems.length);\n            break;\n          case 'space-evenly':\n            offset = (extraSpace / (lineItems.length + 1)) * (i + 1);\n            break;\n        }\n        if (direction === 'row') {\n          newLayoutProps[index].x += offset;\n        } else {\n          newLayoutProps[index].y += offset;\n        }\n      });\n    };\n\n    const handleAlignment = (newLayoutProps: { x: number; y: number }[], items: (PIXIContainer | null)[]) => {\n      newLayoutProps.forEach((props, index) => {\n        const childRef = items[index] as Container;\n        if (!childRef) return;\n\n        if (flexDirection === 'row') {\n          switch (alignItems) {\n            case 'flex-start':\n              break;\n            case 'flex-end':\n              props.y += rowHeight - childRef.height;\n              break;\n            case 'center':\n              props.y += (rowHeight - childRef.height) / 2;\n              break;\n          }\n        } else {\n          switch (alignItems) {\n            case 'flex-start':\n              break;\n            case 'flex-end':\n              props.x = width ? width - childRef.width : -childRef.width;\n              break;\n            case 'center':\n              props.x += (width - childRef.width) / 2;\n              break;\n          }\n        }\n      });\n    };\n\n    items.forEach((childRef, index) => {\n      if (!childRef) return;\n\n      const item = childRef as Container;\n\n      // Check for wrapping\n      if (flexWrap === 'wrap' && shouldWrap(item, x, y)) {\n        handleJustification(lineItems, lineStart, flexDirection === 'column' ? y - gap : x - gap, flexDirection);\n        handleWrap();\n        lineItems = [];\n        lineStart = x;\n      }\n\n      lineItems.push({ index, width: item.width, height: item.height });\n\n      // Position child\n      newLayoutProps[index] = { x: getNextX(x), y: getNextY(y) };\n\n      // Update layout variables\n      updateLayoutVariables(item);\n    });\n\n    // Justify the last line\n    handleJustification(lineItems, lineStart, flexDirection === 'column' ? y - gap : x - gap, flexDirection);\n    handleAlignment(newLayoutProps, items);\n\n    layoutProps = newLayoutProps;\n\n    items.forEach((childRef, index) => {\n      const item = childRef as Container;\n      const { x, y } = layoutProps[index] || { x: 0, y: 0 };\n      item.position.set(x, y);\n    });\n\n    // handle alignment within container bounds\n    const totalHeight = this.children.reduce((acc, child) => Math.max(acc, child.y + (child as Container).height), 0);\n    this.children.forEach((child) => {\n      if (this.config.flexDirection === 'row') {\n        switch (this.config.alignItems) {\n          case 'center':\n            child.y -= (totalHeight - height) * 0.5;\n            break;\n          case 'flex-end':\n            child.y += height - totalHeight;\n            break;\n        }\n      }\n    });\n    // force re-render\n\n    this.onLayoutComplete.emit();\n  }\n\n  private _added() {\n    this.addSignalConnection(this.app.onResize.connect(this.layout, 0));\n    this.added();\n  }\n}\n", "import { Bounds, Graphics, Container as PIXIContainer, Rectangle } from 'pixi.js';\nimport { Application } from '../Application';\nimport { Container } from '../display/Container';\nimport { Factory, WithSignals } from '../mixins';\nimport type { Padding, PointLike, Size, SizeLike } from '../utils';\nimport { bindAllMethods, ensurePadding, Logger, resolvePadding, resolveSizeLike } from '../utils';\nimport type { IFlexContainer } from './FlexContainer';\n\nexport type UICanvasEdge =\n  | 'top right'\n  | 'top left'\n  | 'top center'\n  | 'top'\n  | 'bottom right'\n  | 'bottom left'\n  | 'bottom center'\n  | 'bottom'\n  | 'left top'\n  | 'left bottom'\n  | 'left center'\n  | 'left'\n  | 'right top'\n  | 'right bottom'\n  | 'right center'\n  | 'right'\n  | 'center';\n\nexport interface UICanvasChildSettings {\n  align: UICanvasEdge;\n  padding: Padding;\n}\n\nexport interface UICanvasChildProps {\n  align: UICanvasEdge;\n  padding: Partial<Padding> | PointLike;\n}\n\nexport type UICanvasConfig = {\n  debug: boolean;\n  padding: Padding;\n  size: Size;\n  useAppSize: boolean;\n};\n\nexport const UICanvasConfigKeys: (keyof UICanvasConfig)[] = ['debug', 'padding', 'size', 'useAppSize'];\n\nexport type UICanvasProps = {\n  debug: boolean;\n  padding: Partial<Padding> | PointLike;\n  size?: SizeLike;\n  useAppSize?: boolean;\n};\n\nconst _UICanvas = WithSignals(Factory());\n\nexport class UICanvas<T extends Application = Application> extends _UICanvas {\n  public config: UICanvasConfig;\n  protected _outerBounds: Rectangle;\n  protected _displayBounds: Rectangle;\n  protected settingsMap = new Map<PIXIContainer, UICanvasChildSettings>();\n  protected _childMap = new Map<PIXIContainer, PIXIContainer>();\n  protected _debugGraphics: Graphics;\n  protected _inner: Container;\n  private _reparentAddedChild: boolean = true;\n  private _disableAddChildError: boolean = false;\n\n  constructor(config: Partial<UICanvasProps>) {\n    super();\n    // Bind all methods of this class to the current instance.\n    bindAllMethods(this);\n    this.config = {\n      debug: config.debug === true,\n      padding: ensurePadding(config?.padding ?? 0),\n      size: config.size !== undefined ? resolveSizeLike(config.size) : { width: 0, height: 0 },\n      useAppSize: config.useAppSize === true,\n    };\n    this._disableAddChildError = true;\n    this._inner = this.add.container({ x: this.config.padding.left, y: this.config.padding.top });\n    this._disableAddChildError = false;\n\n    this.addSignalConnection(this.app.onResize.connect(this.resize));\n\n    this.on('childRemoved', this._childRemoved);\n    this.once('added', this._added);\n  }\n\n  protected _bounds: Bounds;\n\n  get bounds(): Bounds {\n    if (!this._bounds) {\n      this._bounds = this.getBounds();\n    }\n    return this._bounds;\n  }\n\n  protected _canvasChildren: PIXIContainer[] = [];\n\n  public get canvasChildren(): PIXIContainer[] {\n    return this._canvasChildren;\n  }\n\n  /**\n   * Get the application instance.\n   */\n  public get app(): T {\n    return Application.getInstance() as T;\n  }\n\n  set size(value: SizeLike) {\n    this.config.useAppSize = false;\n    this.config.size = value === undefined ? { width: 0, height: 0 } : resolveSizeLike(value);\n    this.resize();\n  }\n\n  set padding(value: Partial<Padding> | PointLike) {\n    this.config.padding = ensurePadding(value);\n    this._inner.position.set(this.config.padding.left, this.config.padding.top);\n    this.resize();\n  }\n\n  private static isFlexContainer(child: PIXIContainer): boolean {\n    return (child as any)?.flexChildren !== undefined;\n  }\n\n  /**\n   * Removes all the children from the container\n   * Override because we need to ensure it returns the proper re-parented children\n   */\n  public removeChildren = (beginIndex?: number, endIndex?: number) => {\n    return this._inner.removeChildren(beginIndex, endIndex);\n  };\n\n  /**\n   * Removes a child from the container at the specified index\n   * Override because we need to remove from the inner container\n   */\n  public removeChildAt = <U extends PIXIContainer>(index: number): U => {\n    return this._inner.removeChildAt(index) as U;\n  };\n\n  /**\n   * Adds a child to the container at the specified index\n   * Override because we need to ensure it sets the child index properly\n   */\n  public addChildAt = <U extends PIXIContainer>(child: U, index: number) => {\n    const newChild = this._inner.add.existing(child);\n    this._inner.setChildIndex(newChild, index);\n    return newChild;\n  };\n\n  /**\n   * Sets the index of the child in the container\n   * Override because we need to ensure it targets the parent container that we added\n   */\n  public setChildIndex = <U extends PIXIContainer>(child: U, index: number) => {\n    this._inner.setChildIndex(child, index);\n    this.layout();\n  };\n\n  /**\n   * Gets the index of a child in the container\n   * Override because we need to ensure it targets the parent container that we added\n   */\n  public getChildIndex = <U extends PIXIContainer>(child: U) => {\n    return this._inner.getChildIndex(child);\n  };\n\n  /**\n   * Gets the child at the specified index\n   * Override due to re-parenting\n   */\n  public getChildAt = <U extends PIXIContainer>(index: number) => {\n    return this._inner.getChildAt(index)?.getChildAt(0) as U;\n  };\n\n  public addChild<U extends PIXIContainer[]>(...children: PIXIContainer[]): U[0] {\n    if (this._disableAddChildError) {\n      return super.addChild(...children) as U[0];\n    }\n    Logger.warn(\n      `UICanvas:: You probably shouldn't add children directly to UICanvas. Use .addElement(child, settings) instead, so you can pass alignment settings.`,\n      children,\n      `will be added using the default 'top left' alignment'.`,\n    );\n    return this._inner.addChild(...children) as U[0];\n  }\n\n  /**\n   * Removes one or more children from the container\n   * Override because we need to ensure it returns the proper re-parented children\n   */\n  public removeChild(...children: PIXIContainer[]): PIXIContainer {\n    if (this._reparentAddedChild) {\n      children.forEach((child) => {\n        const actualChild = this._childMap.get(child as PIXIContainer) as PIXIContainer;\n        if (actualChild) {\n          return this._inner.removeChild(actualChild);\n        }\n        return undefined;\n      });\n    } else {\n      return this._inner.removeChild(...children);\n    }\n    return children[0];\n  }\n\n  public resize() {\n    const _size = this.config.useAppSize ? this.app.size : this.config.size;\n\n    this._displayBounds = this.__calculateBounds(_size);\n    this._outerBounds = this.__calculateOuterBounds(_size);\n\n    this.layout();\n\n    if (this.config.useAppSize) {\n      this.position.set(-_size.width * 0.5, -_size.height * 0.5);\n    }\n\n    if (this.config.debug) {\n      this.app.ticker.addOnce(this.drawDebug);\n    }\n  }\n\n  public layout() {\n    this._inner.children.forEach((child) => {\n      const childObj = child as PIXIContainer;\n      const settings = this.settingsMap.get(childObj);\n      if (settings) {\n        this.applySettings(childObj, settings);\n      }\n    });\n  }\n\n  public addElement<U extends PIXIContainer = PIXIContainer>(\n    child: PIXIContainer,\n    settings?: Partial<UICanvasChildProps>,\n  ): U {\n    const container = this._inner.add.container();\n    container.addChild(child);\n    const bounds = container.getLocalBounds();\n    if (bounds.x < 0) {\n      container.pivot.x = bounds.x;\n    }\n    if (bounds.y < 0) {\n      container.pivot.y = bounds.y;\n    }\n    if ((child as any)?.flexChildren) {\n      this.addSignalConnection((child as unknown as IFlexContainer).onLayoutComplete.connect(this.layout));\n    }\n\n    this.settingsMap.set(container, {\n      align: settings?.align ?? 'top left',\n      padding: settings?.padding ? ensurePadding(settings.padding) : { top: 0, left: 0, bottom: 0, right: 0 },\n    });\n\n    this._childMap.set(child, container);\n    this._canvasChildren = Array.from(this._childMap.keys());\n\n    this.resize();\n    return child as U;\n  }\n\n  /**\n   * Ensure we don't leave empty containers after setting child indices or adding / removing children\n   * @protected\n   */\n  protected cleanup() {\n    if (this.canvasChildren.length === this.children.length) return;\n    // remove any children that are not in the flex children list\n    this.children.forEach((child) => {\n      if (this.config.debug && child === this._debugGraphics) return;\n      if (!(child as PIXIContainer)?.children?.length) {\n        super.removeChild(child);\n      }\n    });\n  }\n\n  private __calculateBounds(_size: Size): Rectangle {\n    return new Rectangle(\n      0,\n      0,\n      _size.width - this.config.padding.left - this.config.padding.right,\n      _size.height - this.config.padding.top - this.config.padding.bottom,\n    );\n  }\n\n  private __calculateOuterBounds(_size: Size): Rectangle {\n    return new Rectangle(0, 0, _size.width, _size.height);\n  }\n\n  private _childRemoved(child: any) {\n    this.settingsMap.delete(child);\n    this._childMap.delete(child as PIXIContainer);\n    this._canvasChildren = Array.from(this._childMap.keys());\n  }\n\n  private _added() {\n    this.layout();\n  }\n\n  private applySettings(child: PIXIContainer, settings: UICanvasChildSettings) {\n    if (!settings) return;\n    const displayWidth = this._displayBounds.width;\n    const displayHeight = this._displayBounds.height;\n\n    const firstChild = (child as PIXIContainer).getChildAt(0);\n\n    const childWidth = UICanvas.isFlexContainer(firstChild)\n      ? (firstChild as unknown as IFlexContainer).containerWidth || child.width\n      : child.width;\n    const childHeight = UICanvas.isFlexContainer(firstChild)\n      ? (firstChild as unknown as IFlexContainer).containerHeight || child.height\n      : child.height;\n\n    switch (settings.align) {\n      case 'top right':\n        child.x = displayWidth - childWidth;\n        child.y = 0;\n        break;\n      case 'top left':\n        child.x = 0;\n        child.y = 0;\n        break;\n      case 'top center':\n      case 'top':\n        child.x = (displayWidth - childWidth) / 2;\n        child.y = 0;\n        break;\n      case 'bottom right':\n        child.x = displayWidth - childWidth;\n        child.y = displayHeight - childHeight;\n        break;\n      case 'bottom left':\n        child.x = 0;\n        child.y = displayHeight - childHeight;\n        break;\n      case 'bottom center':\n      case 'bottom':\n        child.x = (displayWidth - child.width) / 2;\n        child.y = displayHeight - childHeight;\n        break;\n      case 'left top':\n        child.x = 0;\n        child.y = 0;\n        break;\n      case 'left bottom':\n        child.x = 0;\n        child.y = displayHeight - childHeight;\n        break;\n      case 'left center':\n      case 'left':\n        child.x = 0;\n        child.y = (displayHeight - childHeight) / 2;\n        break;\n      case 'right top':\n        child.x = displayWidth - childWidth;\n        child.y = 0;\n        break;\n      case 'right bottom':\n        child.x = displayWidth;\n        child.y = displayHeight;\n        break;\n      case 'right center':\n      case 'right':\n        child.x = displayWidth - childWidth;\n        child.y = (displayHeight - childHeight) / 2;\n        break;\n      case 'center':\n        child.x = (displayWidth - childWidth) / 2;\n        child.y = (displayHeight - childHeight) / 2;\n        break;\n    }\n    child.x +=\n      resolvePadding(settings.padding.left, displayWidth) - resolvePadding(settings.padding.right, displayWidth);\n\n    child.y +=\n      resolvePadding(settings.padding.top, displayHeight) - resolvePadding(settings.padding.bottom, displayHeight);\n  }\n\n  private drawDebug() {\n    if (!this._debugGraphics) {\n      this._disableAddChildError = true;\n      this._debugGraphics = this._inner.add.graphics();\n      this._disableAddChildError = false;\n    }\n    this._debugGraphics\n      .clear()\n      .rect(0, 0, this._displayBounds.width, this._displayBounds.height)\n      .stroke({\n        width: 1,\n        color: 0xff0000,\n        alpha: 0.5,\n        pixelLine: true,\n      })\n      .rect(-this.config.padding.left, -this.config.padding.top, this._outerBounds.width, this._outerBounds.height)\n      .stroke({\n        width: 1,\n        color: 0xff0000,\n        alpha: 0.5,\n        pixelLine: true,\n      })\n      .moveTo(this._displayBounds.width / 2, this._displayBounds.height / 2 - 10)\n      .lineTo(this._displayBounds.width / 2, this._displayBounds.height / 2 + 10)\n      .stroke({\n        width: 1,\n        color: 0xff0000,\n        alpha: 0.5,\n        pixelLine: true,\n      })\n      .moveTo(this._displayBounds.width / 2 - 10, this._displayBounds.height / 2)\n      .lineTo(this._displayBounds.width / 2 + 10, this._displayBounds.height / 2)\n      .stroke({\n        width: 1,\n        color: 0xff0000,\n        alpha: 0.5,\n        pixelLine: true,\n      });\n  }\n}\n", "import {ColorSource, DestroyOptions, Graphics, Sprite, Texture} from 'pixi.js';\n\nimport {Application} from '../Application';\nimport type {IContainer} from '../display/Container';\nimport {Container} from '../display/Container';\nimport type {IFocusable} from '../plugins';\nimport type {Size} from '../utils';\n\n/**\n * Interface for Popup\n */\nexport interface IPopup<T = any> extends IContainer {\n  readonly id: string | number; // Unique identifier for the popup\n  config: PopupConfig<T>; // Configuration for the popup\n  view: Container; // The view of the popup\n  backing?: any; // The backing of the popup\n  isShowing: boolean; // Whether the popup is currently showing\n  firstFocusableEntity?: IFocusable; // The first focusable entity in the popup\n  data: T;\n\n  close(): void;\n\n  initialize(): void; // Initialize the popup\n\n  show(): void | Promise<any>; // Show the popup\n\n  afterShow(): void; // Show the popup\n\n  beforeHide(): void; // Hide the popup\n\n  hide(): void | Promise<any>; // Hide the popup\n\n  start(): void | Promise<any>; // Start the popup\n\n  end(): void; // End the popup\n}\n\nexport type PopupConstructor<T = any> = new (id: string | number, config?: Partial<PopupConfig<T>>) => IPopup<T>;\n\n/**\n * Configuration for the backing of the popup\n */\nexport type BackingConfig = {\n  color: ColorSource;\n  alpha: number;\n};\n\nconst defaultBackingConfig = {\n  color: 0x0,\n  alpha: 0.75,\n};\n\n/**\n * Configuration for the popup\n */\nexport type PopupConfig<T = any> = {\n  id: string | number;\n  closeOnEscape: boolean;\n  closeOnPointerDownOutside: boolean;\n  backing: boolean | Partial<BackingConfig>;\n  data?: T;\n};\n\nconst defaultPopupConfig = { backing: true, closeOnEscape: true, closeOnPointerDownOutside: true };\n\n/**\n * Class representing a Popup\n */\nexport class Popup<T = any> extends Container implements IPopup<T> {\n  public static BACKING_TEXTURE: Texture;\n  public isShowing: boolean = false;\n  public firstFocusableEntity: IFocusable;\n  public view: Container;\n  public backing?: Container;\n  public config: PopupConfig<T>;\n\n  /**\n   * Create a new Popup\n   * @param id - The unique identifier for the popup\n   * @param config - The configuration for the popup\n   */\n  constructor(\n    public readonly id: string | number,\n    config: Partial<PopupConfig> = {},\n  ) {\n    super();\n    this.config = Object.assign({ id, ...defaultPopupConfig }, config);\n\n    this._initialize();\n  }\n\n  get data(): T {\n    return this.config.data as T;\n  }\n\n  /**\n   * Create a backing for the popup\n   * @param config - The configuration for the backing\n   * @param size - The size of the backing\n   * @returns The backing container\n   */\n  private static makeBacking(config: boolean | Partial<BackingConfig>, size: Size): Container {\n    let finalConfig = {};\n    if (typeof config === 'object') {\n      finalConfig = config;\n    }\n    const backingConfig: BackingConfig = Object.assign({ ...defaultBackingConfig }, finalConfig);\n    if (Popup.BACKING_TEXTURE === undefined) {\n      const gfx = new Graphics();\n      gfx.rect(0, 0, 100, 100).fill('white');\n      Popup.BACKING_TEXTURE = Application.getInstance().renderer.generateTexture(gfx);\n    }\n    const backingWrapper = new Container();\n    backingWrapper.sortableChildren = false;\n    const backing = backingWrapper.addChild(new Sprite(Popup.BACKING_TEXTURE));\n    backing.anchor.set(0.5);\n    backing.alpha = backingConfig.alpha;\n    backing.tint = backingConfig.color;\n    backing.setSize(size.width, size.height);\n\n    return backingWrapper;\n  }\n\n  initialize() {}\n\n  public beforeHide() {\n    this.app.focus.removeFocusLayer(this.id);\n  }\n\n  destroy(options?: boolean | DestroyOptions): void {\n    this.app.focus.removeFocusLayer(this.id);\n    super.destroy(options);\n  }\n\n  /**\n   * Hide the popup\n   * @returns A promise that resolves when the popup is hidden\n   */\n  hide(): void | any | Promise<any>;\n\n  async hide(): Promise<void> {\n    this.visible = false;\n    return Promise.resolve();\n  }\n\n  /**\n   * Show the popup\n   * @returns A promise that resolves when the popup is shown\n   */\n  show(): void | Promise<any>;\n\n  async show(): Promise<void> {\n    this.resize();\n    this.visible = true;\n    return Promise.resolve();\n  }\n\n  /**\n   * Start the popup\n   */\n  start(): void | Promise<any>;\n  async start() {}\n\n  afterShow() {\n    if (this.firstFocusableEntity) {\n      this.app.focus.add(this.firstFocusableEntity, this.id, true);\n      this.app.focus.setFocus(this.firstFocusableEntity);\n    }\n  }\n\n  /**\n   * End the popup\n   */\n  end() {}\n\n  close(): void | Promise<void>;\n  async close(): Promise<void> {\n    void this.app.popups.hidePopup(this.id, this.config.data);\n  }\n\n  resize() {\n    this.backing?.setSize(this.app.size.width, this.app.size.height);\n  }\n\n  /**\n   * Initialize the popup\n   * @private\n   */\n  private _initialize() {\n    this.app.focus.addFocusLayer(this.id, false);\n\n    if (this.config.backing) {\n      this.backing = this.add.existing(Popup.makeBacking(this.config.backing, this.app.size));\n      this.backing.eventMode = 'static';\n      if (this.config.closeOnPointerDownOutside) {\n        this.backing.once('click', this.close);\n        this.backing.once('tap', this.close);\n      }\n    }\n\n    this.view = this.add.container();\n    this.view.eventMode = 'static';\n  }\n}\n", "import {\n  CanvasTextMetrics,\n  FederatedEvent,\n  FederatedPointerEvent,\n  Graphics,\n  Container as PIXIContainer,\n  Rectangle,\n  Sprite,\n  Text,\n  Texture,\n} from 'pixi.js';\nimport { Focusable, Interactive, TextProps, WithSignals } from '../mixins';\nimport {\n  ensurePadding,\n  getNearestCharacterIndex,\n  isAndroid,\n  isIos,\n  isMobile,\n  isTouch,\n  Logger,\n  Padding,\n  PointLike,\n} from '../utils';\n\nimport { gsap } from 'gsap';\nimport { Container } from '../display';\nimport { Signal } from '../signals';\n\nexport type BgStyleOptions = {\n  radius: number;\n  fill: { color?: number; alpha?: number };\n  stroke: { width?: number; color?: number; alpha?: number };\n};\n\nexport type ColorOptions = {\n  color: number;\n  alpha: number;\n};\n\nexport type PlaceholderOptions = {\n  text: string;\n};\n\nexport type FocusOverlayOptions = {\n  mobile: boolean;\n  touch: boolean;\n  desktop: boolean;\n  activeFilter?: boolean | (() => boolean) | ('mobile' | 'touch' | 'desktop')[];\n  scale: number;\n  marginTop: number;\n  backing: {\n    active: boolean;\n    options: Partial<ColorOptions>;\n  };\n};\n\nexport interface InputOptions extends Partial<TextProps> {\n  value: string;\n  type: 'text' | 'password' | 'number' | 'email' | 'tel' | 'url';\n  fixed: boolean;\n  pattern: string;\n  debug: boolean;\n  minWidth: number;\n  padding: Padding;\n  maxLength?: number;\n  blurOnEnter: boolean;\n  regex?: RegExp;\n  bg: Partial<BgStyleOptions>;\n  placeholder: Partial<PlaceholderOptions & ColorOptions>;\n  selection: Partial<ColorOptions>;\n  caret: Partial<ColorOptions>;\n  error?: {\n    input?: {\n      fill?: number;\n    };\n    bg?: Partial<Omit<BgStyleOptions, 'stroke'>>;\n  };\n  focusOverlay: Partial<FocusOverlayOptions>;\n}\n\nexport interface InputProps extends Omit<InputOptions, 'padding'> {\n  padding: PointLike | Padding | number[] | number;\n}\n\nexport type InputDetail = {\n  value: string;\n  input: Input;\n  domElement: HTMLInputElement;\n};\n\nconst defaultOptions: InputOptions = {\n  value: '',\n  type: 'text',\n  fixed: true,\n  pattern: '',\n  debug: false,\n  minWidth: 200,\n  padding: { top: 0, left: 0, bottom: 0, right: 0 },\n  blurOnEnter: true,\n  style: {\n    fontFamily: 'Arial',\n    fill: '#000000',\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  bg: {\n    radius: 5,\n    fill: { color: 0xffffff },\n    stroke: { width: 1, color: 0x0 },\n  },\n  placeholder: {},\n  selection: { color: 0x00ff00 },\n  caret: {\n    color: 0x0,\n    alpha: 0.8,\n  },\n  focusOverlay: {\n    activeFilter: false,\n    scale: 1,\n    marginTop: 60,\n  },\n};\n\nconst AVAILABLE_TYPES = ['text', 'password', 'number', 'email', 'tel', 'url'];\n\nexport class Input extends Focusable(Interactive(WithSignals(Container))) {\n  // signals\n  public onEnter: Signal<(detail: InputDetail) => void> = new Signal<(detail: InputDetail) => void>();\n  public onChange: Signal<(detail: InputDetail) => void> = new Signal<(detail: InputDetail) => void>();\n  public onError: Signal<(detail: InputDetail) => void> = new Signal<(detail: InputDetail) => void>();\n  // public\n  public options: InputOptions;\n  public bg: Graphics;\n  public caret: PIXIContainer;\n  public input: Text;\n  public placeholder: Text;\n  public error: boolean;\n  // protected\n  protected cursorAnimation: gsap.core.Tween;\n  protected domElement: HTMLInputElement;\n  protected selectionGraphics: Graphics;\n  protected cloneOverlay: Input;\n  protected overlayBacking: Sprite;\n  // private\n  private _focusTimer: any;\n  private _pointerDownTimer: any;\n  private _inner: Container;\n  private _inputContainer: Container;\n  private _mask: Graphics;\n  private _lastWidth: number = 0;\n  private _lastHeight: number = 0;\n\n  constructor(\n    options: Partial<InputProps>,\n    public isClone: boolean = false,\n    public clone: Input | null = null,\n  ) {\n    super({ autoUpdate: true, autoResize: !isClone });\n\n    this.options = {\n      ...defaultOptions,\n      ...options,\n      style: {\n        ...defaultOptions.style,\n        ...(options?.style ?? {}),\n      },\n      padding: ensurePadding(options.padding ?? defaultOptions.padding),\n      bg: {\n        ...defaultOptions.bg,\n        ...(options.bg ?? {}),\n      },\n      focusOverlay: {\n        ...defaultOptions.focusOverlay,\n        ...(options.focusOverlay ?? {}),\n      },\n    };\n\n    if (!this.options.placeholder) {\n      this.options.placeholder = {\n        color: Number(this.options.style?.fill) ?? 0x666666,\n      };\n    }\n\n    this._inner = this.add.container();\n    this.addBg();\n\n    this._inputContainer = this._inner.add.container({ y: -2 });\n    this.addSelection();\n    this.addCaret();\n    this.addInput();\n    this.addPlaceholder();\n\n    this.placeholder.text = this.options.placeholder.text || `Enter ${this.options.type}`;\n\n    this.input.eventMode = this.placeholder.eventMode = 'none';\n\n    if (isTouch) {\n      this.addSignalConnection(this.onInteraction('pointertap').connect(this.handleClick, -1));\n    }\n    this.addSignalConnection(this.onInteraction('click').connect(this.handleClick, -1));\n\n    if (this.options.fixed) {\n      const scale = this.isClone ? this.clone?.options?.focusOverlay?.scale ?? 1 : 1;\n      // this._mask = this._inner.add.sprite({\n      //   asset: Texture.WHITE,\n      //   width: this.bg.width * scale - this.options.padding.left - this.options.padding.right,\n      //   height: this.bg.height * scale - this.options.padding.top - this.options.padding.bottom,\n      //   tint: 0x0,\n      //   alpha: 1,\n      // });\n      this._mask = this._inner.add\n        .graphics()\n        .rect(\n          0,\n          0,\n          this.bg.width * scale - this.options.padding.left - this.options.padding.right,\n          this.bg.height * scale - this.options.padding.top - this.options.padding.bottom,\n        )\n        .fill({ color: 0x0 });\n      this._inputContainer.mask = this._mask;\n    }\n  }\n\n  private _caretPosition: number = -1;\n\n  get caretPosition() {\n    return this._caretPosition;\n  }\n\n  private _selectionRect: Rectangle | null;\n\n  get selectionRect() {\n    return this._selectionRect;\n  }\n\n  private _regex: RegExp;\n\n  set regex(value: RegExp) {\n    this._regex = value;\n  }\n\n  get isValid(): boolean {\n    let result = false;\n    if (this.domElement) {\n      if (this._regex) {\n        result = this._regex.test(this._value);\n      } else {\n        if (this.options.type === 'text') {\n          return true;\n        }\n        this.domElement.required = true;\n        result = this.domElement.checkValidity();\n        this.domElement.required = false;\n      }\n    }\n    return result;\n  }\n\n  private _value: string = '';\n\n  public get value() {\n    return this._value?.trim() ?? '';\n  }\n\n  public set value(value: string) {\n    if (this.domElement) {\n      this.domElement.value = value;\n      const event = new Event('input', {\n        bubbles: true,\n        cancelable: true,\n      });\n      this.domElement.dispatchEvent(event);\n    } else {\n      this._value = value;\n      this.input.text = value;\n    }\n  }\n\n  resize() {\n    super.resize();\n    if (this.cloneOverlay) {\n      this._positionCloneOverlay();\n    }\n  }\n\n  resetBg() {\n    this.drawBg();\n  }\n\n  added() {\n    super.added();\n    if (this.isClone) {\n      this.showCursor();\n    }\n  }\n\n  handleClick(e?: FederatedEvent) {\n    // check if this was a triggered event from the FocusMnagerPlugin\n    if ((e?.originalEvent as unknown as KeyboardEvent)?.key) {\n      return;\n    }\n    clearTimeout(this._focusTimer);\n    clearTimeout(this._pointerDownTimer);\n    const nearestCharacterIndex = e ? getNearestCharacterIndex(this.input, e) : this.input.text?.length ?? 0;\n    this.createDomElement(nearestCharacterIndex);\n    // this._focusDomElement(nearestCharacterIndex);\n  }\n\n  focusIn() {\n    this.handleClick();\n  }\n\n  _focusDomElement(selection?: number) {\n    if (isIos) {\n      this._triggerFocusAndSelection(selection);\n    } else {\n      this._focusTimer = setTimeout(() => {\n        this._triggerFocusAndSelection(selection);\n      }, 100);\n    }\n  }\n\n  _triggerFocusAndSelection(selection?: number) {\n    if (this.domElement) {\n      try{\n        this.domElement.focus();\n        this.domElement.click();\n        if (selection === undefined) {\n          this.domElement.selectionStart = this.domElement?.value?.length;\n        } else {\n          this.domElement.setSelectionRange(selection, selection, 'none');\n        }\n      }catch(e){\n        // nothing\n      }\n      this._updateCaretAndSelection();\n    }\n  }\n\n  _checkPointerDownOutside(e: FederatedPointerEvent) {\n    const pos = this.toLocal(e.data.global);\n    if (this.getBounds().rectangle.contains(pos.x, pos.y)) {\n      this.focusIn();\n    } else {\n      this.focusOut();\n    }\n  }\n\n  focusOut() {\n    this.domElement?.blur();\n  }\n\n  update() {\n    this.bg.x = 0;\n    this.bg.y = 0;\n\n    // size background\n    const bgHeight =\n      this.input.getLocalBounds().y +\n      this.input.style.fontSize +\n      this.options.padding.top +\n      this.options.padding.bottom;\n\n    const bgWidth = this.options.fixed\n      ? this.options.minWidth\n      : Math.max(this.options.minWidth, this.input.width) + this.options.padding.left + this.options.padding.right;\n\n    // position inputs\n    // the 'align' property doesn't affect single line text,\n    // so we need to do this manually\n    const diff = this.options.minWidth - bgWidth + this.options.padding.left + this.options.padding.right;\n    const inputAvailableWidth = bgWidth - this.options.padding.left - this.options.padding.right;\n\n    switch (this.input.style.align) {\n      case 'center':\n        this.input.x = bgWidth / 2 - this.input.width / 2;\n        this.placeholder.x = bgWidth / 2 - this.placeholder.width / 2;\n        this._inner.x = diff >= 0 ? 0 : diff / 2;\n        if (this.options.fixed) {\n          const inputDiff = this.input.width - inputAvailableWidth;\n          if (inputDiff > 0) {\n            this.input.x -= inputDiff / 2;\n          }\n        }\n        break;\n      case 'right':\n        this.input.x = bgWidth - this.options.padding.right - this.input.width;\n        this.placeholder.x = bgWidth - this.options.padding.right - this.placeholder.width;\n        this._inner.x = diff >= 0 ? 0 : diff;\n        break;\n      default:\n        this.input.x = this.options.padding.left;\n        this.placeholder.x = this.options.padding.left;\n        this._inner.x = 0;\n        if (this.options.fixed) {\n          const inputDiff = this.input.width - inputAvailableWidth;\n          if (inputDiff > 0) {\n            this.input.x -= inputDiff;\n          }\n        }\n        break;\n    }\n\n    this.input.y = this.options.padding.top;\n    this.placeholder.y = this.input.y;\n\n    if (this.isClone && this.clone) {\n      const cloneScale = this.clone.options?.focusOverlay?.scale ?? 1;\n      this.error = this.clone.error;\n      this._value = this.clone.input.text;\n      this.input.text = this._value;\n      this._selectionRect = this.clone.selectionRect!.clone();\n      this._selectionRect.x *= cloneScale;\n      this._selectionRect.y *= cloneScale;\n      this._selectionRect.width *= cloneScale;\n      this._selectionRect.height *= cloneScale;\n      this._caretPosition = this.clone.caretPosition * cloneScale;\n    }\n    // position caret\n    this.caret.x = this._caretPosition >= 0 ? this.input.x + this._caretPosition : this.input.x + this.input.width + 1;\n    this.caret.y = this.input.y - 2;\n    this.caret.height = this.input.style.fontSize * 1.15;\n\n    // check if value is empty\n    if (this.value === '') {\n      this.placeholder.visible = true;\n    } else {\n      this.placeholder.visible = false;\n    }\n\n    if (this.options.fixed) {\n      const scale = this.isClone ? this.options?.focusOverlay?.scale ?? 1 : 1;\n      if (this._mask) {\n        this._mask\n          .clear()\n          .rect(0, 0, (bgWidth - this.options.padding.left - this.options.padding.right) * scale, bgHeight * scale)\n          .fill({ color: 0x0 });\n        this._mask.position.set(this.options.padding.left * scale, 0);\n      }\n    }\n\n    if (bgWidth !== this._lastWidth) {\n      this.drawBg(bgWidth, bgHeight);\n    }\n\n    if (this._selectionRect) {\n      this.drawSelection();\n    } else {\n      this.selectionGraphics?.clear();\n    }\n\n    if (this.cloneOverlay) {\n      this._positionCloneOverlay();\n    }\n  }\n\n  drawSelection() {\n    const rect = this._selectionRect;\n    if (!rect) {\n      this.selectionGraphics?.clear();\n      return;\n    }\n    this.selectionGraphics?.clear();\n    this.selectionGraphics\n      .rect(rect.left + this.input.x, this.caret.y, rect.width, this.caret.height)\n      .fill({ color: this.options.selection.color });\n  }\n\n  drawBg(width: number = this._lastWidth, height: number = this._lastHeight) {\n    const opts =\n      (this.error || (this.isClone && this.clone?.error)) && this.options?.error?.bg\n        ? { ...this.options.bg, ...this.options.error.bg }\n        : this.options.bg;\n\n    this.bg\n      .clear()\n      .roundRect(0, 0, width, height, opts?.radius ?? 0)\n      .fill(opts.fill)\n      .stroke({ ...(opts?.stroke || {}), alignment: 0 });\n\n    this._lastWidth = width;\n    this._lastHeight = height;\n  }\n\n  destroy() {\n    clearTimeout(this._focusTimer);\n    clearTimeout(this._pointerDownTimer);\n    this.app.stage.off('pointerdown', this._checkPointerDownOutside);\n    this.hideCursor();\n    this.destroyDomElement();\n    super.destroy();\n  }\n\n  protected addBg() {\n    this.bg = this._inner.add\n      .graphics()\n      .roundRect(0, 0, 100, 50, this.options?.bg?.radius ?? 0)\n      .fill(this.options.bg.fill);\n  }\n\n  protected addSelection() {\n    this.selectionGraphics = this._inputContainer.add.graphics();\n  }\n\n  protected addCaret() {\n    this.caret = this._inputContainer.add.sprite({\n      asset: Texture.WHITE,\n      width: 3,\n      height: 10,\n      tint: this.options.caret.color ?? 0x0,\n      alpha: 0,\n      visible: false,\n    });\n  }\n\n  protected addInput() {\n    this.input = this._inputContainer.add.text({\n      ...this.options,\n      style: { ...(this.options?.style || {}), padding: 2 },\n      text: this.options.value ?? '',\n      label: 'input',\n      resolution: 2,\n      roundPixels: true,\n    });\n  }\n\n  protected addPlaceholder() {\n    this.placeholder = this._inputContainer.add.text({\n      ...this.options,\n      ...this.options.placeholder,\n      style: {\n        ...this.options.style,\n        fill: this.options.placeholder?.color ?? 0x666666,\n      },\n      resolution: 2,\n      label: 'placeholder',\n      roundPixels: true,\n    });\n\n    this.placeholder.style.align = this.input.style.align;\n  }\n\n  protected createDomElement(selection?: number) {\n    if (this.isClone && this.clone?.domElement) {\n      this.domElement = this.clone.domElement;\n      this._addDomElementListeners();\n      return;\n    }\n    clearTimeout(this._focusTimer);\n    clearTimeout(this._pointerDownTimer);\n\n    this.domElement = document.createElement('input');\n    this.domElement.type = 'text';\n    if (this.options.type && AVAILABLE_TYPES.includes(this.options.type)) {\n      this.domElement.type = this.options.type;\n    }\n\n    if (this.options.pattern) {\n      this.domElement.pattern = this.options.pattern;\n    }\n    if (this.options.regex) {\n      this._regex = this.options.regex;\n    }\n\n    const pos = this.getGlobalPosition();\n    const bounds = this.getBounds();\n    bounds.x = pos.x;\n    bounds.y = pos.y;\n    bounds.width = this.width - this.options.padding.left;\n\n    /**\n     * Overlays an HTMLInputElement\n     * allows the keyboard to be used on mobile devices\n     * mostly taken from @pixi/ui\n     * @see https://github.com/pixijs/ui/blob/main/src/Input.ts\n     */\n\n    this.domElement.style.position = 'fixed';\n    this.domElement.style.border = 'none';\n    this.domElement.style.outline = 'none';\n    this.domElement.style.left = isAndroid ? `0` : `${bounds.left}px`;\n    this.domElement.style.top = isAndroid ? `0` : `${bounds.top}px`;\n    this.domElement.style.width = `${bounds.width}px`;\n    this.domElement.style.height = `${bounds.height}px`;\n    this.domElement.style.padding = '0';\n\n    if (this.options.debug) {\n      this.domElement.style.opacity = '0.8';\n    } else {\n      this.domElement.style.opacity = '0.0000001';\n    }\n    this.app.canvas.parentElement?.appendChild(this.domElement);\n    this.domElement.value = this.value;\n    this.domElement.setAttribute('placeholder', this.options?.placeholder?.text ?? '');\n    if (this.options?.maxLength) {\n      this.domElement.setAttribute('maxLength', this.options.maxLength.toString());\n    }\n\n    this._addDomElementListeners();\n    this._focusDomElement(selection);\n  }\n\n  protected destroyDomElement() {\n    if (this.isClone) {\n      return;\n    }\n    if (this.domElement) {\n      this._removeDomElementListeners();\n      this.domElement.remove();\n      // @ts-expect-error domelement can't be null\n      this.domElement = null;\n    }\n  }\n\n  protected showCursor() {\n    this.caret.visible = true;\n    this.blinkCaret();\n  }\n\n  protected hideCursor() {\n    this.cursorAnimation?.kill();\n    this.caret.visible = false;\n  }\n\n  protected blinkCaret() {\n    if (this.cursorAnimation) {\n      this.cursorAnimation.kill();\n    }\n    this.cursorAnimation = gsap.fromTo(\n      this.caret,\n      { alpha: 0 },\n      {\n        duration: 0.5,\n        alpha: 1,\n        yoyo: true,\n        repeat: -1,\n        overwrite: true,\n      },\n    );\n  }\n\n  protected validate() {\n    const hasError = this.error;\n    if (this.isClone) {\n      this.error = this.clone?.error || false;\n    } else {\n      this.error = !this.isValid;\n      if (this.error && this.error !== hasError) {\n        this.onError.emit({ input: this, domElement: this.domElement, value: this._value });\n      }\n    }\n    if (this.error !== hasError) {\n      if (this.error && this.options?.error?.input?.fill) {\n        this.input.style.fill = this.options?.error?.input?.fill;\n      } else {\n        this.input.style.fill = this.options.input?.style?.fill || 0x0;\n      }\n      this.drawBg();\n    }\n\n    if (this.cloneOverlay) {\n      this.cloneOverlay.validate();\n    }\n  }\n\n  private _removeDomElementListeners() {\n    this.domElement.removeEventListener('focus', this._handleDomElementFocus, false);\n    this.domElement.removeEventListener('blur', this._handleDomElementBlur, false);\n    this.domElement.removeEventListener('input', this._handleDomElementChange, false);\n    this.domElement.removeEventListener('keyup', this._handleDomElementKeyup, false);\n    this.domElement.removeEventListener('keydown', this._handleDomElementKeydown, false);\n  }\n\n  private _addDomElementListeners() {\n    if (this.isClone) {\n      return;\n    }\n    this._removeDomElementListeners();\n    this.domElement.addEventListener('focus', this._handleDomElementFocus, false);\n    this.domElement.addEventListener('blur', this._handleDomElementBlur, false);\n    this.domElement.addEventListener('input', this._handleDomElementChange, false);\n    this.domElement.addEventListener('keyup', this._handleDomElementKeyup, false);\n    this.domElement.addEventListener('keydown', this._handleDomElementKeydown, false);\n  }\n\n  private _handleFocus() {\n    this._caretPosition = -1;\n    this.showCursor();\n\n    clearTimeout(this._pointerDownTimer);\n\n    if (!this.isClone) {\n      this._pointerDownTimer = setTimeout(() => {\n        this.app.stage.on('pointerdown', this._checkPointerDownOutside);\n      }, 250);\n\n      const hasOverlay = Boolean(this.options.focusOverlay.activeFilter);\n      if (hasOverlay) {\n        // decide if we should show an overlay\n        if (this.cloneOverlay) {\n          this._removeCloneOverlay();\n        }\n        const isList = Array.isArray(this.options.focusOverlay.activeFilter);\n        let shouldShow = false;\n        if (isList) {\n          const filterList = this.options.focusOverlay.activeFilter as ('mobile' | 'touch' | 'desktop')[];\n          if (\n            (isMobile && filterList.includes('mobile')) ||\n            (isTouch && filterList.includes('touch')) ||\n            (!isMobile && !isTouch && filterList.includes('desktop'))\n          ) {\n            shouldShow = true;\n          }\n        } else if (typeof this.options.focusOverlay.activeFilter === 'function') {\n          shouldShow = this.options.focusOverlay.activeFilter();\n        } else {\n          shouldShow = hasOverlay;\n        }\n\n        if (shouldShow) {\n          const opts = structuredClone(this.options);\n          const scale = this.options.focusOverlay?.scale || 1;\n          opts.focusOverlay = { activeFilter: false };\n          const fontSize = Number(opts.style?.fontSize || defaultOptions.style?.fontSize || 20) * scale;\n          if (!opts.style) {\n            opts.style = {};\n          }\n\n          opts.style.fontSize = fontSize;\n          if (opts.padding) {\n            opts.padding.left *= scale;\n            opts.padding.top *= scale;\n            opts.padding.right *= scale;\n            opts.padding.bottom *= scale;\n          }\n          if (opts.bg?.radius) {\n            opts.bg.radius *= scale;\n          }\n          if (opts.bg?.stroke?.width) {\n            opts.bg.stroke.width *= scale;\n          }\n          if (opts.minWidth) {\n            opts.minWidth *= scale;\n            if (opts.minWidth > this.app.size.width) {\n              opts.minWidth = this.app.size.width - (opts.bg?.stroke?.width ? opts.bg.stroke.width * 2 + 20 : 20);\n            }\n          }\n\n          // should we show backing?\n          if (this.options.focusOverlay?.backing?.active) {\n            const backing = this.make.sprite({\n              asset: Texture.WHITE,\n              tint: this.options.focusOverlay.backing.options?.color ?? 0x0,\n              alpha: this.options.focusOverlay.backing.options?.alpha ?? 0.8,\n              width: this.app.size.width,\n              height: this.app.size.height,\n              eventMode: 'static',\n            });\n            this.overlayBacking = this.app.stage.addChild(backing);\n          }\n\n          this.cloneOverlay = new Input(opts, true, this);\n          this.cloneOverlay.label = `${this.label} -- clone`;\n          this.cloneOverlay.alpha = 0;\n          this.cloneOverlay.input.text = this.value;\n          this.cloneOverlay.validate();\n          this.app.stage.addChild(this.cloneOverlay);\n          this._positionCloneOverlay();\n          this._showCloneOverlay();\n        }\n      }\n    }\n  }\n\n  private _showCloneOverlay() {\n    this.cloneOverlay.pivot.y = -20;\n    gsap.to(this.cloneOverlay, { duration: 0.5, alpha: 0.8, ease: 'sine.out', delay: 0.1 });\n    gsap.to(this.cloneOverlay.pivot, { duration: 0.5, y: 0, ease: 'sine.out', delay: 0.1 });\n  }\n\n  private _positionCloneOverlay() {\n    if (!this.cloneOverlay) {\n      return;\n    }\n    const w = this.cloneOverlay.options.minWidth;\n    this.cloneOverlay.x = this.app.size.width * 0.5 - w * 0.5;\n    this.cloneOverlay.y = this.options.focusOverlay?.marginTop || 20;\n    if (this.overlayBacking) {\n      this.overlayBacking.width = this.app.size.width;\n      this.overlayBacking.height = this.app.size.height;\n    }\n  }\n\n  private _removeCloneOverlay() {\n    this.overlayBacking?.destroy();\n    this.overlayBacking?.parent?.removeChild(this.overlayBacking);\n    // @ts-expect-error cloneOverlay can't be null\n    this.overlayBacking = null;\n    this.cloneOverlay?.destroy();\n    this.cloneOverlay?.parent?.removeChild(this.cloneOverlay);\n    // @ts-expect-error cloneOverlay can't be null\n    this.cloneOverlay = null;\n  }\n\n  private _handleDomElementFocus() {\n    this.app.stage.off('pointerdown', this._checkPointerDownOutside);\n    this._handleFocus();\n  }\n\n  private _handleDomElementBlur() {\n    if (this.isClone) {\n      return;\n    }\n    clearTimeout(this._focusTimer);\n    clearTimeout(this._pointerDownTimer);\n    this.hideCursor();\n    this._removeCloneOverlay();\n    this.destroyDomElement();\n  }\n\n  private _handleDomElementKeyup() {\n    this._updateCaretAndSelection();\n  }\n\n  private _handleDomElementKeydown(e: KeyboardEvent) {\n    this._updateCaretAndSelection();\n    if (!this.isClone && e.key === 'Enter') {\n      if (this.options.blurOnEnter) {\n        this.domElement.blur();\n      }\n      this.onEnter.emit({ input: this, value: this._value, domElement: this.domElement });\n    }\n  }\n\n  private _updateCaretAndSelection() {\n    if (!this.domElement) {\n      Logger.warn(this.label, 'No dom element');\n      return;\n    }\n    const start = this.domElement.selectionStart || 0;\n    const end = this.domElement.selectionEnd || -1;\n    const direction = this.domElement.selectionDirection;\n    let text = '';\n    const value = this.options.type === 'password' ? this.input.text : this._value;\n    if (end === undefined) {\n      text = value.substring(0, start);\n      const metrics = CanvasTextMetrics.measureText(text, this.input.style);\n      this._caretPosition = metrics.width;\n      this._selectionRect = null;\n    } else {\n      text = value.substring(start > end ? end : start, start > end ? start : end);\n      const toStart = value.substring(0, start > end ? end : start);\n      const leftMetrics = CanvasTextMetrics.measureText(toStart, this.input.style);\n      const textMetrics = CanvasTextMetrics.measureText(text, this.input.style);\n      this._selectionRect = new Rectangle(leftMetrics.width, 0, textMetrics.width, this.input.height);\n      this._caretPosition =\n        direction === 'backward' ? this._selectionRect.left : this._selectionRect.left + this._selectionRect.width;\n    }\n  }\n\n  private _handleDomElementChange(e: Event) {\n    const target = e.target as HTMLInputElement;\n    if (target && !this.domElement) {\n      this.domElement = target;\n    }\n    if (this.options.pattern !== '') {\n      const filteredValue = target.value.replace(new RegExp(this.options.pattern, 'g'), '');\n      target.value = filteredValue;\n      this._value = filteredValue;\n    } else {\n      this._value = target.value;\n    }\n\n    this.input.text =\n      this.options.type === 'password'\n        ? this._value\n            ?.split('')\n            .map(() => '*')\n            .join('')\n        : this._value;\n\n    this._updateCaretAndSelection();\n\n    if (!this.isClone) {\n      this.onChange.emit({ input: this, domElement: this.domElement, value: this._value });\n      this.validate();\n    }\n  }\n}\n", "import { DestroyOptions, FederatedPointerEvent, Graphics, Point, Sprite } from 'pixi.js';\nimport { Container } from '../display';\nimport { JoystickDirection } from '../plugins';\nimport { Signal } from '../signals';\n\nexport interface IJoystick {\n  onChange: Signal<(detail: JoystickSignalDetail) => void>;\n  onStart: Signal<() => void>;\n  onEnd: Signal<() => void>;\n  onDestroy: Signal<() => void>;\n  settings: JoystickSettings;\n  outerRadius: number;\n  innerRadius: number;\n  outer: Sprite | Graphics;\n  inner: Sprite | Graphics;\n  dragging: boolean;\n  pointData: Point;\n  power: number;\n  startPosition: Point;\n  direction: JoystickDirection;\n}\n\nexport interface JoystickSignalDetail {\n  angle: number;\n  direction: JoystickDirection;\n  power: number;\n}\n\nexport interface JoystickSettings {\n  outer?: Sprite | Graphics;\n  inner?: Sprite | Graphics;\n  outerScale?: number;\n  innerScale?: number;\n  threshold?: number;\n}\n\nexport class Joystick extends Container implements IJoystick {\n  onChange = new Signal<(detail: JoystickSignalDetail) => void>();\n  onStart = new Signal<() => void>();\n  onEnd = new Signal<() => void>();\n  onDestroy = new Signal<() => void>();\n  settings: JoystickSettings;\n  outerRadius: number = 0;\n  innerRadius: number = 0;\n\n  outer!: Sprite | Graphics;\n  inner!: Sprite | Graphics;\n\n  innerAlphaStandby = 0.5;\n\n  dragging: boolean = false;\n  pointData: Point = new Point();\n  power: number;\n  startPosition: Point;\n  direction: JoystickDirection = JoystickDirection.None;\n  threshold: number;\n\n  private _pointerId?: number;\n\n  constructor(opts: Partial<JoystickSettings>) {\n    super();\n\n    this.settings = Object.assign(\n      {\n        outerScale: 1,\n        innerScale: 1,\n      },\n      opts,\n    );\n\n    if (!this.settings.outer) {\n      const outer = new Graphics();\n      outer.circle(0, 0, 60).fill({ color: 0x0 });\n      outer.alpha = 0.5;\n      this.settings.outer = outer;\n    }\n\n    if (!this.settings.inner) {\n      const inner = new Graphics();\n      inner.circle(0, 0, 35).fill({ color: 0x0 });\n      inner.alpha = this.innerAlphaStandby;\n      this.settings.inner = inner;\n    }\n\n    this.threshold = this.settings.threshold ?? 0.01;\n\n    this.initialize();\n  }\n\n  initialize() {\n    this.outer = this.settings.outer!;\n    this.inner = this.settings.inner!;\n\n    this.outer.scale.set(this.settings.outerScale, this.settings.outerScale);\n    this.inner.scale.set(this.settings.innerScale, this.settings.innerScale);\n\n    if ('anchor' in this.outer) {\n      this.outer.anchor.set(0.5);\n    }\n    if ('anchor' in this.inner) {\n      this.inner.anchor.set(0.5);\n    }\n\n    this.add.existing(this.outer);\n    this.add.existing(this.inner);\n\n    // this.outerRadius = this.containerJoystick.width / 2;\n    this.outerRadius = this.width / 2.5;\n    this.innerRadius = this.inner.width / 2;\n\n    this.bindEvents();\n  }\n\n  handleDragMove(e: FederatedPointerEvent) {\n    if (!this.dragging || e.pointerId !== this._pointerId) {\n      return;\n    }\n    const newPosition = this.toLocal(e.global);\n    const sideX = newPosition.x - this.startPosition.x;\n    const sideY = newPosition.y - this.startPosition.y;\n\n    const centerPoint = new Point(0, 0);\n    let angle = 0;\n    let direction = JoystickDirection.None;\n    if (sideX == 0 && sideY == 0) {\n      this.direction = direction;\n      return;\n    }\n\n    if (sideX === 0) {\n      if (sideY > 0) {\n        centerPoint.set(0, sideY > this.outerRadius ? this.outerRadius : sideY);\n        angle = 270;\n        direction = JoystickDirection.Bottom;\n      } else {\n        centerPoint.set(0, -(Math.abs(sideY) > this.outerRadius ? this.outerRadius : Math.abs(sideY)));\n        angle = 90;\n        direction = JoystickDirection.Top;\n      }\n      this.inner.position.set(centerPoint.x, centerPoint.y);\n      this.power = this.getPower(centerPoint);\n      if (this.power >= this.threshold) {\n        this.direction = direction;\n        this.onChange.emit({ angle, direction, power: this.power });\n        return;\n      }\n    }\n\n    if (sideY === 0) {\n      if (sideX > 0) {\n        centerPoint.set(Math.abs(sideX) > this.outerRadius ? this.outerRadius : Math.abs(sideX), 0);\n        angle = 0;\n        direction = JoystickDirection.Right;\n      } else {\n        centerPoint.set(-(Math.abs(sideX) > this.outerRadius ? this.outerRadius : Math.abs(sideX)), 0);\n        angle = 180;\n        direction = JoystickDirection.Left;\n      }\n\n      this.inner.position.set(centerPoint.x, centerPoint.y);\n      this.power = this.getPower(centerPoint);\n      if (this.power >= this.threshold) {\n        this.direction = direction;\n        this.onChange.emit({ angle, direction, power: this.power });\n        return;\n      }\n    }\n\n    const tanVal = Math.abs(sideY / sideX);\n    const radian = Math.atan(tanVal);\n    angle = (radian * 180) / Math.PI;\n\n    let centerX = 0;\n    let centerY = 0;\n\n    if (sideX * sideX + sideY * sideY >= this.outerRadius * this.outerRadius) {\n      centerX = this.outerRadius * Math.cos(radian);\n      centerY = this.outerRadius * Math.sin(radian);\n    } else {\n      centerX = Math.abs(sideX) > this.outerRadius ? this.outerRadius : Math.abs(sideX);\n      centerY = Math.abs(sideY) > this.outerRadius ? this.outerRadius : Math.abs(sideY);\n    }\n\n    if (sideY < 0) {\n      centerY = -Math.abs(centerY);\n    }\n\n    if (sideX < 0) {\n      centerX = -Math.abs(centerX);\n    }\n\n    if (sideX > 0 && sideY < 0) {\n      // < 90\n    } else if (sideX < 0 && sideY < 0) {\n      // 90 ~ 180\n      angle = 180 - angle;\n    } else if (sideX < 0 && sideY > 0) {\n      // 180 ~ 270\n      angle = angle + 180;\n    } else if (sideX > 0 && sideY > 0) {\n      // 270 ~ 369\n      angle = 360 - angle;\n    }\n    centerPoint.set(centerX, centerY);\n    this.power = this.getPower(centerPoint);\n    if (this.power >= this.threshold) {\n      direction = this.getDirection(centerPoint);\n      this.direction = direction;\n      this.inner.position.set(centerPoint.x, centerPoint.y);\n      this.onChange.emit({ angle, direction, power: this.power });\n    }\n  }\n\n  destroy(options?: DestroyOptions) {\n    this.off('pointerdown', this.handleDragStart)\n      .off('pointerup', this.handleDragEnd)\n      .off('pointerupoutside', this.handleDragEnd)\n      .off('pointermove', this.handleDragMove);\n    window.removeEventListener('pointerup', this.handleDragEnd);\n    this.onDestroy.emit();\n    super.destroy(options);\n  }\n\n  protected handleDragStart(e: FederatedPointerEvent) {\n    if (this._pointerId !== undefined) {\n      return;\n    }\n    this._pointerId = e.pointerId;\n    this.startPosition = this.toLocal(e.global);\n    this.dragging = true;\n    this.inner.alpha = 1;\n    this.onStart.emit();\n  }\n\n  protected handleDragEnd(e: FederatedPointerEvent | PointerEvent) {\n    if (this._pointerId !== e.pointerId) {\n      return;\n    }\n    this.direction = JoystickDirection.None;\n    this.inner.position.set(0, 0);\n    this.dragging = false;\n    this.inner.alpha = this.innerAlphaStandby;\n    this.onEnd.emit();\n    this._pointerId = undefined;\n  }\n\n  protected bindEvents() {\n    this.eventMode = 'static';\n    this.on('pointerdown', this.handleDragStart)\n      .on('pointerup', this.handleDragEnd)\n      .on('pointerupoutside', this.handleDragEnd)\n      .on('pointermove', this.handleDragMove);\n\n    window.addEventListener('pointerup', this.handleDragEnd);\n  }\n\n  protected getPower(centerPoint: Point) {\n    const a = centerPoint.x;\n    const b = centerPoint.y;\n    return Math.min(1, Math.sqrt(a * a + b * b) / this.outerRadius);\n  }\n\n  protected getDirection(center: Point) {\n    const rad = Math.atan2(center.y, center.x); // [-PI, PI]\n    if ((rad >= -Math.PI / 8 && rad < 0) || (rad >= 0 && rad < Math.PI / 8)) {\n      return JoystickDirection.Right;\n    } else if (rad >= Math.PI / 8 && rad < (3 * Math.PI) / 8) {\n      return JoystickDirection.BottomRight;\n    } else if (rad >= (3 * Math.PI) / 8 && rad < (5 * Math.PI) / 8) {\n      return JoystickDirection.Bottom;\n    } else if (rad >= (5 * Math.PI) / 8 && rad < (7 * Math.PI) / 8) {\n      return JoystickDirection.BottomLeft;\n    } else if ((rad >= (7 * Math.PI) / 8 && rad < Math.PI) || (rad >= -Math.PI && rad < (-7 * Math.PI) / 8)) {\n      return JoystickDirection.Left;\n    } else if (rad >= (-7 * Math.PI) / 8 && rad < (-5 * Math.PI) / 8) {\n      return JoystickDirection.TopLeft;\n    } else if (rad >= (-5 * Math.PI) / 8 && rad < (-3 * Math.PI) / 8) {\n      return JoystickDirection.Top;\n    } else {\n      return JoystickDirection.TopRight;\n    }\n  }\n}\n", "import { GraphicsContext, TextStyleOptions } from 'pixi.js';\nimport { ContainerConfig } from '../../display';\nimport { ParticleContainerConfig } from '../../display/ParticleContainer';\nimport { ButtonConfig, FlexContainerConfig, UICanvasProps } from '../../ui';\nimport type { PointLike, SpriteSheetLike, TextureLike, WithRequiredProps } from '../../utils';\n\nexport interface AbstractProps {\n  [key: string]: any;\n}\n\nexport interface TextureProps {\n  asset: TextureLike;\n  sheet: SpriteSheetLike;\n}\n\nexport interface PositionProps {\n  x: number;\n  y: number;\n  position: PointLike;\n}\n\nexport interface ScaleProps {\n  scaleX: number;\n  scaleY: number;\n  scale: PointLike;\n}\n\nexport interface PivotProps {\n  pivot: PointLike;\n}\n\nexport interface VisibilityProps {\n  alpha: number;\n  visible: boolean;\n}\n\nexport interface ExistingProps extends AbstractProps, PositionProps, ScaleProps, VisibilityProps {}\n\nexport interface GraphicsProps extends AbstractProps, PositionProps, ScaleProps, PivotProps, VisibilityProps {}\n\nexport interface SvgProps extends GraphicsProps {\n  ctx: string | GraphicsContext;\n}\n\nexport interface SpriteProps extends AbstractProps, TextureProps, ScaleProps, PositionProps, VisibilityProps {\n  anchor: PointLike;\n}\n\nexport interface AnimatedSpriteAnimationProps extends AbstractProps, ScaleProps, PositionProps, VisibilityProps {\n  texturePrefix: string;\n  sheet: SpriteSheetLike;\n  startIndex: number;\n  numFrames: number;\n  zeroPad: number;\n  autoUpdate: boolean;\n  updateAnchor: boolean;\n  loop: boolean;\n  animationSpeed: number;\n}\n\nexport interface AnimatedSpriteProps extends AbstractProps, ScaleProps, PositionProps, VisibilityProps {\n  sheet: SpriteSheetLike;\n  texturePrefix: string;\n  zeroPad: number;\n  animations: { [animationName: string]: Omit<AnimatedSpriteAnimationProps, 'sheet' | 'autoUpdate'> };\n  autoPlay: boolean;\n  autoUpdate: boolean;\n  defaultAnimation: string;\n  reversible: boolean;\n  animationSpeed: number;\n}\n\nexport interface TextProps extends AbstractProps, PositionProps, ScaleProps, VisibilityProps {\n  text: string;\n  anchor: PointLike;\n  resolution: number;\n  roundPixels: boolean;\n  style: Partial<TextStyleOptions>;\n}\n\nexport interface OmittedTextProps extends AbstractProps, PositionProps, ScaleProps, VisibilityProps {}\n\nexport const TextPropsKeys: (keyof TextProps)[] = ['text', 'anchor', 'resolution', 'roundPixels', 'style'];\n\nexport interface ContainerProps\n  extends AbstractProps,\n    PositionProps,\n    ScaleProps,\n    PivotProps,\n    VisibilityProps,\n    ContainerConfig {}\n\nexport interface ParticleContainerProps extends AbstractProps, ParticleContainerConfig {}\n\nexport interface FlexContainerProps extends ContainerProps, FlexContainerConfig {}\n\nexport interface UICanvasFactoryProps extends ContainerProps, UICanvasProps {}\n\n// spine\ntype SpineData = {\n  skeleton: string;\n  atlas: string;\n  skel?: boolean;\n};\n\nexport interface SpineProps extends AbstractProps, ScaleProps, PositionProps, VisibilityProps {\n  data: string | SpineData;\n  autoUpdate: boolean;\n  animationName: string;\n  trackIndex: number;\n  loop: boolean;\n  paused: boolean;\n}\n\ninterface _ButtonProps extends AbstractProps, ScaleProps, PositionProps, PivotProps, VisibilityProps, ButtonConfig {}\n\nexport type ButtonProps = WithRequiredProps<_ButtonProps, 'textures'>;\n", "import { Assets, Sprite, Spritesheet, Texture } from 'pixi.js';\nimport { Logger, PointLike, resolvePointLike } from '../../utils';\n\nimport { PositionProps, ScaleProps, TextureProps } from './props';\n\nexport function resolveUnknownKeys(props: any, entity: any) {\n  for (const key in props) {\n    try {\n      (entity as any)[key] = props[key];\n    } catch (e) {\n      Logger.error(`Error setting property ${key}`, e);\n    }\n  }\n}\n\nexport function resolveTexture(props?: Partial<TextureProps>): Texture {\n  let texture: Texture | undefined;\n  const asset = props?.asset;\n  const assetAsString = asset as string;\n  const sheet = props?.sheet;\n  if (asset instanceof Texture) {\n    texture = asset;\n  } else if (!sheet || sheet?.length === 0) {\n    if (Assets.cache.has(assetAsString)) {\n      texture = Assets.get(assetAsString)!;\n    } else if (Assets.get(assetAsString)) {\n      texture = Assets.get(assetAsString).texture!;\n    } else {\n      throw new Error('Asset \"' + asset + '\" not loaded into Pixi cache');\n    }\n  } else {\n    if (!Assets.get(sheet)) {\n      throw new Error('Spritesheet \"' + sheet + '\" not loaded into Pixi cache');\n    } else {\n      const spriteSheet: Spritesheet = Assets.get(sheet) as Spritesheet;\n      const textures = spriteSheet.textures;\n      if (textures !== undefined) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (textures.hasOwnProperty(assetAsString)) {\n          texture = textures[assetAsString];\n        } else if (spriteSheet.linkedSheets !== undefined && spriteSheet.linkedSheets.length > 0) {\n          for (const linkedSheet of spriteSheet.linkedSheets) {\n            // eslint-disable-next-line no-prototype-builtins\n            if (linkedSheet.textures !== undefined && linkedSheet.textures.hasOwnProperty(assetAsString)) {\n              texture = linkedSheet.textures[assetAsString];\n              break;\n            }\n          }\n          if (texture === undefined) {\n            throw new Error(\n              'Asset \"' + asset + '\" not found inside spritesheet \"' + asset + \"' or any of its linked sheets\",\n            );\n          }\n        } else {\n          throw new Error('Asset \"' + asset + '\" not found inside spritesheet \"' + sheet + \"'\");\n        }\n      } else {\n        throw new Error('Spritesheet \"' + sheet + '\" loaded but textures arent?!');\n      }\n    }\n  }\n  return texture || new Sprite().texture;\n}\n\nexport function resolvePosition(props: Partial<PositionProps>, entity: any) {\n  const pos = resolvePointLike(props.position, false, props.x, props.y);\n  entity.x = pos.x;\n  entity.y = pos.y;\n}\n\nexport function resolveScale(props: Partial<ScaleProps>, entity: any) {\n  if (!props) {\n    return;\n  }\n  if (props.scale === undefined) {\n    if (props.scaleX === undefined && props.scaleY === undefined) {\n      return;\n    }\n    if (props.scaleX === undefined) {\n      props.scaleX = 1;\n    }\n    if (props.scaleY === undefined) {\n      props.scaleY = 1;\n    }\n  }\n  const scale = resolvePointLike(props.scale, false, props.scaleX, props.scaleY);\n  entity.scale.set(scale.x, scale.y);\n}\n\nexport function resolveAnchor(anchor: PointLike | undefined, entity: any) {\n  if (anchor !== undefined) {\n    const anchorPoint = resolvePointLike(anchor);\n    entity.anchor.set(anchorPoint.x, anchorPoint.y);\n  }\n}\n\nexport function resolvePivot(pivot: PointLike | undefined, entity: any) {\n  if (pivot !== undefined) {\n    const pivotPoint = resolvePointLike(pivot);\n    entity.pivot.set(pivotPoint.x, pivotPoint.y);\n  }\n}\n", "import { AnimatedSprite, Container, ContainerConfig, ContainerConfigKeys, SpineAnimation, Svg } from '../../display';\nimport type { ButtonConfig, FlexContainerConfig, UICanvasConfig } from '../../ui';\nimport {\n  Button,\n  ButtonConfigKeys,\n  FlexContainer,\n  FlexContainerConfigKeys,\n  UICanvas,\n  UICanvasConfigKeys,\n} from '../../ui';\nimport { omitKeys, pluck, resolvePointLike, Spine, WithRequiredProps } from '../../utils';\nimport {\n  AnimatedSpriteProps,\n  ButtonProps,\n  ContainerProps,\n  ExistingProps,\n  FlexContainerProps,\n  GraphicsProps,\n  ParticleContainerProps,\n  SpineProps,\n  SpriteProps,\n  SvgProps,\n  TextProps,\n  TextPropsKeys,\n  UICanvasFactoryProps,\n} from './props';\nimport {\n  resolveAnchor,\n  resolvePivot,\n  resolvePosition,\n  resolveScale,\n  resolveTexture,\n  resolveUnknownKeys,\n} from './utils';\n\nimport { BitmapText, Graphics, Sprite, Text } from 'pixi.js';\nimport {\n  ParticleContainer,\n  ParticleContainerConfig,\n  ParticleContainerConfigKeys,\n} from '../../display/ParticleContainer';\n\nexport const defaultFactoryMethods = {\n  existing: <TEntity>(entity: TEntity, props?: Partial<ExistingProps>): TEntity => {\n    if (!props) return entity;\n    const { position, x, y, pivot, scale, scaleX, scaleY, ...rest } = props;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale, scaleX, scaleY }, entity);\n    resolvePivot(pivot, entity);\n    resolveUnknownKeys(rest, entity);\n    return entity;\n  },\n  container: (props?: Partial<ContainerProps>) => {\n    const config = pluck(props ?? {}, ContainerConfigKeys);\n    const otherProps = omitKeys<ContainerProps, keyof ContainerConfig>(ContainerConfigKeys, props ?? {});\n    const entity = new Container(config);\n    if (!otherProps) return entity;\n    const { position, x, y, pivot, scale, scaleX, scaleY, ...rest } = otherProps;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale, scaleX, scaleY }, entity);\n    resolvePivot(pivot, entity);\n    resolveUnknownKeys(rest, entity);\n    return entity;\n  },\n  particleContainer: (props?: Partial<ParticleContainerProps>) => {\n    const config = pluck(props ?? {}, ParticleContainerConfigKeys);\n    const otherProps = omitKeys<ParticleContainerProps, keyof ParticleContainerConfig>(\n      ParticleContainerConfigKeys,\n      props ?? {},\n    );\n    const entity = new ParticleContainer(config);\n    if (!otherProps) return entity;\n    const { position, x, y, pivot, scale, ...rest } = otherProps;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale }, entity);\n    resolvePivot(pivot, entity);\n    resolveUnknownKeys(rest, entity);\n    return entity;\n  },\n  texture: resolveTexture,\n  sprite: (props?: Partial<SpriteProps>) => {\n    const entity = new Sprite(props ? resolveTexture(props) : undefined);\n    if (!props) return entity;\n    const { position, x, y, anchor, pivot, scale, scaleX, scaleY, ...rest } = props;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale, scaleX, scaleY }, entity);\n    resolveAnchor(anchor, entity);\n    resolvePivot(pivot, entity);\n    resolveUnknownKeys(rest, entity);\n    return entity;\n  },\n  animatedSprite: (props?: Partial<AnimatedSpriteProps>): AnimatedSprite => {\n    const entity = new AnimatedSprite(props);\n    if (props?.position) {\n      resolvePosition({ position: props.position, x: props.x, y: props.y }, entity);\n    }\n    if (props?.scale) {\n      resolveScale({ scale: props.scale ?? 1, scaleX: props.scaleX, scaleY: props.scaleY }, entity);\n    }\n    if (props?.pivot) {\n      resolvePivot(props.pivot, entity);\n    }\n    const unknowns = omitKeys(\n      ['x', 'y', 'position', 'text', 'roundPixels', 'resolution', 'style', 'anchor', 'pivot'],\n      props ?? {},\n    );\n    resolveUnknownKeys(unknowns, entity);\n    return entity;\n  },\n  graphics: (props?: Partial<GraphicsProps>) => {\n    const entity = new Graphics();\n    if (!props) return entity;\n    const { position, x, y, pivot, scale, scaleX, scaleY, ...rest } = props;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale, scaleX, scaleY }, entity);\n    resolvePivot(pivot, entity);\n    resolveUnknownKeys(rest, entity);\n    return entity;\n  },\n  svg(props: WithRequiredProps<SvgProps, 'ctx'>) {\n    const entity = new Svg(props.ctx);\n    if (!props) return entity;\n    const { position, x, y, pivot, scale, scaleX, scaleY, ...rest } = props;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale, scaleX, scaleY }, entity);\n    resolvePivot(pivot, entity);\n    resolveUnknownKeys(rest, entity);\n    return entity;\n  },\n  text: (props?: Partial<TextProps>) => {\n    const options = props\n      ? {\n          text: props.text,\n          roundPixels: props.roundPixels,\n          resolution: props.resolution,\n          style: props.style,\n          anchor: props.anchor ? resolvePointLike(props.anchor, true) : undefined,\n        }\n      : {};\n    const entity = new Text(options);\n    if (!props) return entity;\n    const { position, x, y, scale, scaleX, scaleY, pivot } = props;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale, scaleX, scaleY }, entity);\n    resolvePivot(pivot, entity);\n    const unknowns = omitKeys(\n      ['x', 'y', 'position', 'text', 'roundPixels', 'resolution', 'style', 'anchor', 'pivot'],\n      props,\n    );\n    resolveUnknownKeys(unknowns, entity);\n    return entity;\n  },\n  bitmapText: (props?: Partial<TextProps>) => {\n    const options = pluck(props ?? {}, TextPropsKeys);\n    const entity = new BitmapText(options);\n    if (props?.position) {\n      resolvePosition({ position: props.position, x: props.x, y: props.y }, entity);\n    }\n    if (props?.scale) {\n      resolveScale({ scale: props.scale ?? 1, scaleX: props.scaleX, scaleY: props.scaleY }, entity);\n    }\n    if (props?.pivot) {\n      resolvePivot(props.pivot, entity);\n    }\n    const unknowns = omitKeys(\n      ['x', 'y', 'position', 'text', 'roundPixels', 'resolution', 'style', 'anchor', 'pivot'],\n      props ?? {},\n    );\n    resolveUnknownKeys(unknowns, entity);\n    return entity;\n  },\n  // dill pixel specific stuff\n  button: (props?: Partial<ButtonProps>) => {\n    const config = pluck(props ?? {}, ButtonConfigKeys);\n    const otherProps = omitKeys<ButtonProps, keyof ButtonConfig>(ButtonConfigKeys, props ?? {});\n    const entity = new Button(config);\n    if (!otherProps) return entity;\n    const { position, x, y, pivot, scale, scaleX, scaleY, ...rest } = otherProps;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale, scaleX, scaleY }, entity);\n    resolvePivot(pivot, entity);\n    resolveUnknownKeys(rest, entity);\n    return entity;\n  },\n  flexContainer: (props?: Partial<FlexContainerProps>): FlexContainer => {\n    const config = pluck(props ?? {}, FlexContainerConfigKeys);\n    const otherProps = omitKeys<FlexContainerProps, keyof FlexContainerConfig>(FlexContainerConfigKeys, props ?? {});\n    const entity = new FlexContainer(config);\n    if (!otherProps) return entity;\n    const { position, x, y, pivot, scale, scaleX, scaleY, ...rest } = otherProps;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale, scaleX, scaleY }, entity);\n    resolvePivot(pivot, entity);\n    resolveUnknownKeys(rest, entity);\n    return entity;\n  },\n  uiCanvas: (props?: Partial<UICanvasFactoryProps>): UICanvas => {\n    const config = pluck(props ?? {}, UICanvasConfigKeys);\n    const otherProps = omitKeys<FlexContainerProps, keyof UICanvasConfig>(UICanvasConfigKeys, props ?? {});\n    const entity = new UICanvas(config);\n    if (!otherProps) return entity;\n    const { position, x, y, pivot, scale, scaleX, scaleY, ...rest } = otherProps;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale, scaleX, scaleY }, entity);\n    resolvePivot(pivot, entity);\n    resolveUnknownKeys(rest, entity);\n    return entity;\n  },\n  spine: (props?: Partial<SpineProps>): Spine => {\n    let data = props?.data;\n\n    if (typeof data === 'string') {\n      // get the spine data from cache\n      // check if '.json' is the last part of the asset string, and add it if not\n      let ext = data.slice(-5);\n      if (ext !== '.json' && ext !== '.skel') {\n        ext = '.json';\n      } else {\n        data = data.substring(0, data.length - 5);\n      }\n      data = { skeleton: data + ext, atlas: data + '.atlas' };\n    }\n    const entity: Spine = (window as any).Spine.from(data);\n    if (!props) return entity;\n    if (props.autoUpdate !== undefined) entity.autoUpdate = props.autoUpdate;\n    if (props.animationName) entity.state.setAnimation(props.trackIndex ?? 0, props.animationName, props.loop);\n    const { position, x, y, anchor, pivot, scale, scaleX, scaleY, ...rest } = props;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale, scaleX, scaleY }, entity);\n    resolveAnchor(anchor, entity);\n    resolvePivot(pivot, entity);\n    resolveUnknownKeys(rest, entity);\n    return entity;\n  },\n  spineAnimation: (props?: Partial<SpineProps>): SpineAnimation => {\n    const entity = new SpineAnimation(props);\n    if (!props) return entity;\n    const { position, x, y, anchor, pivot, scale, scaleX, scaleY, ...rest } = props;\n    resolvePosition({ position, x, y }, entity);\n    resolveScale({ scale, scaleX, scaleY }, entity);\n    resolveAnchor(anchor, entity);\n    resolvePivot(pivot, entity);\n    resolveUnknownKeys(rest, entity);\n    return entity;\n  },\n};\n", "import { Container as PIXIContainer } from 'pixi.js';\nimport { defaultFactoryMethods } from './index';\nimport { createFactoryMethods } from './methods';\n\nexport interface IFactory<T extends typeof defaultFactoryMethods = typeof defaultFactoryMethods> extends PIXIContainer {\n  add: T;\n  make: T;\n}\n\nexport function Factory<T extends typeof defaultFactoryMethods = typeof defaultFactoryMethods>(\n  extensions?: Partial<T>,\n): new () => IFactory<T> {\n  return class ExtendedContainer extends PIXIContainer implements IFactory<T> {\n    add: T;\n    make: T;\n\n    constructor() {\n      super();\n      extensions = Object.assign(defaultFactoryMethods, extensions);\n      this.make = createFactoryMethods(extensions, this, false);\n      this.add = createFactoryMethods(extensions, this, true);\n    }\n  };\n}\n", "import { IApplication } from '../core';\nimport { Signal } from '../signals';\nimport { KeyboardKey } from '../utils';\nimport type { IPlugin } from './Plugin';\nimport { Plugin } from './Plugin';\n\nexport type KeyboardEventType = 'keydown' | 'keyup';\nexport type KeyboardEventDetail = { event: KeyboardEvent; key: string };\nexport type KeySignal = Signal<(detail: KeyboardEventDetail) => void>;\n\nexport interface IKeyboardPlugin extends IPlugin {\n  enabled: boolean;\n  readonly keysDown: Set<string>;\n\n  onKeyDown(key?: KeyboardKey): KeySignal;\n\n  onKeyUp(key?: KeyboardKey): KeySignal;\n\n  isKeyDown(key: string): boolean;\n}\n\nexport function normalizeKey(key: string | undefined): string {\n  if (key === undefined) {\n    key = '*undefined*';\n  } else if (key === ' ') {\n    key = 'Space';\n  } else if (key.length === 1) {\n    key = key.toUpperCase();\n  }\n  return key;\n}\n\nexport class KeyboardPlugin extends Plugin implements IKeyboardPlugin {\n  public readonly id: string = 'keyboard';\n  // global signals\n  public onGlobalKeyDown: Signal<(detail: KeyboardEventDetail) => void> = new Signal();\n  public onGlobalKeyUp: Signal<(detail: KeyboardEventDetail) => void> = new Signal();\n\n  private _keyDownSignals: Map<string | undefined, KeySignal> = new Map();\n  private _keyUpSignals: Map<string | undefined, KeySignal> = new Map();\n\n  private _keysDown: Set<string> = new Set();\n\n  get keysDown() {\n    return this._keysDown;\n  }\n\n  private _enabled: boolean = true;\n\n  public get enabled(): boolean {\n    return this._enabled;\n  }\n\n  public set enabled(value: boolean) {\n    this._enabled = value;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public initialize(_app: IApplication): void {\n    // track which keys are down\n    document.addEventListener('keydown', this._handleKeyDown);\n    document.addEventListener('keyup', this._handleKeyUp);\n  }\n\n  public destroy() {\n    document.removeEventListener('keydown', this._handleEvent);\n    document.removeEventListener('keyup', this._handleEvent);\n\n    document.addEventListener('keydown', this._handleKeyDown);\n    document.addEventListener('keyup', this._handleKeyUp);\n  }\n\n  public onKeyDown(key?: KeyboardKey): KeySignal {\n    return this._checkAndAddSignal(key || undefined, 'keydown');\n  }\n\n  public onKeyUp(key?: KeyboardKey): KeySignal {\n    return this._checkAndAddSignal(key || undefined, 'keyup');\n  }\n\n  public isKeyDown(key: KeyboardKey): boolean {\n    return this._keysDown.has(key);\n  }\n\n  _update() {\n    //\n  }\n\n  protected getCoreSignals(): string[] {\n    return ['onGlobalKeyDown', 'onGlobalKeyUp'];\n  }\n\n  protected getCoreFunctions(): string[] {\n    return ['onKeyDown', 'onKeyUp', 'isKeyDown'];\n  }\n\n  private _handleKeyDown(e: KeyboardEvent): void {\n    const key = normalizeKey(e.key);\n    this._keysDown.add(key);\n    this.onGlobalKeyDown.emit({ event: e, key: e.key });\n  }\n\n  private _handleKeyUp(e: KeyboardEvent): void {\n    const key = normalizeKey(e.key);\n    this._keysDown.delete(key);\n    this.onGlobalKeyUp.emit({ event: e, key: e.key });\n  }\n\n  /**\n   * Check if the signal exists and add it if it doesn't\n   * Also, if this is the first signal, start listening for the event\n   * @param {string} key\n   * @param {KeyboardEventType} eventType\n   * @returns {KeySignal}\n   * @private\n   */\n  private _checkAndAddSignal(key: string | undefined, eventType: KeyboardEventType): KeySignal {\n    const signalMap = eventType === 'keydown' ? this._keyDownSignals : this._keyUpSignals;\n\n    if (!signalMap.size) {\n      this._listen(eventType);\n    }\n\n    key = normalizeKey(key);\n\n    if (!signalMap.has(key)) {\n      signalMap.set(key, new Signal<(detail: KeyboardEventDetail) => void>());\n    }\n\n    return signalMap.get(key) as KeySignal;\n  }\n\n  private _listen(eventType: KeyboardEventType): void {\n    document.addEventListener(eventType, this._handleEvent);\n  }\n\n  private _handleEvent(event: KeyboardEvent): void {\n    if (!this._enabled) {\n      return;\n    }\n    const signalMap = event.type === 'keydown' ? this._keyDownSignals : this._keyUpSignals;\n    const key = normalizeKey(event.key);\n    signalMap.get('*undefined*')?.emit({ event, key });\n    signalMap.get(key)?.emit({ event, key });\n  }\n}\n", "import type { ControlsActionMap } from '../..';\nimport { Application } from '../../Application';\nimport { IApplication } from '../../core';\n\nexport class AbstractControls {\n  protected scheme: any;\n\n  get app(): IApplication {\n    return Application.getInstance();\n  }\n\n  initialize(scheme: Partial<ControlsActionMap>) {\n    this.scheme = scheme;\n  }\n}\n", "import { Application } from '../../../Application';\nimport { WithSignals } from '../../../mixins';\nimport { bindAllMethods } from '../../../utils';\nimport type { Action } from '../../actions';\nimport { normalizeKey, type KeyboardEventDetail } from '../../KeyboardPlugin';\nimport { AbstractControls } from '../AbstractControls';\nimport type { ControlsActionMap, KeyboardControlsMap, KeyboardControlsScheme } from '../types';\n\nexport class KeyboardControls extends WithSignals(AbstractControls) {\n  protected scheme: Partial<KeyboardControlsMap>;\n  private _keyDownMap: Partial<KeyboardControlsScheme>;\n  private _keyUpMap: Partial<KeyboardControlsScheme>;\n  private _keyCombinations: string[][] = [];\n  private _singleDownKeys: Set<string> = new Set();\n  private _keyCombinationsMap: Map<string[], Action> = new Map();\n  private _activeDownKeys: Map<string, Action> = new Map();\n  private _activeUpKeys: Map<string, Action> = new Map();\n\n  constructor() {\n    super();\n    bindAllMethods(this);\n  }\n\n  get app() {\n    return Application.getInstance();\n  }\n\n  isActionActive(action: Action): boolean {\n    const controlsAction = this.scheme['down']?.[action] ?? null;\n    if (!controlsAction) {\n      return false;\n    }\n    if (Array.isArray(controlsAction)) {\n      return (\n        this._keyCombinationsMap.has(controlsAction) || controlsAction.some((key) => this._singleDownKeys.has(key))\n      );\n    } else {\n      return this._singleDownKeys.has(controlsAction);\n    }\n  }\n\n  public initialize(scheme: Partial<KeyboardControlsMap>): void {\n    super.initialize(scheme as Partial<ControlsActionMap>);\n    this._keyDownMap = scheme.down || {};\n    this._keyUpMap = scheme.up || {};\n    this._sortActions();\n  }\n\n  public connect() {\n    this.addSignalConnection(\n      this.app.signal.onActionContextChanged.connect(this._handleContextChanged),\n      this.app.keyboard.onKeyDown().connect(this._handleKeyDown),\n      this.app.keyboard.onKeyUp().connect(this._handleKeyUp),\n    );\n    this.app.ticker.add(this._update);\n  }\n\n  private _sortActions() {\n    const actions = this.app.actionsPlugin.getActions();\n    this._keyCombinations = [];\n    this._keyCombinationsMap.clear();\n    this._activeDownKeys.clear();\n    this._activeUpKeys.clear();\n    let keys = Object.keys(this._keyDownMap);\n\n    keys.forEach((key) => {\n      const item = this._keyDownMap[key];\n      const action = actions[key];\n      if (\n        action.context !== '*' &&\n        action.context !== this.app.actionContext &&\n        !action.context.includes(this.app.actionContext)\n      ) {\n        return;\n      }\n      let input = item;\n      if (input) {\n        if (!Array.isArray(input)) {\n          input = [input];\n        }\n        input.forEach((inputString: string) => {\n          if (inputString.includes('+')) {\n            const combo = inputString.split('+');\n            this._keyCombinations.push(combo);\n            this._keyCombinationsMap.set(combo, key as Action);\n          } else {\n            this._activeDownKeys.set(inputString, key as Action);\n          }\n        });\n      }\n    });\n\n    // sort them from the largest to smallest\n    this._keyCombinations.sort((a, b) => b.length - a.length);\n\n    keys = Object.keys(this._keyUpMap);\n    keys.forEach((key) => {\n      const item = this._keyUpMap[key];\n      let input = item;\n      if (input) {\n        if (!Array.isArray(input)) {\n          input = [input];\n        }\n        input.forEach((inputString: string) => {\n          this._activeUpKeys.set(inputString, key as Action);\n        });\n      }\n    });\n\n    //Logger.log('keyDownMap', this._keyDownMap, 'activeDownKeys', this._activeDownKeys);\n    //Logger.log('keyUpMap', this._keyUpMap, 'activeUpKeys', this._activeUpKeys);\n  }\n\n  private _handleContextChanged() {\n    this._getPossibleActions();\n  }\n\n  private _getPossibleActions() {\n    this._sortActions();\n  }\n\n  private _handleKeyDown(detail: KeyboardEventDetail): void {\n    const key = normalizeKey(detail.event.key);\n    this._singleDownKeys.add(key);\n  }\n\n  private _handleKeyUp(detail: KeyboardEventDetail): void {\n    const key = normalizeKey(detail.event.key);\n    this._singleDownKeys.delete(key);\n\n    const action = this._activeUpKeys.get(key);\n    if (action) {\n      this.app.action(action, { combination: false, inputState: 'up', key });\n    }\n  }\n\n  private _update() {\n    if (!this.app.keyboard) {\n      return;\n    }\n    const keysDown = this.app.keyboard.keysDown;\n    if (keysDown.size === 0) {\n      return;\n    }\n    const eliminated = new Set<string>();\n    // this._keyCombinations is already sorted from largest to smallest\n    for (let i = 0; i < this._keyCombinations.length; i++) {\n      const combination = this._keyCombinations[i];\n      // check if all of the keys in the combination are down\n      if (combination.some((key) => eliminated.has(key))) {\n        continue;\n      }\n      if (combination.every((key) => keysDown.has(key))) {\n        combination.forEach((key) => eliminated.add(key));\n        // send the action\n        const action = this._keyCombinationsMap.get(combination);\n        if (action) {\n          this.app.action(action, {\n            key: combination,\n            combination: true,\n            inputState: 'down',\n          });\n        }\n      }\n    }\n\n    // order doesn't matter here\n    this._singleDownKeys.forEach((key) => {\n      if (eliminated.has(key)) {\n        return;\n      }\n      if (keysDown.has(key)) {\n        const action = this._activeDownKeys.get(key);\n        if (action) {\n          this.app.action(action, { key, combination: false, inputState: 'down' });\n        }\n      }\n    });\n  }\n}\n", "export enum JoystickDirection {\n  None = 'none',\n  Left = 'left',\n  Top = 'top',\n  Bottom = 'bottom',\n  Right = 'right',\n  TopLeft = 'top_left',\n  TopRight = 'top_right',\n  BottomLeft = 'bottom_left',\n  BottomRight = 'bottom_right',\n}\nexport type JoystickDirectionType =\n  | JoystickDirection.None\n  | JoystickDirection.Left\n  | JoystickDirection.Top\n  | JoystickDirection.Bottom\n  | JoystickDirection.Right\n  | JoystickDirection.TopLeft\n  | JoystickDirection.TopRight\n  | JoystickDirection.BottomLeft\n  | JoystickDirection.BottomRight;\n\n// export a type of all the JoystickDirections\nexport const JOYSTICK_DIRECTIONS: JoystickDirectionType[] = [\n  JoystickDirection.None,\n  JoystickDirection.Left,\n  JoystickDirection.Top,\n  JoystickDirection.Bottom,\n  JoystickDirection.Right,\n  JoystickDirection.TopLeft,\n  JoystickDirection.TopRight,\n  JoystickDirection.BottomLeft,\n  JoystickDirection.BottomRight,\n];\n", "import { bindAllMethods } from '../../../utils';\nimport type { ControlsActionMap, JoystickControlsScheme, TouchControlsMap, TouchControlsScheme } from '../types';\n\nimport { JoystickDirection } from '..';\nimport { Application } from '../../../Application';\nimport { WithSignals } from '../../../mixins';\nimport { type IButton, type IJoystick } from '../../../ui';\nimport type { Action } from '../../actions';\nimport { AbstractControls } from '../AbstractControls';\n\nexport class TouchControls extends WithSignals(AbstractControls) {\n  protected scheme: Partial<TouchControlsMap>;\n  private _buttons: Set<IButton> = new Set();\n  private _joystickMap: Partial<JoystickControlsScheme>;\n  private _buttonDownMap: Partial<TouchControlsScheme>;\n  private _buttonUpMap: Partial<TouchControlsScheme>;\n  private _combinations: string[][] = [];\n  private _singleDownButtons: Set<string> = new Set();\n  private _activeJoystickDirections: Map<JoystickDirection, Action> = new Map();\n  private _activeButtonDownIds: Map<string, Action> = new Map();\n  private _activeButtonUpIds: Map<string, Action> = new Map();\n  private _combinationsMap: Map<string[], Action> = new Map();\n\n  constructor() {\n    super();\n    bindAllMethods(this);\n  }\n\n  private _joystick: IJoystick;\n\n  get joystick(): IJoystick {\n    return this._joystick;\n  }\n\n  set joystick(value: IJoystick) {\n    this._joystick = value;\n  }\n\n  get app() {\n    return Application.getInstance();\n  }\n\n  addButton(button: IButton) {\n    if (!button || this._buttons.has(button)) {\n      return;\n    }\n    this.addSignalConnection(\n      button.onDown.connect(() => this._handleButtonDown(button)),\n      button.onUp.connect(() => this._handleButtonUp(button)),\n      button.onUpOutside.connect(() => this._handleButtonUp(button)),\n      button.onDestroy.connect(() => this.removeButton(button)),\n    );\n    this._buttons.add(button);\n  }\n\n  removeButton(button: IButton) {\n    if (!button || !this._buttons.has(button)) {\n      return;\n    }\n    button.onDown.disconnect(() => this._handleButtonDown(button));\n    button.onUp.disconnect(() => this._handleButtonUp(button));\n    button.onUpOutside.disconnect(() => this._handleButtonUp(button));\n    button.onDestroy.disconnect(() => this.removeButton(button));\n    this._buttons.delete(button);\n  }\n\n  public initialize(scheme: Partial<TouchControlsMap>): void {\n    super.initialize(scheme as Partial<ControlsActionMap>);\n    this._buttonDownMap = scheme.down || {};\n    this._buttonUpMap = scheme.up || {};\n    this._joystickMap = scheme.joystick || {};\n    this.app.signal.onActionContextChanged.connect(this._sortActions);\n    this._sortActions();\n  }\n\n  public connect() {\n    this.app.ticker.add(this._update);\n  }\n\n  isActionActive(action: Action): boolean {\n    const buttonAction = this.scheme['down']?.[action] ?? null;\n    if (buttonAction) {\n      if (Array.isArray(buttonAction)) {\n        return this._combinationsMap.has(buttonAction);\n      } else {\n        return this._singleDownButtons.has(buttonAction);\n      }\n    } else {\n      const joystickAction = this.scheme['joystick']?.[action] ?? null;\n      if (this._joystick && joystickAction) {\n        if (Array.isArray(joystickAction)) {\n          return joystickAction.includes(this._joystick.direction);\n        } else {\n          return joystickAction === this._joystick?.direction;\n        }\n      }\n    }\n    return false;\n  }\n\n  private _sortActions() {\n    const actions = this.app.actionsPlugin.getActions();\n    this._combinations = [];\n    this._combinationsMap.clear();\n    this._activeJoystickDirections.clear();\n    this._activeButtonDownIds.clear();\n    this._activeButtonUpIds.clear();\n\n    let buttons = Object.keys(this._buttonDownMap);\n    buttons.forEach((key) => {\n      const item = this._buttonDownMap[key];\n      const action = actions[key];\n      if (\n        action.context !== '*' &&\n        action.context !== this.app.actionContext &&\n        !action.context.includes(this.app.actionContext)\n      ) {\n        return;\n      }\n      let input = item;\n      if (input) {\n        if (!Array.isArray(input)) {\n          input = [input];\n        }\n        input.forEach((inputString) => {\n          if (inputString.includes('+')) {\n            const combo = inputString.split('+');\n            this._combinations.push(combo);\n            this._combinationsMap.set(combo, key as Action);\n          } else {\n            this._activeButtonDownIds.set(inputString, key as Action);\n          }\n        });\n      }\n    });\n\n    // sort them from the largest to smallest\n    this._combinations.sort((a, b) => b.length - a.length);\n\n    buttons = Object.keys(this._buttonUpMap);\n    buttons.forEach((key) => {\n      const item = this._buttonUpMap[key];\n      const action = actions[key];\n      if (\n        action.context !== '*' &&\n        action.context !== this.app.actionContext &&\n        !action.context.includes(this.app.actionContext)\n      ) {\n        return;\n      }\n      this._activeButtonUpIds.set(item as string, key as Action);\n    });\n\n    const joystickActions = Object.keys(this._joystickMap);\n    joystickActions.forEach((key) => {\n      const item = this._joystickMap[key];\n      let input = item;\n      if (input) {\n        if (!Array.isArray(input)) {\n          input = [input];\n        }\n        input.forEach((inputString) => {\n          this._activeJoystickDirections.set(inputString as JoystickDirection, key as Action);\n        });\n      }\n    });\n  }\n\n  private _handleButtonDown(button: IButton): void {\n    this._singleDownButtons.add(button.id!);\n  }\n\n  private _handleButtonUp(button: IButton): void {\n    this._singleDownButtons.delete(button.id!);\n    const action = this._activeButtonUpIds.get(button.id!);\n    if (action) {\n      this.app.action(action, {\n        combination: false,\n        inputState: 'up',\n        button: button.id!,\n      });\n    }\n  }\n\n  private _update() {\n    const joystickDirection = this._joystick?.direction ?? null;\n    const buttonsDown = this._singleDownButtons;\n    const eliminated = new Set<string>();\n    // this._combinations is already sorted from largest to smallest\n    for (let i = 0; i < this._combinations.length; i++) {\n      const combination = this._combinations[i];\n      // check if all of the keys in the combination are down\n      if (combination.some((key) => eliminated.has(key))) {\n        continue;\n      }\n      if (combination.every((key) => buttonsDown.has(key) || joystickDirection === key)) {\n        combination.forEach((key) => eliminated.add(key));\n        // send the action\n        const action = this._combinationsMap.get(combination);\n        if (action) {\n          this.app.action(action, {\n            button: combination,\n            combination: true,\n            inputState: 'down',\n          });\n        }\n      }\n    }\n\n    // order doesn't matter here\n    this._singleDownButtons.forEach((id) => {\n      if (eliminated.has(id)) {\n        return;\n      }\n      if (buttonsDown.has(id)) {\n        const action = this._activeButtonDownIds.get(id);\n        if (action) {\n          this.app.action(action, {\n            button: id,\n            combination: false,\n            inputState: 'down',\n          });\n        }\n      }\n    });\n\n    // joustick dir\n    if (joystickDirection) {\n      const action = this._activeJoystickDirections.get(joystickDirection);\n      if (action) {\n        this.app.action(action, {\n          inputState: 'joystick',\n        });\n      }\n    }\n  }\n}\n", "import { Application } from '../../Application';\nimport { IApplication } from '../../core';\nimport { bindAllMethods } from '../../utils';\nimport { Action } from '../actions';\nimport { IControls, UserControls } from './interfaces';\nimport { KeyboardControls } from './keyboard';\nimport { TouchControls } from './touch';\n\nexport class Controls implements IControls {\n  keyboard: KeyboardControls;\n  touch: TouchControls;\n\n  constructor() {\n    bindAllMethods(this);\n  }\n\n  get app(): IApplication {\n    return Application.getInstance();\n  }\n\n  destroy() {\n    if (this.keyboard) {\n      this.keyboard.destroy();\n    }\n    if (this.touch) {\n      this.touch.destroy();\n    }\n  }\n\n  isActionActive(action: Action): boolean {\n    const isActive = this.keyboard?.isActionActive(action) || this.touch?.isActionActive(action) || false;\n    return isActive;\n  }\n\n  initialize(scheme: UserControls) {\n    if (scheme.keyboard) {\n      this.keyboard = new KeyboardControls();\n      this.keyboard.initialize(scheme.keyboard);\n    }\n\n    if (scheme.touch) {\n      this.touch = new TouchControls();\n      this.touch.initialize(scheme.touch);\n    }\n  }\n\n  public connect() {\n    if (this.keyboard) {\n      this.keyboard.connect();\n    }\n    if (this.touch) {\n      this.touch.connect();\n    }\n  }\n}\n", "import type { ActionsList, IActionsPlugin } from '../actions';\nimport { Action, DefaultActions } from '../actions';\nimport { Controls } from './Controls';\n\nimport { IApplication } from '../../core';\nimport { Signal } from '../../signals';\nimport type { IPlugin } from '../Plugin';\nimport { Plugin } from '../Plugin';\nimport { InputController, InputControllerTypes } from './constants';\nimport { UserControls } from './interfaces';\n\nexport type InputManagerOptions = {\n  actions?: ActionsList;\n  controls?: UserControls;\n};\n\nexport interface IInputPlugin extends IPlugin {\n  readonly controls: Controls;\n  activeGamepads: Map<string, Gamepad>;\n  activeControllers: Set<string>;\n  options: InputManagerOptions;\n  onGamepadConnected: Signal<(gamepad: Gamepad) => void>;\n  onGamepadDisconnected: Signal<(gamepad: Gamepad) => void>;\n  onControllerActivated: Signal<(controller: string) => void>;\n  onControllerDeactivated: Signal<(controller: string) => void>;\n\n  isControllerActive(controller: InputController): boolean;\n\n  isGamepadActive(gamepad: Gamepad): boolean;\n\n  isActionActive(action: Action): boolean;\n}\n\nconst defaultOptions = {\n  actions: DefaultActions,\n};\n\nexport class InputPlugin extends Plugin implements IInputPlugin {\n  public readonly id = 'input';\n\n  // controls\n  public readonly controls = new Controls();\n\n  // properties\n  public activeGamepads = new Map<string, Gamepad>();\n  public activeControllers = new Set<string>([]);\n  public options: InputManagerOptions;\n  // signals\n  public onGamepadConnected: Signal<(gamepad: Gamepad) => void> = new Signal<(gamepad: Gamepad) => void>();\n  public onGamepadDisconnected: Signal<(gamepad: Gamepad) => void> = new Signal<(gamepad: Gamepad) => void>();\n  public onControllerActivated: Signal<(controller: string) => void> = new Signal<(controller: string) => void>();\n  public onControllerDeactivated: Signal<(controller: string) => void> = new Signal<(controller: string) => void>();\n\n  isActionActive(action: Action): boolean {\n    return this.controls.isActionActive(action);\n  }\n\n  async initialize(app: IApplication, options: InputManagerOptions = defaultOptions): Promise<void> {\n    this.options = { ...defaultOptions, ...options };\n\n    app.stage.eventMode = 'static';\n    app.stage.on('touchstart', this._onTouchStart);\n    app.stage.on('globalmousemove', this._onMouseMove);\n    window.addEventListener('keydown', this._onKeyDown);\n    window.addEventListener('gamepadconnected', this._onGamepadConnected);\n    window.addEventListener('gamepaddisconnected', this._onGamepadDisconnected);\n\n    if (this.options.controls) {\n      this.controls.initialize(this.options.controls);\n    }\n  }\n\n  public postInitialize(): void {\n    if (this.controls) {\n      this.controls.connect();\n    }\n  }\n\n  destroy(): void {\n    // unregister all event listeners\n    this.app.stage.off('touchstart', this._onTouchStart);\n    this.app.stage.off('globalmousemove', this._onMouseMove);\n    window.removeEventListener('keydown', this._onKeyDown);\n    window.removeEventListener('gamepadconnected', this._onGamepadConnected);\n    window.removeEventListener('gamepaddisconnected', this._onGamepadDisconnected);\n\n    super.destroy();\n  }\n\n  isControllerActive(controller: InputController): boolean {\n    return this.activeControllers.has(controller);\n  }\n\n  isGamepadActive(gamepad: Gamepad): boolean {\n    return this.activeGamepads.has(gamepad.id);\n  }\n\n  protected getCoreSignals(): string[] {\n    return ['onGamepadConnected', 'onGamepadDisconnected', 'onControllerActivated', 'onControllerDeactivated'];\n  }\n\n  private _activateController(inputController: string): void {\n    if (this.activeControllers.has(inputController)) {\n      return;\n    }\n    this.activeControllers.add(inputController);\n    // emit the controller activated signal\n    this.onControllerActivated.emit(inputController);\n  }\n\n  private _deactivateController(inputController: InputController): void {\n    const wasControllerActive = this.activeControllers.has(inputController);\n    if (!wasControllerActive) {\n      return;\n    }\n    this.activeControllers.delete(inputController);\n    // emit the controller deactivated signal\n    this.onControllerDeactivated.emit(inputController);\n  }\n\n  private _activateGamepad(gamepad: Gamepad): void {\n    this.activeGamepads.set(gamepad.id, gamepad);\n  }\n\n  private _deactivateGamepad(gamepadId: string): void {\n    this.activeGamepads.delete(gamepadId);\n  }\n\n  private _onTouchStart(): void {\n    this._activateController(InputControllerTypes.Touch);\n  }\n\n  private _onMouseMove(): void {\n    this._activateController(InputControllerTypes.Mouse);\n  }\n\n  private _onKeyDown(): void {\n    this._activateController(InputControllerTypes.Keyboard);\n  }\n\n  private _onGamepadConnected(event: GamepadEvent): void {\n    this._activateController(InputControllerTypes.GamePad);\n    // add the gamepad id just in case we need it (?)\n    this._activateController(event.gamepad.id);\n    this._activateGamepad(event.gamepad);\n    // emit the gamepad connected signal\n    this.onGamepadConnected.emit(event.gamepad);\n  }\n\n  private _onGamepadDisconnected(event: GamepadEvent): void {\n    // remove the gamepad\n    this._deactivateGamepad(event.gamepad.id);\n\n    // pause the game any time there is a controller disconnect\n    this.actionsPlugin.sendAction('pause');\n\n    // emit the gamepad disconnected signal\n    this.onGamepadDisconnected.emit(event.gamepad);\n\n    // check if all gamepads are disconnected\n    if (this.activeGamepads.size === 0) {\n      this._deactivateController(InputControllerTypes.GamePad);\n    }\n  }\n\n  get actionsPlugin(): IActionsPlugin {\n    return this.app.getPlugin('actions') as IActionsPlugin;\n  }\n}\n", "import { UserActions, UserButtons } from '../actions';\nimport { UserControls } from './interfaces';\nexport function defineControls<U extends UserActions = UserActions, B extends UserButtons = UserButtons>(\n  actions: U,\n  buttons: B,\n  controls?: UserControls<U, B>,\n): UserControls<U, B> {\n  return controls || ([] as unknown as UserControls<U, B>);\n}\n", "import type {IPopup, PopupConfig, PopupConstructor} from '../ui';\nimport {Container} from '../display';\nimport {Signal} from '../signals';\nimport {bindAllMethods, getLastMapEntry} from '../utils';\nimport type {IPlugin} from './Plugin';\nimport {Plugin} from './Plugin';\nimport type {IApplication} from '../core';\n\n/**`\n * Interface for PopupManager\n */\nexport interface IPopupManagerPlugin extends IPlugin {\n  readonly view: Container; // The view of the PopupManager\n  readonly current: IPopup | undefined; // The current active popup\n  readonly popupCount: number; // The count of popups\n  readonly currentPopupId: string | number | undefined; // The id of the current popup\n  // signals\n  onShowPopup: Signal<(detail: PopupSignalDetail) => void>; // Signal for when a popup is shown\n  onHidePopup: Signal<(detail: PopupSignalDetail) => void>; // Signal for when a popup is hidden\n\n  // methods\n  addPopup(id: string | number, popup: PopupConstructor): void; // Add a popup\n\n  showPopup<T = any>(id: string | number, config: Partial<PopupConfig<T>>): Promise<IPopup<T> | undefined>;\n\n  hidePopup<T = any>(id: string | number, data?: any): Promise<IPopup<T> | undefined>; // Hide a popup\n\n  removeAllPopups(animate?: boolean): void; // Remove all popups\n}\n\nexport type PopupSignalDetail<T = any> = { id: string | number; data?: T };\n\n/**\n * PopupManager\n */\n\nexport class PopupManagerPlugin extends Plugin implements IPopupManagerPlugin {\n  public readonly id: string = 'popups'; // The id of the PopupManager\n  public readonly view = new Container(); // The view of the PopupManager\n\n  // signals\n  public onShowPopup: Signal<(detail: PopupSignalDetail) => void> = new Signal<(detail: PopupSignalDetail) => void>(); // Signal for when a popup is shown\n  public onHidePopup: Signal<(detail: PopupSignalDetail) => void> = new Signal<(detail: PopupSignalDetail) => void>(); // Signal for when a popup is hidden\n  private _popups: Map<string | number, PopupConstructor> = new Map(); // Map of popups\n  private _activePopups: Map<string | number, IPopup> = new Map(); // Map of active popups\n\n  private _currentPopupId: string | number | undefined = undefined; // The id of the current popup\n\n  get currentPopupId(): string | number | undefined {\n    return this._currentPopupId;\n  }\n\n  get popupCount(): number {\n    return this._popups.size;\n  }\n\n  get current(): IPopup | undefined {\n    if (this._currentPopupId === undefined) {\n      return undefined;\n    }\n    return this._activePopups.get(this._currentPopupId);\n  }\n\n  /**\n   * Initialize the PopupManager\n   * @param _app\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  initialize(_app: IApplication): void {\n    bindAllMethods(this);\n    this.view.label = 'PopupManager';\n    this._setupAppListeners();\n  }\n\n  /**\n   * Destroy the PopupManager\n   */\n  destroy(): void {\n    this._activePopups.clear();\n    super.destroy();\n  }\n\n  /**\n   * Add a popup\n   * @param id - The id of the popup\n   * @param popup - The popup constructor\n   */\n  addPopup<T = any>(id: string | number, popup: PopupConstructor<T>): void {\n    this._popups.set(id, popup);\n  }\n\n  /**\n   * Show a popup\n   * @param id - The id of the popup\n   * @param config - The configuration for the popup\n   * @returns a promise resolving to the popup, if it exists\n   */\n  async showPopup<T = any>(id: string | number, config: Partial<PopupConfig<T>> = {}): Promise<IPopup<T> | undefined> {\n    const popup: PopupConstructor<T> | undefined = this._popups.get(id);\n    if (popup) {\n      config.id = id;\n      const instance = this.view.add.existing(new popup(id, config));\n      instance.initialize();\n      this.app.focus.clearFocus();\n      await instance.show();\n      this.app.focus.setFocusLayer(id);\n      instance.afterShow();\n      this._activePopups.set(id, instance);\n      this._currentPopupId = id;\n      this.onShowPopup.emit({ id, data: config?.data });\n      instance.start();\n      return instance;\n    }\n    return;\n  }\n\n  /**\n   * Hide a popup\n   * @param id - The id of the popup\n   * @param data\n   * @returns a promise resolving to the popup, if it exists\n   */\n  async hidePopup<T = any>(id: string | number, data?: T): Promise<IPopup<T> | undefined> {\n    const popup = this._activePopups.get(id);\n    if (popup) {\n      popup.beforeHide();\n      await popup.hide();\n      this.view.removeChild(popup as any);\n      this._activePopups.delete(id);\n      this._currentPopupId = getLastMapEntry(this._activePopups)?.[0] || undefined;\n      this.onHidePopup.emit({ id, data });\n      popup.end();\n      return popup;\n    }\n    return;\n  }\n\n  /**\n   * Remove all popups\n   * @param animate - Whether to animate the removal\n   */\n  removeAllPopups(animate: boolean = false): void {\n    if (animate) {\n      this._activePopups.forEach((popup) => {\n        popup.hide();\n      });\n    } else {\n      this._activePopups.clear();\n      this.view.removeChildren();\n    }\n  }\n\n  protected getCoreFunctions() {\n    return ['addPopup', 'hidePopup', 'showPopup', 'removeAllPopups'];\n  }\n\n  protected getCoreSignals() {\n    return ['onShowPopup', 'onHidePopup'];\n  }\n\n  /**\n   * Setup application listeners\n   * @private\n   */\n  private _setupAppListeners(): void {\n    this.addSignalConnection(this.app.scenes.onSceneChangeStart.connect(() => this.removeAllPopups()));\n    this.app.keyboard.onKeyUp('Escape').connect(this._handleEscape);\n  }\n\n  /**\n   * Handle escape key press\n   * if the current popup should close when escape is pressed (true by default), closes it\n   * @private\n   */\n  private _handleEscape() {\n    if (this.current && this.current.config.closeOnEscape) {\n      void this.hidePopup(this.current.id);\n    }\n  }\n}\n", "import { Graphics } from 'pixi.js';\n\nimport { Container } from '../display';\nimport type { IApplication } from '../core';\nimport type { IPlugin } from './Plugin';\nimport { Plugin } from './Plugin';\nimport type { Size } from '../utils';\n\n/**\n * Interface for Resizer module.\n */\nexport interface IResizerPlugin extends IPlugin {\n  readonly size: Size;\n  readonly scale: number;\n  resize(): void;\n}\n\n/**\n * Type definition for Resizer options.\n */\nexport type ResizerPluginOptions = {\n  autoScroll: boolean;\n  useAspectRatio: boolean;\n  fixed: boolean;\n  minSize: { width: number; height: number };\n  maxSize: { width: number; height: number };\n  debug: boolean;\n};\n\n/**\n * Default options for Resizer module.\n */\nconst defaultOptions: ResizerPluginOptions = {\n  autoScroll: false,\n  useAspectRatio: false,\n  fixed: false,\n  minSize: { width: 0, height: 0 },\n  maxSize: { width: 0, height: 0 },\n  debug: false,\n};\n\nexport class ResizerPlugin extends Plugin implements IResizerPlugin {\n  public readonly id = 'resizer';\n  private _options: ResizerPluginOptions;\n  private _debugContainer: Container;\n  private _gfx: Graphics;\n  private _size: Size;\n  private _scale: number;\n\n  get size(): Size {\n    return this._size;\n  }\n\n  get scale(): number {\n    return this._scale;\n  }\n\n  /**\n   * Initializes the Resizer module.\n   */\n  async initialize(_app: IApplication, options: Partial<ResizerPluginOptions> = {}) {\n    this._options = { ...defaultOptions, ...options };\n  }\n\n  /**\n   * Post-initialization of the Resizer module.\n   * when this is called, the renderer is already created, and the dom element has been appended\n   */\n  async postInitialize() {\n    this.resize();\n  }\n\n  /**\n   * Resizes the application based on window size and module options.\n   */\n\n  resize() {\n    let screenWidth = window.innerWidth;\n    let screenHeight = window.innerHeight;\n\n    const el = this.app.renderer.canvas?.parentElement;\n    const bounds = el?.getBoundingClientRect();\n\n    if (bounds) {\n      screenWidth = bounds.width;\n      screenHeight = bounds.height;\n    }\n\n    const minWidth = this._options.minSize.width;\n    const minHeight = this._options.minSize.height;\n\n    // Calculate renderer and canvas sizes based on current dimensions\n    const scaleX = screenWidth < minWidth ? minWidth / screenWidth : 1;\n    const scaleY = screenHeight < minHeight ? minHeight / screenHeight : 1;\n    const scale = scaleX > scaleY ? scaleX : scaleY;\n\n    this._scale = scale;\n\n    const width = screenWidth * scale;\n    const height = screenHeight * scale;\n    // Update canvas style dimensions and scroll window up to avoid issues on mobile resize\n    this.app.renderer.canvas.style.width = `${screenWidth}px`;\n    this.app.renderer.canvas.style.height = `${screenHeight}px`;\n\n    if (this._options.autoScroll) {\n      window?.scrollTo(0, 0);\n    }\n\n    // Update renderer and navigation screens dimensions\n    this.app.renderer.resize(width, height);\n    this._size = { width, height };\n\n    if (this._options.debug) {\n      this._drawDebug();\n    }\n  }\n\n  /**\n   * Draws debug information if debug option is enabled.\n   */\n  private _drawDebug() {\n    if (!this._debugContainer) {\n      this._debugContainer = this.app.stage.addChild(new Container());\n      this._gfx = this._debugContainer.add.graphics();\n    }\n\n    this._gfx.clear();\n    this._gfx.rect(0, 0, this._size.width, this._size.height);\n    this._gfx.stroke({ width: 4, color: 0x000fff });\n  }\n}\n", "import { Container } from 'pixi.js';\nimport { Application } from '../Application';\nimport type { IApplication } from '../core';\nimport type { IScene, ISceneTransition, SceneTransition } from '../display';\nimport { Signal } from '../signals';\nimport {\n  bindAllMethods,\n  Constructor,\n  createQueue,\n  getDynamicModuleFromImportListItem,\n  isDev,\n  Queue,\n  SceneImportList,\n  SceneImportListItem,\n} from '../utils';\nimport type { IPlugin } from './Plugin';\nimport { Plugin } from './Plugin';\n\ntype VirtualScenesModule = { sceneList: SceneImportListItem<IScene>[] };\n\nexport interface ISceneManagerPlugin extends IPlugin {\n  isFirstScene: boolean;\n  onSceneChangeStart: Signal<(detail: { exiting: string | null; entering: string }) => void>;\n  onSceneChangeComplete: Signal<(detail: { current: string }) => void>;\n\n  view: Container;\n  list: SceneImportList<IScene>;\n  splash: { view: ISceneTransition | null; hideWhen: SplashHideWhen; zOrder: SplashZOrder };\n  transition?: ISceneTransition;\n  currentScene: IScene;\n  readonly ids: string[];\n  readonly defaultScene: string;\n\n  setDefaultLoadMethod(method: LoadSceneMethod): void;\n\n  loadDefaultScene(): Promise<void>;\n\n  loadScene(sceneIdOrLoadSceneConfig: LoadSceneConfig | string): Promise<void>;\n\n  getSceneFromHash(): string | null;\n}\n\nexport type LoadSceneMethod =\n  | 'immediate'\n  | 'exitEnter'\n  | 'enterExit'\n  | 'enterBehind'\n  | 'transitionExitEnter'\n  | 'exitTransitionEnter';\n\nexport type SplashHideWhen = 'firstSceneEnter' | 'requiredAssetsLoaded';\nexport type SplashZOrder = 'top' | 'bottom';\n\nexport type SplashOptions = {\n  view: ISceneTransition | typeof SceneTransition | null;\n  zOrder: SplashZOrder;\n  hideWhen: SplashHideWhen;\n};\n\nexport type LoadSceneConfig = {\n  id: string;\n  method?: LoadSceneMethod;\n};\n\nconst defaultSplashOptions: SplashOptions = {\n  view: null,\n  hideWhen: 'firstSceneEnter',\n  zOrder: 'top',\n};\n\nexport class SceneManagerPlugin extends Plugin implements ISceneManagerPlugin {\n  public readonly id: string = 'scenes';\n  public onSceneChangeStart: Signal<(detail: { exiting: string | null; entering: string }) => void> = new Signal<\n    (detail: { exiting: string | null; entering: string }) => void\n  >();\n  public onSceneChangeComplete: Signal<(detail: { current: string }) => void> = new Signal<\n    (detail: { current: string }) => void\n  >();\n  public splash: { view: ISceneTransition | null; hideWhen: SplashHideWhen; zOrder: SplashZOrder };\n  public transition?: ISceneTransition;\n  // view container - gets added to the stage\n  public view: Container = new Container();\n  // maybe the user wants the enter animation to be different for the first scene\n  public isFirstScene: boolean = true;\n\n  // scene management\n  public list: SceneImportList<IScene> = [];\n  public currentScene: IScene;\n  public defaultScene: string;\n  private _sceneModules: Map<string, Constructor<IScene>> = new Map();\n  //\n  private _lastScene: IScene | null = null;\n  private _queue: Queue<any> | null;\n  private _defaultLoadMethod: LoadSceneMethod = 'immediate';\n  private _currentSceneId: string;\n  // debug\n  private _debugVisible: boolean = false;\n  private _debugMenu: HTMLDivElement;\n  private _useHash: boolean = false;\n\n  // debug\n  private _sceneSelect: HTMLSelectElement;\n\n  constructor() {\n    super();\n    bindAllMethods(this);\n  }\n\n  get ids(): string[] {\n    return this.list.map((s) => s.id);\n  }\n\n  public setDefaultLoadMethod(method: LoadSceneMethod) {\n    this._defaultLoadMethod = method;\n  }\n\n  public destroy(): void {}\n\n  public async initialize(app: IApplication): Promise<void> {\n    this._debugVisible =\n      this.app.config?.showSceneDebugMenu === true || (isDev && this.app.config?.showSceneDebugMenu !== false);\n    this._useHash = app.config?.useHash === true || this._debugVisible;\n    this.view.sortableChildren = true;\n    const globalThisAsAny = globalThis as any;\n    const sceneList: SceneImportListItem<IScene>[] = globalThisAsAny.getDillPixel('sceneList') || [];\n    this.list = sceneList.filter((scene) => scene.active !== false);\n\n    if (this._debugVisible || this._useHash) {\n      this.defaultScene = this.getSceneFromHash() || '';\n    }\n    if (!this.splash) {\n      this.splash = { view: null, hideWhen: 'firstSceneEnter', zOrder: 'top' };\n      const splash = { ...defaultSplashOptions, ...(app.config?.splash ?? {}) };\n      if (splash.view) {\n        this.splash.view =\n          typeof splash.view === 'function' ? new (splash.view as Constructor<ISceneTransition>)() : splash.view;\n      }\n    }\n\n    this.defaultScene = this.defaultScene || app.config?.defaultScene || this.list?.[0]?.id;\n    if (!this.transition && app.config?.sceneTransition) {\n      this.transition =\n        typeof app.config.sceneTransition === 'function'\n          ? new (app.config.sceneTransition as Constructor<ISceneTransition>)()\n          : app.config.sceneTransition;\n    }\n    this._defaultLoadMethod = app.config.defaultSceneLoadMethod || 'immediate';\n\n    if (this._debugVisible) {\n      this._createDebugMenu();\n    }\n    if (this._useHash) {\n      this._listenForHashChange();\n    }\n    return Promise.resolve(undefined);\n  }\n\n  public async loadDefaultScene(): Promise<void> {\n    if (this.splash) {\n      await this._showSplash();\n    }\n    await this.app.assets.loadRequired();\n    if (this.splash.hideWhen === 'requiredAssetsLoaded') {\n      await this._hideSplash();\n    }\n    return this.loadScene(this.defaultScene);\n  }\n\n  public async loadScene(sceneIdOrLoadSceneConfig: string): Promise<void>;\n\n  public async loadScene(sceneIdOrLoadSceneConfig: LoadSceneConfig | string): Promise<void> {\n    if (this._queue) {\n      // TODO: maybe allow halting the queue and starting a fresh scene load\n      // for now, just ignore the request until the queue finishes\n      return;\n    }\n\n    this._lastScene = null;\n    const newSceneId =\n      typeof sceneIdOrLoadSceneConfig === 'string' ? sceneIdOrLoadSceneConfig : sceneIdOrLoadSceneConfig.id;\n\n    const method =\n      typeof sceneIdOrLoadSceneConfig === 'string'\n        ? this._defaultLoadMethod\n        : sceneIdOrLoadSceneConfig?.method || this._defaultLoadMethod;\n\n    if (this.currentScene) {\n      this._lastScene = this.currentScene;\n    }\n\n    // check if the scene item exists\n    const sceneItem = this.list.find((scene) => scene.id === newSceneId);\n    if (!sceneItem) {\n      throw new Error(`Scene item not found  for id ${newSceneId}`);\n    }\n\n    if (sceneItem?.plugins?.length) {\n      for (const plugin of sceneItem.plugins) {\n        const pluginListItem = this.app.getUnloadedPlugin(plugin);\n        if (pluginListItem) {\n          await this.app.loadPlugin(pluginListItem);\n        }\n      }\n    }\n\n    this._currentSceneId = newSceneId;\n\n    // found a scene item\n    this._queue = createQueue(this._createCurrentScene);\n\n    // TODO: finish adding scene changing behaviours\n    // TODO: add loading assets into this queue\n    // TODO: add progress updates\n    switch (method) {\n      case 'exitEnter':\n        this._queue.add(\n          this._exitLastScene,\n          this._destroyLastScene,\n          this._unloadLastScene,\n          this._loadCurrentScene,\n          this._initializeCurrentScene,\n          this._addCurrentScene,\n          this._enterCurrentScene,\n          this._startCurrentScene,\n        );\n        break;\n      case 'enterExit':\n        this._queue.add(\n          this._loadCurrentScene,\n          this._initializeCurrentScene,\n          this._addCurrentScene,\n          this._enterCurrentScene,\n          this._startCurrentScene,\n          this._destroyLastScene,\n          this._unloadLastScene,\n        );\n        break;\n      case 'enterBehind':\n        this._queue.add(\n          this._loadCurrentScene,\n          this._initializeCurrentScene,\n          this._addCurrentSceneBehind,\n          this._enterCurrentScene,\n          this._exitLastScene,\n          this._destroyLastScene,\n          this._unloadLastScene,\n          this._startCurrentScene,\n        );\n        break;\n      case 'transitionExitEnter':\n        this._queue.add(\n          this._showTransition,\n          this._exitLastScene,\n          this._destroyLastScene,\n          this._unloadLastScene,\n          this._loadCurrentScene,\n          this._initializeCurrentScene,\n          this._addCurrentScene,\n          this._hideTransition,\n          this._enterCurrentScene,\n          this._startCurrentScene,\n        );\n        break;\n      case 'exitTransitionEnter':\n        this._queue.add(\n          this._exitLastScene,\n          this._showTransition,\n          this._destroyLastScene,\n          this._unloadLastScene,\n          this._loadCurrentScene,\n          this._initializeCurrentScene,\n          this._addCurrentScene,\n          this._hideTransition,\n          this._enterCurrentScene,\n          this._startCurrentScene,\n        );\n        break;\n      case 'immediate':\n      default:\n        this._queue.add(\n          this._destroyLastScene,\n          this._unloadLastScene,\n          this._loadCurrentScene,\n          this._initializeCurrentScene,\n          this._addCurrentScene,\n          this._enterCurrentScene,\n          this._startCurrentScene,\n        );\n        break;\n    }\n\n    this._queue.add(this._queueComplete);\n    this._queue.start();\n  }\n\n  public getSceneFromHash(): string | null {\n    let hash = window?.location?.hash;\n    if (hash) {\n      hash = hash.replace('#', '');\n      if (hash.length > 0) {\n        for (let i = 0; i < this.list.length; i++) {\n          if (this.list[i]?.id?.toLowerCase() === hash.toLowerCase()) {\n            return this.list[i].id;\n          }\n        }\n      }\n    }\n    return null;\n  }\n\n  protected getCoreSignals(): string[] {\n    return ['onSceneChangeStart', 'onSceneChangeComplete'];\n  }\n\n  protected getCoreFunctions(): string[] {\n    return ['loadScene'];\n  }\n\n  private _listenForHashChange() {\n    window.addEventListener('hashchange', () => {\n      const sceneId = this.getSceneFromHash();\n      if (sceneId) {\n        void this.loadScene(sceneId);\n      }\n    });\n  }\n\n  private async _createCurrentScene() {\n    const sceneItem = this.list.find((scene) => scene.id === this._currentSceneId)!;\n    let SceneClass: Constructor<IScene> | undefined = undefined;\n\n    if (this._sceneModules.has(this._currentSceneId)) {\n      SceneClass = this._sceneModules.get(this._currentSceneId);\n    } else {\n      const module = await getDynamicModuleFromImportListItem(sceneItem);\n      if (!module) {\n        throw new Error(`Couldn't load ${this._currentSceneId}\"`);\n      }\n\n      if ((module as any)[this._currentSceneId]) {\n        SceneClass = (module as any)[this._currentSceneId];\n      } else {\n        SceneClass = module;\n      }\n\n      if (SceneClass) {\n        this._sceneModules.set(this._currentSceneId, SceneClass);\n      }\n    }\n\n    if (!SceneClass) {\n      throw new Error(`Couldn't load ${this._currentSceneId}\"`);\n    }\n\n    this.currentScene = new SceneClass();\n    this.currentScene.id = this._currentSceneId;\n    if (sceneItem?.assets) {\n      this.currentScene.assets = sceneItem.assets;\n    }\n    if (sceneItem.autoUnloadAssets !== undefined) {\n      this.currentScene.autoUnloadAssets = sceneItem.autoUnloadAssets;\n    }\n\n    this.onSceneChangeStart.emit({ exiting: this._lastScene?.id || null, entering: this.currentScene.id });\n  }\n\n  private _queueComplete() {\n    if (this.isFirstScene) {\n      // background required assets\n      this.app.assets.loadBackground();\n    }\n    this.isFirstScene = false;\n\n    // load any background assets for the current scene\n    void this.app.assets.loadSceneAssets(this.currentScene, true);\n\n    this._lastScene = null;\n    this.onSceneChangeComplete.emit({ current: this.currentScene.id });\n    this._queue = null;\n    return Promise.resolve();\n  }\n\n  private async _destroyLastScene(): Promise<void> {\n    if (!this._lastScene) {\n      return Promise.resolve();\n    }\n    this.view.removeChild(this._lastScene as any);\n    this._lastScene.destroy();\n    return Promise.resolve();\n  }\n\n  private async _exitLastScene(): Promise<void> {\n    if (!this._lastScene) {\n      return Promise.resolve();\n    }\n    await this._lastScene.exit();\n    return Promise.resolve();\n  }\n\n  private async _loadCurrentScene(): Promise<any> {\n    await this.app.assets.loadSceneAssets(this.currentScene);\n  }\n\n  private async _unloadLastScene(): Promise<any> {\n    if (this._lastScene && this._lastScene.autoUnloadAssets) {\n      return this.app.assets.unloadSceneAssets(this._lastScene);\n    }\n    return Promise.resolve();\n  }\n\n  private async _initializeCurrentScene(): Promise<void> {\n    await this.currentScene.initialize();\n    // wait one tick so everything in the scene has had a chance to render before triggering the resize\n    this.app.ticker.addOnce(() => {\n      this.currentScene.resize(this.app.size);\n    });\n\n    return Promise.resolve();\n  }\n\n  private _addCurrentScene(): Promise<void> {\n    this.view.addChild(this.currentScene as any);\n    return Promise.resolve();\n  }\n\n  private _addCurrentSceneBehind(): Promise<void> {\n    this.view.addChildAt(this.currentScene as any, 0);\n    return Promise.resolve();\n  }\n\n  private async _enterCurrentScene(): Promise<void> {\n    await this.currentScene.enter();\n    if (this.isFirstScene && this.splash.hideWhen === 'firstSceneEnter') {\n      await this._hideSplash();\n    }\n    return Promise.resolve();\n  }\n\n  private async _startCurrentScene(): Promise<void> {\n    void this.currentScene.start();\n    return Promise.resolve();\n  }\n\n  private async _showTransition(): Promise<void> {\n    if (this.isFirstScene) {\n      return Promise.resolve();\n    }\n    if (this.transition) {\n      this.transition.active = true;\n      this.transition.renderable = true;\n      this.transition.visible = true;\n      this.transition.progress = 0;\n      await this.transition.enter();\n    }\n  }\n\n  private async _hideTransition(): Promise<void> {\n    if (this.isFirstScene) {\n      return Promise.resolve();\n    }\n    if (this.transition) {\n      await this.transition.exit();\n      this.transition.progress = 0;\n      this.transition.visible = false;\n      this.transition.renderable = false;\n      this.transition.active = false;\n    }\n  }\n\n  private async _showSplash() {\n    await this.splash.view?.enter();\n  }\n\n  private async _hideSplash(): Promise<void> {\n    await this.splash.view?.exit();\n    this.splash.view?.destroy();\n    this.splash.view?.parent?.removeChild(this.splash.view);\n    this.splash.view = null;\n  }\n\n  private _createDebugMenu() {\n    this._debugMenu = document.createElement('div');\n    this._debugMenu.id = 'scene-debug';\n    this._debugMenu.style.cssText =\n      'position: absolute; bottom: 0; left:0; width:48px; height:48px; z-index: 1000; background-color:rgba(0,0,0,0.8); color:white; border-top-right-radius:8px;';\n    const icon = document.createElement('i');\n    icon.style.cssText =\n      'cursor:pointer; position:absolute;width:100%; font-style:normal; font-size:20px; top:50%; left:50%; transform:translate(-50%, -50%); text-align:center; pointer-events:none';\n    icon.innerHTML = '🎬';\n    this._debugMenu.appendChild(icon);\n\n    (Application.containerElement || document.body).appendChild(this._debugMenu);\n\n    this._sceneSelect = document.createElement('select');\n    this._sceneSelect.style.cssText =\n      'padding:0; border-radius:5px; opacity:0; width:48px; height:48px; cursor:pointer';\n    this._sceneSelect.value = this.defaultScene || '';\n\n    const defaultOption = document.createElement('option');\n    defaultOption.value = '';\n    defaultOption.innerHTML = 'Select a scene';\n    defaultOption.setAttribute('disabled', 'disabled');\n    this._sceneSelect.appendChild(defaultOption);\n\n    // create option groups\n    const groups = new Map<string, HTMLOptGroupElement>();\n\n    this.list.forEach((item) => {\n      if (item.debugGroup) {\n        if (!groups.has(item.debugGroup)) {\n          const group = document.createElement('optgroup');\n          group.label = item.debugGroup;\n          groups.set(item.debugGroup, group);\n          this._sceneSelect.appendChild(group);\n        }\n      }\n    });\n\n    if (groups.size > 0) {\n      const nogroups = this.list.filter((item) => !item.debugGroup);\n      if (nogroups.length) {\n        const group = document.createElement('optgroup');\n        group.label = 'Other';\n        groups.set('Other', group);\n        this._sceneSelect.appendChild(group);\n        nogroups.forEach((item) => {\n          item.debugGroup = 'Other';\n        });\n      }\n    }\n\n    this.list.forEach((value) => {\n      const option = document.createElement('option');\n      option.value = value.id;\n      option.innerHTML = value?.debugLabel || value.id;\n      if (value.id === this.defaultScene) {\n        option.selected = true;\n      }\n      if (value.debugGroup) {\n        groups.get(value.debugGroup)?.appendChild(option);\n      } else {\n        this._sceneSelect.appendChild(option);\n      }\n    });\n\n    this._debugMenu.appendChild(this._sceneSelect);\n\n    this._debugMenu.addEventListener('change', (e: Event) => {\n      if (this._queue) {\n        e.preventDefault();\n        return;\n      }\n      const target = e.target as HTMLSelectElement;\n      const sceneId = target.value;\n      if (sceneId) {\n        window.location.hash = sceneId.toLowerCase();\n      }\n    });\n\n    this.onSceneChangeStart.connect(this._disableDebugMenu);\n    this.onSceneChangeComplete.connect(this._enableDebugMenu);\n  }\n\n  private _enableDebugMenu() {\n    this._debugMenu?.querySelector('select')?.removeAttribute('disabled');\n  }\n\n  private _disableDebugMenu() {\n    this._debugMenu?.querySelector('select')?.setAttribute('disabled', 'disabled');\n  }\n}\n", "import { Application } from '../Application';\nimport type { IPlugin } from './Plugin';\nimport { Plugin } from './Plugin';\nimport { Signal } from '../signals';\nimport type { Size } from '../utils';\nimport { bindAllMethods } from '../utils';\n\nexport interface IWebEventsPlugin extends IPlugin {\n  onResize: Signal<(size: { width: number; height: number }) => void>;\n  onVisibilityChanged: Signal<(visible: boolean) => void>;\n}\n\n/**\n * Maintains a list of callbacks for specific web events and invokes callbacks when event occurs.\n */\nexport class WebEventsPlugin extends Plugin implements IWebEventsPlugin {\n  public readonly id = 'webEvents';\n\n  // signals\n  public onResize: Signal<(size: Size) => void> = new Signal<(size: Size) => void>();\n  public onVisibilityChanged: Signal<(visible: boolean) => void> = new Signal<(visible: boolean) => void>();\n\n  /**\n   * Creates callback arrays and registers to web events.\n   */\n  constructor() {\n    super();\n    bindAllMethods(this);\n  }\n\n  get app(): Application {\n    return Application.getInstance();\n  }\n\n  public initialize(): void {\n    document.addEventListener('visibilitychange', this._onVisibilityChanged, false);\n    window.addEventListener('pagehide', this._onPageHide, false);\n    window.addEventListener('pageshow', this._onPageShow, false);\n    window.addEventListener('resize', this._onResize);\n    document.addEventListener('fullscreenchange', this._onResize);\n  }\n\n  public destroy() {\n    document.removeEventListener('visibilitychange', this._onVisibilityChanged, false);\n    window.removeEventListener('resize', this._onResize);\n    document.removeEventListener('fullscreenchange', this._onResize);\n    window.removeEventListener('pagehide', this._onPageHide, false);\n    window.removeEventListener('pageshow', this._onPageShow, false);\n  }\n\n  protected getCoreSignals(): string[] {\n    return ['onResize', 'onVisibilityChanged'];\n  }\n\n  /**\n   * Called when the browser visibility changes. Passes the `hidden` flag of the document to all callbacks.\n   */\n  private _onVisibilityChanged(): void {\n    this.onVisibilityChanged.emit(!document.hidden);\n  }\n\n  /**\n   * Called when the browser resizes.\n   */\n  private _onResize(): void {\n    const el = this.app.renderer.canvas?.parentElement;\n    let screenWidth = window.innerWidth;\n    let screenHeight = window.innerHeight;\n    if (el && el?.getBoundingClientRect()) {\n      screenWidth = el.offsetWidth;\n      screenHeight = el.offsetHeight;\n    }\n    this.onResize.emit({ width: screenWidth, height: screenHeight });\n  }\n\n  /**\n   * Called when the page is hidden.\n   * Some browsers (like Safari) don't support the `visibilitychange` event, so we also listen for `pagehide`.\n   * We're just mimicking the `visibilitychange` event here.\n   */\n  private _onPageHide() {\n    this.onVisibilityChanged.emit(false);\n  }\n\n  /**\n   * Called when the page is shown.\n   * Some browsers (like Safari) don't support the `visibilitychange` event, so we also listen for `pageshow`.\n   * We're just mimicking the `visibilitychange` event here.\n   * @private\n   */\n  private _onPageShow() {\n    this.onVisibilityChanged.emit(true);\n  }\n}\n", "import type { Application } from '../../Application';\nimport { IPlugin, Plugin } from '../../plugins';\n\n/**\n * Interface for a storage adapter module.\n */\nexport interface IStorageAdapter extends IPlugin {\n  /**\n   * Saves data under a specified key.\n   * @param _key\n   * @param _data\n   * @param _rest\n   * @returns {Promise<void> | void} A promise that resolves when the data has been saved, or void if the save operation is synchronous.\n   */\n  save<TExpectedSaveResult = any>(\n    _key: string,\n    _data: any,\n    ..._rest: any[]\n  ): Promise<TExpectedSaveResult> | TExpectedSaveResult | any;\n\n  /**\n   * Loads data from a specified key.\n   * @template T The type of the data to load.\n   * @returns {Promise<T> | T | null} A promise that resolves with the loaded data, or the loaded data if the load operation is synchronous, or null if no data was found.\n   * @param _key\n   * @param args\n   */\n  load<TExpectedLoadResult = any>(\n    _key: string,\n    ...args: any[]\n  ): Promise<TExpectedLoadResult> | TExpectedLoadResult | undefined;\n}\n\nexport interface StorageAdapterListItem {\n  id: string;\n  path: string;\n  module: () => Promise<new () => IStorageAdapter>;\n}\n\n/**\n * A class representing a storage adapter module.\n * @template T The type of the application that the module belongs to.\n */\nexport class StorageAdapter<T extends Application = Application> extends Plugin<T> implements IStorageAdapter {\n  /**\n   * Creates a new StorageAdapter.\n   * @param {string} id The ID of the adapter. Default is 'StorageAdapter'.\n   */\n  constructor(public readonly id: string = 'StorageAdapter') {\n    super(id);\n  }\n\n  /**\n   * Loads data from a specified key.\n   * @template T The type of the data to load.\n   * @param {string} _key The key from which to load the data.\n   * @returns {Promise<T> | T | null} A promise that resolves with the loaded data, or the loaded data if the load operation is synchronous, or null if no data was found.\n   */\n  load<TExpectedLoadResult = any>(_key: string): Promise<TExpectedLoadResult> | TExpectedLoadResult | undefined;\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async load<TExpectedLoadResult = any>(_key: string, ...args: any[]): Promise<TExpectedLoadResult | undefined> {\n    return undefined;\n  }\n\n  /**\n   * Saves data under a specified key.\n   * @returns {Promise<void> | void} A promise that resolves when the data has been saved, or void if the save operation is synchronous.\n   * @param _key\n   * @param _data\n   * @param _rest\n   */\n\n  save<TExpectedSaveResult = any>(\n    _key: string,\n    _data: any,\n    ..._rest: any[]\n  ): Promise<TExpectedSaveResult> | TExpectedSaveResult | any;\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async save<TExpectedSaveResult = any>(_key: string, _data: any, ..._rest: any[]): Promise<TExpectedSaveResult | any> {\n    void _key;\n    void _data;\n    void _rest;\n    return undefined;\n  }\n}\n", "import type { IApplication } from '../../core';\nimport { StorageAdapter } from './StorageAdapter';\n\nexport type DataSchema = {\n  [key: string]: any;\n};\n\ntype DeepPartial<T> = {\n  [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P];\n};\n/**\n * Interface for the options of the LocalStorageAdapter.\n */\nexport interface IDataAdapterOptions<D extends DataSchema = DataSchema> {\n  /**\n   * The namespace to use for the keys in the local storage.\n   */\n  initial: Partial<D>;\n  namespace: string;\n  overrideWithLocalStorage: boolean;\n  backupAll: boolean;\n  backupKeys: Array<keyof D>;\n}\n\nexport interface IDataAdapter<D extends DataSchema = DataSchema> {\n  load<K extends keyof D>(key: K): D[K] | undefined;\n  save<K extends keyof D>(key: K, data: D[K]): D;\n  set(data: DeepPartial<D>, merge?: boolean): D;\n  get(): D;\n  clear<K extends keyof D>(key: K): void;\n}\n\n/**\n * A class representing a storage adapter that uses the local storage.\n */\nexport class DataAdapter<D extends DataSchema = DataSchema> extends StorageAdapter implements IDataAdapter<D> {\n  /**\n   * The namespace to use for the keys in the local storage.\n   */\n  public data: D;\n  private backupKeys: Array<keyof D> = [];\n  private backupAll: boolean = false;\n  private namespace: string = '';\n  private overrideWithLocalStorage: boolean = true;\n  constructor(public readonly id: string = 'data') {\n    super(id);\n  }\n  /**\n   * Destroys the adapter.\n   */\n  destroy() {\n    this.data = {} as D;\n  }\n\n  /**\n   * Initializes the adapter.\n   * @param {IApplication} _app The application that the adapter belongs to.\n   * @param {Partial<ILocalStorageAdapterOptions>} options The options to initialize the adapter with.\n   */\n  public initialize(_app: IApplication, options?: Partial<IDataAdapterOptions<D>>): void {\n    this.namespace = options?.namespace || _app.config?.id || 'data';\n    this.data = (options?.initial as D) || ({} as D);\n    this.backupKeys = options?.backupKeys || [];\n    this.backupAll = options?.backupAll || false;\n    this.overrideWithLocalStorage = options?.overrideWithLocalStorage === false ? false : true;\n\n    if (this.backupAll || this.backupKeys.length > 0) {\n      if (this.overrideWithLocalStorage) {\n        this.restoreFromLocalStorage(this.backupKeys);\n      }\n      this.backupToLocalStorage(this.backupKeys);\n    }\n  }\n\n  /**\n   * Saves data under a specified key in the local storage.\n   * @param {string} key The key under which to save the data.\n   * @param {any} data The data to save.\n   * @returns {any} The saved data.\n   */\n  save<K extends keyof D>(key: K, data: D[K]): D {\n    this.data[key] = data;\n    if (this.backupAll || this.backupKeys.includes(key)) {\n      this.backupToLocalStorage([key]);\n    }\n    return data;\n  }\n\n  /**\n   * Loads data from a specified key in the local storage.\n   * @template T The type of the data to load.\n   * @param {string} key The key from which to load the data.\n   * @returns {T} The loaded data.\n   */\n  load<K extends keyof D>(key: K): D[K] | undefined {\n    return this.data[key];\n  }\n\n  set(data: DeepPartial<D>, merge: boolean = true): D {\n    if (merge) {\n      this.data = deepMerge({ ...this.data }, data);\n    } else {\n      this.data = data as D;\n    }\n    if (this.backupAll || this.backupKeys.length > 0) {\n      this.backupToLocalStorage(this.backupKeys);\n    }\n    return this.data;\n  }\n\n  get(): D {\n    return this.data;\n  }\n\n  /**\n   * Deletes data from a specified key in the local storage.\n   * @param {string} key The key from which to delete the data.\n   */\n  clear<K extends keyof D>(key: K) {\n    delete this.data[key];\n    localStorage.removeItem(`${this.namespace}-${key as string}`);\n  }\n\n  /**\n   * Backs up specified keys or all data to local storage.\n   * @param {Array<keyof D>} [keys] The keys to back up. If not provided, all data will be backed up.\n   */\n  private backupToLocalStorage(keys?: Array<keyof D>): void {\n    const dataToBackup =\n      keys && keys?.length > 0 ? Object.fromEntries(keys.map((key) => [key, this.data[key]])) : this.data;\n    \n    for (const key in dataToBackup) {\n      localStorage.setItem(`${this.namespace}-${key}`, JSON.stringify(dataToBackup[key]));\n    }\n  }\n\n  /**\n   * Restores data from local storage for specified keys or all data.\n   * @param {Array<keyof D>} [keys] The keys to restore. If not provided, all data will be restored.\n   */\n  private restoreFromLocalStorage(keys?: Array<keyof D>): void {\n    const keysToRestore = keys && keys?.length > 0 ? keys : (Object.keys(this.data) as Array<keyof D>);\n    keysToRestore.forEach((key) => {\n      const loadedData = localStorage.getItem(`${this.namespace}-${key as string}`);\n      if (loadedData !== null) {\n        this.data[key] = JSON.parse(loadedData);\n      }\n    });\n  }\n}\n\nfunction deepMerge<T extends Record<string, any>>(target: T, source: DeepPartial<T>): T {\n  for (const key in source) {\n    if (\n      source[key] !== undefined &&\n      Object.prototype.toString.call(source[key]) === '[object Object]' &&\n      key in target &&\n      typeof target[key] === 'object'\n    ) {\n      target[key] = deepMerge(target[key], source[key] as T[Extract<keyof T, string>]);\n    } else if (source[key] !== undefined) {\n      target[key] = source[key] as T[Extract<keyof T, string>];\n    }\n  }\n  return target;\n}\n", "import type { ImportList } from '../utils';\nimport { AssetsPlugin } from './AssetsPlugin';\nimport { KeyboardPlugin } from './KeyboardPlugin';\nimport type { IPlugin } from './Plugin';\nimport { PopupManagerPlugin } from './PopupManagerPlugin';\nimport { ResizerPlugin } from './ResizerPlugin';\nimport { SceneManagerPlugin } from './SceneManagerPlugin';\nimport { WebEventsPlugin } from './WebEventsPlugin';\nimport { ActionsPlugin } from './actions';\nimport { AudioManagerPlugin } from './audio';\nimport { FocusManagerPlugin } from './focus';\nimport { i18nPlugin } from './i18nPlugin';\nimport { InputPlugin } from './input';\n\nexport const defaultPlugins: ImportList<IPlugin> = [\n  {\n    id: 'webEvents',\n    module: WebEventsPlugin,\n    namedExport: 'WebEventsPlugin',\n  },\n  {\n    id: 'resizer',\n    module: ResizerPlugin,\n    namedExport: 'ResizerPlugin',\n  },\n  {\n    id: 'assets',\n    module: AssetsPlugin,\n    namedExport: 'AssetsPlugin',\n  },\n  {\n    id: 'scenes',\n    module: SceneManagerPlugin,\n    namedExport: 'SceneManagerPlugin',\n  },\n  {\n    id: 'actions',\n    module: ActionsPlugin,\n    namedExport: 'ActionsPlugin',\n  },\n  {\n    id: 'input',\n    module: InputPlugin,\n    namedExport: 'InputPlugin',\n  },\n  {\n    id: 'keyboard',\n    module: KeyboardPlugin,\n    namedExport: 'KeyboardPlugin',\n  },\n  {\n    id: 'focus',\n    module: FocusManagerPlugin,\n    namedExport: 'FocusManagerPlugin',\n  },\n  {\n    id: 'popups',\n    module: PopupManagerPlugin,\n    namedExport: 'PopupManagerPlugin',\n  },\n  {\n    id: 'audio',\n    module: AudioManagerPlugin,\n    namedExport: 'AudioManagerPlugin',\n  },\n  {\n    id: 'i18n',\n    module: i18nPlugin,\n    namedExport: 'i18nPlugin',\n  },\n  \n] as const;\n", "import type { AppConfig, IApplication, IApplicationOptions, ICoreFunctions, ICoreSignals } from './core';\nimport { coreFunctionRegistry, coreSignalRegistry, generateAdapterList, generatePluginList } from './core';\nimport type {\n  Action,\n  ActionContext,\n  ActionSignal,\n  IAssetsPlugin,\n  IAudioManagerPlugin,\n  IControls,\n  IFocusManagerPlugin,\n  Ii18nPlugin,\n  IInputPlugin,\n  IKeyboardPlugin,\n  IPlugin,\n  IPopupManagerPlugin,\n  IResizerPlugin,\n  ISceneManagerPlugin,\n  IWebEventsPlugin,\n} from './plugins';\n\nimport type { AssetInitOptions, AssetsManifest, DestroyOptions, Renderer, RendererDestroyOptions } from 'pixi.js';\nimport { Assets, isMobile, Application as PIXIPApplication, Point } from 'pixi.js';\nimport type { DataSchema, IDataAdapter, IStorageAdapter, IStore } from './store';\nimport { DataAdapter, Store } from './store';\nimport type { ImportList, ImportListItem, Size } from './utils';\nimport { bindAllMethods, getDynamicModuleFromImportListItem, isDev, isPromise, Logger } from './utils';\n\nimport type { IActionsPlugin } from './plugins/actions';\nimport type { IVoiceOverPlugin } from './plugins/audio/VoiceOverPlugin';\nimport type { ICaptionsPlugin } from './plugins/captions';\nimport { defaultPlugins } from './plugins/defaults';\nimport { Signal } from './signals';\n\nconst defaultApplicationOptions: Partial<IApplicationOptions> = {\n  antialias: false,\n  autoStart: true,\n  resizeToContainer: false,\n  backgroundColor: 0x0,\n  backgroundAlpha: 1,\n  clearBeforeRender: false,\n  context: null,\n  eventFeatures: undefined,\n  eventMode: undefined,\n  hello: false,\n  powerPreference: 'high-performance',\n  premultipliedAlpha: false,\n  preserveDrawingBuffer: false,\n  resizeTo: undefined,\n  sharedTicker: true,\n  view: undefined,\n  autoDensity: false,\n  resolution: Math.max(window.devicePixelRatio, 2),\n  // dill pixel options\n  useHash: isDev,\n  showSceneDebugMenu: isDev,\n  showStats: isDev,\n  useStore: true,\n  useSpine: false,\n  useVoiceover: false,\n  storageAdapters: [],\n  plugins: [],\n  scenes: [],\n  defaultSceneLoadMethod: 'immediate',\n  assets: {\n    manifest: './assets.json',\n  },\n};\n\nexport class Application<\n    D extends DataSchema = DataSchema,\n    C extends ActionContext = ActionContext,\n    A extends Action = Action,\n    R extends Renderer = Renderer,\n  >\n  extends PIXIPApplication<R>\n  implements IApplication<D, C, A>\n{\n  public static containerElement: HTMLElement;\n  protected static instance: IApplication<DataSchema, ActionContext, Action>;\n  public __dill_pixel_method_binding_root = true;\n  // config\n  public config: Partial<IApplicationOptions<D>>;\n  public plugins: ImportList<IPlugin>;\n  public storageAdapters: ImportList<IStorageAdapter>;\n  public manifest: string | AssetsManifest | undefined;\n  public onPause = new Signal<() => void>();\n  public onResume = new Signal<() => void>();\n  // signals\n  public onResize = new Signal<(size: Size) => void>();\n  // plugins\n  protected _plugins: Map<string, IPlugin> = new Map();\n  // default plugins\n  protected _assetManager: IAssetsPlugin;\n  protected _sceneManager: ISceneManagerPlugin;\n  protected _webEventsManager: IWebEventsPlugin;\n  protected _keyboardManager: IKeyboardPlugin;\n  protected _focusManager: IFocusManagerPlugin;\n  protected _popupManager: IPopupManagerPlugin;\n  protected _audioManager: IAudioManagerPlugin;\n  protected _voiceoverPlugin: IVoiceOverPlugin;\n  protected _captionsPlugin: ICaptionsPlugin;\n  protected _actions: ActionSignal;\n  protected _isBooting: boolean = true;\n\n  protected _env: Record<string, string> = (import.meta as any).env || {};\n\n  get env() {\n    return this._env;\n  }\n\n  protected _paused: boolean = false;\n  public get paused(): boolean {\n    return this._paused;\n  }\n\n  public set paused(paused: boolean) {\n    this._paused = paused;\n    if (this._paused) {\n      this.onPause.emit();\n    } else {\n      this.onResume.emit();\n    }\n  }\n\n  public resume() {\n    this.paused = false;\n  }\n\n  public pause() {\n    this._paused = true;\n  }\n\n  public togglePause() {\n    this._paused = !this._paused;\n  }\n\n  constructor() {\n    super();\n    bindAllMethods(this);\n  }\n\n  protected _appVersion: string | number;\n\n  public get appVersion() {\n    try {\n      this._appVersion = __DILL_PIXEL_APP_VERSION;\n    } catch (e) {\n      this._appVersion = -1;\n    }\n\n    return this._appVersion;\n  }\n\n  protected _appName: string;\n\n  public get appName(): string {\n    if (!this._appName) {\n      try {\n        this._appName = __DILL_PIXEL_APP_NAME;\n      } catch (e) {\n        this._appName = 'n/a';\n      }\n    }\n    return this._appName;\n  }\n\n  protected _i18n: Ii18nPlugin;\n\n  public get i18n(): Ii18nPlugin {\n    if (!this._i18n) {\n      this._i18n = this.getPlugin<Ii18nPlugin>('i18n');\n    }\n    return this._i18n;\n  }\n\n  protected _resizer: IResizerPlugin;\n\n  public get resizer(): IResizerPlugin {\n    if (!this._resizer) {\n      this._resizer = this.getPlugin<IResizerPlugin>('resizer');\n    }\n    return this._resizer;\n  }\n\n  // actions\n  protected _actionsPlugin: IActionsPlugin<C>;\n\n  public get actionsPlugin(): IActionsPlugin<C> {\n    if (!this._actionsPlugin) {\n      this._actionsPlugin = this.getPlugin<IActionsPlugin<C>>('actions');\n    }\n    return this._actionsPlugin;\n  }\n\n  // input\n  protected _input: IInputPlugin;\n\n  public get input(): IInputPlugin {\n    if (!this._input) {\n      this._input = this.getPlugin<IInputPlugin>('input');\n    }\n    return this._input;\n  }\n\n  // controls\n  public get controls(): IControls {\n    if (!this._input) {\n      this._input = this.getPlugin<IInputPlugin>('input');\n    }\n    return this._input.controls;\n  }\n\n  // store\n  protected _store: IStore;\n\n  public get store(): IStore {\n    return this._store;\n  }\n\n  // size\n  protected _center = new Point(0, 0);\n\n  public get center(): Point {\n    return this._center;\n  }\n\n  public get assets(): IAssetsPlugin {\n    if (!this._assetManager) {\n      this._assetManager = this.getPlugin<IAssetsPlugin>('assets');\n    }\n    return this._assetManager;\n  }\n\n  public get scenes(): ISceneManagerPlugin {\n    if (!this._sceneManager) {\n      this._sceneManager = this.getPlugin<ISceneManagerPlugin>('scenes');\n    }\n    return this._sceneManager;\n  }\n\n  public get webEvents(): IWebEventsPlugin {\n    if (!this._webEventsManager) {\n      this._webEventsManager = this.getPlugin<IWebEventsPlugin>('webEvents');\n    }\n    return this._webEventsManager;\n  }\n\n  public get keyboard(): IKeyboardPlugin {\n    if (!this._keyboardManager) {\n      this._keyboardManager = this.getPlugin<IKeyboardPlugin>('keyboard');\n    }\n    return this._keyboardManager;\n  }\n\n  public get focus(): IFocusManagerPlugin {\n    if (!this._focusManager) {\n      this._focusManager = this.getPlugin<IFocusManagerPlugin>('focus');\n    }\n    return this._focusManager;\n  }\n\n  get size() {\n    return this.resizer.size;\n  }\n\n  public get popups(): IPopupManagerPlugin {\n    if (!this._popupManager) {\n      this._popupManager = this.getPlugin<IPopupManagerPlugin>('popups');\n    }\n    return this._popupManager;\n  }\n\n  public get audio(): IAudioManagerPlugin {\n    if (!this._audioManager) {\n      this._audioManager = this.getPlugin<IAudioManagerPlugin>('audio');\n    }\n    return this._audioManager;\n  }\n\n  public get actionContext(): C {\n    return this.actionsPlugin.context;\n  }\n\n  public set actionContext(context: C) {\n    this.actionsPlugin.context = context;\n  }\n\n  public get voiceover(): IVoiceOverPlugin {\n    if (!this._voiceoverPlugin) {\n      this._voiceoverPlugin = this.getPlugin<IVoiceOverPlugin>(\n        'voiceover',\n        this._isBooting || this.config.useVoiceover,\n      );\n    }\n    return this._voiceoverPlugin;\n  }\n\n  public get captions(): ICaptionsPlugin {\n    if (!this._captionsPlugin) {\n      this._captionsPlugin = this.getPlugin<ICaptionsPlugin>('captions', this._isBooting || this.config.useVoiceover);\n    }\n    return this._captionsPlugin;\n  }\n\n  get isMobile() {\n    return isMobile.any;\n  }\n\n  get isTouch() {\n    return 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n  }\n\n  get signal(): ICoreSignals {\n    return coreSignalRegistry;\n  }\n\n  get func(): ICoreFunctions {\n    return coreFunctionRegistry;\n  }\n\n  get exec(): ICoreFunctions {\n    return coreFunctionRegistry;\n  }\n\n  // views\n  protected _views: any[];\n\n  private get views(): any[] {\n    if (!this._views) {\n      this._views = [this.scenes.view, this.popups.view];\n      if (this.scenes.splash.view) {\n        this._views.push(this.scenes.splash.view);\n      }\n      if (this.scenes.transition) {\n        this._views.push(this.scenes.transition);\n      }\n      if (this.captions?.view) {\n        this._views.push(this.captions.view);\n      }\n    }\n    return this._views;\n  }\n\n  public static getInstance<T extends Application = Application>(): T {\n    return Application.instance as T;\n  }\n\n  /**\n   * Destroy the application\n   * This will destroy all plugins and the store\n   * @param {RendererDestroyOptions} rendererDestroyOptions\n   * @param {DestroyOptions} options\n   */\n  public destroy(rendererDestroyOptions?: RendererDestroyOptions, options?: DestroyOptions) {\n    this._plugins.forEach((plugin) => {\n      plugin.destroy();\n    });\n    this.store.destroy();\n    super.destroy(rendererDestroyOptions, options);\n  }\n\n  public setContainer(container: HTMLElement) {\n    if (!Application.containerElement) {\n      Application.containerElement = container;\n    }\n  }\n\n  public async initialize(config: AppConfig<D>): Promise<IApplication<D, C, A>> {\n    if (Application.instance) {\n      throw new Error('Application is already initialized');\n    }\n    Application.instance = this as unknown as IApplication<DataSchema, ActionContext, Action>;\n    this.config = Object.assign({ ...defaultApplicationOptions }, config as Partial<IApplicationOptions<D>>);\n\n    if (config.container) {\n      Application.containerElement = config.container;\n    }\n    // initialize the logger\n    Logger.initialize(this.config.logger);\n\n    await this.boot(this.config);\n    await this.preInitialize(this.config);\n    await this.initAssets();\n    // initialize the pixi application\n    await this.init(this.config);\n    // register the default plugins\n    await this.registerDefaultPlugins();\n\n    // internal setup\n    await this._setup();\n    this.plugins = await generatePluginList<IPlugin>(this.config.plugins || []);\n\n    for (let i = 0; i < this.plugins.length; i++) {\n      const listItem = this.plugins[i];\n      if (listItem && listItem?.autoLoad !== false) {\n        await this.loadPlugin(listItem);\n      }\n    }\n\n    // register the applications custom plugins\n    await this.registerPlugins();\n\n    // add the store if it's enabled\n    if (this.config.useStore) {\n      // register any storage adapters passed through the config\n      this.storageAdapters = await generateAdapterList(this.config.storageAdapters || []);\n      for (let i = 0; i < this.storageAdapters.length; i++) {\n        const listItem = this.storageAdapters[i];\n        if (this.store.hasAdapter(listItem.id)) {\n          Logger.error(`Storage Adapter with id \"${listItem.id}\" already registered. Not registering.`);\n          continue;\n        }\n        const storageAdapter = await getDynamicModuleFromImportListItem(listItem);\n        await this.registerStorageAdapter(new storageAdapter(listItem.id), listItem.options);\n      }\n      // also call the registerStorageAdapters method to allow for custom storage adapters to be registered\n      await this.registerStorageAdapters();\n    }\n\n    await this.setup();\n    await this.loadDefaultScene();\n\n    // focus the canvas\n    this.renderer.canvas.focus();\n\n    if (this.config.container) {\n      this.config.container.classList.add('loaded');\n    }\n\n    this._isBooting = false;\n    // return the Application instance to the create method, if needed\n    return Application.instance as unknown as IApplication<D, C, A>;\n  }\n\n  public getPlugin<T extends IPlugin>(pluginName: string, debug: boolean = false): T {\n    const plugin = this._plugins.get(pluginName) as T;\n    if (!plugin && debug) {\n      Logger.error(`Plugin with name \"${pluginName}\" not found.`);\n    }\n    return plugin;\n  }\n\n  async postInitialize(): Promise<void> {\n    (globalThis as any).__PIXI_APP__ = this;\n    this._resize();\n\n    this._plugins.forEach((plugin) => {\n      plugin.postInitialize(this as unknown as IApplication<DataSchema>);\n    });\n\n    this.webEvents.onVisibilityChanged.connect((visible) => {\n      if (visible) {\n        this.audio.restore();\n      } else {\n        this.audio.suspend();\n      }\n    });\n  }\n\n  public getUnloadedPlugin(id: string): ImportListItem<IPlugin> | undefined {\n    return this.plugins?.find((plugin) => plugin.id === id);\n  }\n\n  async loadPlugin(listItem: ImportListItem, isDefault: boolean = false) {\n    if (this._plugins.has(listItem.id)) {\n      return await this.registerPlugin(this._plugins.get(listItem.id)!, listItem.options);\n    }\n    const plugin = await getDynamicModuleFromImportListItem(listItem);\n    const pluginInstance = new plugin(listItem.id);\n    if (pluginInstance.id !== listItem.id) {\n      pluginInstance.id = listItem.id;\n    }\n    let opts = listItem.options;\n    if (isDefault && !opts) {\n      opts = this.config[pluginInstance.id as keyof IApplicationOptions];\n    }\n    return await this.registerPlugin(pluginInstance, opts);\n  }\n\n  /**\n   * Gets an ActionSignal for the specified action type\n   * @template TActionData - The type of data associated with the action\n   * @param {A} action - The action to get the signal for\n   * @returns {ActionSignal<TActionData>} A signal that can be used to listen for the action\n   * @example\n   * // Listen for a 'jump' action\n   * app.actions('jump').connect((data) => {\n   *   player.jump(data.power);\n   * });\n   */\n  public actions<TActionData = any>(action: A): ActionSignal<TActionData> {\n    return this.actionsPlugin.getAction<TActionData>(action as Action);\n  }\n\n  /**\n   * Dispatches an action with optional data\n   * @template TActionData - The type of data to send with the action\n   * @param {A} action - The action to dispatch\n   * @param {TActionData} [data] - Optional data to send with the action\n   * @example\n   * // Send a 'jump' action with power data\n   * app.sendAction('jump', { power: 100 });\n   */\n  public sendAction<TActionData = any>(action: A, data?: TActionData) {\n    this.actionsPlugin.sendAction<TActionData>(action as Action, data);\n  }\n\n  /**\n   * Dispatches an action with optional data\n   * alias for sendAction\n   * @template TActionData - The type of data to send with the action\n   * @param {A} action - The action to dispatch\n   * @param {TActionData} [data] - Optional data to send with the action\n   * @example\n   * // Send a 'jump' action with power data\n   * app.action('jump', { power: 100 });\n   */\n  public action<TActionData = any>(action: A, data?: TActionData) {\n    this.actionsPlugin.sendAction<TActionData>(action as Action, data);\n  }\n\n  /**\n   * Checks if an action is currently active\n   * @param {A} action - The action to check\n   * @returns {boolean} True if the action is active, false otherwise\n   * @example\n   * // Check if the 'run' action is active\n   * if (app.isActionActive('run')) {\n   *   player.updateSpeed(runningSpeed);\n   * }\n   */\n  public isActionActive(action: A): boolean {\n    return this.input.controls.isActionActive(action);\n  }\n\n  /**\n   * Get a storage adapter by id\n   * @param {string} adapterId\n   * @returns {IStorageAdapter}\n   */\n  public getStorageAdapter(adapterId: string): IStorageAdapter {\n    return this.store.getAdapter(adapterId);\n  }\n\n  /**\n   * Get a storage adapter by id\n   * @param {string} adapterId\n   * @returns {IStorageAdapter}\n   */\n  public get data(): IDataAdapter<D> {\n    return this.store.getAdapter('data') as unknown as IDataAdapter<D>;\n  }\n  /**\n   * app hasn't been initialized yet\n   * @protected\n   * @example boot(){\n   *     console.log(this.appVersion);\n   * }\n   * returns {Promise<void> | void}\n   */\n  protected boot(config?: Partial<IApplicationOptions<D>>): Promise<void> | void;\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected async boot(config?: Partial<IApplicationOptions<D>>): Promise<void> {\n    console.log(\n      `%c App info - %c${this.appName} | %cv${this.appVersion} `,\n      `background: rgba(31, 41, 55, 1); color: #74b64c`,\n      `background: rgba(31, 41, 55, 1); color: #74b64c; font-weight:bold`,\n      `background: rgba(31, 41, 55, 1); color: #74b64c; font-weight:bold`,\n    );\n  }\n\n  /**\n   * Pre-initialize the application\n   * This is called before the application is initialized\n   * should register any pixi extensions, etc\n   * @param {Partial<IApplicationOptions>} config\n   * @returns {Promise<void>}\n   * @protected\n   */\n  protected async preInitialize(config: Partial<IApplicationOptions<D>>): Promise<void> {\n    if (config.useSpine) {\n      await this.loadPlugin({\n        id: 'SpinePlugin',\n        module: () => import('./plugins/spine/SpinePlugin'),\n        namedExport: 'SpinePlugin',\n      });\n    }\n\n    if (this.config.useStore) {\n      this._store = new Store();\n      this._store.initialize(this as unknown as IApplication<DataSchema>);\n      this.registerDefaultStorageAdapters();\n    }\n  }\n\n  // plugins\n  protected async registerPlugin(plugin: IPlugin, options?: any) {\n    if (this._plugins.has(plugin.id)) {\n      Logger.error(`Plugin with id \"${plugin.id}\" already registered. Not registering.`);\n      return plugin.initialize(this as unknown as IApplication<DataSchema>, options);\n    }\n    plugin.registerCoreFunctions();\n    plugin.registerCoreSignals();\n    this._plugins.set(plugin.id, plugin);\n    return plugin.initialize(this as unknown as IApplication<DataSchema>, options);\n  }\n\n  protected async registerDefaultPlugins() {\n    for (let i = 0; i < defaultPlugins.length; i++) {\n      const listItem = defaultPlugins[i];\n      await this.loadPlugin(listItem, true);\n    }\n    const showStats = this.config.showStats === true || (isDev && this.config.showStats !== false);\n    if (showStats) {\n      await this.loadPlugin({\n        id: 'stats',\n        module: () => import('./plugins/StatsPlugin'),\n        namedExport: 'StatsPlugin',\n      });\n    }\n    if (this.config.useVoiceover) {\n      await this.loadPlugin({\n        id: 'voiceover',\n        module: () => import('./plugins/audio/VoiceOverPlugin'),\n        namedExport: 'VoiceOverPlugin',\n        options: this.config['voiceover' as keyof IApplicationOptions] || undefined,\n      });\n      await this.loadPlugin({\n        id: 'captions',\n        module: () => import('./plugins/captions/CaptionsPlugin'),\n        namedExport: 'CaptionsPlugin',\n        options: this.config['captions' as keyof IApplicationOptions] || undefined,\n      });\n    }\n  }\n\n  protected async registerDefaultStorageAdapters() {\n    const dataAdapter = new DataAdapter();\n    await this.registerStorageAdapter(dataAdapter, this.config.data);\n  }\n\n  protected async registerPlugins() {\n    // override this method to register custom plugins,\n    // or do it in the app config during bootstrap\n    return Promise.resolve();\n  }\n\n  // storage\n  protected async registerStorageAdapters() {\n    // override this method to register custom storage adapters,\n    // or do it in the app config during bootstrap\n    return Promise.resolve();\n  }\n\n  protected async registerStorageAdapter(adapter: IStorageAdapter, adapterOptions: any): Promise<any> {\n    return this.store.registerAdapter(adapter, adapterOptions);\n  }\n\n  /**\n   * This is called after the application is initialized\n   * You can be sure that\n   * - all plugins are registered\n   * - the store is created, with all storage adapters registered\n   * @protected\n   */\n  protected setup(): Promise<void> | void;\n\n  protected async setup(): Promise<void> {\n    // override me to set up application specific stuff\n  }\n\n  protected async initAssets(): Promise<void> {\n    const opts: Partial<AssetInitOptions> = this.config.assets?.initOptions || {};\n    if (this.config.assets?.manifest) {\n      let manifest = this.config.assets.manifest || opts.manifest;\n      if (isPromise(manifest)) {\n        manifest = await manifest;\n      }\n      opts.manifest = manifest as AssetsManifest;\n    }\n\n    await Assets.init(opts);\n    /** @ts-expect-error manifest is not a public property */\n    this.manifest = Assets.resolver._manifest;\n  }\n\n  protected async loadDefaultScene(): Promise<void> {\n    return this.scenes.loadDefaultScene();\n  }\n\n  private async _resize() {\n    this.resizer.resize();\n\n    console.log('Application._resize', this.size);\n\n    this.ticker.addOnce(() => {\n      this._center.set(this.size.width * 0.5, this.size.height * 0.5);\n      this.views.forEach((view) => {\n        if (!view || !view.position) {\n          return;\n        }\n        view.position.set(this._center.x, this._center.y);\n      });\n      this.onResize.emit(this.size);\n    });\n  }\n  /**\n   * Called after the application is initialized\n   * Here we add application specific signal listeners, etc\n   * @returns {Promise<void>}\n   * @private\n   */\n  private async _setup(): Promise<void> {\n    // register for PIXI DevTools extension\n    if (isDev) {\n      (globalThis as any).__PIXI_APP__ = this;\n    }\n    void this._resize();\n    // connect onResize signal\n    this.webEvents.onResize.connect(this._resize, -1);\n\n    if (this.scenes.splash?.view && this.scenes.splash.zOrder === 'bottom') {\n      this._addSplash();\n    }\n    // scene manager\n    this.scenes.view.label = 'SceneManager';\n    this.stage.addChild(this.scenes.view);\n\n    if (this.scenes.splash?.view && this.scenes.splash.zOrder === 'top') {\n      this._addSplash();\n    }\n    if (this.scenes.transition) {\n      this.scenes.transition.label = 'SceneManager:: Transition';\n      this.stage.addChild(this.scenes.transition);\n    }\n\n    // popup manager\n    this.stage.addChild(this.popups.view);\n\n    // focus manager\n    this.focus.view.label = 'FocusManager';\n    this.stage.addChild(this.focus.view);\n\n    // is touch device\n    return Promise.resolve();\n  }\n\n  private _addSplash() {\n    if (this.scenes.splash.view) {\n      this.scenes.splash.view.label = 'SceneManager:: Splash';\n      this.stage.addChild(this.scenes.splash.view);\n    }\n  }\n}\n"],
  "mappings": "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",
  "names": ["source", "pt", "t", "ls", "ns", "cs", "hasDoctypeChildThatIsNotChild", "node", "Text", "ai", "v", "getTextContent", "source", "a", "k", "end", "m", "config", "value", "ns", "DOMParser", "source", "sax", "normalize", "fn", "source", "_e", "_e", "WebGPURenderer", "WebGLRenderer", "_Application", "i", "_e", "parser", "defaultValue", "source", "crossOrigin", "context", "WORKER_CODE", "WORKER_URL", "WorkerInstance", "revokeObjectURL", "CheckImageBitmapWorker", "LoadImageBitmapWorker", "resolveResult", "_isWebGPUSupported", "_isWebGLSupported", "WORKER_CODE", "WORKER_URL", "WorkerInstance", "revokeObjectURL", "BasisWorker", "ktxWorker", "DXGI_FORMAT", "D3D10_RESOURCE_DIMENSION", "D3DFMT", "GL_INTERNAL_FORMAT", "GL_FORMATS", "GL_TYPES", "WORKER_CODE", "WORKER_URL", "WorkerInstance", "revokeObjectURL", "urlHash", "KTXWorker", "ktxWorker", "supportedCompressedTextureFormats", "extensions", "b", "_Culler", "_AlphaFilter", "vertex", "fragment", "source", "source", "_BlurFilterPass", "fragment", "source", "_NoiseFilter", "source", "fragment", "u", "v", "_PrepareBase", "lt", "_TilingSprite", "source", "source", "MSAA_QUALITY", "DEPRECATED_WRAP_MODES", "DEPRECATED_SCALE_MODES", "w", "b", "m", "v", "_PerspectiveMesh", "_RopeGeometry", "_MeshRope", "_Particle", "_ParticleContainer", "_NineSliceSprite", "self", "_isString", "_isFunction", "_isNumber", "_isUndefined", "_isObject", "_isNotFalse", "_windowExists", "_isFuncOrString", "_install", "_missingPlugin", "_warn", "_addGlobal", "_emptyFunc", "_harness", "_getCache", "_getProperty", "v", "_forEachName", "_round", "_roundPrecise", "_parseRelative", "_arrayContainsAny", "_lazyRender", "_lazySafeRender", "_numericIfPossible", "_passThrough", "_setDefaults", "defaults", "_setKeyframeDefaults", "_merge", "_mergeDeep", "_copyExcluding", "_inheritDefaults", "_arraysMatch", "_addLinkedListItem", "_removeLinkedListItem", "_removeFromParent", "_uncache", "_recacheAncestors", "_rewindStartAt", "_hasNoPausedAncestors", "_elapsedCycleDuration", "_animationCycle", "_parentToChildTotalTime", "_setEnd", "_alignPlayhead", "_postAddChecks", "timeline", "_addToTimeline", "_scrollTrigger", "_attemptInitTween", "_parentPlayheadIsBeforeStart", "_isFromOrFromStart", "_renderZeroDurationTween", "pt", "_findNextPauseTween", "_setDuration", "_onUpdateTotalDuration", "_parsePosition", "_createTweenType", "_conditionalReturn", "_clamp", "getUnit", "clamp", "_isArrayLike", "_flatten", "toArray", "selector", "shuffle", "distribute", "_roundModifier", "snap", "random", "pipe", "unitize", "normalize", "_wrapArray", "wrap", "value", "wrapYoyo", "_replaceRandom", "mapRange", "interpolate", "p", "func", "i", "_getLabelInDirection", "_callback", "context", "_interrupt", "_createPlugin", "config", "_hue", "m2", "splitColor", "b", "_colorOrderData", "_formatColors", "_colorStringFilter", "_listeners", "_i", "_tick", "_wake", "_parseObjectInString", "_valueInParentheses", "_configEaseFromString", "_invertEase", "_propagateYoyoEase", "_parseEase", "_insertEase", "easeOut", "easeInOut", "_easeInOutFromOut", "_configElastic", "amplitude", "period", "_configBack", "overshoot", "GSCache", "Animation", "_resolve", "Timeline", "render", "getById", "getTweensOf", "_addComplexStringPropTween", "_addPropTween", "_processVars", "_checkPlugin", "_initTween", "_updatePropTweens", "_addAliasesToVars", "_parseKeyframe", "_parseFuncOrString", "Tween", "a", "_setterPlain", "_setterFunc", "_setterFuncWithParam", "_setterAttribute", "_getSetter", "_renderPlain", "_renderBoolean", "_renderComplexString", "_renderPropTweens", "_addPluginModifier", "_killPropTweensOf", "_setterWithModifier", "_sortPropTweensByPriority", "pt2", "PropTween", "_dispatch", "_onMediaChange", "Context", "f", "matchMedia", "t", "MatchMedia", "property", "unit", "uncache", "_merge2", "_getPluginPropTween", "_addModifiers", "_buildModifierPlugin", "init", "tween", "name", "_win", "_doc", "_reverting", "_windowExists", "_bigNum", "_renderCSSProp", "_renderPropWithEnd", "_renderCSSPropWithBeginning", "_renderRoundedCSSProp", "_renderNonTweeningValue", "_renderNonTweeningValueOnlyAtEnd", "_setterCSSStyle", "_setterCSSProp", "_setterTransform", "_setterScale", "_setterScaleWithRender", "_setterTransformWithRender", "_saveStyle", "_removeIndependentTransforms", "_revertStyle", "_getStyleSaver", "_createElement", "ns", "_getComputedProperty", "cs", "_checkPropPrefix", "_initCore", "_getBBoxHack", "_getAttributeFallbacks", "_getBBox", "_isSVG", "_removeProperty", "_addNonTweeningPT", "pt", "_convertToUnit", "v", "_get", "_tweenComplexCSSString", "_convertKeywordsToPercentages", "_renderClearProps", "_isNullTransform", "_getComputedTransformMatrixAsArray", "_getMatrix", "_applySVGOrigin", "b", "_parseTransform", "_firstTwoOnly", "_addPxTranslate", "_renderNon3DTransforms", "_renderCSSTransforms", "_renderSVGTransforms", "_addRotationalPropTween", "_assign", "source", "_addRawTransformPTs", "init", "render", "env", "isDev", "isProduction", "capitalize", "str", "capitalizeWords", "colors", "_Logger", "mode", "args", "type", "Logger", "delay", "seconds", "resolve", "wait", "isPromise", "value", "createQueue", "promises", "Queue", "currentFunction", "result", "error", "isClass", "getDynamicModuleFromImportListItem", "item", "module", "ctor", "resolveSizeLike", "size", "Point", "obj", "debounce", "func", "timeoutId", "getPreviousMapEntry", "map", "currentKey", "previous", "entry", "getNextMapEntry", "next", "entries", "i", "getLastMapEntry", "getFirstMapEntry", "clamp", "pValue", "pMin", "pMax", "lerp", "pPerc", "pluck", "keys", "acc", "key", "omitKeys", "keysToOmit", "add", "a", "b", "addToPoint", "subtract", "subtractFromPoint", "multiply", "pMult", "point", "lerpPoint", "pt", "percent", "distance", "distanceSq", "magnitude", "resolvePointLike", "position", "asPoint", "x", "y", "offset", "rect", "delta", "center", "output", "scale", "bindMethods", "instance", "methodNames", "methodName", "method", "getInstanceMethodNames", "excludePrefixes", "excludeMethodNames", "prototype", "filteredMethodNames", "propertyName", "ownDescriptor", "prefix", "bindAllMethods", "checkAndInvokeMethod", "methodArgs", "floatBetween", "min", "max", "floatBetweenPoint", "intBetween", "intBetweenPoint", "bool", "shuffle", "array", "temp", "index", "getRandomElement", "resolvePadding", "paddingNum", "ensurePadding", "padding", "paddingAsPointLike", "isRetina", "isTouch", "isMobile", "PIXIUtilsIsMobile", "isAndroid", "isIos", "getZeroPaddedNumber", "num", "zeroPad", "getNearestCharacterIndex", "text", "e", "metrics", "CanvasTextMetrics", "lines", "lineHeight", "closestIndex", "minDistance", "currentIndex", "lineText", "j", "subText", "charX", "charY", "toHex", "color", "toRgb", "hex", "_Color", "r", "g", "pNumber", "rStr", "gStr", "bStr", "pA", "colorA", "colorB", "Color", "reParent", "pChild", "pParent", "objectDiagonal", "pObject", "sendToFront", "parent", "sendToBack", "offsetShape", "pShape", "pDelta", "Polygon", "offsetSimpleShape", "scaleUniform", "scaleNum", "scaleProp", "scaleVal", "otherScaleVal", "scaleToWidth", "width", "scaleToHeight", "height", "scaleToSize", "firstProp", "resolvedSize", "destroyCanvas", "canvas", "gl", "extension", "ctx", "filterSet", "set", "filterFunction", "filteredSet", "firstFromSet", "lastFromSet", "lastElement", "generatePluginList", "plugins", "pluginsList", "plugin", "p", "pluginAsArray", "_a", "_b", "generateAdapterList", "adapters", "storageAdaptersList", "adapter", "adapterAsArray", "defineConfig", "config", "version", "pixiVersion", "sayHello", "hello", "DEFAULT_GAME_CONTAINER_ID", "createContainer", "id", "container", "create", "ApplicationClass", "Application", "domElement", "speak", "el", "coreSignalRegistry", "coreFunctionRegistry", "Store", "adapterOptions", "adapterId", "data", "awaitSave", "aKey", "shouldAwait", "app", "Collector_1", "Collector$1", "signal", "Collector", "CollectorArray_1", "require$$0", "CollectorArray$1", "CollectorArray", "CollectorLast_1", "CollectorLast$1", "CollectorLast", "CollectorUntil0_1", "CollectorUntil0$1", "CollectorUntil0", "CollectorWhile0_1", "CollectorWhile0$1", "CollectorWhile0", "SignalConnection", "SignalConnectionImpl", "link", "parentCleanup", "enable", "SignalLink_1", "SignalLink$1", "SignalLink", "prev", "order", "flag", "callback", "after", "Signal_1", "SignalConnection_1", "require$$1", "Signal", "collector", "SignalConnections_1", "SignalConnections$1", "connection", "SignalConnections", "exports", "require$$2", "require$$3", "require$$4", "require$$5", "require$$6", "signalPriorities", "TsSignal", "wrapper", "wrapperConnection", "times", "numTimes", "priority", "Plugin", "_app", "_options", "f", "fName", "s", "sName", "ActionsPlugin", "debug", "context", "action", "actionId", "_d", "_c", "DefaultActionContexts", "DefaultActionContextsArray", "DefaultActions", "defaultActionsList", "DefaultButtonIds", "defineContexts", "contexts", "defineActions", "actions", "useDefaultActions", "defineButtons", "buttons", "detaultAssetPreferences", "addParseAsGraphicsContext", "asset", "getAssetList", "assets", "alias", "src", "AssetsPlugin", "options", "Assets", "bundles", "scene", "background", "filteredAssets", "bundle", "_e", "urls", "url", "aliases", "progress", "AudioChannel", "name", "manager", "sound", "AudioInstance", "channel", "volume", "duration", "gsap", "time", "setInstance", "getInstance", "WebAudioUtils", "param", "HTMLAudioContext", "EventEmitter", "_filters", "_HTMLAudioInstance", "currentTime", "paused", "media", "source", "speed", "loop", "muted", "global", "globalVolume", "soundVolume", "instanceVolume", "pausedReal", "start", "end", "Ticker", "HTMLAudioInstance", "HTMLAudioMedia", "onLoad", "removeListeners", "onAbort", "onError", "message", "SoundSprite", "complete", "extensions", "mimes", "supported", "validateFormats", "typeOverrides", "overrides", "audio", "formats", "no", "ext", "canByExt", "canByType", "WebAudioInstance", "filters", "filter", "gain", "enabled", "force", "now", "soundLength", "err", "Filterable", "input", "prevFilter", "_WebAudioNodes", "audioContext", "bufferSource", "analyser", "orig", "WebAudioNodes", "WebAudioMedia", "buffer", "response", "DOMAdapter", "arrayBuffer", "audioBufferReadyFn", "_Sound", "file", "path", "results", "sprite", "reject", "resolve2", "len", "Sound", "WebAudioContext", "win", "compressor", "state", "handleError", "SoundLibrary", "filtersAll", "sourceOptions", "options2", "legacy", "autoPause", "assert", "exists", "getAlias", "soundAsset", "ExtensionType", "LoaderParserPriority", "mime", "sound2", "_sound", "extensions$1", "AudioManagerPlugin", "channelName", "manifest", "bundleName", "soundId", "audioInstance", "mediaInstance", "props", "fadeProps", "outSoundId", "inSoundId", "crossFadeProps", "stopOnComplete", "soundInstance", "tween", "fade", "playingSounds", "originalSoundId", "filename", "urlOrResolvedSrc", "FocusOutliner", "Container", "Graphics", "focusTarget", "pos", "focusPos", "fp", "FocusLayer", "focusable", "isDefault", "FocusManagerPlugin", "layerId", "layer", "idx", "layerIds", "newLayers", "setAsCurrent", "focusables", "newLayer", "removeTopLayerIfUndefined", "nextLayerId", "reverse", "currentLayer", "nextTarget", "setInactiveOnNull", "oldFocusTarget", "defaultOptions", "i18nPlugin", "files", "localeId", "params", "locale", "dict", "match", "items", "re", "matches", "InputControllerTypes", "WithSignals", "Base", "Animated", "animationProps", "t", "sequences", "sequence", "fromProps", "toProps", "intensity", "origX", "repeat", "animationEntity", "Focusable", "Interactive", "eventName", "event", "signalName", "createFactoryMethods", "methods", "addToStage", "factoryMethods", "ContainerConfigKeys", "defaultConfig", "Factory", "colorOrConfig", "alpha", "opts", "Texture", "ticker", "ParticleContainerConfigKeys", "ParticleContainer", "PIXIParticleContainer", "Scene", "SceneTransition", "autoUpdate", "Svg", "bounds", "AnimatedSprite", "PIXIAnimatedSprite", "animations", "defaultAnimationName", "defaultAnimation", "defaultSheet", "defaultTexturePrefix", "defaultZeroPad", "animationName", "textures", "sheet", "resolveTexture", "autoPlay", "animSpeed", "Camera", "target", "deltaX", "deltaY", "newPivotX", "newPivotY", "entity", "globalPosition", "spritePosition", "posXModifier", "posYModifier", "offsetX", "offsetY", "tMinX", "tMaxX", "tMinY", "tMaxY", "currentScaleX", "currentScaleY", "interpolatedScaleX", "interpolatedScaleY", "skipLerp", "currentPivotX", "currentPivotY", "interpolatedPivotX", "interpolatedPivotY", "CameraController", "camera", "interactiveArea", "detail", "currentPosition", "_SpineAnimation", "SpineAnimation", "trackIndex", "tracklndex", "ButtonConfigKeys", "_Button", "Button", "callbackId", "textureId", "texture", "_FlexContainer", "FlexContainerConfigKeys", "FlexContainer", "children", "child", "newChild", "actualChild", "label", "deep", "foundChild", "canHaveEndlessWidthOrHeight", "gap", "flexDirection", "flexWrap", "alignItems", "justifyContent", "layoutProps", "rowHeight", "columnWidth", "nextRowY", "nextColumnX", "newLayoutProps", "lineItems", "lineStart", "shouldWrap", "childRef", "handleWrap", "updateLayoutVariables", "getNextX", "currentX", "getNextY", "currentY", "handleJustification", "lineEnd", "direction", "extraSpace", "handleAlignment", "totalHeight", "UICanvasConfigKeys", "_UICanvas", "UICanvas", "beginIndex", "endIndex", "_size", "childObj", "settings", "Rectangle", "displayWidth", "displayHeight", "firstChild", "childWidth", "childHeight", "defaultBackingConfig", "defaultPopupConfig", "Popup", "finalConfig", "backingConfig", "gfx", "backingWrapper", "backing", "Sprite", "AVAILABLE_TYPES", "Input", "isClone", "clone", "nearestCharacterIndex", "selection", "bgHeight", "bgWidth", "diff", "inputAvailableWidth", "inputDiff", "cloneScale", "hasError", "_g", "_f", "_i", "_h", "hasOverlay", "isList", "shouldShow", "filterList", "fontSize", "_j", "_k", "_l", "w", "toStart", "leftMetrics", "textMetrics", "filteredValue", "Joystick", "JoystickDirection", "outer", "inner", "newPosition", "sideX", "sideY", "centerPoint", "angle", "tanVal", "radian", "centerX", "centerY", "rad", "TextPropsKeys", "resolveUnknownKeys", "assetAsString", "spriteSheet", "linkedSheet", "resolvePosition", "resolveScale", "resolveAnchor", "anchor", "anchorPoint", "resolvePivot", "pivot", "pivotPoint", "defaultFactoryMethods", "scaleX", "scaleY", "rest", "otherProps", "unknowns", "Text", "BitmapText", "PIXIContainer", "normalizeKey", "KeyboardPlugin", "eventType", "signalMap", "AbstractControls", "scheme", "KeyboardControls", "controlsAction", "inputString", "combo", "keysDown", "eliminated", "combination", "JOYSTICK_DIRECTIONS", "TouchControls", "button", "buttonAction", "joystickAction", "joystickDirection", "buttonsDown", "Controls", "InputPlugin", "controller", "gamepad", "inputController", "gamepadId", "defineControls", "controls", "PopupManagerPlugin", "popup", "animate", "ResizerPlugin", "screenWidth", "screenHeight", "minWidth", "minHeight", "defaultSplashOptions", "SceneManagerPlugin", "sceneList", "splash", "sceneIdOrLoadSceneConfig", "newSceneId", "sceneItem", "pluginListItem", "hash", "sceneId", "SceneClass", "icon", "defaultOption", "groups", "group", "nogroups", "option", "WebEventsPlugin", "StorageAdapter", "_key", "_data", "_rest", "DataAdapter", "merge", "deepMerge", "dataToBackup", "loadedData", "defaultPlugins", "defaultApplicationOptions", "PIXIPApplication", "__vite_import_meta_env__", "rendererDestroyOptions", "listItem", "storageAdapter", "pluginName", "visible", "pluginInstance", "dataAdapter", "view"]
}
